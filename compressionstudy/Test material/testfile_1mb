.EQ
delim $$
.EN
.CH "1  WHY SPEECH OUTPUT?"
.ds RT "Why speech output?
.ds CX "Principles of computer speech
.pp
Speech is our everyday, informal, communication medium.  But although we use
it a lot, we probably don't assimilate as much information through our
ears as we do through our eyes, by reading or looking at pictures and diagrams.
You go to a technical lecture to get the feel of a subject \(em the overall
arrangement of ideas and the motivation behind them \(em and fill in the details,
if you still want to know them, from a book.  You probably find out more about
the news from ten minutes with a newspaper than from a ten-minute news broadcast.
So it should be emphasized from the start that speech output from computers is
not a panacea.  It doesn't solve the problems of communicating with computers;
it simply enriches the possibilities for communication.
.pp
What, then, are the advantages of speech output?  One good reason for listening
to a radio news broadcast instead of spending the time with a newspaper
is that you can listen while shaving, doing the housework, or driving the car.
Speech leaves hands and eyes free for other tasks.
Moreover, it is omnidirectional, and does not require a free line of sight.
Related to this is the
use of speech as a secondary medium for status reports and warning messages.
Occasional interruptions by voice do not interfere with other activities,
unless they demand unusual concentration, and people can assimilate spoken messages
and queue them for later action quite easily and naturally.
.pp
The second key feature of speech communication stems from the telephone.
It is the universality of the telephone receiver itself that is important
here, rather than the existence of a world-wide distribution network;
for with special equipment (a modem and a VDU) one does not need speech to take advantage of
the telephone network for information transfer.
But speech needs no tools other than the telephone, and this gives
it a substantial advantage.  You can go into a phone booth anywhere in the world,
carrying no special equipment, and have access to your computer within seconds.
The problem of data input is still there:  perhaps your computer
system has a limited word recognizer, or you use the touchtone telephone
keypad (or a portable calculator-sized tone generator).  Easy remote access
without special equipment is a great, and unique, asset to speech communication.
.pp
The third big advantage of speech output is that it is potentially very cheap.
Being all-electronic, except for the loudspeaker, speech systems are well
suited to high-volume, low-cost, LSI manufacture.  Other computer output
devices are at present tied either to mechanical moving parts or to the CRT.
This was realized quickly by the computer hobbies market, where speech output
peripherals have been selling like hot cakes since the mid 1970's.
.pp
A further point in favour of speech is that it is natural-seeming and
somehow cuddly when compared with printers or VDU's.  It would have been much
more difficult to make this point before the advent of talking toys like
Texas Instruments' "Speak 'n Spell" in 1978, but now it is an accepted fact that friendly
computer-based gadgets can speak \(em there are talking pocket-watches
that really do "tell" the time, talking microwave ovens, talking pinball machines, and,
of course, talking calculators.
It is, however, difficult to assess whether the appeal stems from
mechanical speech's novelty \(em it
is still a gimmick \(em and also to what extent it is tied up with
economic factors.
After all, most of the population don't use high-quality VDU's, and their major
experience of real-time interactive computing is through the very limited displays
and keypads provided on video games and teletext systems.
.pp
Articles on speech communication with computers often list many more advantages of voice output
(see Hill 1971, Turn 1974, Lea 1980).
.[
Hill 1971 Man-machine interaction using speech
.]
.[
Lea 1980
.]
.[
Turn 1974 Speech as a man-computer communication channel
.]
For example, speech
.LB
.NP
can be used in the dark
.NP
can be varied from a (confidential) whisper to a (loud) shout
.NP
requires very little energy
.NP
is not appreciably affected by weightlessness or vibration.
.LE
However, these either derive from the three advantages we have discussed above,
or relate
mainly to exotic applications in space modules and divers' helmets.
.pp
Useful as it is at present, speech output would be even more attractive if it could
be coupled with speech input.  In many ways, speech input is its "big brother".
Many of the benefits of speech output are even more striking for speech input.
Although people can assimilate information faster through the eyes than the
ears, the majority of us can generate information faster with the mouth than
with the hands.  Rapid typing is a relatively uncommon skill, and even high
typing rates are much slower than speaking rates (although whether we can
originate ideas quickly enough to keep up with fast speech is another matter!)  To
take full advantage of the telephone for interaction with machines, machine
recognition of speech is obviously necessary.  A microwave oven, calculator,
pinball machine, or alarm clock that responds to spoken commands is certainly
more attractive than one that just generates spoken status messages.  A book
that told you how to recognize speech by machine would undoubtedly be more
useful than one like this that just discusses how to synthesize it!  But the
technology of speech recognition is nowhere near as advanced as that of
synthesis \(em it's a much more difficult problem.  However, because speech input
is obviously complementary to speech output, and even very limited input
capabilities will greatly enhance many speech output systems, it is worth
summarizing the present state of the art of speech recognition.
.pp
Commercial speech recognizers do exist.  Almost invariably, they accept
words spoken in isolation, with gaps of silence between them, rather than
connected utterances.
It is not difficult to discriminate with high accuracy up to a hundred
different words spoken by the same speaker, especially if the vocabulary
is carefully selected to avoid words which sound similar.  If several
different speakers are to be comprehended, performance can be greatly improved
if the machine is given an opportunity to calibrate their voices in a training
session, and is informed at recognition time which one is to speak.
With a large population of unknown speakers, accurate recognition is difficult
for vocabularies of more than a few carefully-chosen words.
.pp
A half-way house between isolated word discrimination and recognition of connected
speech is the problem of spotting known words in continuous speech.  This
allows much more natural input, if the dialogue is structured as keywords
which may be
interspersed by unimportant "noise words".  To speak in truly isolated
words requires a great deal of self-discipline and concentration \(em it is
surprising how much of ordinary speech is accounted for by vague sounds
like um's and aah's, and false starts.  Word spotting disregards these and so
permits a more relaxed style of speech.  Some progress has been made on it in
research laboratories, but the vocabularies that can be accomodated are still
very small.
.pp
The difficulty of recognizing connected speech depends crucially on what is
known in advance about the dialogue:  its pragmatic, semantic, and syntactic
constraints.  Highly structured dialogues constrain very heavily the choice of
the next word.  Recognizers which can deal with vocabularies of over 1000 words
have been built in research laboratories, but the structure of the input has
been such that the average "branching factor" \(em the size of the set out of
which the next word must be selected \(em is only around 10 (Lea, 1980).
.[
Lea 1980
.]
Whether such
highly constrained languages would be acceptable in many practical applications
is a moot point.  One commercial recognizer, developed in 1978, can cope with
up to five words spoken continuously from a basic 120-word vocabulary.
.pp
There has been much debate about whether it will ever be possible for a speech
recognizer to step outside rigid constraints imposed on the utterances it can
understand, and act, say, as an automatic dictation machine.  Certainly the most
advanced recognizers to date depend very strongly on a tight context being
available.  Informed opinion seems to accept that in ten years' time,
voice data entry in the office will be an important and economically feasible
prospect, but that it would be rash to predict the appearance of unconstrained
automatic dictation by then.
.pp
Let's return now to speech output and take a look at some systems which use it,
to illustrate the advantages and disadvantages of speech in practical
applications.
.sh "1.1  Talking calculator"
.pp
Figure 1.1 shows a calculator that speaks.
.FC "Figure 1.1"
Whenever a key is pressed,
the device confirms the action by saying the key's name.
The result of any computation is also spoken aloud.
For most people, the addition of speech output to a calculator is simply a
gimmick.
(Note incidentally that speech
.ul
input
is a different matter altogether.  The ability to dictate lists of numbers and
commands to a calculator, without lifting one's eyes from the page, would have
very great advantages over keypad input.)  Used-car
salesmen find that speech output sometimes helps to clinch a deal:  they key in
the basic car price and their bargain-basement deductions, and the customer is so
bemused by the resulting price being spoken aloud to him by a machine that he
signs the cheque without thinking!  More seriously, there may be some small
advantage to be gained when keying a list of figures by touch from having their
values read back for confirmation.  For blind people, however, such devices
are a boon \(em and there are many other applications, like talking elevators
and talking clocks, which benefit from even very restricted voice output.
Much more sophisticated is a typewriter with audio feedback, designed by
IBM for the blind.  Although blind typists can remember where the keys on a
typewriter are without difficulty, they rely on sighted proof-readers to help
check
their work.  This device could make them more useful as office typists and
secretaries.  As well as verbalizing the material (including punctuation)
that has been typed, either by attempting to pronounce the words or by spelling
them out as individual letters, it prompts the user through the more complex action sequences
that are possible on the typewriter.
.pp
The vocabulary of the talking calculator comprises the 24 words of Table 1.1.
.RF
.nr x1 2.0i+\w'percent'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta 2.0i
zero	percent
one	low
two	over
three	root
four	em (m)
five	times
six	point
seven	overflow
eight	minus
nine	plus
times-minus	clear
equals	swap
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 1.1  Vocabulary of a talking calculator"
This represents a total of about 13 seconds of speech.  It is stored
electronically in read-only memory (ROM), and Figure 1.2 shows the circuitry
of the speech module inside the calculator.
.FC "Figure 1.2"
There are three large integrated circuits.
Two of them are ROMs, and the other is a special synthesis chip which decodes the
highly compressed stored data into an audio waveform.
Although the mechanisms used for storing speech by commercial devices are
not widely advertised by the manufacturers, the talking calculator almost
certainly uses linear predictive coding \(em a technique that we will examine
in Chapter 6.
The speech quality is very poor because of the highly compressed storage, and
words are spoken in a grating monotone.
However, because of the very small vocabulary, the quality is certainly good
enough for reliable identification.
.sh "1.2  Computer-generated wiring instructions"
.pp
I mentioned earlier that one big advantage of speech over visual output is that
it leaves the eyes free for other tasks.
When wiring telephone equipment during manufacture, the operator needs to use
his hands as well as eyes to keep his place in the task.
For some time tape-recorded instructions have been used for this in certain
manufacturing plants.  For example, the instruction
.LB
.NI
Red 2.5    11A terminal strip    7A tube socket
.LE
directs the operator to cut 2.5" of red wire, attach one end to a specified point
on the terminal strip, and attach the other to a pin of the tube socket.  The
tape recorder is fitted with a pedal switch to allow a sequence of such instructions
to be executed by the operator at his own pace.
.pp
The usual way of recording the instruction tape is to have a human reader
dictate them from a printed list.
The tape is then checked against the list by another listener to ensure that
the instructions are correct.  Since wiring lists are usually stored and
maintained in machine-readable form, it is natural to consider whether speech
synthesis techniques could be used to generate the acoustic tape directly by
a computer (Flanagan
.ul
et al,
1972).
.[
Flanagan Rabiner Schafer Denman 1972
.]
.pp
Table 1.2 shows the vocabulary needed for this application.
.RF
.nr x1 2.0i+2.0i+\w'tube socket'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta 2.0i +2.0i
A	green	seventeen
black	left	six
bottom	lower	sixteen
break	make	strip
C	nine	ten
capacitor	nineteen	terminal
eight	one	thirteen
eighteen	P	thirty
eleven	point	three
fifteen	R	top
fifty	red	tube socket
five	repeat coil	twelve
forty	resistor	twenty
four	right	two
fourteen	seven	upper
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 1.2  Vocabulary needed for computer-generated wiring instructions"
It is rather larger
than that of the talking calculator \(em about 25 seconds of speech \(em but well
within the limits of single-chip storage in ROM, compressed by the linear
predictive technique.  However, at the time that the scheme was investigated
(1970\-71) the method of linear predictive coding had not been fully developed,
and the technology for low-cost microcircuit implementation was not available.
But this is not important for this particular application, for there is
no need to perform the synthesis on a miniature low-cost computer system,
nor need it
be accomplished in real time.  In fact a technique of concatenating
spectrally-encoded words was used (described in Chapter 7), and it was
implemented on a minicomputer.  Operating much slower than real-time, the system
calculated the speech waveform and wrote it to disk storage.  A subsequent phase
read the pre-computed messages and recorded them on a computer-controlled analogue
tape recorder.
.pp
Informal evaluation showed the scheme to be quite successful.  Indeed, the
synthetic speech, whose quality was not high, was actually preferred to
natural speech in the noisy environment of the production line, for each
instruction was spoken in the same format, with the same programmed pause
between the items.
A list of 58 instructions of the form shown above was recorded and used
to wire several pieces of apparatus without errors.
.sh "1.3  Telephone enquiry service"
.pp
The computer-generated wiring scheme illustrates how speech can be used to give
instructions without diverting visual attention from the task at hand.
The next system we examine shows how speech output can make the telephone
receiver into a remote computer terminal for a variety of purposes
(Witten and Madams, 1977).
.[
Witten Madams 1977 Telephone Enquiry Service
.]
The caller employs the touch-tone keypad shown in Figure 1.3 for input, and the
computer generates
a synthetic voice response.
.FC "Figure 1.3"
Table 1.3 shows the process of making
contact with the system.
.RF
.fi
.nh
.na
.in 0.3i
.nr x0 \w'COMPUTER:  '
.nr x1 \w'CALLER:  '
.in+\n(x0u
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Dials the service.
.ti-\n(x0u
COMPUTER:  Answers telephone.
"Hello, Telephone Enquiry Service.  Please
enter your user number".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters user number.
.ti-\n(x0u
COMPUTER:  "Please enter your password".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters password.
.ti-\n(x0u
COMPUTER:  Checks validity of password.
If invalid, the user is asked to re-enter
his user number.
Otherwise,
"Which service do you require?"
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters service number.
.in 0
.nf
.FG "Table 1.3  Making contact with the telephone enquiry system"
.pp
Advantage is taken of the disparate speeds of input (keyboard) and
output (speech) to hasten the dialogue by imposing a question-answer structure
on it, with the computer taking the initiative.  The machine can
afford to be slightly verbose if by so doing it makes the caller's
response easier, and therefore more rapid.  Moreover, operators who
are experienced enough with the system to anticipate questions can
easily forestall them just by typing ahead, for the computer is programmed
to examine its input buffer before issuing prompts and to suppress them if
input has already been provided.
.pp
An important aim of the system is to allow application programmers with no
special knowledge of speech to write independent services for it.
Table 1.4 shows an example of the use of one such application program,
.RF
.fi
.nh
.na
.in 0.3i
.nr x0 \w'COMPUTER:  '
.nr x1 \w'CALLER:  '
.in+\n(x0u
.ti-\n(x0u
COMPUTER:  "Stores Information Service.  Please enter
component name".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "SN7406#".
.ti-\n(x0u
COMPUTER:  "The component name is SN7406.  Is this correct?"
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*1#" (system convention for "yes").
.ti-\n(x0u
COMPUTER:  "This component is in stores".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*7#" (command for "price").
.ti-\n(x0u
COMPUTER:  "The component price is 35 pence".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*8#" (command for "minimum number").
.ti-\n(x0u
COMPUTER:  "The minimum number of this component kept
in stores is 10".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "SN7417#".
.ti-\n(x0u
COMPUTER:  "The component name is SN7417.  Is this correct?"
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*1#".
.ti-\n(x0u
COMPUTER:  "This component is not in stores".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*9#" (command for "delivery time").
.ti-\n(x0u
COMPUTER:  "The expected delivery time is 14 days".
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Enters "*0#".
.ti-\n(x0u
COMPUTER:  "Which service do you require?"
.in 0
.nf
.FG "Table 1.4  The Stores Information Service"
the
Stores Information Service, which permits enquiries to be made of a database
holding information on electronic components kept in stock.
This subsystem is driven by
.ul
alphanumeric
data entered on the touch-tone keypad.  Two or three letters are associated
with each digit, in a manner which is fairly standard in touch-tone telephone
applications.  These are printed on a card overlay
that fits the keypad (see Figure 1.3).  Although true alphanumeric data entry
would require a multiple key press for each character,
the ambiguity inherent in
a single-key-per-character convention can usually be resolved by the computer,
if it has a list of permissible entries.  For example, the component names
SN7406 and ZTX300 are read by the machine as "767406" and "189300", respectively.
Confusion rarely occurs if the machine is expecting a valid component code.
The same holds true of people's names, and file names \(em although with these
one must take care not to identify a series of files by similar names, like
TX38A, TX38B, TX38C.  It is easy for the machine to detect the rare cases
where ambiguity occurs, and respond by requesting further information:  "The
component name is SN7406.  Is this correct?"  (In fact, the Stores Information
Service illustrated in Table 1.4 is defective in that it
.ul
always
requests confirmation of an entry, even when no ambiguity exists.)  The
use of a telephone keypad for data entry will be taken up again in Chapter 10.
.pp
A distinction is drawn throughout the system between data entries and
commands, the latter being prefixed by a "*".  In this example, the
programmer chose to define a command for each possible question about a
component, so that a new component name can be entered at any time
without ambiguity.  The price paid for the resulting brevity of dialogue
is the burden of memorizing the meaning of the commands.  This is an
inherent disadvantage of a one-dimensional auditory display over the
more conventional graphical output:   presenting menus by speech is tedious and
long-winded.  In practice, however, for a simple task such as the
Stores Information Service it is quite convenient for the caller to
search for the appropriate command by trying out all possibilities \(em there
are only a few.
.pp
The problem of memorizing commands is alleviated by establishing some
system-wide conventions.  Each input is terminated by a "#", and
the meaning of standard commands is given in Table 1.5.
.RF
.fi
.nh
.na
.in 0.3i
.nr x0 \w'# alone  '
.nr x1 \w'\(em  '
.ta \n(x0u +\n(x1u
.nr x2 \n(x0+\n(x1
.in+\n(x2u
.ti-\n(x2u
*#	\(em	Erase this input line, regardless of what has
been typed before the "*".
.ti-\n(x2u
*0#	\(em	Stop.  Used to exit from any service.
.ti-\n(x2u
*1#	\(em	Yes.
.ti-\n(x2u
*2#	\(em	No.
.ti-\n(x2u
*3#	\(em	Repeat question or summarize state of current
transaction.
.ti-\n(x2u
# alone	\(em	Short form of repeat.  Repeats or summarizes
in an abbreviated fashion.
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.nf
.FG "Table 1.5  System-wide conventions for the service"
.pp
A summary of services available on the system is given in
Table 1.6.
.RF
.fi
.na
.in 0.3i
.nr x0 \w'000  '
.nr x1 \w'\(em  '
.nr x2 \n(x0+\n(x1
.in+\n(x2u
.ta \n(x0u +\n(x1u
.ti-\n(x2u
\0\01	\(em	tells the time
.ti-\n(x2u
\0\02	\(em	Biffo (a game of NIM)
.ti-\n(x2u
\0\03	\(em	MOO (a game similar to that marketed under the name "Mastermind")
.ti-\n(x2u
\0\04	\(em	error demonstration
.ti-\n(x2u
\0\05	\(em	speak a file in phonetic format
.ti-\n(x2u
\0\06	\(em	listening test
.ti-\n(x2u
\0\07	\(em	music (allows you to enter a tune and play it)
.ti-\n(x2u
\0\08	\(em	gives the date
.sp
.ti-\n(x2u
100	\(em	squash ladder
.ti-\n(x2u
101	\(em	stores information service
.ti-\n(x2u
102	\(em	computes means and standard deviations
.ti-\n(x2u
103	\(em	telephone directory
.sp
.ti-\n(x2u
411	\(em	user information
.ti-\n(x2u
412	\(em	change password
.ti-\n(x2u
413	\(em	gripe (permits feedback on services from caller)
.sp
.ti-\n(x2u
600	\(em	first year laboratory marks entering service
.sp
.ti-\n(x2u
910	\(em	repeat utterance (allows testing of system)
.ti-\n(x2u
911	\(em	speak utterance (allows testing of system)
.ti-\n(x2u
912	\(em	enable/disable user 100 (a no-password guest user number)
.ti-\n(x2u
913	\(em	mount a magnetic tape on the computer
.ti-\n(x2u
914	\(em	set/reset demonstration mode (prohibits access by low-priority users)
.ti-\n(x2u
915	\(em	inhibit games
.ti-\n(x2u
916	\(em	inhibit the MOO game
.ti-\n(x2u
917	\(em	disable password checking when users log in
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.nf
.FG "Table 1.6  Summary of services on a telephone enquiry system"
They range from simple games and demonstrations, through serious database
services, to system maintenance facilities.
A priority structure is imposed upon them, with higher
service numbers being available only to higher priority users.
Services in the lowest range (1\-99) can be obtained by all, while
those in the highest range (900\-999) are maintenance services,
available only to the system designers.  Access to the lower-numbered
"games" services can be inhibited by a priority user \(em this was
found necessary to prevent over-use of the system!  Another advantage
of telephone access to an information retrieval system is that some
day-to-day maintenance can be done remotely, from the office telephone.
.pp
This telephone enquiry service, which was built in 1974, demonstrated that
speech synthesis had moved from a specialist phonetic discipline into the
province of engineering practicability.  The speech was generated "by rule"
from a phonetic input (the method is covered in Chapters 7 and 8), which
has very low data storage requirements of around 75\ bit/s of speech.
Thus an enormous vocabulary and range of services could be accomodated on a
small computer system.
Despite the fairly low quality of the speech, the response from callers was
most encouraging.  Admittedly the user population was a self-selected body of
University staff, which one might suppose to have high tolerance to new ideas,
and a system designed for the general public would require more effort to be
spent on developing speech of greater intelligibility.  Although it was
observed that some callers failed to understand parts of the responses, even
after repetition, communication was largely unhindered in most cases; users
being driven by a high motivation to help the system help them.
.pp
The use of speech output in conjunction with a simple input device requires
careful thought for interaction to be successful and comfortable.  It is
necessary that the computer direct the conversation as much as possible,
without seeming to be taking charge.  Provision for eliminating prompts
which are unwanted by sophisticated users is essential to avoid frustration.
We will return to the topic of programming techniques for speech interaction
in Chapter 10.
.pp
Making a computer system available over the telephone results in a sudden
vast increase in the user population.  Although people's reaction to a new
computer terminal in every office was overwhelmingly favourable, careful
resource allocation was essential to prevent the service being hogged by a
persistent few.  As with all multi-access computer systems, it is particularly
important that error recovery is effected automatically and gracefully.
.sh "1.4  Speech output in the telephone exchange"
.pp
The telephone enquiry service was an experimental vehicle for research on speech
interaction, and was developed in 1974.
Since then, speech has begun to be used in real commercial applications.
One example is System\ X, the British Post Office's computer-controlled
telephone exchange.  This incorporates many features
not found in conventional telephone exchanges.
For example, if a number is found to be busy, the call can be attempted
again by a "repeat last call" command, without having to re-dial the full number.
Alternatively, the last number can be stored for future re-dialling, freeing
the phone for other calls.
"Short code
dialling" allows a customer to associate short codes with commonly-dialled
numbers.
Alarm calls can be booked at specified times, and are made automatically
without human intervention.
Incoming calls can be barred, as can outgoing ones.  A diversion service
allows all incoming calls to be diverted to another telephone, either
immediately, or if a call to the original number remains unanswered for
a specified period of time, or if the original number is busy.
Three-party calls can be set up automatically, without involving the
operator.
.pp
Making use of these facilities presents the caller with something of a problem.
With conventional telephone exchanges, feedback is provided on what is happening
to a call by the use of four tones \(em the dial tone, the busy tone,
the ringing tone, and the number unavailable tone.
For the more sophisticated interaction which is expected on the advanced
exchange, a much greater variety of status signals is required.
The obvious solution is to use
computer-generated spoken
messages to inform the caller when these services are invoked, and to guide him
through the sequences of actions needed to set up facilities like call
re-direction.  For example, the messages used by the exchange when a user
accesses the alarm call
service are
.LB
.NI
Alarm call service.
Dial the time of your alarm call followed by square\u\(dg\d.
.FN 1
\(dg\d"Square" is the term used for the "#" key on the touch-tone telephone.\u
.EF
.NI
You have booked an alarm call for seven thirty hours.
.NI
Alarm call operator.  At the third stroke it will be seven thirty.
.LE
.pp
Because of the rather small vocabulary, the number of messages that can be
stored in their entirety rather than being formed by concatenation of
smaller units, and the short time which was available for development,
System\ X stores speech as a time waveform, slightly compressed by a time-domain
encoding operation (such techniques are described in Chapter 3).
Utterances which contain variable parts, like the time of alarm in the messages
above, are formed by inserting separately-recorded digits in a fixed 
"carrier" message.  No attempt is made to apply uniform intonation
contours to the synthetic utterances.  The resulting speech is of excellent
quality (being a slightly compressed recording of a human voice), but sometimes
exhibits somewhat anomalous pitch contours.
For example, the digits comprising numbers often sound rather jerky and
out-of-context \(em which indeed they are.
.pp
Even more advanced facilities can be expected on telephone exchanges in
the future.  A message storage capability is one example.  Although
automatic call recording machines have been available for years, a centralized
facility could time and date a message, collect the caller's identity
(using the telephone keypad), and allow the recipient to select messages left
for him through an interactive dialogue so that he could control the order
in which he listens to them.  He could choose to leave certain messages to be
dealt with later, or re-route them to a colleague.  He may even wish to leave
reminders for himself, to be dialled automatically at specified times (like
alarm calls with user-defined information attached).  The sender of a message
could be informed automatically by the system when it is delivered.  None of
this requires speech recognition, but it does need economical speech
.ul
storage,
and also speech
.ul
synthesis
(for time and date tags).
.sh "1.5  Travel consultant"
.pp
Some current research in speech communication with computers is aimed at
embedding the dialogue in a task environment which provides it with an overall
contextual framework.
This in fact was the motivation for the experimental telephone enquiry service
described above, and it was observed that people are able to tolerate rather
low quality speech if they feel that the interaction is worthwhile.  One step
further is the use of speech
.ul
input
as well as output, and here the context of the conversation which is provided
by the task environment can be used to improve recognition accuracy
significantly.
A system set up at Bell Telephone Laboratories indicates what we can expect
to find operating commercially in the future (Levinson and Shipley, 1980).
.[
Levinson Shipley 1980
.]
It provides timetable information about airline flights, and allows the user
to make reservations.
.pp
An example dialogue is given in Table 1.7.
.RF
.fi
.nh
.na
.in 0.3i
.nr x0 \w'COMPUTER:  '
.nr x1 \w'CALLER:  '
.in+\n(x0u
.ti-\n(x0u
COMPUTER:  This is the Bell Laboratories flight information system.  May I help you?
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  I would like to go to Chicago.
.ti-\n(x0u
COMPUTER:  Please specify the day of your departure.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  I want to leave at four p.m..
.ti-\n(x0u
COMPUTER:  Please specify the day of your departure.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  I want to depart on the two five May.
.ti-\n(x0u
COMPUTER:  Flight number nine two leaves New York at four p.m. arrives in Chicago at five twenty five p.m..
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  What plane is on the flight?
.ti-\n(x0u
COMPUTER:  The aircraft is a Boeing seven twenty seven.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  How much is the fare?
.ti-\n(x0u
COMPUTER:  The round trip coach fare is one hundred forty two dollars.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  I want a first class seat.
.ti-\n(x0u
COMPUTER:  One seat thank you.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  What is the fare?
.ti-\n(x0u
COMPUTER:  The round trip first class fare is one hundred eighty four dollars.
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  Please repeat the arrival time.
.ti-\n(x0u
COMPUTER:  The arrival time is five twenty five p.m..
.ti-\n(x0u
CALLER:\h'\n(x0u-\n(x1u'  I will take the flight.
.ti-\n(x0u
COMPUTER:  Your reservation on flight number nine two to Chicago on Friday is confirmed.  Thank you.
.in 0
.nf
.MT 2
Table 1.7  A conversation with an airline flight information service
(from Levinson and Shipley, 1980)
.TE
.[
Levinson Shipley 1980
.]
The user dials the system from an
ordinary telephone.  The recognition side must be trained by each user, and
accepts isolated words spoken with brief pauses between them.
The voice response unit has a vocabulary of around 200 words, and
synthesizes its answers by slotting words into "templates" evoked by the speech
understanding part in response to a query.  For example,
.LB
.NI
This flight makes \(em stops
.NI
Flight number \(em leaves \(em at \(em , arrives in \(em at \(em
.LE
are templates which when called with specific slot fillers could produce the
utterances
.LB
.NI
This flight makes three stops
.NI
Flight number nine two leaves New York at four p.m.,
arrives in Chicago at five twenty-five p.m.
.LE
The chief research interest of the system is in its speech understanding
capabilities, and the method used for speech output is relatively
straightforward.  The templates and words are recorded, digitized, compressed
slightly, and stored on disk files (totalling a few hundred thousand bytes of
storage), using techniques similar to those of System\ X.
Again, no independent manipulation of pitch is possible, and so the utterances
sound intelligible but the transition between templates and slot fillers is not
completely fluent.  However, the overall context of the interaction means that
the communication is not seriously disrupted even if the machine occasionally
misunderstands the man or vice versa.  The user's attention is drawn away from
recognition accuracy and focussed on the exchange of information with the machine.
The authors conclude that progress in speech recognition can best be made by
studying it in the context of communication rather than in a vacuum or as part
of a one-way channel, and the same is undoubtedly true of speech synthesis as
well.
.sh "1.6  Reading machine for the blind"
.pp
Perhaps the most advanced attempt to provide speech output from a computer
is the Kurzweil reading machine for the blind, first marketed in the late
1970's (Figure 1.4).
.FC "Figure 1.4"
This device reads an ordinary book aloud.  Users adjust the reading
speed according to the content of the material and their familiarity with
it, and the maximum rate has recently been improved to around 225 words per
minute \(em perhaps half as fast again as normal human speech rates.
.pp
As well as generating speech from text, the machine has to scan the document
being read and identify the characters presented to it.  A scanning camera
is used, controlled by a program which searches for and tracks the lines of
text.  The output of the camera is digitized, and the image is enhanced
using signal-processing techniques.  Next each individual letter must be
isolated, and its geometric features identified and compared with a pre-stored
table of letter shapes.  Isolation of letters is not at all trivial, for
many type fonts have "ligatures" which are combinations of characters joined
together (for example, the letters "fi" are often run together.)  The
machine must cope with many printed type fonts, as well as typewritten ones.
The text-recognition side of the Kurzweil reading machine is in fact one of
its most advanced features.
.pp
We will discuss the problem of speech generation from text in Chapter 9.
It has many facets.  First there is pronunciation, the
translation of letters to sounds.  It is important to take into account
the morphological structure of words, dividing them into "root" and "endings".
Many words have concatenated suffixes (like "like-li-ness").  These are
important to detect, because a final "e" which appears on a root word
is not pronounced itself but affects the pronunciation of the previous
vowel.  Then there is the difficulty that some words look the same
but are pronounced differently, depending on their meaning or on the syntactic
part that they play in the sentence.
Appropriate intonation is extremely difficult to generate from a plain textual
representation, for it depends on the meaning of the text and the way in which
emphasis is given to it by the reader.  Similarly the rhythmic structure is
important, partly for correct pronunciation and partly for purposes of
emphasis.
Finally the sounds that have been deduced from the text need to be synthesized
into acoustic form, taking due account of the many and varied contextual effects
that occur in natural speech.  This by itself is a challenging problem.
.pp
The performance of the Kurzweil reading machine is not good.  While it seems
to be true that some blind people can make use of it, it is far from
comprehensible to an untrained listener.  For example,
it will miss out words and even whole phrases, hesitate in a
stuttering manner, blatantly mis-pronounce many words, fail to detect
"e"s which should be silent, and give completely wrong rhythms
to words, making them impossible to understand.
Its intonation is decidedly unnatural, monotonous, and often downright
misleading.  When it reads completely new text to people unfamiliar with its
quirks,
they invariably fail to understand more than an odd word here and there,
and do not improve significantly when the text is repeated more than once.
Naturally performance improves if the material is familiar or expected
in some way.
One useful feature is the machine's ability to spell out difficult words
on command from the user.
.pp
While not wishing to denigrate the Kurzweil machine, which is a remarkable
achievement in that it integrates together many different advanced
technologies, there is no doubt that the state of the art in speech synthesis
directly from unadorned text is extremely primitive, at present.
It is vital not to overemphasize the potential usefulness of abysmal speech,
which takes a great deal of training on the part of the user before
it becomes at all intelligible.  To make a rather extreme analogy,
Morse code could be used as
audio output, requiring a great deal of training, but capable of being understood
at quite high rates by an expert.
It could be generated very cheaply.
But clearly the man in the street would find it quite unacceptable as
an audio output medium, because of the excessive effort required to learn to use
it.  In many applications, very bad synthetic speech is just as useless.
However, the issue is complicated by the fact that for people who use
synthesizers regularly, synthetic speech becomes quite easily comprehensible.
We will return to the problem of evaluating the quality of artificial speech
later in the book (Chapter 8).
.sh "1.7  System considerations for speech output"
.pp
Fortunately, very many of the applications of speech output from computers
do not need to read unadorned text.
In all the example systems described above (except the reading machine),
it is enough to be able to store utterances in some representation which can
include pre-programmed cues for pronunciation, rhythm, and intonation in
a much more explicit way than ordinary text does.
.pp
Of course, techniques
for storing audio information have been in use for decades.
For example, a domestic cassette tape recorder stores speech at much better
than telephone quality at very low cost.  The method of direct
recording of an analogue waveform is currently used for announcements in
the telephone network to provide information such as the time, weather
forecasts, and even bedtime stories.
However, it is difficult to provide rapid access to messages stored in
analogue form, and although some computer peripherals which use analogue
recordings for voice-response applications have been marketed \(em they are
discussed briefly at the beginning of Chapter 3 \(em they have been
superseded by digital storage techniques.
.pp
Although direct storage of a digitized audio waveform is used in some
voice-response systems, the approach has certain limitations.  The most
obvious one is the large storage requirement:  suitable coding can reduce
the data-rate of speech to as little as one hundredth of that needed by
direct digitization, and textual representations reduce it by another factor
of ten or twenty.  (Of course, the speech quality is inevitably compromised
somewhat by data-compression techniques.)  However, the cost of storage is
dropping so fast that this is not necessarily an overriding factor.
A more fundamental limitation is that utterances stored directly cannot sensibly
be modified in any way to take account of differing contexts.
.pp
If the results of certain kinds of analyses
of utterances are stored, instead of simply the digitized waveform,
a great deal more flexibility can be gained.
It is possible to separate out the features of intonation and amplitude from
the articulation of the speech, and this raises the attractive possibility
of regenerating utterances with pitch contours different from those with which they were
recorded.
The primary analysis technique used for this purpose is
.ul
linear prediction
of speech, and this is treated in some detail in Chapter 6.  It also reduces drastically the
data-rate of speech, by a factor of around 50.
It is likely that many voice-response systems in the short- and medium-term
future will use linear predictive representations for utterance storage.
.pp
For maximum flexibility, however, it is preferable to store a textual
representation of the utterance.
There is an important distinction between speech
.ul
storage,
where an actual human utterance is recorded, perhaps processed to lower
the data-rate, and stored for subsequent regeneration when required,
and speech
.ul
synthesis,
where the machine produces its own individual utterances which are not based
on recordings of a person saying the same thing.  The difference is summarized
in Figure 1.5.
.FC "Figure 1.5"
In both cases something is stored:  for the first it is
a direct representation of an actual human utterance, while for the second
it is a typed
.ul
description
of the utterance in terms of the sounds, or phonemes, which constitute it.
The accent and tone of voice of the human speaker will be apparent in
the stored speech output, while for synthetic speech the accent is the
machine's and the tone of voice is determined by the synthesis program.
.pp
Probably the most attractive representation of utterances in man-machine
systems is ordinary English text, as used by the Kurzweil reading machine.
But, as noted above, this poses extraordinarily difficult problems for the
synthesis procedure, and these inevitably result in severely degraded speech.
Although in the very long term these problems may indeed be solved,
most speech output systems can adopt as their representation of an utterance
a description of it which explicitly conveys the difficult features of
intonation, rhythm, and even pronunciation.
In the kind of applications described above (barring the reading machine),
input will be prepared by a
programmer as he builds the software system which supports the interactive
dialogue.
Although it is important that the method of specifying utterances be easily
learned, it is not necessary that plain English
is used.  It should be simple for the programmer to enter new
utterances and modify them on-line in cut-and-try attempts to render the
man-machine dialogue as natural as possible.  A phonetic input
can be quite adequate for this, especially if the system allows the
programmer to hear immediately the synthesized version of the message
he types.  Furthermore, markers which indicate rhythm and intonation can
be added to the message so that the system does not have to deduce these features
by attempting to "understand" the plain text.
.pp
This brings us to another disadvantage of speech storage as compared with
speech synthesis.  To provide utterances for a voice response system using
stored human speech, one must assemble together special input hardware,
a quiet room, and (probably) a dedicated computer.  If the speech is to be
heavily encoded, either expensive special hardware is required or the encoding
process, if performed by software on a general-purpose computer, will take
a considerable length of time (perhaps hundreds of times real-time).  In
either case, time-consuming editing of the speech will be necessary, with
follow-up recordings to clarify sections of speech which turn out to be
unsuitable or badly recorded.  If at a later date the voice response
system needs modification, it will be necessary to recall the same speaker,
or re-record the entire utterance set.  This discourages the application
programmer from adjusting his dialogue in the light of experience.
Synthesizing from a textual representation, on the other hand, allows him
to change a speech prompt as simply as he could a VDU one, and evaluate
its effect immediately.
.pp
We will return to methods of digitizing and compacting speech in Chapters 3
and 4, and carry on to consider speech synthesis in subsequent chapters.
Firstly, however, it is necessary to take a look at what speech is and how
people produce it.
.sh "1.8  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "1.9  Further reading"
.pp
There are remarkably few general books on speech output, although a
substantial specialist literature exists for the subject.
In addition to the references listed above, I suggest that you look
at the following.
.LB "nn"
.\"Ainsworth-1976-1
.]-
.ds [A Ainsworth, W.A.
.ds [D 1976
.ds [T Mechanisms of speech recognition
.ds [I Pergamon
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
A nice, easy-going introduction to speech recognition, this book covers
the acoustic structure of the speech signal in a way which makes
it useful as background reading for speech synthesis as well.
It complements Lea, 1980, cited above; which presents more recent results
in greater depth.
.in-2n
.\"Flanagan-1973-2
.]-
.ds [A Flanagan, J.L.
.as [A " and Rabiner, L.R. (Editors)
.ds [D 1973
.ds [T Speech synthesis
.ds [I Wiley
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
This is a collection of previously-published research papers on speech
synthesis, rather than a unified book.
It contains many of the classic papers on the subject from 1940\ -\ 1972,
and is a very useful reference work.
.in-2n
.\"LeBoss-1980-3
.]-
.ds [A LeBoss, B.
.ds [D 1980
.ds [K *
.ds [T Speech I/O is making itself heard
.ds [J Electronics
.ds [O May\ 22
.ds [P 95-105
.nr [P 1
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
The magazine
.ul
Electronics
is an excellent source of up-to-the-minute news, product announcements,
titbits, and rumours in the commercial speech technology world.
This particular article discusses the projected size of the voice
output market and gives a brief synopsis of the activities of several
interested companies.
.in-2n
.\"Witten-1980-5
.]-
.ds [A Witten, I.H.
.ds [D 1980
.ds [T Communicating with microcomputers
.ds [I Academic Press
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
A recent book on microcomputer technology, this is unusual in that
it contains a major section on speech communication
with computers (as well as ones
on computer buses, interfaces, and graphics).
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "2  WHAT IS SPEECH?"
.ds RT "What is speech?
.ds CX "Principles of computer speech
.pp
People speak by using their vocal cords as a sound source, and making rapid
gestures of the articulatory organs (tongue, lips, jaw, and so on).
The resulting changes in shape of the vocal tract allow production
of the different sounds that we know as the vowels and consonants of
ordinary language.
.pp
What is it necessary to learn about this process for the purposes of
speech output from computers?
That depends crucially upon how speech is represented in the system.
If utterances are stored as time waveforms \(em and this is what we will be
discussing in the next chapter \(em the structure of speech is not important.
If frequency-related parameters of particular natural utterances are
stored, then it is advantageous to take into account some of the
acoustic properties of the speech waveform.
.pp
This point can be brought into focus by contrasting the transmission
(or storage) of speech with that of real-life television pictures,
as has been proposed for a videophone service.
Massive data reductions, of the order of 50:1, can be achieved for speech,
using techniques that are described in later chapters.  For pictures,
data reduction is still an important issue \(em even more so for the
videophone than for the telephone, because of the vastly higher
information rates involved.
Unfortunately, the potential for data reduction is much
smaller \(em nothing like the 50:1 figure quoted above.
This is because speech sounds have definite characteristics, imparted
by the fact that they are produced by a human vocal tract, which
can be exploited for data reduction.
Television pictures have no equivalent generative structure, for
they show just those things that the camera points at.
.pp
Moving up from frequency-related parameters of
.ul
particular
utterances, it
is possible to store such parameters in a
.ul
general
form which characterizes the sound segments that appear in spoken language.
This immediately raises the issue of
.ul
classification
of sound segments, to form a basis for storing generalized acoustic
information and for retrieval of the information needed to synthesize
any particular utterance.
Speech is by nature continuous, and any synthesis system based upon
discrete classification must come to terms with this by tackling
the problems of transition from one segment to another,
and local modification of sound segments as a function of their context.
.pp
This brings us to another level of representation.
So far we have talked of the
.ul
acoustic
nature of speech, but when we have to cope with transitions between
discrete sound segments it may be fruitful to consider
.ul
articulatory
properties as well.
Any model of the speech production process
is in effect a model of the articulatory process that generates the speech.
Some speech research is concerned with
modelling
the vocal tract directly, rather than modelling the acoustic output from it.
One might specify, for example, position of tongue and posture of jaw and lips
for a vowel, instead of giving frequency-related
characteristics of it.  This is a potent
tool in linguistic research, for it brings one closer to human production of
speech \(em in particular to the connection between brain and articulators.
.pp
Articulatory
synthesis holds a promise of high-quality speech, for the transitional
effects caused by tongue and jaw inertia can be modelled directly.
However, this potential has
not yet been realized.
Speech from current articulatory models is of much poorer quality than
that from acoustically-based synthesis methods.
The major problem is in gaining data about articulatory
behaviour during running speech \(em it is much easier to perform acoustic
analysis on the resulting sound than it is to examine the vocal organs in
action.  Because of this, the subject is not treated in this book.
We will only look at articulatory properties insofar as they help us
to understand, in a qualitative way, the acoustic nature of speech.
.pp
Speech, however, is much more than mere articulation.
Consider \(em admittedly a rather extreme and chauvinistic example \(em the
number of ways a girl can say "yes".
Breathy voice, slow tempo, low pitch \(em these are all characteristics which
affect the utterance as a whole, rather than being classifiable into
individual sound segments.  Linguists call them "prosodic" or
"suprasegmental" features, for they relate to overall aspects of the
utterance, and distinguish them from "segmental" ones which concern
the articulation of individual segments of syllables.
The most important prosodic features are pitch, or fundamental frequency
of the voice, and rhythm.
.pp
This chapter provides a brief introduction to the nature of the speech
signal.  Depending upon what speech output techniques we use, it may be
necessary to understand something of the acoustic nature of the speech
signal; the system that generates it (the vocal tract); commonly-used
classifications of sound segments; and the prosodic aspects of speech.
This material is little used in the early chapters of the book, but
becomes increasingly important as the story unfolds.
Hence you may skip the remainder of this chapter if you wish, but
should return to it later to pick up more background whenever it
becomes necessary.
.sh "2.1  The anatomy of speech"
.pp
The so-called "voiced" sounds of speech \(em like the sound you make when
you say "aaah" \(em are produced by passing air up from the lungs through
the larynx or voicebox, which is situated just behind the Adam's apple.
The vocal tract from the larynx to the lips acts as a resonant cavity,
amplifying certain frequencies and attenuating others.
.pp
The waveform generated by the larynx, however, is not simply sinusoidal.
(If it were, the vocal tract resonances would merely
give a sine wave of the same frequency but amplified or
attenuated according to how close it was to the nearest resonance.)  The
larynx contains two folds of skin \(em the vocal cords \(em which blow apart and flap
together again in each cycle of the pitch period.
The pitch of a male voice in speech varies from as low as 50\ Hz
(cycles per second) to perhaps
250\ Hz, with a typical median value of 100\ Hz.
For a female voice the range is higher, up to about 500\ Hz in speech.
Singing can go much higher:  a top C sung by a soprano has a frequency
of just over 1000\ Hz, and some opera singers can reach
substantially higher than this.
.pp
The flapping action of the vocal cords
gives a waveform which can be approximated by a
triangular pulse (this and other approximations will be discussed in
Chapter 5).
It has a rich spectrum of harmonics,
decaying at around 12\ dB/octave, and each harmonic is affected
by the vocal tract resonances.
.rh "Vocal tract resonances."
A simple model of the vocal tract is an organ-pipe-like cylindrical tube
(Figure 2.1),
with a sound source at one end (the larynx) and open at the other (the lips).
.FC "Figure 2.1"
This has resonances at wavelengths $4L$, $4L/3$, $4L/5$, ..., where $L$
is the length of the tube;
and these correspond to frequencies $c/4L$, $3c/4L$, $5c/4L$, ...\ Hz, $c$
being the speed of
sound in air.
Calculating these frequencies, using a typical figure for the
distance between larynx and lips of 17\ cm,
and $c = 340$\ m/s for the speed of sound, leads to resonances at
approximately 500\ Hz, 1500\ Hz, 2500\ Hz, ... .
.pp
When excited by the harmonic-rich waveform of the larynx,
the vocal tract resonances produce
peaks known as
.ul
formants
in the energy spectrum of the speech wave (Figure 2.2).
.FC "Figure 2.2"
The lowest formant, called formant one, varies from around 200\ Hz
to 1000\ Hz during speech, the exact range depending on the size
of the vocal tract.
Formant two varies from around 500 to 2500\ Hz, and formant three
from around 1500 to 3500\ Hz.
.pp
You can easily hear the lowest formant by whispering the vowels in
the words "heed", "hid", "head", "had", "hod", "hawed", and "who'd".
They appear to have a steadily descending pitch, yet since you are
whispering there is no fundamental frequency.
What you hear is the lowest resonance of the vocal tract \(em formant one.
Some masochistic people can play simple tunes with this formant by putting
their mouth in successive vowel shapes and knocking the top of their head
with their knuckles \(em hard!
.pp
A difficulty occurs when trying to identify the lower formants for speakers
with high-pitched voices.
When a formant frequency falls below the fundamental excitation frequency
of the voice, its effect is diminished \(em although it is still present.
The vibrato used by opera singers provides a very low-frequency excitation
(at the vibrato rate) which helps to illuminate the lower formants even
when the pitch of the voice is very high.
.pp
Of course, speech is not a static phenomenon.
The organ-pipe model describes the speech spectrum during a continuously
held vowel with the mouth in a neutral position such as for "aaah".
But in real speech the tongue and lips are in continuous motion,
altering the shape of the vocal tract and hence the positions of the resonances.
It is as if the organ-pipe were being squeezed and expanded in
different places all the time.
Say
.ul
ee
as in "heed" and feel how close your tongue is to the roof of your mouth,
causing a constriction near the front of the vocal cavity.
.pp
Linguists and speech engineers use a special frequency analyser called a
"sound spectrograph" to make a three-dimensional plot of the variation
of the speech energy spectrum with time.
Figure 2.3 shows a spectrogram of the
utterance "go away".
.FC "Figure 2.3"
Frequency is given on the vertical axis,
and bands are shown at the beginning to indicate the scale.
Time is plotted horizontally,
and energy is given by the darkness of any particular area.
The lower few formants can be seen as dark bands extending horizontally,
and they are in continuous motion.
In the neutral first vowel of "away", the formant frequencies
pass through
approximately the 500\ Hz, 1500\ Hz, and 2500\ Hz that we calculated earlier.
(In fact, formants two and three are somewhat lower than these values.)
.pp
The
fine vertical striations in the spectrogram correspond to single openings of the vocal cords.
Pitch changes continuously throughout an utterance,
and this can be seen on the spectrogram by the differences in spacing
of the striations.
Pitch change, or
.ul
intonation,
is singularly important in
lending naturalness to speech.
.pp
On a spectrogram, a continuously held vowel shows up as a static energy spectrum.
But beware \(em what we call a vowel in everyday language is not the same thing as a
"vowel" in phonetic terms.
Say "I" and feel how the tongue moves continuously while you're speaking.
Technically, this is a
.ul
diphthong
or slide between two vowel positions,
and not a single vowel.
If you say
.ul
ar
as in "hard",
and change slowly to
.ul
ee
as in "heed", you will obtain a diphthong not unlike that in "I".
And there are many more phonetically different vowel sounds
than the a, e, i, o, and u that we normally think of.
The words "hood" and "mood" have different vowels, for example, as do "head" and "mead".
The principal acoustic difference between the various vowel sounds
is in the frequencies of the first two formants.
.pp
A further complication is introduced by the nasal tract.  This is
a large cavity which is coupled to the oral tract by a passage at the
back of the mouth.
The passage is guarded by a flap of skin called the "velum".
You know about this because inadvertent opening of the velum while
swallowing causes food or drink to go up your nose.
The nasal cavity is switched in and out of the vocal tract
by the velum during speech.
It is used for consonants
.ul
m,
.ul
n,
and the
.ul
ng
sound in the word
"singing".
Vowels are frequently nasalized too.
A very effective demonstration of the amount of nasalization in ordinary
speech can be obtained by cutting a nose-shaped hole in a large
baffle which divides a room, speaking normally with one's nose in the hole,
and having someone listen on the other side.
The frequency of occurrence of
nasal sounds, and the volume of sound that is emitted
through the nose, are both surprisingly large.
Interestingly enough, when we say in conversation that someone sounds
"nasal", we usually mean "non-nasal".  When the nasal passages are
blocked by a cold, nasal sounds are missing \(em
.ul
n\c
\&'s turn into
.ul
d\c
\&'s,
and
.ul
m\c
\&'s to
.ul
b\c
\&'s.
.pp
When the nasal cavity is switched in to the vocal tract, it introduces
formant resonances, just as the oral cavity does.
Although we cannot
alter the shape of the nasal tract significantly, the nasal formant
pattern is not fixed, because the oral tract does play a part in nasal
resonances.
If you say
.ul
m,
.ul
n,
and
.ul
ng
continuously, you can hear the difference and feel how it is produced by
altering the combined nasal/oral tract resonances with your tongue position.
The nasal cavity operates in parallel with
the oral one:  this causes the two resonance patterns to be summed
together, with resulting complications which will be discussed in Chapter 5.
.rh "Sound sources."
Speech involves sounds other than those caused by regular vibration of
the larynx.
When you whisper, the folds of the larynx are held slightly
apart so that the air passing between them becomes turbulent, causing a noisy excitation
of the resonant cavity.
The formant peaks are still present, superimposed on the noise.  Such
"aspirated" sounds occur in the
.ul
h
of "hello", and for a very short time
after the lips are opened at the beginning of "pit".
.pp
Constrictions made in the mouth produce hissy noises such as
.ul
ss,
.ul
sh,
and
.ul
f.
For example, in
.ul
ss
the tip of the tongue is high up,
very close to the roof of the mouth.
Turbulent air passing through this constriction causes a
random noise excitation, known as "frication".
Actually, the roof of the mouth is quite a complicated object.
You can feel with your tongue a bony hump or ridge just behind the front
teeth, and it is this that forms a constriction with the tongue for
.ul
s.
In
.ul
sh,
the tongue is flattened close to the roof of the mouth slightly farther back,
in a position rather similar to that for
.ul
ee
but with a narrower
constriction,
while
.ul
f
is produced with the upper teeth and lower lip.
Because they are made near the front of the mouth,
the resonances of the vocal tract have little effect on these fricative
sounds.
.pp
To distinguish them from aspiration and frication, the ordinary speech
sounds (like "aaah") which have their source in larynx vibration are
known technically as "voiced".  Aspirated and fricative sounds are called
"unvoiced".  Thus the three different sound types can be classified as
.LB
.NP
voiced
.NP
unvoiced (fricative)
.NP
unvoiced (aspirated).
.LE
Can any of these three types occur together?
It would seem that voicing and aspiration can not, for the former requires
the larynx to be vibrating regularly, but for the latter it must be
generating turbulent noise.
However, there is a condition known technically as "breathy voice"
which occurs when the vocal cords are slightly apart, still vibrating,
but with a large volume of air passing between to create turbulence.
Voicing can easily occur in conjunction with frication.
Corresponding to
.ul
s,
.ul
sh,
and
.ul
f
we get the
.ul
voiced
fricatives
.ul
z,
the sound in the middle of words like "vision" which I will call
.ul
zh,
and
.ul
v.
A simple illustration of voicing is to say "ffffvvvvffff\ ...".
During the voiced part you can feel the larynx vibrations with a finger
on your Adam's apple, and it can be heard quite clearly if you stop up
your ears.
Technically, there is nothing to prevent frication and aspiration
from occurring together \(em they do, for example, when a voiced fricative
is whispered \(em but the combination is not an important one.
.pp
The complicated acoustic effects of noisy excitations in speech can be
seen in the spectrogram in Figure 2.4 of
"high altitude jets whizz past screaming".
.FC "Figure 2.4"
.rh "The source-filter model of speech production."
We have been talking in terms of a sound source (be it voiced or unvoiced)
exciting the resonances of the oral (and possible the nasal) tract.
This model, which is used extensively in speech analysis and synthesis,
is known as
the source-filter model of speech production.  The reason for its success
is that the effect of the resonances can be modelled as a frequency-selective
filter, operating on an input which is the source excitation.
Thus the frequency spectrum of the source is modified by multiplying it
by the frequency characteristic of the filter (or adding it, if amplitudes
are expressed logarithmically).
This can be seen in Figure 2.5, which shows a source
spectrum and filter characteristic which combine to give the overall
spectrum of Figure 2.2.
.FC "Figure 2.5"
.pp
Although, as mentioned above, the various fricatives are not subjected
to the resonances of the vocal tract to the same extent
that voiced and aspirated
sounds are, they can still be modelled as a noise source followed by
a filter to give them their different sound qualities.
.pp
The source-filter model is an oversimplification of the actual speech
production system.  There is inevitably some coupling between the vocal
tract and the lungs, through the glottis, during the period when
it is open.  This effectively makes the filter characteristics
change during each individual cycle of the excitation.
However, although the effect is of interest to speech researchers,
it is probably not of great significance for practical speech output.
.pp
One very interesting implication of the
source-filter model is that the prosodic features of
pitch and amplitude are largely properties of the source; while
segmental ones are introduced by the filter.  This makes it possible to
separate some aspects of
overall prosody from the actual segmental content of an
utterance, so that, for example, a human utterance can be stored initially
and then spoken by a machine with a variety of different intonations.
.sh "2.2  Classification of speech sounds"
.pp
The need to classify sound segments as a basis for storing generalized acoustic
information and retrieving it was mentioned earlier.  There is a real
difficulty here because speech is by nature continuous and classifications are
discrete.
It is important to remember this difficulty because it is all too easy
to criticize the complex and often confusing attempts of linguists to
tackle the classification task.
.pp
Linguists call a written representation of the
.ul
sounds
of an utterance a "phonetic
transcription" of it.  The same utterance can be transcribed at
different levels of detail:  simple transcriptions are called "broad"
and more specific ones are called "narrow".
Perhaps the most logically satisfying kind of transcription employs units
termed "phonemes".  This is the broadest transcription,
and is sometimes called a
.ul
phonemic
transcription to emphasize that that it is in terms of phonemes.
Unfortunately, the word "phoneme" is often used somewhat loosely.
In its true sense, a phoneme is a
.ul
logical
unit, rather than a physical, acoustic, one,
and is defined in relation to a particular language by reference
to its use in discriminating different words.
Classifications of sounds which are based on their
semantic
role as word-discriminators are called
.ul
phonological
classifications:  we could ensure that there is no ambiguity in the sense
with which we use the term "phoneme" by calling it a phonological unit, and
the phonemic transcription could be called a phonological one.
.rh "Broad phonetic transcription."
A phoneme is an abstract unit representing a set of different sounds.
The issue is confused by the fact that the members of the set actually
sound very similar, if not identical, to the untrained ear \(em precisely because
the difference between them plays no part in distinguishing words from
each other in the particular language concerned.
.pp
Take the words "key" and "caw", for example.  Despite the difference in
spelling, both of them begin with a
.ul
k
sound that belongs (in English)
to the same phoneme set, called
.ul
k.
However, say them two or three times each, concentrating on the position of
the tongue during the
.ul
k.
It is quite different in each case.  For "key", it
is raised, close to the roof of the mouth, in preparation for the
.ul
ee,
whereas in "caw" it is much lower down.
The sound of the
.ul
k
is actually quite different in the two cases.
Yet they belong to the same phoneme, for there is no pair of words which
relies on this difference to distinguish them \(em "key" and "caw" are
obviously distinguished by their vowels, not by the initial
consonant.
You probably cannot hear clearly the difference between the two
.ul
k\c
\&'s,
precisely because they belong to the same phoneme and so the difference
is not important (for English).
.pp
The point is sharpened by considering another language where we make a
distinction \(em and hence can hear the difference \(em between two sounds
that belong, in the language, to the same phoneme.
Japanese does not distinguish
.ul
r
from
.ul
l.
Japanese people
.ul
do not hear
the difference between "lice" and "rice", in the same way that you do
not hear the difference between the two
.ul
k\c
\&'s above.
Cockneys do not hear, except with a special effort, the difference
between "has" and "as", or "haitch" and "aitch", for the Cockney dialect
does not recognize initial
.ul
h\c
\&'s.
.pp
So what is a phoneme?  It is a set of sounds whose members do not
discriminate between any words in the language under consideration.
If you are mathematically minded you could think of it as an equivalence
class of sounds, determined by the relationship
.LB
$sound sub 1$ is related to $sound sub 2$ if $sound sub 1$ and $sound sub 2$
do not discriminate any pair of words in the language.
.LE
The
.ul
p
and
.ul
d
in
"pig" and "dig" belong to different phonemes (in English),
because they discriminate
the two words.
.ul
b,
.ul
f,
and
.ul
j
belong to different phonemes again.
.ul
i
and
.ul
a
in "hid" and "had" belong to different phonemes too.
Proceeding like this, a list of phonemes can be drawn up.
.pp
Such a list is shown in Table 2.1, for British English.
(The layout of the list does have some significance in terms of different
categories of phonemes, which will be explained later.)  In fact,
linguists use an
assortment of English letters, foreign letters, and special
symbols to represent phonemes.  In this book we use one- or two-letter
codes, partly because they are more mnemonic, and partly because
they are more suitable for communication to computers using standard
peripheral devices.
They are
a direct transliteration of linguists' standard International Phonetic
Association symbols.
.RF
.nr x1 3m+1.0i+0.5i+0.5i+0.5i+\w'y'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta 3m +1.0i +0.5i +0.5i +0.5i +0.5i +0.5i
\fIuh\fR	(the)	\fIp\fR	\fIt\fR	\fIk\fR
\fIa\fR	(bud)	\fIb\fR	\fId\fR	\fIg\fR
\fIe\fR	(head)	\fIm\fR	\fIn\fR	\fIng\fR
\fIi\fR	(hid)
\fIo\fR	(hod)	\fIr\fR	\fIw\fR	\fIl\fR	\fIy\fR
\fIu\fR	(hood)
\fIaa\fR	(had)	\fIs\fR	\fIz\fR
\fIee\fR	(heed)	\fIsh\fR	\fIzh\fR
\fIer\fR	(heard)	\fIf\fR	\fIv\fR
\fIuu\fR	(food)	\fIth\fR	\fIdh\fR
\fIar\fR	(hard)	\fIch\fR	\fIj\fR
\fIaw\fR	(hoard)	\fIh\fR
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 2.1 The phonemes of British English"
.pp
We will discuss the sounds which make up each of these phoneme classes
shortly.  First, however, it is worthwhile pointing out some rather
tricky points in the definition of these phonemes.
.rh "Phonological difficulties."
There are snags with phonological classification, as there are
in any area where attempts are made to make completely logical
statements about human activity.
Consider
.ul
h
and the
.ul
ng
in "singing".
(\c
.ul
ng
is certainly not an
.ul
n
sound followed by a
.ul
g
sound, although
it is true that in some English accents "singing" is rendered with
the
.ul
ng
followed by a
.ul
g
at each of its two occurrences.)  No words
end with
.ul
h,
and none begin with
.ul
ng.
(Notice that we are still talking about British English.
In Chinese, the sound
.ul
ng
is a word in its own right, and is a common
family name.
But we must stick with one language for phonological classification.)  Hence
it follows that there is no pair of words which is distinguished
by the difference between
.ul
h
and
.ul
ng.
Technically,
they belong to the same phoneme.  However, technical considerations
in this case must take second place to common sense!
.pp
The
.ul
j
in "jig" is another interesting case.  It can be considered
to belong to a
.ul
j
phoneme, or to be a sequence of two
phonemes,
.ul
d
followed by
.ul
zh
(the sound in "vision").  There is
disagreement on this point in phonetics textbooks, and we do not
have the time (nor, probably, the inclination!) to consider the
pros and cons of this moot point.
I have resolved the matter arbitrarily by writing it as a separate
phoneme.  The
.ul
ch
in "choose" is a similar case
(\c
.ul
t
followed by the
.ul
sh
in "shoes").
.pp
Another difficulty, this time where Table 2.1 does not show how to
distinguish between two sounds which
.ul
do
discriminate words in many people's English, is the
.ul
w
in "witch"
and that in "which".  The latter is conventionally transcribed
as a sequence of two phonemes,
.ul
h w.
.pp
The last few difficulties are all to do with deciding whether a
sound belongs to a single phoneme class, or comprises a sequence
of sounds each of which belongs to a phoneme.
Are the
.ul
j
in "jug", the
.ul
ch
in "chug", and the
.ul
w
in "which",
single phonemes or not?  The definition above of a phoneme
as a "set of sounds whose members do not discriminate any words
in the language" does not help us to answer this question.
As far as this definition is concerned, we could go so far as
to call each and every word of the language an individual phoneme!
It is clear that some acoustic evidence, and quite a lot of judgement,
is being used when phonemes such as those of Table 2.1 are defined.
.pp
So much for the consonants.  This same problem occurs in vowel sounds,
particularly in diphthongs, which are sequences of two vowel-like sounds.
Do the vowels of "main" and "man" belong to different phonemes?
Clearly so, if they are both transcribed as single units, for they
distinguish the two words.
Notwithstanding the fact that they are sequences of separate sounds,
a logically consistent system could be constructed which gave separate,
unitary, symbols to each diphthong.
However, it is usual to employ a compound symbol which indicates explicitly
the character of the two vowel-like sounds involved.
We will transcribe the diphthong of "main" as a sequence of two
vowels,
.ul
e
(as in "head") and
.ul
i
(as in "hid", not "I").
This is done primarily for economy of symbols, choosing the constituent
sounds on the basis of the closest match to existing vowel sounds.
(Note that this again violates purely
.ul
logical
criteria for identifying phonemes.)
.rh "Categories of speech sounds."
A phoneme is defined as a set of sounds whose members to not discriminate
between any words in the language under consideration.
The phonemes themselves can be classified into groups which reflect
similarities between them.
This can be done in many different ways, using various criteria
for classification.  In fact, one branch of linguistic research
is concerned with defining a set of "distinctive
features" such that a phoneme class is uniquely identified by
the values of the features.  Distinctive features are binary,
and include such things as voiced\(emunvoiced, fricative\(emnot\ fricative,
aspirated\(emunaspirated.  We will not be concerned here with such
detailed classifications, but it is as well to know that they exist.
.pp
There is an everyday distinction between vowels and consonants.
A vowel forms the nucleus of every syllable, and one or more consonants
may optionally surround the vowel.
But the distinction sometimes becomes a little ambiguous.
Syllables like
.ul
sh
are commonly uttered and certainly do not
contain a vowel.  Furthermore, when we say "vowel" in everyday
language we usually refer to the
.ul
written
vowels a, e, i, o, and u; there are many more vowel sounds.
A vowel in orthography is different to a vowel as a phoneme.
Is a diphthong a phonetic vowel?  \(em certainly, by the syllable-nucleus
criterion; but it is a little different from ordinary vowels because
it is a changing sound rather than a constant one.
.pp
Table 2.2 shows one classification of the phonemes of Table 2.1, which
will be useful in our later studies of speech synthesis from phonetics.
It shows twelve vowels, including the rather peculiar one
.ul
uh
(which corresponds to the first vowel in the word "above").
This is the sound produced by the vocal tract when it is in a relaxed,
neutral position; and it never occurs in prominent, stressed,
syllables.  The vowels later in the list are almost always longer
than the earlier ones.  In fact, the first six
(\c
.ul
uh, a, e, i, o, u\c
)
are often called "short" vowels, and the last five
(\c
.ul
ee, er, uu, ar, aw\c
)
"long" ones.  The shortness or longness of the one in the middle
(\c
.ul
aa\c
)
is rather ambiguous.
.RF
.nr x0 \w'000unvoiced fricative    'u
.nr x1 \n(x0+\w'[not classified as individual phonemes]'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta \n(x0u
.fi
vowel	\c
.ul
uh  a  e  i  o  u  aa  ee  er  uu  ar  aw
.br
diphthong	[not classified as individual phonemes]
.br
glide (or liquid)	\c
.ul
r  w  l  y
.br
stop
.br
\0\0\0unvoiced stop	\c
.ul
p  t  k
.br
\0\0\0voiced stop	\c
.ul
b  d  g
.br
nasal	\c
.ul
m  n  ng
.br
fricative
.br
\0\0\0unvoiced fricative	\c
.ul
s  sh  f  th
.br
\0\0\0voiced fricative	\c
.ul
z  zh  v  dh
.br
affricate
.br
\0\0\0unvoiced affricate	\c
.ul
ch
.br
\0\0\0voiced affricate	\c
.ul
j
.br
aspirate	\c
.ul
h
.nf
.in 0
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 2.2 Phoneme categories"
.pp
Diphthongs pose no problem here because we have not classified them
as single phonemes.
.pp
The remaining categories are consonants.  The glides are quite
similar to vowels and diphthongs, though; for they are voiced,
continuous sounds.  You can say them and prolong them.
(This is also true of the fricatives.) 
.ul
r
is interesting
because it can be realized acoustically in very different ways.
Some people curl the tip of the tongue
back \(em a so-called retroflex action of the tongue.  Many people
cannot do this, and their
.ul
r\c
\&'s sound like
.ul
w\c
\&'s.
The stage Scotsman's
.ul
r
is a trill where the tip of the tongue vibrates against the roof of the mouth.
.ul
l
is also
slightly unusual, for it is the only English phoneme which is "lateral" \(em
air passes either side of it, in two separate passages.  Welsh
has another lateral sound, a fricative, which is written "ll" as
in "Llandudno".
.pp
The next category is the stops.  These are formed by stopping up
the mouth, so that air pressure builds up behind the lips, and
releasing this pressure suddenly.  The result is a little
explosion (and the stops are often called "plosives"), which
usually creates a very short burst of fricative noise (and, in some cases,
aspiration as well).  They are further subdivided into voiced and
unvoiced stops, depending upon whether voicing starts as soon as
the plosion occurs (sometimes even before) or well after it.
If you put your hand in front of your mouth when saying "pit" you
can easily feel the puff of air that signals the plosion on the
.ul
p,
and probably on the
.ul
t
as well.
.pp
In a sense, nasals are really stops as well (and they are often
called stops), for the oral tract is blocked although the nasal
one is not.  The peculiar fact that the nasal
.ul
ng
never occurs at the beginning of a word (in English) was mentioned
earlier.  Notice that for stops and nasals there is a similarity in the
.ul
vertical
direction of Table 2.2, between
.ul
p,
.ul
b,
and
.ul
m;
.ul
t,
.ul
d,
and
.ul
n;
and
.ul
k,
.ul
g,
and
.ul
ng.
.ul
p
is an unvoiced version of
.ul
b
(try saying them),
and
.ul
m
is a nasalized version (for
.ul
b
is what you get when you
have a cold and try to say
.ul
m\c
).
These three sounds are all made
at the front of the mouth, while
.ul
t,
.ul
d,
and
.ul
n,
which bear the
same resemblance to each other, are made in the middle; and
.ul
k,
.ul
g,
and
.ul
ng
are made at the back.  This introduces another
possible classification, according to
.ul
place of articulation.
.pp
The unvoiced fricatives are quite straightforward, except perhaps
for
.ul
th,
which is the sound at the beginning of "thigh".
They are paired with the voiced fricatives on the basis of place
of articulation.  The voiced version of
.ul
th
is the
.ul
dh
at
the beginning of "thy".
.ul
zh
is a fairly rare phoneme, which
is heard in the middle of "vision".  Affricates are similar to
fricatives but begin with a stopped posture, and we mentioned earlier
the controversy as to whether they should be considered to be
single phonemes, or
sequences of stop phonemes and fricatives.
Finally comes the lonely aspirate,
.ul
h.
Aspiration does occur
elsewhere in speech, during the plosive burst of unvoiced stops.
.rh "Narrow phonetic transcription."
The phonological classification outlined above is based upon a clear
rationale for distinguishing between sounds according to how
they affect meaning \(em although the rationale does become
somewhat muddied in difficult cases.
Narrower transcriptions are not so systematic.
They use units called
.ul
allophones,
which are defined by reference to physical, acoustic, criteria rather
than purely logical ones.
("Phone" is a more old-fashioned term for the same thing,
and the misused word "phoneme" is often employed where allophone is
meant, that is, as a physical rather than a logical
unit.)  Each phoneme has several allophones,
more or less depending on how narrow or broad the transcription is,
and the allophones are different acoustic realizations of the same
logical unit.
For example, the
.ul
k\c
\&'s in "key" and "caw" may be considered as different
allophones (in a slightly narrow transcription).
Although we will not use symbols for allophones here,
they are often indicated by diacritical marks in a text
which modify the basic phoneme classes.
For example, a tilde (~) over a vowel means that it is nasalized, while a small
circle underneath a consonant means that it is devoiced.
.pp
Allophonic variation in speech is governed by a mechanism called
.ul
coarticulation,
where a sound is affected by those that come either side of it.
"Key"\-"caw" is a clear example of this, where the tongue
position in the
.ul
k
anticipates that of the following vowel \(em high
in the first case, low in the second.
Most allophonic variation in English is anticipatory, in that the sound
is influenced by the following articulation rather than by
preceding ones.
.pp
Nasalization is a feature which applies to vowels in English through
anticipatory coarticulation.
In many languages (for example, French) it is a
.ul
distinctive
feature for vowels in that it serves to distinguish one vowel phoneme class
from another.
That this is not so in English sometimes tempts us to assume,
incorrectly, that nasalization does not occur in vowels.
It does, typically when the vowel is followed by a nasal consonant, and it is
important for synthesis that nasalized vowel allophones are recognized and
treated accordingly.
.pp
Coarticulation can be predicted by phonological rules, which show
how a phonemic sequence will be realized by allophones.
Such rules have been studied extensively by linguists.
.pp
The reason for coarticulation, and for the existence of allophones,
lies in the physical constraints imposed by the motion
of the articulatory organs \(em particularly their acceleration and deceleration.
An immensely crude model is that the brain decides what phonemes to
say (for it is concerned with semantic things, and the definition
of a phoneme is a semantic one).
It then takes this sequence and translates it into neural commands
which actually move the articulators into target positions.
However, other commands may be issued, and executed, before these targets
are reached, and this accounts for coarticulation effects.
Phonological rules for converting a phonemic sequence to an
allophonic one are a sort of discrete model of the process.
Particularly for work involving computers, it is possible that this
rule-based approach will be overtaken by potentially more accurate
methods which attempt to model the continuous articulatory phenomena
directly.
.sh "2.3  Prosody"
.pp
The phonetic classification introduced above divides speech into
segments and classifies these into phonemes or allophones.
Riding on top of this stream of segments are other, more global,
attributes that dictate the overall prosody of the utterance.
Prosody is defined by the Oxford English Dictionary as the
"science of versification, laws of metre,"
which emphasizes the aspects of stress and rhythm that are central
to classical verse.
There are, however, many other features which are more or less
global.
These are collectively called prosodic or, equivalently, suprasegmental,
features, for they lie above the level of phoneme or syllable segments.
.pp
Prosodic features can be split into two basic categories:  features
of voice quality and features of voice dynamics.
Variations in voice quality, which are sometimes called
"paralinguistic" phenomena, are accounted for by anatomical
differences and long-term muscular idiosyncrasies (like a sore
throat), and have little part to play in the kind of applications
for speech output that have been sketched in Chapter 1.
Variations in voice dynamics occur in three dimensions:  pitch
or fundamental frequency of the voice, time, and amplitude.
Within the first, the pattern of pitch variation, or
.ul
intonation,
can be distinguished from the overall range within which that variation
occurs.
The time dimension encompasses the rhythm of the speech, pauses, and the
overall tempo \(em whether it is uttered quickly or slowly.
The third dimension, amplitude, is of relatively minor importance.
Intonation and rhythm work together to produce an effect commonly called
"stress", and we will elaborate further on the nature of stress and discuss
algorithms for synthesizing intonation and rhythm in Chapter 8.
.pp
These features have a very important role to play in communicating meaning.
They are not fancy, optional components.
It is their neglect which is largely responsible for the layman's
stereotype of computer speech,
a caricature of living speech \(em abrupt, arhythmic, and in a grating
monotone \(em
which was well characterized by Isaac Asimov when he wrote of speaking
"all in capital letters".
.pp
Timing has a syntactic function in that it sometimes helps to
distinguish nouns from
verbs
(\c
.ul
ex\c
tract versus ex\c
.ul
tract\c
).
and adjectives from verbs (app\c
.ul
rox\c
imate versus approxi\c
.ul
mate\c
) \(em although segmental aspects play a part here too, for the vowel
qualities differ in each pair of words.
Nevertheless, if you make a mistake when assigning stress to words
like these in conversation you are very likely to be queried as
to what you actually said.
.pp
Intonation has a big effect on meaning too.
Pitch often \(em but by no means always \(em rises on a question,
the extent and abruptness of the rise depending on features like whether
a genuine information-bearing reply or merely confirmation is expected.
A distinctive pitch pattern accompanies the introduction of a new topic.
In conjunction with rhythm, intonation can be used to bring out contrasts
as in
.LB
.NI
"He didn't have a
.ul
red
car, he had a
.ul
black
one."
.LE
In general, the intonation patterns used by a reader depend not only on
the text itself, but on his interpretation of it, and also on his
expectation of the listener's interpretation of it.
For example:
.LB
.NI
"He had a
.ul
red
car" (I think you thought it was black),
.NI
"He had a red
.ul
bi\c
cycle" (I think you thought it was a car).
.LE
.pp
In natural speech, prosodic features are significantly influenced by
whether the utterance is generated spontaneously or read aloud.
The variations in spontaneous speech are enormous.
There are all sorts of emotions which are plainly audible in
everyday speech:  sarcasm, excitement, rudeness, disagreement,
sadness, fright, love.
Variations in voice quality certainly play a part here.
Even with "ordinary" cooperative friendly conversation, the need to find
words and somehow fit them into an overall utterance produces great
diversity of prosodic structures.
Applications for speech output from computers do not, however, call for
spontaneous conversation, but for a controlled delivery which is
like that when reading aloud.
Here, the speaker is articulating utterances which have been set out for
him, reducing his cognitive load to one of understanding and interpreting
the text rather than generating it.
Unfortunately for us, linguists are (quite rightly)
primarily interested in living,
spontaneous speech rather than pre-prepared readings.
.pp
Nevertheless, the richness of prosody in speech even when reading from
a book should not be underestimated.
Read aloud to an audience and listen to the contrasts in voice dynamics
deliberately introduced for variety's sake.
If stories are to be read there is even a case for controlling voice
.ul
quality
to cope with quotations and affective imitations.
.pp
We saw earlier that the source-filter model is particularly
helpful in distinguishing prosodic features, which are largely
properties of the source, from segmental ones, which belong to
the filter.
Pitch and amplitude are primarily source properties.
Rhythm and speed of speaking are not, but neither are they filter
properties, for they belong to the source-filter system as a whole
and not specifically to either part of it.
The difficult notion of stress is, from an acoustic point of view,
a combination of pitch, rhythm, and amplitude.
Even some features of voice quality can be attributed to the source
(like laryngitis), although others \(em cleft palate, badly-fitting
dentures \(em affect segmental features as well.
.sh "2.4  Further reading"
.pp
This chapter has been no more than a cursory introduction to some
of the difficult problems of linguistics and phonetics.
Here are some readable books which discuss these problems further.
.LB "nn"
.\"Abercrombie-1967-1
.ds [F 1
.]-
.ds [A Abercrombie, D.
.ds [D 1967
.ds [T Elements of general phonetics
.ds [I Edinburgh Univ Press
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is an excellent book which covers all of the areas of this
chapter, in much more detail than has been possible here.
.in-2n
.\"Brown-1980-2
.ds [F 2
.]-
.ds [A Brown, Gill
.as [A ", Currie, K.L.
.as [A ", and Kenworthy, J.
.ds [D 1980
.ds [T Questions of intonation
.ds [I Croom Helm
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
An intensive study of the prosodics of colloquial, living speech
is presented, with particular reference to intonation.  Although
not particularly relevant to speech output from computers,
this book gives great insight into how conversational speech
differs from reading aloud.
.in-2n
.\"Fry-1979-1
.ds [F 1
.]-
.ds [A Fry, D.B.
.ds [D 1979
.ds [T The physics of speech
.ds [I Cambridge University Press
.ds [C Cambridge, England
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is a simple and readable account of speech science, with a good
and completely non-mathematical introduction to frequency analysis.
.in-2n
.\"Ladefoged-1975-4
.ds [F 4
.]-
.ds [A Ladefoged, P.
.ds [D 1975
.ds [T A course in phonetics
.ds [I Harcourt Brace and Johanovich
.ds [C New York
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Usually books entitled "A course on ..." are dreadfully dull, but
this is a wonderful exception.  An exciting, readable, almost racy
introduction to phonetics, full of little experiments you can try
yourself.
.in-2n
.\"Lehiste-1970-5
.ds [F 5
.]-
.ds [A Lehiste, I.
.ds [D 1970
.ds [T Suprasegmentals
.ds [I MIT Press
.ds [C Cambridge, Massachusetts
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This fairly comprehensive study of the prosodics of speech
complements Ladefoged's book, which is mainly concerned with segmental
phonetics.
.in-2n
.\"O'Connor-1973-1
.ds [F 1
.]-
.ds [A O'Connor, J.D.
.ds [D 1973
.ds [T Phonetics
.ds [I Penguin
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is another introductory book on phonetics.
It is packed with information on all aspects of the subject.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "3  SPEECH STORAGE"
.ds RT "Speech storage
.ds CX "Principles of computer speech
.pp
The most familiar device that produces speech output is the ordinary tape
recorder, which stores information in analogue form on magnetic tape.
However, this is unsuitable for speech output from computers.
One reason is that it is difficult to access different utterances quickly.
Although random-access tape recorders do exist, they are expensive and
subject to mechanical breakdown because of the stresses associated with
frequent starting and stopping.
.pp
Storing speech on a rotating drum instead of
tape offers the possibility of access to any track within one revolution time.
For example, the IBM 7770 Audio Response Unit employs drums rotating twice
a second which are able to store up to 32 500-msec words.  These can be accessed
randomly, within half a second at most.
Although one can
arrange to store longer words by allowing overflow on to an adjacent track at
the end of the rotation period, the discrete time-slots provided by this
system make it virtually impossible for it to generate connected utterances
by assembling appropriate words from the store.
.pp
The Cognitronics Speechmaker has a similar structure, but with
the analogue speech waveform recorded on photographic film.
Storing audio waveforms optically is not an unusual technique, for this is how
soundtracks are recorded on ordinary movie films.  The original version of
the "speaking clock" of the British Post Office used optical storage in
concentric tracks on flat glass discs.
It is described by Speight and Gill (1937),
who include a fascinating account of how the utterances are synchronized.
.[
Speight Gill 1937
.]
A 4\ Hz signal from a pendulum clock was used to supply current to an electric
motor, which drove a shaft equipped with cams and gears that rotated
the glass discs containing utterances for seconds, minutes, and hours
at appropriate speeds!
.pp
A second reason for avoiding analogue storage is price.  It is difficult to see how a random-access
tape recorder could be incorporated into a talking pocket calculator or
child's toy without considerably inflating the cost.
Solid-state electronics is much cheaper than mechanics.
.pp
But the best reason is that, in many of the applications we have discussed,
it is necessary to form utterances by concatenating separately-recorded
parts.  It is totally infeasible, for example, to store each and every
possible telephone number as an individual recording!  And
utterances that are formed by concatenating individual words which were
recorded in isolation, or in a different context, do not sound completely
natural.  For example, in an early experiment, Stowe and Hampton (1961) recorded
individual words on acoustic tape, spliced the tape with the words in a different
order to make sentences, and played the result to subjects who were scored on
the number of key words which they identified correctly.
.[
Stowe Hampton 1961
.]
The overall conclusion was that while embedding a word in normally-spoken sentences
.ul
increases
the probability of recognition (because the extra context gives clues about the
word), embedding a word in a constructed sentence, where intonation and rhythm
are not properly rendered,
.ul
decreases
the probability of recognition.  When the speech was uttered slowly,
however, a considerable improvement was noticed, indicating that if the
listener has more processing time he can overcome the lack of proper intonation
and rhythm.
.pp
Nevertheless, many present-day voice response systems
.ul
do
store what amounts to a direct recording of the acoustic wave.
However, the storage medium is digital rather than analogue.
This means that standard computer storage devices can be used, providing
rapid access to any segment of the speech at relatively low cost \(em for
the economics of mass-production ensures a low price for random-access
digital devices compared with random-access analogue ones.
Furthermore, it reduces the amount of special equipment needed for speech
output.  One can buy very cheap speech input/output interfaces for home computers
which connect to standard hobby buses.
Another advantage of digital over analogue recording is that
integrated circuit read-only memories (ROMs)
can be used for hand-held devices which need small quantities of speech.
Hence this chapter begins by showing how waveforms are stored digitally,
and then describes some techniques for reducing the data needed for a given
utterance.
.sh "3.1  Storing waveforms digitally"
.pp
When an analogue signal is converted to digital form, it is made discrete
both in time and in amplitude.  Discretization in time is the operation of
.ul
sampling,
whilst in amplitude it is
.ul
quantizing.
It is worth pointing out that the transmission of analogue information by
digital means is called "PCM" (standing for "pulse code modulation") in
telecommunications jargon.
Much of the theory of digital signal processing investigates signals which
are sampled but not quantized (or quantized into sufficiently many levels to
avoid inaccuracies).  The operation of quantization, being non-linear,
is not very amenable to theoretical analysis.  Quantization introduces issues
such as accumulation of round-off noise in arithmetic operations,
which, although they are very important in practical implementations, can only
be treated theoretically under certain somewhat unrealistic assumptions
(in particular, independence of the quantization error from sample to sample).
.rh "Sampling."
A fundamental theorem of telecommunications states that a signal can only be
reconstructed accurately from a sampled version if it does not contain
components whose frequency is greater than half the frequency at which the
sampling takes place.  Figure 3.1(a) shows how a component of slightly greater
than half the sampling frequency can masquerade, as far as an observer with
access only to the sampled data can tell, as a component at slightly less
than half the sampling frequency.
.FC "Figure 3.1"
Call the sampling interval $T$ seconds, so that the
sampling frequency is $1/T$\ Hz.
Then components at $1/2T+f$, $3/2T-f$, $3/2T+f$ and so on all masquerade
as a component at $1/2T-f$.  Similarly, components at frequencies just under
the sampling frequency masquerade as very low-frequency components, as shown
in Figure 3.1(b).  This phenomenon is often called "aliasing".
.pp
Thus the continuous, infinite, frequency axis for the unsampled signal, where
two components at different frequencies can always be distinguished, maps
into a repetitive frequency axis when the signal is sampled.  As depicted
in Figure 3.2, the frequency
interval $[1/T,~ 2/T)$ \u\(dg\d
.FN 3
.sp
\u\(dg\dIntervals are specified in brackets, with a square bracket representing
a closed end of the interval and a round one representing an open one.
Thus the interval $[1/T,~ 2/T)$ specifies the range $1/T ~ <= ~ frequency
~ < ~ 2/T$.
.EF
is mapped back into the band $[0,~ 1/T)$, as are the
intervals $[2/T,~ 3/T)$,  $[3/T,~ 4/T)$, and so on.
.FC "Figure 3.2"
Furthermore, the interval $[1/2T,~ 1/T)$ between half the sampling frequency and the sampling
frequency, is mapped back into the interval
below half the sampling frequency; but this time the mapping is backwards,
with frequencies at just under $1/T$ being mapped to frequencies slightly greater
than zero, and frequencies just over $1/2T$ being mapped to ones
just under $1/2T$.
The best way to represent a repeating frequency axis like this is as a circle.
Figure 3.3 shows how the linear frequency axis for continuous systems maps
on to a circular axis for sampled systems.
.FC "Figure 3.3"
For present purposes it is
easiest to imagine the bottom half of the circle as being reflected into
the top half, so that traversing the upper semicircle in the anticlockwise direction
corresponds to frequencies increasing from 0 to $1/2T$ (half the sample frequency),
and returning along the lower semicircle is actually the same as coming
back round the upper one, and corresponds to frequencies from $1/2T$ to $1/T$
being mapped into the range $1/2T$ to 0.
.pp
As far as speech is concerned, then, we must ensure that before sampling a
signal no significant components at greater than half the sample frequency
are present.  Furthermore, the sampled signal will only contain information
about frequency components less than this, so the sample frequency must be
chosen as twice the highest frequency of interest.
For example, consider telephone-quality speech.
Telephones provide a familiar standard of speech quality which,
although it can only be an approximate "standard",
will be much used throughout this book.
The telephone network
aims to transmit only frequencies lower than 3.4\ kHz.  We saw in the
previous chapter that this region will contain the information-bearing formants,
and some \(em but not all \(em of the fricative and aspiration energy.
Actually, transmitting speech through the telephone system degrades its
quality very significantly, probably more than you realize since everyone is
so accustomed to telephone speech.  Try the dial-a-disc service and compare
it with high-fidelity music for a striking example of the kind of degradation
suffered.
.pp
For telephone speech, the sampling frequency must be chosen to be
at least 6.8\ kHz.
Since speech contains significant amounts of energy above 3.4\ kHz, it should be
filtered before sampling to remove this; otherwise the higher components
would be mapped back into the baseband and distort the low-frequency information.
Because it is difficult to make filters that cut off very sharply, the
sampling frequency is chosen rather greater than twice the highest frequency of
interest.  For example, the digital telephone network samples at 8\ kHz.
The pre-sampling filter should have a cutoff frequency of 4\ kHz; aim for
negligible distortion below 3.4\ kHz; and transmit negligible components
above 4.6\ kHz \(em for these are reflected back into the band of interest,
namely 0 to 3.4\ kHz.  Figure 3.4 shows a block diagram for the input hardware.
.FC "Figure 3.4"
.rh "Quantization."
Before considering specifications for the pre-sampling filter, let us turn
from discretization in time to discretization in amplitude, that is,
quantization.
This is performed by an A/D converter (analogue-to-digital), which takes as input
a constant analogue voltage (produced by the sampler) and generates a
corresponding binary value as output.  The simplest correspondence is
.ul
uniform
quantization, where the amplitude range is split into equal regions by points
termed "quantization levels", and the output is a binary representation of
the nearest quantization level to the input voltage.
Typically, 11-bit conversion is used for speech, giving 2048 quantization
levels, and the signal is adjusted to have zero mean so that half the
levels correspond to negative input voltages and the other half to positive
ones.
.pp
It is, at first sight, surprising that as many as 11 bits are needed for
adequate representation of speech signals.  Research on the digital telephone
network, for example, has concluded that a signal-to-noise ratio of
some 26\-27\ dB is enough to avoid undue harshness of quality, loss
of intelligibility, and listener fatigue for speech at a comfortable
level in an otherwise reasonably good channel.
Rabiner and Schafer (1978) suggest that about 36\ dB signal-to-noise ratio
would "most likely provide adequate quality in a communications system".
.[
Rabiner Schafer 1978 Digital processing of speech signals
.]
But 11-bit quantization seems to give a very much better signal-to-noise
ratio than these figures.  To estimate its magnitude, note that for N-bit quantization
the error for each sample will lie between
.LB
$
- ~ 1 over 2 ~. 2 sup -N$    and    $+ ~ 1 over 2 ~. 2 sup -N .
$
.LE
Assuming that it is uniformly distributed in this range \(em an assumption
which is likely to be justified if the number of levels is sufficiently
large \(em leads to a mean-squared error of
.LB
.EQ
integral from {-2 sup -N-1} to {2 sup -N-1} ~e sup 2 p(e) de,
.EN
.LE
where $p(e)$, the probability density function of the error $e$, is a constant
which satisfies the usual probability normalization constraint, namely
.LB
.EQ
integral from {-2 sup -N-1} to {2 sup -N-1} ~ p(e) de ~~=~ 1.
.EN
.LE
Hence $p(e)=2 sup N $, and so the mean-squared error is  $2 sup -2N /12$.
This is  $10 ~ log sub 10 (2 sup -2N /12)$\ dB, or around \-77\ dB for 11-bit
quantization.
.pp
This noise level is relative to the maximum amplitude range of the conversion.
A maximum-amplitude sine wave has a power of \-9\ dB relative to the same
reference, giving a signal-to-noise ratio of some 68\ dB.  This is far in excess
of that needed for telephone-quality speech.  However, look at the very peaky
nature of the typical speech waveform given in Figure 3.5.
.FC "Figure 3.5"
If clipping is to be avoided, the maximum amplitude level of the A/D converter
must be set at a value which makes the power of the speech signal very much
less than a maximum-amplitude sine wave.  Furthermore, different people
speak at very different volumes, and the overall level fluctuates constantly
with just one speaker.  Experience shows that while 8- or 9-bit quantization
may provide sufficient signal-to-noise ratio to preserve telephone-quality
speech if the overall speaker levels are carefully controlled, about 11 bits
are generally required to provide high-quality representation of speech with
a uniform quantization.  With 11 bits, a sine wave whose amplitude is only 1/32
of the full-scale value would be digitized with a signal-to-noise ratio
of around 36\ dB, the most pessimistic figure quoted above for adequate quality.
Even then it is useful if the speaker is provided
with an indication of the amplitude of his speech:  a traffic-light
indicator with red signifying clipping overload, orange a suitable level,
and green too low a value, is often convenient for this.
.rh "Logarithmic quantization."
For the purposes of speech
.ul
processing,
it is essential to have the signal quantized uniformly.  This is because
all of the theory applies to linear systems, and nonlinearities introduce
complexities which are not amenable to analysis.
Uniform quantization, although a nonlinear operation, is linear in the
limiting case as the number of levels becomes large, and for most purposes
its effect can be modelled by assuming that the quantized signal is obtained
from the original analogue one by the addition of a small amount of
uniformly-distributed quantizing noise, as in fact was done above.
Usually the quantization noise is disregarded in subsequent analysis.
.pp
However, the peakiness of the speech signal illustrated in Figure 3.5 leads
one to suspect that a non-linear representation, for example a logarithmic one,
could provide a better signal-to-noise ratio over a wider range of input
amplitudes, and hence be more useful than linear quantization \(em at least
for speech storage (and transmission).
And indeed this is the case.  Linear quantization has the unfortunate effect
that the absolute noise level is independent of the signal level, so that an excessive
number of bits must be used if a reasonable ratio is to be achieved for peaky
signals.  It can be shown that a logarithmic representation like
.LB
.EQ
y ~ = ~ 1 ~ + ~ k ~ log ~ x,
.EN
.LE
where $x$ is the original signal and $y$ is the value which is to be quantized,
gives a
signal-to-noise
.ul
ratio
which is independent of the input signal level.
This relationship cannot be realized physically, for it is undefined when the signal
is negative and diverges when it is zero.
However, realizable approximations to it can be made which retain the advantages
of constant signal-to-noise ratio within a useful range of signal amplitudes.
Figure 3.6 shows the logarithmic relation with one widely-used approximation to it,
called the A-law.
.FC "Figure 3.6"
The idea of non-linearly quantizing a signal to achieve adequate signal-to-noise
ratios for a wide variety of amplitudes is called "companding", a contraction
of "compressing-expanding".  The original signal can be retrieved from
its A-law compression by antilogarithmic expansion.
.pp
Figure 3.6 also
shows one common coding scheme which is a piecewise linear approximation
to the A-law.  This provides an 8-bit code, and gives the equivalent
of 12-bit linear quantization for small signal levels.  It approximates
the A-law in 16 linear segments, 8 for positive and 8 for negative
inputs.
Consider the positive part of the curve.  The first two segments, which
are actually collinear, correspond exactly to 12-bit linear conversion.
Thus the output codes 0 to 31 correspond to inputs from 0 to 31/2048,
in equal steps.  (Remember that both positive and negative signals
must be converted, so a 12-bit linear converter will allocate 2048 levels
for positive signals and 2048 for negative ones.)  The next
segment provides 11-bit linear quantization,
output codes 32 to 47 corresponding to inputs from 16/1024 to 31/1024.
Similarly, the next segment corresponds to 10-bit quantization, covering
inputs from 16/512 to 31/512.  And so on, the last section giving 6-bit
quantization of inputs from 16/32 to 31/32, the full-scale positive value.
Negative inputs are converted similarly.
For signal levels of less than 32/2048, that is, $2 sup -8$, this implementation
of the A-law provides full 12-bit precision.
As the signal level increases, the precision decreases gradually to 6 bits
at maximum amplitudes.
.pp
Logarithmic encoding provides what is in effect a floating-point representation
of the input.  The conventional floating-point format, however, is not used
because many different codes can represent the same value.  For example, with
a 4-bit exponent preceding a 4-bit mantissa, the words 0000:1000,
0001:0100, 0010:0010, and 0011:0001 represent the numbers
$0.1 ~ times ~ 2 sup 0$,  $0.01 ~ times ~ 2 sup 1
$,  $0.001 ~ times ~ 2 sup 2$,  \c
and  $0.0001 ~ times ~ 2 sup 3$  respectively,
which are the same.  (Some floating-point conventions assume that an unwritten
"1" bit precedes the mantissa, except when the whole word is zero; but this
gives decreased resolution around zero \(em which is exactly where we want the
resolution to be greatest.)  Table 3.1 shows the 8-bit A-law codes,
.RF
.in+0.7i
.ta 1.6i +\w'bits 1-3   'u
8-bit codeword:	bit 0	sign bit
	bits 1-3	3-bit exponent
	bits 4-7	4-bit mantissa
.sp2
.ta 1.6i 3.5i
.ul
 codeword	   interpretation
.sp
0000 0000	\h'\w'\0-\0  +  'u'$.0000 ~ times ~ 2 sup -7$
\0\0\0...	\0\0\0\0...
0000 1111	\h'\w'\0-\0  +  'u'$.1111 ~ times ~ 2 sup -7$
0001 0000	$2 sup -7 ~~ + ~~ .0000 ~ times ~ 2 sup -7$
\0\0\0...	\0\0\0\0...
0001 1111	$2 sup -7 ~~ + ~~ .1111 ~ times ~ 2 sup -7$
0010 0000	$2 sup -6 ~~ + ~~ .0000 ~ times ~ 2 sup -6$
\0\0\0...	\0\0\0\0...
0010 1111	$2 sup -6 ~~ + ~~ .1111 ~ times ~ 2 sup -6$
0011 0000	$2 sup -5 ~~ + ~~ .0000 ~ times ~ 2 sup -5$
\0\0\0...	\0\0\0\0...
0011 1111	$2 sup -5 ~~ + ~~ .1111 ~ times ~ 2 sup -5$
0100 0000	$2 sup -4 ~~ + ~~ .0000 ~ times ~ 2 sup -4$
\0\0\0...	\0\0\0\0...
0100 1111	$2 sup -4 ~~ + ~~ .1111 ~ times ~ 2 sup -4$
0101 0000	$2 sup -3 ~~ + ~~ .0000 ~ times ~ 2 sup -3$
\0\0\0...	\0\0\0\0...
0101 1111	$2 sup -3 ~~ + ~~ .1111 ~ times ~ 2 sup -3$
0110 0000	$2 sup -2 ~~ + ~~ .0000 ~ times ~ 2 sup -2$
\0\0\0...	\0\0\0\0...
0110 1111	$2 sup -2 ~~ + ~~ .1111 ~ times ~ 2 sup -2$
0111 0000	$2 sup -1 ~~ + ~~ .0000 ~ times ~ 2 sup -1$
\0\0\0...	\0\0\0\0...
0111 1111	$2 sup -1 ~~ + ~~ .1111 ~ times ~ 2 sup -1$

1000 0000	\h'\w'\0-\0  'u'$- ~~ .0000 ~ times ~ 2 sup -7$	negative numbers treated as
\0\0\0...	\0\0\0\0...	above, with a sign bit of 1
1111 1111	\h'-\w'\- 'u'\- $2 sup -1 ~~ - ~~ .1111 ~ times ~ 2 sup -1$
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 3.1  8-bit A-law codes, with their floating-point equivalents"
according
to the piecewise linear approximation of Figure 3.6, written in a notation which
suggests floating point.  Each linear segment has a different exponent except
the first two segments, which as explained above are collinear.
.pp
Logarithmic encoders and decoders are available from many semiconductor
manufacturers as single-chip devices
called "codecs" (for "coder/decoder").  Intended for use on digital communication
links, these generally provide a serial output bit-stream, which
should be converted to parallel by a shift register if the data is intended
for a computer.
Because of the potentially vast market for codecs in telecommunications,
they are made in great quantities and are consequently very cheap.
Estimates of the speech quality necessary for telephone applications indicate
that somewhat less than this accuracy is needed \(em 7-bit logarithmic encoding
was used in early digital communications links, and it may be that even 6 bits
are adequate.  However, during the transition period when digital
networks must coexist with the present analogue one, it is anticipated that
a particular telephone call may have to pass through several links, some
using analogue technology and some being digital.  The possibility of
several successive encodings and decodings has led telecommunications
engineers to standardize on 8-bit representations, leaving some margin
before additional degradation of signal quality becomes unduly distracting.
.pp
Unfortunately, world telecommunications authorities cannot agree on a single
standard for logarithmic encoding.  The A-law, which we have described,
is the European standard, but there is another system, called
the $mu$-law, which is used universally in North America.  It also is available
in single-chip form with an 8-bit code.  It has very similar
quantization error characteristics to the A-law, and would be indistinguishable
from it on the scale of Figure 3.6.
.rh "The pre-sampling filter."
Now that we have some idea of the accuracy requirements for quantization,
let us discuss quantitative specifications for the pre-sampling filter.
Figure 3.7 sketches the characteristics of this filter.
.FC "Figure 3.7"
Assume a
sampling frequency of 8\ kHz and a range of interest from 0 to 3.4\ kHz.
Although all components at frequencies above 4\ kHz will fold back into
the 0\ \-\ 4\ kHz baseband, those below 4.6\ kHz fold back above 3.4\ kHz and are
therefore outside the range of interest.  This gives a "guard band" between
3.4 and 4.6\ kHz which separates the passband from the stopband.  The filter
should transmit negligible components in the stopband above 4.6\ kHz.
To reduce the harmonic distortion caused by aliasing to the same level
as the quantization noise in 11-bit linear conversion, the stopband
attenuation should be around \-68\ dB (the signal-to-noise ratio for a full-scale
sine wave).  Passband ripple is not so critical,
for two reasons.  Whilst the presence of aliased components means that
information has been lost about the frequency components within the range of
interest, passband ripple does not actually cause a loss of information but
only a distortion, and could, if necessary, be compensated by a suitable
filter acting on the digitized waveform.  Secondly, distortion of the
passband spectrum is not nearly so audible as the frequency images caused
by aliasing.  Hence one usually aims for a passband ripple of around 0.5\ dB.
.pp
The pass and stopband targets we have mentioned above can be achieved with
a 9'th order elliptic filter.  While such a filter is often used in
high-quality signal-processing systems, for telephone-quality speech
much less stringent specifications seem to be sufficient.  Figure 3.8, for
example, shows a template which has been recommended by telecommunications
authorities.
.FC "Figure 3.8"
A 5'th order elliptic filter can easily meet this specification.
Such filters, implemented by switched-capacitor means, are available in
single-chip form.  Integrated CCD (charge-coupled device)
filters which meet the same specification
are also marketed.  Indeed, some codecs provide input filtering on the same
chip as the A/D converter.
.pp
Instead of implementing a filter by analogue means to meet the aliasing
specifications, digital filtering can be used.  A high sample-rate A/D
converter, operating at, say, 32\ kHz, and preceded by a very simple low-pass
pre-sampling filter, is followed by a digital filter which meets the
desired specification, and its output is subsampled to provide an 8\ kHz sample
rate.  While such implementations may be economic where a multichannel digitizing
capability is required, as in local telephone exchanges where the subscriber
connection is an analogue one, they are unlikely to prove cost-effective for
a single channel.
.rh "Reconstructing the analogue waveform."
Having digitized and stored a signal, it needs to be passed though a D/A
converter (digital-to-analogue) and low-pass filter when replayed.
D/A converters are cheaper than A/D converters, and the characteristics of the
low-pass filter for output can be the same as those for input.
However, the desampling operation introduces an additional distortion, which
has an effect on the component at frequency $f$ of
.LB
.EQ
{ sin ( pi f/f sub s )} over { pi f/f sub s } ~ ,
.EN
.LE
where $f sub s$ is the sampling frequency.  An "aperture correction" filter is
needed to compensate for this, although many systems simply do without it.
Such a filter is sometimes incorporated into the codec chip.
.rh "Summary."
For telephone-quality speech, existing codec chips,
coupled if necessary with integrated pre-sampling filters, can
be used, at a remarkably low cost.
For higher-quality speech storage the analogue interface can become quite complex.
A comprehensive study of the problems as they relate to digitization of audio,
which demands much greater fidelity than speech, has been made by Blesser (1978).
.[
Blesser 1978
.]
He notes the following sources of error (amongst others):
.LB
.NP
slew-rate distortion in the pre-sampling filter for signals at the upper end
of the audio band;
.NP
insufficient filtering of high-frequency input signals;
.NP
noise generated by the sample-and-hold amplifier or pre-sampling filter;
.NP
acquisition errors because of the finite settling time of the sample-and-hold
circuit;
.NP
insufficient settling time in the A/D conversion;
.NP
errors in the quantization levels of the A/D and D/A converters;
.NP
noise in the converters;
.NP
jitter on the clock used for timing input or output samples;
.NP
aperture distortion in the output sampler;
.NP
noise in the output filter as a result of limited dynamic range of the
integrated circuits;
.NP
power-supply noise injection or ground coupling;
.NP
changes in characteristics as a result of temperature or ageing.
.LE
Care must be taken with the analogue interface to ensure that the precision
implied by the resolution of the A/D and D/A converters is not compromised
by inadequate analogue circuitry.  It is especially important to eliminate
high-frequency noise caused by fast edges on nearby computer buses.
.sh "3.2  Coding in the time domain"
.pp
There are several methods of coding the time waveform of a speech signal to
reduce the data rate for a given signal-to-noise ratio, or alternatively to
reduce the signal-to-noise ratio for a given data rate.  They almost all require
more processing, both at the encoding (for storage) and decoding (for
regeneration) ends of the digitization process.  They are sometimes used to
economize on memory in systems using stored speech,
for example the System\ X telephone exchange and the travel consultant described
in Chapter 1, and so will be described here.  However, it is to be expected
that simple time-domain coding techniques will be superseded by the more complex
linear predictive method, which is covered in Chapter 6, because this
can give a much more substantial reduction in the data rate for only a small
degradation in speech quality.  Hence the aim of this section is to introduce
the ideas in a qualitative way:  theoretical development and summaries of
results of listening tests can be found elsewhere (eg Rabiner and Schafer, 1978).
.[
Rabiner Schafer 1978 Digital processing of speech signals
.]
The methods we will examine are summarized in Table 3.2.
.RF
.nr x0 \w'linear PCM      'u
.nr x1 \n(x0+\w'    adaptive quantization, or adaptive prediction,'u
.nr x2 (\n(.l-\n(x1)/2
.in \n(x2u
.ta \n(x0u
\l'\n(x1u\(ul'
.sp
linear PCM	linearly-quantized pulse code modulation
.sp
log PCM	logarithmically-quantized pulse code modulation
	    (instantaneous companding)
.sp
APCM	adaptively quantized pulse code modulation
	    (usually syllabic companding)
.sp
DPCM	differential pulse code modulation
.sp
ADPCM	differential pulse code modulation with either
	    adaptive quantization, or adaptive prediction,
	    or both
.sp
DM	delta modulation (1-bit DPCM)
.sp
ADM	delta modulation with adaptive quantization
\l'\n(x1u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 3.2  Time-domain encoding techniques"
.rh "Syllabic companding."
We have already studied one time-domain encoding technique, namely logarithmic
quantization, or log PCM (sometimes called "instantaneous companding").  A more
sophisticated encoder could track slowly varying trends in the overall amplitude
of the speech signal and use this information to adjust the quantization
levels dynamically.  Speech coding methods based on this principle are called
adaptive pulse code modulation systems (APCM).  Because the overall amplitude
changes slowly, it is sufficient to adjust the quantization relatively infrequently
(compared with the sampling rate), and this is often done at rates approximating
the syllable rate of running speech, leading to the term "syllabic companding".
A block floating-point format can be used, with a common exponent being
stored every M samples (with M, say, 125 for a 100\ msec block rate at 8\ kHz
sampling), but the mantissa being stored at the regular sample rate.  The overall
energy in the block,
.LB
$sum from n=h to h+M-1 ~x(n) sup 2$    ($M = 125$, say),
.LE
is used to determine a suitable exponent, and every sample
in the block \(em namely
$x(h)$, $x(h+1)$, ..., $x(h+M-1)$ \(em is scaled according to that exponent.
Note that for speech transmission systems this method necessitates a delay of
$M$ samples at the encoder, and indeed some methods base the exponent on the
energy in the last block to avoid this.  For speech storage, however, the delay
is irrelevant.  A rather different, nonsyllabic, method of adaptive PCM is
continually to change the step size of a uniform quantizer, by multiplying it by
a constant at each sample which is based on the magnitude of the previous code
word.
.pp
Adaptive quantization exploits information about the amplitude of the signal,
and, as a rough generalization, yields a reduction of one bit per sample
in the data rate for telephone-quality speech over ordinary logarithmic
quantization, for a given signal-to-noise ratio.  Alternatively, for the
same data rate an improvement of 6\ dB in signal-to-noise ratio can be obtained.
Some results for actual schemes are given by Rabiner and Schafer (1978).
.[
Rabiner Schafer 1978 Digital processing of speech signals
.]
However, there is other information in the time waveform of speech, namely, the
sample-to-sample correlation, which can be exploited to give further reductions.
.rh "Differential coding."
Differential pulse code modulation (DPCM), in its simplest form, uses the
present speech sample as a prediction of the next one,
and stores the prediction error \(em that is, the sample-to-sample difference.
This is a simple case of predictive encoding.
Referring back to the speech waveform displayed in Figure 3.5,
it seems plausible that the data rate can be reduced by transmitting the difference
between successive samples instead of their absolute values:  less bits are
required for the difference signal for a given overall accuracy because it
does not assume such extreme values as the absolute signal level.
Actually, the improvement is not all that great \(em about 4\ \-\ 5\ dB in
signal-to-noise ratio, or just under one bit per sample for a given
signal-to-noise ratio \(em for the difference signal can be nearly as large as
the absolute signal level.
.pp
If DPCM is used in conjunction with adaptive quantization, giving one form of
adaptive differential pulse code modulation (ADPCM), both the overall amplitude
variation and the sample-to-sample correlation are exploited, leading to a
combined gain of 10\ \-\ 11\ dB in signal-to-noise ratio (or just under two bits
reduction per sample for telephone-quality speech).  Another form of adaptation
is to alter the predictor by multiplying the previous sample value by a
parameter which is adjusted for best performance.
Then the transmitted signal at time $n$ is
.LB
.EQ
e(n) ~~ = ~~ x(n)~ - ~ax(n-1),
.EN
.LE
where the parameter $a$ is adapted (and stored) on a syllabic time-scale.  This
leads to a slight improvement in signal-to-noise ratio, which can be combined
with that achieved by adaptive quantization.  Much more substantial benefits
can be realized by using a weighted sum of the past several (up to 15) speech
samples, and adapting all the weights.  This is the basic idea of linear
prediction, which is developed in Chapter 6.
.rh "Delta modulation."
The coding methods presented so far all increase the complexity of the
analogue-to-digital interface (or, if the sampled waveform is coded
digitally, they increase the processing required before and after storage).
One method which considerably
.ul
simplifies
the interface is the limiting case
of DPCM with just 1-bit quantization.  Only the sign of the difference between
the current and last values is transmitted.  Figure 3.9 shows the conversion
hardware.
.FC "Figure 3.9"
The encoding part is essentially the same as a tracking D/A,
where the value in a counter is forced to track the analogue input by
incrementing or decrementing the counter according as the input exceeds or
falls short of the analogue equivalent of the counter's contents.  However,
for this encoding scheme, called "delta modulation", the increment-decrement
signal itself forms the discrete representation of the waveform, instead of the counter's
contents.  The analogue waveform can be reconstituted from the bit stream with
another counter and D/A converter.  Alternatively, an all-analogue implementation
can be used, both for the encoder and decoder, with a capacitor as integrator
whose charging current is controlled digitally.  This is a much cheaper realization.
.pp
It is fairly obvious that the sampling frequency for delta modulation will need
to be considerably higher than for straightforward PCM.  Figure 3.10 shows
an effect called "slope overload" which occurs when the sampling rate is too low.
.FC "Figure 3.10"
Either a higher sample rate or a larger step size will reduce the overload;
however, larger steps increase the noise level of the alternate 1's and \-1's
that occur when no input is present \(em called "granular noise".  A compromise
is necessary between slope overload and granular noise for a given bit rate.
Delta modulation results in lower data rates than logarithmic quantization
for a given signal-to-noise ratio if that ratio is low (poor-quality speech).
As the desired speech quality is increased its data rate grows faster than
that of logarithmic PCM.  The crossover point occurs at much lower than
telephone quality speech, and so although delta modulation is used for some
applications where the permissible data rate is severely constrained,
it is not really suitable for speech output from computers.
.pp
It is profitable to adjust the step size, leading to
.ul
adaptive
delta modulation.
A common strategy is to increase or decrease the step size by a multiplicative
constant, which depends on whether the new transmitted bit will be equal to
or different from the last one.  That is,
.LB "nnnn"
.NI "nn"
$stepsize(n+1)  =  stepsize(n) times 2$  if $x(n+1)<x(n)<x(n-1)$
or $x(n+1)>x(n)>x(n-1)$
.br
(slope overload condition);
.NI "nn"
$stepsize(n+1) = stepsize(n)/2$  if $x(n+1),~x(n-1)<x(n)$
or $x(n+1),~x(n-1)>x(n)$
.br
(granular noise condition).
.LE "nnnn"
Despite these adaptive equations, the step size should be constrained to
lie between a predetermined fixed maximum and minimum, to prevent it from
becoming so large or so small that rapid accomodation to changing input signals is
impossible.
Then, in a period of potential slope overload the step size will grow, preventing
overload, possibly to its maximum value when overload may resume.  In a quiet
period it will decrease to its minimum value which determines the granular
noise in the idle condition.  Note that the step size need not be stored, for
it can be deduced from the bit changes in the digitized data.  Although
adaptation improves the performance of delta modulation, it is still inferior to
PCM at telephone qualities.
.rh "Summary."
It seems that ADPCM, with
adaptive quantization and adaptive prediction, can provide a worthwhile
advantage for speech storage, reducing the number of bits needed per sample of
telephone-quality speech from 7 for logarithmic PCM to perhaps 5, and the data
rate from 56\ Kbit/s to 40\ Kbit/s.  Disadvantages are additional complexity
in the encoding and decoding processes, and the fact that byte-oriented storage,
with 8 bits/sample in logarithmic PCM, is more convenient for computer use.
For low quality speech where hardware complexity is to be minimized,
adaptive delta modulation could provide worthwhile \(em although the ready
availability of PCM codec chips reduces the cost advantage.
.sh "3.3  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "3.4  Further reading"
.pp
Probably the best single reference on time-domain coding of speech is
the book by Rabiner and Schafer (1978), cited above.
However, this does not contain a great deal of information on practical
aspects of the analogue-to-digital conversion process; this is
covered by Blesser (1978) above, who is especially interested in
high-quality conversion for digital audio applications,
and Garrett (1978) below.
There are many textbooks in the telecommunications area which
are relevant to the subject of the chapter,
although they concentrate primarily on fundamental theoretical aspects rather
than the practical application of the technology.
.LB "nn"
.\"Cattermole-1969-1
.]-
.ds [A Cattermole, K.W.
.ds [D 1969
.ds [T Principles of pulse code modulation
.ds [I Iliffe
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is a standard, definitive, work on PCM, and provides a good grounding
in the theory.
It goes into the subject in much more depth than we have been able to here.
.in-2n
.\"Garrett-1978-1
.]-
.ds [A Garrett, P.H.
.ds [D 1978
.ds [T Analog systems for microprocessors and minicomputers
.ds [I Reston Publishing Company
.ds [C Reston, Virginia
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Garrett discusses the technology of data conversion systems, including
A/D and D/A converters and basic analogue filter design, in a
clear and practical manner.
.in-2n
.\"Inose-1979-2
.]-
.ds [A Inose, H.
.ds [D 1979
.ds [T An introduction to digital integrated communications systems
.ds [I Peter Peregrinus
.ds [C Stevenage, England
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Inose's book is a recent one which covers the whole area of digital
transmission and switching technology.
It gives a good idea of what is happening to the telephone networks
in the era of digital communications.
.in-2n
.\"Steele-1975-3
.]-
.ds [A Steele, R.
.ds [D 1975
.ds [T Delta modulation systems
.ds [I Pentech Press
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Again a standard work, this time on delta modulation techniques.
Steele gives an excellent and exhaustive treatment of the subject from a
communications viewpoint.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "4  SPEECH ANALYSIS"
.ds RT "Speech analysis
.ds CX "Principles of computer speech
.pp
Digital recordings of speech provide a jumping-off point for
further processing of the audio waveform, which is usually necessary for
the purpose of speech output.
It is difficult to synthesize natural sounds by concatenating
individually-spoken words.
Pitch is perhaps the most perceptually significant contextual effect
which must be
taken into account when forming connected speech out of isolated words.
The intonation of an utterance, which manifests itself as a
continually changing pitch, is a holistic property of the utterance
and not the sum of components determined by the individual words alone.
Happily, and quite coincidentally, communications engineers in their quest
for reduced-bandwidth telephony have invented methods of coding speech that
separate the pitch information from that carried by the articulation.
.pp
Although these analysis techniques, which were first introduced in the late
1930's (Dudley, 1939), were originally implemented by analogue means \(em and
in many systems still are (Blankenship, 1978, describes a recent
switched-capacitor realization) \(em there is a continuing trend
towards digital implementations, particularly for the more sophisticated coding
schemes.
.[
Dudley 1939
.]
.[
Blankenship 1978
.]
It is hard to see how the technique of linear prediction of speech,
which is described in detail in Chapter 6, could be accomplished in the
absence of digital processing.
Some groundwork is laid for the theory of digital signal analysis in this
chapter.
The ideas are not presented in a formal, axiomatic way; but are developed as
and when they are needed to examine some of the structures that turn out to be
useful in speech processing.
.pp
Most speech analysis views speech according to the source-filter model which
was introduced in Chapter 2, and aims to separate the effects of the source from
those of the filter.  The frequency spectrum of the vocal tract filter is of
great interest, and the technique of discrete Fourier transformation is
discussed in this chapter.  For many purposes it is better to extract the formant
frequencies from the spectrum and use these alone (or in conjunction with their
bandwidths) to characterize it.  As far as the signal source in the source-filter
model is concerned, its most interesting features are pitch and amplitude \(em the
latter being easy to estimate.  Hence we go on to look at pitch extraction.
Related to this is the problem of deciding whether a segment of speech has
voiced or unvoiced excitation, or both.
.pp
Estimating formant and pitch parameters is one of the messiest areas of
speech processing.  There is a delightful paper which points this out
(Schroeder, 1970), entitled "Parameter estimation in speech: a lesson in unorthodoxy".
.[
Schroeder 1970
.]
It emphasizes that the most successful estimation procedures "have often relied
on intuition based on knowledge of speech signals and their production in the
human vocal apparatus rather than routine applications of well-established
theoretical methods".
Fortunately, the emphasis of the present book is on speech
.ul
output,
which involves parameter estimation only in so far as it is needed to produce
coded speech for storage, and to illuminate the acoustic nature of speech
for the development of synthesis by rule from phonetics or text.
Hence the many methods of formant and pitch estimation are treated rather
cursorily and qualitatively here:  our main interest is in how to
.ul
use
such information for speech output.
.pp
If the incoming speech can be analysed into its formant frequencies, amplitude,
excitation mode, and pitch (if voiced), it is quite easy to resynthesize
it directly from these parameters.  Speech synthesizers are described in the
next chapter.  They can be realized in either analogue or digital
hardware, the former being predominant in production systems and the latter
in research systems \(em although, as in other areas of electronics, the balance
is changing in favour of digital implementations.
.sh "4.1  The channel vocoder"
.pp
A direct representation of the frequency spectrum of a signal can be obtained
by a bank of bandpass filters.  This is the basis of
the
.ul
channel vocoder,
which was the first device that attempted to take advantage of the source-filter
model for speech coding (Dudley, 1939).
.[
Dudley 1939
.]
The word "vocoder" is a contraction
of
.ul
vo\c
ice
.ul
coder.
The energy in each filter band is
estimated by rectification and smoothing, and the resulting approximation to
the frequency spectrum is transmitted or stored.  The source properties are
represented by the type of excitation (voiced or unvoiced), and if voiced,
the pitch.  It is not necessary to include the overall amplitude of the speech
explicitly, because this is conveyed by the energy levels from the separate
bandpass filters.
.pp
Figure 4.1 shows the encoding part of a channel vocoder which has been used
successfully for many years (Holmes, 1980).
.[
Holmes 1980 JSRU channel vocoder
.]
.FC "Figure 4.1"
We will discuss the block labelled "pre-emphasis" shortly.
The shape of the spectrum is estimated by 19 bandpass filters, whose spacing
and bandwidth decrease slightly with decreasing frequency to obtain the rather
greater resolution that is needed in the lower frequency region,
as shown in Table 4.1.
.RF
.nr x0 4n+2.6i+\w'\0\0'u+(\w'bandwidth'/2)
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 4n +1.3i +1.3i
\l'\n(x0u\(ul'
.sp
.nr x1 (\w'channel'/2)
.nr x2 (\w'centre'/2)
.nr x3 (\w'analysis'/2)
	\0\h'-\n(x1u'channel	\0\h'-\n(x2u'centre	\0\0\h'-\n(x3u'analysis
.nr x1 (\w'number'/2)
.nr x2 (\w'frequency'/2)
.nr x3 (\w'bandwidth'/2)
	\0\h'-\n(x1u'number	\0\0\h'-\n(x2u'frequency	\0\0\h'-\n(x3u'bandwidth
.nr x2 (\w'(Hz)'/2)
		\0\h'-\n(x2u'(Hz)	\0\0\h'-\n(x2u'(Hz)
\l'\n(x0u\(ul'
.sp
	\01	\0240	\0120
	\02	\0360	\0120
	\03	\0480	\0120
	\04	\0600	\0120
	\05	\0720	\0120
	\06	\0840	\0120
	\07	1000	\0150
	\08	1150	\0150
	\09	1300	\0150
	10	1450	\0150
	11	1600	\0150
	12	1800	\0200
	13	2000	\0200
	14	2200	\0200
	15	2400	\0200
	16	2700	\0200
	17	3000	\0300
	18	3300	\0300
	19	3750	\0500
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 4.1  Filter specifications for a vocoder analyser (after Holmes, 1980)"
.[
Holmes 1980 JSRU channel vocoder
.]
The 3\ dB points
of adjacent filters are halfway between their centre frequencies, so that there
is some overlap between bands.
The filter characteristics do not need to have very sharp edges, because the energy
in neighbouring bands is fairly highly correlated.  Indeed, there is a
disadvantage in making them too sharp, because the phase delays associated
with sharp cutoff filters induce "smearing" of the spectrum in the time domain.
This particular channel vocoder uses second-order Butterworth bandpass filters.
.pp
For regenerating speech stored in this way, an excitation of unit impulses
at the specified pitch period (for voiced sounds) or white noise (for unvoiced
sounds) is produced and passed through a bank of bandpass filters similar
to the analysis ones.  The excitation has a flat spectrum, for regular impulses
have harmonics at multiples of the repetition frequency which are all of the
same size, and so the spectrum of the output signal is completely determined
by the filter bank.  The gain of each filter is controlled by the stored
magnitude of the spectrum at that frequency.
.pp
The frequency spectrum and voicing pitch of speech change at much slower rates
than the time waveform.  The changes are due to movements of the articulatory
organs (tongue, lips, etc) in the speaker, and so are limited in their speed
by physical constraints.  A typical rate of production of phonemes is 15 per
second, but in fact the spectrum can change quite a lot within a single
phoneme (especially a stop sound).
Between 10 and 25\ msec (100\ Hz and 40\ Hz)
is generally thought to be a satisfactory interval for transmitting or storing
the spectrum, to preserve a reasonably faithful representation of the speech.
Of course, the entire spectrum, as well as the source characteristics, must
be stored at this rate.
The channel vocoder described by Holmes (1980) uses 48 bits to encode
the information.
.[
Holmes 1980 JSRU channel vocoder
.]
Repeated every 20\ msec, this gives a data rate of 2400\ bit/s \(em very
considerably less than any of the time-domain encoding techniques.
.pp
It needs some care to encode the output of 19 filters, the excitation type,
and the pitch into 48 bits of information.  Holmes uses 6 bits for pitch,
logarithmically encoded,
and one bit for excitation type.
This leaves 41 bits to encode the output of the 19 filters, and so a differential
technique is used which transmits just the difference between adjacent
channels \(em for the spectrum does not change abruptly in the frequency domain.
Three bits are used for the absolute level in channel 1, and two bits
for each channel-to-channel difference, giving a total of 39 bits for the whole
spectrum.  The remaining two bits per frame are reserved for signalling or
monitoring purposes.
.pp
A 2400 bit/s channel vocoder degrades the speech in a telephone channel quite
perceptibly.  It is sufficient for interactive communication, where
if you do not understand something you can always ask for it to be repeated.
It is probably not good enough for most voice response applications.
However, the vocoder principle can be used with larger filter banks and much
higher bit rates, and still reduce the data rate substantially below that
required by log PCM.
.sh "4.2  Pre-emphasis"
.pp
There is an
overall \-6\ dB/octave trend in speech radiated from the lips,
as frequency increases.
We will discuss why this is so in the next chapter.
Notice that this trend means that the signal power is reduced
by a factor of 4, or the signal amplitude by a factor of 16, for each
doubling in frequency.
For vocoders, and indeed for other methods of spectral analysis of speech,
it is usually desirable to equalize this by a +6\ dB/octave lift prior to
processing, so that the channel outputs occupy a similar range of levels.
On regeneration, the output speech is passed through an inverse filter which
provides 6\ dB/octave of attenuation.
.pp
For a digital system, such pre-emphasis
can either be implemented as an analogue circuit which precedes the presampling
filter and digitizer, or as a digital operation on the sampled and quantized
signal.  In the former case, the characteristic is usually flat up to a certain
breakpoint, which occurs somewhere between 100\ Hz and 1\ kHz \(em the exact
position does not seem to be critical \(em at which point the +6\ dB/octave lift
begins.  Although de-emphasis on output ought to have an exactly inverse
characteristic, it is sometimes modified or even eliminated altogether in an
attempt to counteract approximately
the  $sin( pi f/f sub s )/( pi f/f sub s )$  distortion
introduced by the desampling operation, which was discussed in an earlier
section.  Above half the sampling frequency, the characteristic of the
pre-emphasis is irrelevant because any effect will be suppressed by the presampling
filter.
.pp
The effect of a 6\ dB/octave lift can also be achieved digitally, by differencing
the input.  The operation
.LB
.EQ
y(n)~~ = ~~ x(n)~ -~ ax(n-1)
.EN
.LE
is suitable, where the constant parameter $a$ is usually chosen between 0.9 and 1.
The latter value gives straightforward differencing, and this amounts to
creating a DPCM signal as input to the spectral analysis.  Figure 4.2 plots
the frequency response of this operation, with a sample frequency of 8\ kHz,
for two values of the parameter; together with that of a 6\ dB/octave lift
above 100\ Hz.
.FC "Figure 4.2"
The vertical positions of the plots have been adjusted to give
the same gain, 20\ dB, at 1\ kHz.
The difference at 3.4\ kHz, the upper end of the telephone spectrum, is just
over 2\ dB.  At frequencies below the breakpoint, in this case 100\ Hz, the
difference between analogue and digital pre-emphasis can be very great.  For
$a=0.9$ the attenuation at DC (zero frequency) is 18\ dB below that at 1\ kHz,
which happens to be close to that of the analogue filter for frequencies below the
breakpoint.  However, if the breakpoint had been at 1\ kHz there would have been
20\ dB difference between the analogue and $a=0.9$ plots at DC.  And of course
the $a=1$ characteristic has infinite attenuation at DC.
In practice, however, the exact form of the pre-emphasis does not seem to be at all
critical.
.pp
The above remarks apply only to voiced speech.  For unvoiced speech there appears
to be no real need for pre-emphasis; indeed, it may do harm by reinforcing
the already large high-frequency components.  There is a case for altering the
parameter $a$ according to the excitation mode of the speech:  $a=1$ for voiced
excitation and $a=0$ for unvoiced gives pre-emphasis just when it is needed.
This can be achieved by expressing the parameter in terms of the autocorrelation
of the incoming signal, as
.LB
.EQ
a ~~ = ~~ R(1) over R(0) ~ ,
.EN
.LE
where $R(1)$ is the correlation of the signal with itself delayed by one sample,
and $R(0)$ is the correlation without delay (that is, the signal variance).
This is reasonable intuitively because high sample-to-sample correlation
is to be expected in voiced speech, so that $R(1)$ is very nearly as great as
$R(0)$ and the ratio becomes 1; whereas little or no sample-to-sample correlation
will be present in unvoiced speech, making the ratio close to 0.  Such a
scheme is reminiscent of ADPCM with adaptive prediction.
.pp
However, this sophisticated pre-emphasis method does not seem to be worthwhile
in practice.  Usually the breakpoint in an analogue pre-emphasis filter is
chosen to be rather greater than 100\ Hz to limit the amplification of fricative
energy.  In fact, the channel vocoder described by Holmes (1980) has the
breakpoint at 1\ kHz, limiting the gain to 12\ dB at 4\ kHz, two octaves above.
.[
Holmes 1980 JSRU channel vocoder
.]
.sh "4.3  Digital signal analysis"
.pp
You may be wondering how the frequency response for the digital pre-emphasis
filters, displayed in Figure 4.2, can be calculated.  Suppose a digitized
sinusoid is applied as input to the filter
.LB
.EQ
y(n) ~~ = ~~ x(n)~ - ~ax(n-1).
.EN
.LE
A sine wave of frequency $f$ has equation  $x(t) ~ = ~ sin ~ 2 pi ft$, and when
sampled at $t=0,~ T,~ 2T,~ ...$ (where $T$ is the sampling interval, 125\ msec for
an 8\ kHz sample rate), this becomes  $x(n) ~ = ~ sin ~ 2 pi fnT.$  It is much
more convenient to consider a complex exponential
input,  $e sup { j2 pi fnT}$  \(em the response to a sinusoid can then be derived
by taking imaginary parts, if necessary.  The output for this input is
.LB
.EQ
y(n) ~~ = ~~ e sup {j2 pi fnT} ~~-~ae sup {j2 pi f(n-1)T} ~~ = ~~
(1~-~ae sup {-j2 pi fT} )~e sup {j2 pi fnT} ,
.EN
.LE
a sinusoid at the same frequency as the input.  The
factor  $1~-~ae sup {-j2 pi fT}$  is complex, with both amplitude and phase
components.  Thus the output will be a phase-shifted and amplified version
of the input.  The amplitude response at frequency $f$ is therefore
.LB
.EQ
|1~ - ~ ae sup {-j2 pi fT} | ~~ = ~~
[1~ +~ a sup 2 ~-~ 2a~cos~2 pi fT ] sup 1/2 ,
.EN
.LE
or
.LB
.EQ
10 ~ log sub 10 (1~ +~ a sup 2 ~ - ~ 2a~ cos 2 pi fT)
.EN
dB.
.LE
Normalizing to 20\ dB at 1\ kHz, and assuming 8\ kHz sampling, yields
.LB
.EQ
20~ + ~~ 10~ log sub 10 (1~ +~ a sup 2 ~-~ 2a~ cos ~ { pi f} over 4000 )
~~ -~ 10~ log sub 10 (1~ +~ a sup 2 ~-~ 2a~ cos ~ pi over 4 )
.EN
dB.
.LE
With $a=0.9$ and 1 this gives the graphs of Figure 4.2.
.pp
Frequency responses for analogue filters are often plotted with a logarithmic
frequency scale, as well as a logarithmic amplitude one, to bring out the
asymptotes in dB/octave as straight lines.  For digital filters the response
is usually drawn on a
.ul
linear
frequency axis extending to half the sampling frequency.  The response is
symmetric about this point.
.pp
Analyses like the above are usually expressed in terms of the $z$-transform.
Denote the unit delay operation by $z sup -1$.  The choice of the inverse rather
than $z$ itself is of course an arbitrary matter, but the convention has stuck.
Then the filter can be characterized
by Figure 4.3, which signifies that the output is the input minus a delayed
and scaled version of itself.
.FC "Figure 4.3"
The transfer function of the filter is
.LB
.EQ
H(z) ~~ = ~~ 1~ -~ az sup -1 ,
.EN
.LE
and we have seen that the effect of the system on a (complex) exponential of
frequency $f$ is to multiply it by
.LB
.EQ
1~ -~ ae sup {-j2 pi fT}.
.EN
.LE
To get the frequency response from the transfer function, replace $z sup -1$
by $e sup {-j2 pi fT}$.  Amplitude and phase responses can then be found by
taking the modulus and angle of the complex frequency response.
.pp
If $z sup -1$ is treated as an
.ul
operator,
it is quite in order to summarize the action of the filter by
.LB
.EQ
y(n) ~~ = ~~ x(n)~ - ~az sup -1 x(n) ~~ = ~~ (1~ -~ az sup -1 )x(n).
.EN
.LE
However, it is usual to derive from the sequence $x(n)$ a
.ul
transform
$X(z)$ upon which $z sup -1$ acts as a
.ul
multiplier.
If the transform of $x(n)$ is defined as
.LB
.EQ
X(z) ~~ = ~~ sum from {n=- infinity} to infinity ~x(n) z sup -n ,
.EN
.LE
then on multiplication by $z sup -1$ we get a new transform, say $V(z)$:
.LB
.EQ
V(z) ~~ = ~~ z sup -1 X(z) ~~ =
~~ z sup -1 sum from {n=- infinity} to infinity ~x(n) z sup -n ~~ =
~~ sum ~x(n)z sup -n-1 ~~ =
~~ sum ~x(n-1)z sup -n .
.EN
.LE
$V(z)$ can also be expressed as the transform of a new sequence, say $v(n)$, by
.LB
.EQ
V(z) ~~ = ~~ sum from {n=- infinity} to infinity ~v(n) z sup -n ,
.EN
.LE
from which it becomes apparent that
.LB
.EQ
v(n) ~~ = ~~ x(n-1).
.EN
.LE
Thus $v(n)$ is a delayed version of $x(n)$, and we have accomplished what we
set out to do, namely to show that the delay
.ul
operator
$z sup -1$ can be treated as an ordinary
.ul
multiplier
in the $z$-transform domain, where $z$-transforms are defined as the infinite
sums given above.
.pp
In terms of $z$-transforms, the filter can be written
.LB
.EQ
Y(z) ~~ = ~~ (1~ -~ az sup -1 )X(z),
.EN
.LE
where $z sup -1$ is now treated as a multiplier.
The transfer function of the filter is
.LB
.EQ
H(z) ~~ = ~~ Y(z) over X(z) ~~ = ~~ 1 - az sup -1 ,
.EN
.LE
the ratio of the output to the input transform.
.pp
It may seem that little has been gained by inventing this rather abstract
notion of transform, simply to change an operator to a multiplier.  After
all, the equation of the filter is no simpler in the transform domain than
it was in the time domain using $z sup -1$ as an operator.  However, we will
need to go on to examine more complex filters.  Consider, for example, the
transfer function
.LB
.EQ
H(z) ~~ = ~~ {1~+~az sup -1 ~+~bz sup -2} over {1~+~cz sup -1 ~+~dz sup -2} ~ .
.EN
.LE
If $z sup -1$ is treated as an operator, it is not immediately obvious how
this transfer function can be realized by a time-domain recurrence relation.
However, with $z sup -1$ as an ordinary multiplier in the transform domain, we can
make purely mechanical manipulations with infinite sums to see what the transfer
function means as a recurrence relation.
.pp
It is worth noting the similarity between the $z$-transform in the discrete
domain and the Fourier and Laplace transforms in the continuous domains.
In fact, the $z$-transform plays an analogous role in digital signal processing
to the Laplace transform in continuous theory, for the delay operator
$z sup -1$
performs a similar service to the differentiation operator $s$.
Recall first the continuous Fourier transform,
.LB
$
G(f) ~~ = ~~
integral from {- infinity} to infinity ~g(t)~e sup {-j2 pi ft} dt
$,    where $f$ is real,
.LE
and the Laplace transform,
.LB
$
F(s) ~~ = ~~
integral from 0 to infinity ~f(t)~e sup -st dt
$,    where $s$ is complex.
.LE
The main difference between these two transforms is that the range of integration
begins at -$infinity$ for the Fourier transform and at 0 for the Laplace.
Advocates of the Fourier transform, which typically include people involved with
telecommunications, enjoy the freedom from initial conditions which is bestowed
by an origin way back in the mists of time.  Advocates of Laplace, including
most analogue filter theorists, invariably
consider systems where all is quiet before $t=0$ \(em altering the origin
of measurement of time to achieve this if necessary \(em and welcome the opportunity
to include initial conditions explicitly
.ul
without
having to worry about what happens in the mists of time.
Although there is a two-sided Laplace transform where the integration begins
at -$infinity$, it is not generally used because it causes some convergence
complications.  Ignoring this difference between the transforms (by considering
signals which are zero when $t<0$), the Fourier spectrum can be found from the
Laplace transform by writing  $s=j2 pi f$; that is, by considering values
of $s$ which lie on the imaginary axis.
.pp
The $z$-transform is
.LB
$
H(z) ~~ = ~~ sum from n=0 to infinity ~h(n)~z sup -n
$,    or    $
H(z) ~~ = ~~ sum from {n=- infinity} to infinity ~h(n)~z sup -n ,
$
.LE
depending on whether a one-sided or two-sided transform is used.  The advantages
and disadvantages of one- and two-sided transforms are the same as in the
analogue case.
$z$ plays the role of $e sup sT $, and so it is not surprising that the response
to a (sampled) sinusoid input can be found by setting
.LB
.EQ
z ~~ = ~~ e sup {j2 pi fT}
.EN
.LE
in $H(z)$, as we proved explicitly above for the pre-emphasis filter.
.pp
The above relation between $z$ and $f$ means that real-valued frequencies correspond
to points where $|z|=1$, that is, the unit circle in the complex $z$-plane.
As you travel anticlockwise around this unit circle, starting from the
point $z=1$, the corresponding frequency increases from 0, to $1/2T$ half-way
round ($z=-1$), to $1/T$ when you get back to the beginning ($z=1$) again.
Frequencies greater than the sampling frequency are aliased back into the
sampling band, corresponding to further circuits of $|z|=1$ with frequency
going from $1/T$ to $2/T$, $2/T$ to $3/T$, and so on.  In fact, this is the circle
of Figure 3.3 which was used earlier to explain how sampling affects the frequency
spectrum!
.sh "4.4  Discrete Fourier transform"
.pp
Let us return from this brief digression into techniques of digital signal
analysis to the problem of determining the frequency spectrum of speech.
Although a bank of bandpass filters such as is used in the channel vocoder
is the perhaps most straightforward way to obtain a frequency spectrum,
there are other techniques which are in fact more commonly used in digital speech
processing.
.pp
It is possible to define the Fourier transform of a discrete sequence of
points.  To motivate the definition, consider first the
ordinary Fourier transform (FT), which is
.LB
$
g(t) ~~ = ~~
integral from {- infinity} to infinity ~G(f)~e sup {+j2 pi ft} df
~~~~~~~~~~~~~~~~
G(f) ~~ = ~~
integral from {- infinity} to infinity ~g(t)~e sup {-j2 pi ft} dt .
$
.LE
This takes a continuous time domain into a continuous frequency domain.
Sometimes you see a normalizing factor $1/2 pi$ multiplying the integral in
either the forward or the reverse transform.  This is only needed
when the frequency variable is expressed in radians/s, and we will find it
more convenient to express frequencies in\ Hz.
.pp
The Fourier series (FS), which should also be familiar to you,
operates on a periodic time waveform (or, equivalently,
one that only exists for a finite period of time, which is notionally extended
periodically).  If a period lies in the time range $[0,b)$, then the transform is
.LB
$
g(t) ~~ = ~~
sum from {r = - infinity} to infinity ~G(r)~e sup {+j2 pi rt/b}
~~~~~~~~~~~~~~~~
G(r) ~~ = ~~ 1 over b ~ integral from 0 to b ~g(t)~e sup {-j2 pi rt/b} dt .
$
.LE
The Fourier series takes a periodic time-domain function into a discrete frequency-domain one.
Because of the basic duality between the time and frequency domains in the
Fourier transforms, it is not surprising that another version of the transform
can be defined which takes a periodic
.ul
frequency\c
-domain function into a
discrete
.ul
time\c
-domain one.
.pp
Fourier transforms can only deal with a finite stretch of a time signal
by assuming that the signal is periodic, for if $g(t)$ is evaluated from
its transform $G(r)$ according to the formula above, and $t$ is chosen outside
the interval $[0,b)$, then a periodic extension of the function $g(t)$ is obtained
automatically.
Furthermore, periodicity in one domain implies discreteness in the other.
Hence if we transform a
.ul
finite
stretch of a
.ul
discrete
time waveform,
we get a frequency-domain representation which is also finite (or, equivalently,
periodic), and discrete.
This is the discrete Fourier transform (DFT),
and takes a discrete periodic time-domain function into a discrete
periodic frequency-domain one as illustrated in Figure 4.4.
.FC "Figure 4.4"
It is defined by
.LB
$
g(n) ~~ = ~~
1 over N ~ sum from r=0 to N-1~G(r)~e sup { + j2 pi rn/N}
~~~~~~~~~~~~~~~~
G(r) ~~ = ~~ sum from n=0 to N-1 ~g(n)~e sup { - j2 pi rn/N} ,
$
.LE
or, writing  $W=e sup {-j2 pi /N}$,
.LB
$
g(n) ~~ = ~~
1 over N ~ sum from r=0 to N-1~G(r)~W sup -rn
~~~~~~~~~~~~~~~~
G(r) ~~ = ~~ sum from n=0 to N-1 ~g(n)~W sup rn .
$
.LE
.sp
The $1/N$ in the first equation is the same normalizing
factor as the $1/b$ in the Fourier series,
for the finite time domain is $[0,N)$
in the discrete case and $[0,b)$ in the Fourier series case.
It does not matter
whether it is written into the forward or the reverse transform, but it is usually
placed as shown above as a matter of convention.
.pp
As illustrated by Figure 4.5, discrete Fourier transforms
take an input of $N$ real values, representing equally-spaced time samples
in the interval $[0,b)$, and produce as output $N$ complex values, representing
equally-spaced frequency samples in the interval $[0,N/b)$.
.FC "Figure 4.5"
Note that the end-point of this frequency interval is the sampling frequency.
It seems odd that the input is real and the output is the same number of
.ul
complex
quantities:  we seem to be getting some numbers for nothing!
However, this isn't so, for it is easy to show that if the input sequence is
real, the output frequency
spectrum has a symmetry about its mid-point (half the sampling frequency).
This can be expressed as
.LB
DFT symmetry:\0\0\0\0\0\0 $
~ mark G( half N +r) ~=~ G( half N -r) sup *$  if $g$ is real-valued,
.LE
where $*$ denotes the conjugate of a complex quantity
(that is, $(a+jb) sup * = a-jb$).
.pp
It was argued above that the frequency spectrum in the DFT is periodic, with
the spectrum from 0 to the sampling frequency being repeated regularly up and
down the frequency axis.  It can easily be seen from the DFT equation that
this is so.  It can be written
.LB
DFT periodicity:$ lineup G(N+r) ~=~ G(r)$  always.
.LE
Figure 4.6 illustrates the properties of symmetry and periodicity.
.FC "Figure 4.6"
.sh "4.5  Estimating the frequency spectrum of speech using the DFT"
.pp
Speech signals are not exactly periodic.  Although the waveform in a particular
pitch period will usually resemble those in the preceding and following pitch
periods, it will certainly not be identical to them.
As the articulation of the speech changes, the formant positions will alter.
As we saw in Chapter 2, the pitch itself is certainly not constant.
Hence the fundamental assumption of the DFT, that the waveform is periodic,
is not really justified.  However, the signal is quasi-periodic, for changes
from period to period will not usually be very great.  One way of computing
the short-term frequency spectrum of speech is to use
.ul
pitch-synchronous
Fourier transformation, where single pitch periods are isolated from the
waveform and processed with the DFT.  This gives a rather accurate estimate
of the spectrum.  Unfortunately, it is difficult to determine the beginning
and end of each pitch cycle, as we shall see later in this chapter when
discussing pitch extraction techniques.
.pp
If a finite stretch of a speech waveform is isolated and Fourier transformed,
without regard to pitch of the speech, then the periodicity assumption will
be grossly violated.  Figure 4.7 illustrates that the effect is the same
as
multiplying the signal by a rectangular
.ul
window function,
which is 0 except during the period to be analysed, where it is 1.
.FC "Figure 4.7"
The windowed sequence will almost certainly have discontinuities at its edges,
and these will affect the resulting spectrum.  The effect can be analysed
quite easily, but we will not do so here.  It is enough to say that the
high frequencies associated with the edges of the window cause considerable
distortion of the spectrum.  The effect can be alleviated by
using a smoother window than a rectangular one,
and several have been investigated extensively.  The commonly-used windows of
Bartlett, Blackman, and Hamming are illustrated in Figure 4.8.
.FC "Figure 4.8"
.pp
Because the DFT produces the same number of frequency samples, equally spaced,
as there were points in the time waveform, there is a tradeoff between
frequency resolution and time resolution (for a given sampling rate).
For example, a 256-point transform with a sample rate of 8\ kHz gives the 256
equally-spaced frequency components between 0 and 8\ kHz that are shown in Table
4.2.
.RF
.nr x0 (\w'time domain'/2)
.nr x1 (\w'frequency domain'/2)
.in+1.0i
.ta 1.0i 3.0i 4.0i
\h'0.5i+2n-\n(x0u'time domain\h'|3.5i+2n-\n(x1u'frequency domain
.sp
sample	time	sample	\h'-3n'frequency
number		number
.nr x0 1i+\w'00000'
\l'\n(x0u\(ul'	\l'\n(x0u\(ul'
.sp
\0\0\00	\0\0\0\00 $mu$sec	\0\0\00	\0\0\0\00 Hz
\0\0\01	\0\0125	\0\0\01	\0\0\031
\0\0\02	\0\0250	\0\0\02	\0\0\062
\0\0\03	\0\0375	\0\0\03	\0\0\094
\0\0\04	\0\0500	\0\0\04	\0\0125
.nr x2 (\w'...'/2)
\h'0.5i+4n-\n(x2u'...\h'|3.5i+4n-\n(x2u'...
\h'0.5i+4n-\n(x2u'...\h'|3.5i+4n-\n(x2u'...
\h'0.5i+4n-\n(x2u'...\h'|3.5i+4n-\n(x2u'...
.sp
\0254	31750	\0254	\07938
\0255	31875 $mu$sec	\0255	\07969 Hz
\l'\n(x0u\(ul'	\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.MT 2
Table 4.2  Time domain and frequency domain samples for a 256-point DFT,
with 8\ kHz sampling
.TE
The top half of the frequency spectrum is of no interest, because
it contains the complex conjugates of the bottom half (in reverse order),
corresponding to frequencies greater than half the sampling frequency.
Thus for a 30\ Hz resolution in the frequency domain,
256 time samples, or a 32\ msec stretch of speech, needs to be transformed.
A common technique is to take overlapping periods in the time domain to
give a new frequency spectrum every 16\ msec.  From the acoustic point
of view this is a reasonable rate to re-compute the spectrum, for as noted
above when discussing channel vocoders the rate of change in the spectrum
is limited by the speed that the speaker can move his vocal organs, and
anything between 10 and 25\ msec is a reasonable figure for transmitting
or storing the spectrum.
.pp
The DFT is a complex transform, and speech is a real signal.  It is possible
to do two DFT's at once by putting one time waveform into the real parts
of the input and another into the imaginary parts.  This destroys the DFT
symmetry property, for it only holds for real inputs.  But given the DFT
of a complex sequence formed in this way, it is easy to separate out the
DFT's of the two real time sequences.  If the two time sequences are
$x(n)$ and $y(n)$, then the transform of the complex sequence
.LB
.EQ
g(n) ~~ = ~~ x(n) ~+~ jy(n)
.EN
.LE
is
.LB
.EQ
G(r) ~~ = ~~ sum from n=0 to N-1 ~[x(n)W sup rn ~+~ y(n)W sup rn ] .
.EN
.LE
It follows that the complex conjugate of the aliased parts of the spectrum,
in the upper frequency region, are
.LB
.EQ
G(N-r) sup * ~~ = ~~ sum from n=0 to N-1 ~[x(n)W sup -(N-r)n
~-~ y(n)W sup -(N-r)n ] ,
.EN
.LE
and this is the same as
.LB
.EQ
G(N-r) sup * ~~ = ~~ sum from n=0 to N-1 ~[x(n)W sup rn
~-~ y(n)W sup rn ] ,
.EN
.LE
because $W sup N$ is 1 (recall the definition of $W$),
and so $W sup -Nn$ is 1 for any $n$.
Thus
.LB
.EQ
X(r) ~~ = ~~ {G(r) ~+~ G(N-r) sup * } over 2
~~~~~~~~~~~~~~~~
Y(r) ~~ = ~~ {G(r) ~-~ G(N-r) sup * } over 2
.EN
.LE
extracts the transforms $X(r)$ and $Y(r)$ of the original sequences
$x$ and $y$.
.pp
With speech, this trick is frequently used to calculate two spectra at once.
Using 256-point transforms, a new estimate of the spectrum can be obtained
every 16\ msec by taking overlapping 32\ msec stretches of speech, with a
computational requirement of one 256-point transform every 32\ msec.
.sh "4.6  The fast Fourier transform"
.pp
Straightforward calculation of the DFT, expressed as
.LB
.EQ
G(r) ~~ = ~~ sum from n=0 to N-1 ~g(n)~W sup nr ,
.EN
.LE
for $r=0,~ 1,~ 2,~ ...,~ N-1$, takes $N sup 2$ operations, where each operation
is a complex multiply and add (for $W$ is, of course, a complex number).
There is a better way, invented in the early sixties, which reduces this to
$N ~ log sub 2 N$ operations \(em a very considerable improvement.
Dubbed the "fast Fourier transform" (FFT) for historical reasons, it would actually
be better called the "Fourier transform", with the straightforward method above
known as the "slow Fourier transform"!  There
is no reason nowadays to use the slow method, except for tiny transforms.
It is worth describing the basic principle of the FFT, for it is surprisingly
simple.  More details on actual implementations can be found in Brigham (1974).
.[
Brigham 1974
.]
.pp
It is important to realize that the FFT involves no approximation.
It is an
.ul
exact
calculation of the values that would be obtained by the slow method
(although it may be affected differently by round-off errors).
Problems of aliasing and windowing occur in all discrete Fourier transforms,
and they are neither alleviated nor exacerbated by the FFT.
.pp
To gain insight into the working of the FFT, imagine the sequence $g(n)$ split
into two halves, containing the even and odd points
respectively.
.LB
even half $e(n)$ is $g(0)~ g(2)~ .~ .~ .~ g(N-2)$
.br
odd  half $o(n)$ is $g(1)~ g(3)~ .~ .~ .~ g(N-1)$.
.LE
Then it is easy to show that if $G$ is the transform of $g$,
$E$ the transform of $e$,
and $O$ that of $o$, then
.LB
$
G(r) ~~ = ~~ E(r) ~+~ W sup r O(r)$  for  $r=0,~ 1,~ ...,~ half N -1$,
.LE
and
.LB
$
G( half N +r ) ~~ = ~~ E(r) ~+~ W sup { half N +r} O(r)$  for  $
r = 0,~ 1,~ ...,~ half N -1$.
.LE
Calculation of the $E$ and $O$ transforms involves $( half N) sup 2$ operations each,
while combining them together according to the above relationship occupies
$N$ operations.  Thus the total is  $N + half N sup 2 $  operations, which is considerably
less than $N sup 2$.
.pp
But don't stop there!  The even half can itself be broken down into
even and odd parts to expedite its calculation, and the same with the odd half.
The only constraint is that the number of elements in the sequences splits
exactly into two at each stage.
Providing $N$ is a power of 2, then, we are left at the end with some 1-point
transforms to do.  But transforming a single point leaves it unaffected!  (Check
the definition of the DFT.)  A quick calculation shows that the number of operations
needed is not  $N + half N sup 2$, but $N~ log sub 2 N$.
Figure 4.9 compares this with $N sup 2$, the number of operations for
straightforward DFT calculation, and it can be seen that the FFT is very much
faster.
.FC "Figure 4.9"
.pp
The only restriction on the use of the FFT is that $N$ must be a power of two.
If it is not, alternative, more complicated, algorithms can be used which
give comparable computational advantages.  However, for speech processing
the number of samples that are transformed is usually arranged to be a power
of two.  If a pitch synchronous analysis is undertaken, the
time stretch that is to be transformed is dictated by the length of the pitch
period, and will vary from time to time.  Then, it is usual to pad out the
time waveform with zeros to bring the number of samples up to a power of two;
otherwise, if different-length time stretches were transformed the scale
of the resulting frequency components would vary too.
.pp
The FFT provides very worthwhile cost savings over the use of a bank of
bandpass filters for spectral analysis.  Take the example of a 256-point
transform with 8\ kHz sampling, giving 128 frequency components spaced
by 31.25\ Hz from 0 up to almost 4\ kHz.  This can be computed on overlapping
32\ msec stretches of the time waveform, giving a new spectrum every 16\ msec,
by a single FFT calculation every 32\ msec (putting successive pairs of
time stretches in the real and imaginary parts of the complex input sequence,
as described earlier).  The FFT algorithm requires $N~ log sub 2 N$ operations,
which is 2048 when $N=256$.  An additional 512 operations are required
for the windowing calculation.  Repeated every 32\ msec, this gives
a rate of 80,000 operations per second.  To achieve a much lower frequency
resolution with 20 bandpass filters, each of which are fourth-order,
will need a great deal more operations.  Each filter will need between 4 and 8
multiplications per sample, depending on its exact digital implementation.  But new
samples appear every 125
.ul
micro\c
seconds, and so somewhere around a million
operations will be required every second.
If we increased the frequency resolution to that obtained by the FFT, 128
filters would be needed, requiring between 4 and 8 million operations!
.sh "4.7  Formant estimation"
.pp
Once the frequency spectrum of a speech signal has been calculated, it may
seem a simple matter to estimate the positions of the formants.  But it is
not!  Spectra obtained in practice are not usually like the idealized ones
of Figure 2.2.  One reason for this is that, unless the analysis is
pitch-synchronous, the frequency spectrum of the excitation source is mixed
in with that of the vocal tract filter.  There are other reasons, which will
be discussed later in this section.  But first, let us consider how to
extract the vocal tract filter characteristics from the combined spectrum
of source and filter.  To do so we must begin to explore the theory of linear
systems.
.rh "Discrete linear systems."
Figure 4.10 shows an input signal exciting a filter to produce an output
signal.
.FC "Figure 4.10"
For present purposes, imagine the input to be a glottal
waveform, the filter a vocal tract one, and the output a
speech signal (which is then subjected to high-frequency de-emphasis
by radiation from the lips).
We will consider here
.ul
discrete
systems, so that the input $x(n)$ and output $y(n)$ are sampled signals,
defined only when $n$ is integral.  The theory is quite similar for continuous
systems.
.pp
Assume that the system is
.ul
linear,
that is, if input $x sub 1 (n)$ produces output $y sub 1 (n)$ and
input $x sub 2 (n)$ produces output $y sub 2 (n)$,
then the sum of $x sub 1 (n)$ and
$x sub 2 (n)$ will produce the sum of $y sub 1 (n)$ and $y sub 2 (n)$.
It is easy to show from this that, for any constant multiplier $a$,
the input $ax(n)$ will produce output $ay(n)$ \(em it is pretty obvious
when $a=2$,
or indeed any positive integer; for then $ax(n)$ can be written as
$x(n)+x(n)+...$ .
Assume further that the system is
.ul
time-invariant,
that is, if input $x(n)$
produces output $y(n)$ then a time-shifted version of $x$,
say $x(n+n sub 0 )$ for
some constant $n sub 0$, will produce the same output, only time-shifted; namely
$y(n+n sub 0)$.
.pp
Now consider the discrete delta function $delta (n)$, which is 0 except at
$n=0$ when it is 1.
If this single impulse is presented as input to the system, the output is called
the
.ul
impulse response,
and will be denoted by $h(n)$.
The fact that the system is time-invariant guarantees that the response does
not depend upon the particular time at which the impulse occurred, so that,
for example, the impulsive input $delta (n+n sub 0 )$ will produce output
$h(n+n sub 0 )$.
A delta-function input and corresponding impulse response are shown in Figure
4.10.
.pp
The impulse response of a linear, time-invariant system is an extremely useful
thing to
know, for it can be used to calculate the output of the system for any input
at all!  Specifically, an input signal $x(n)$ can be written
.LB
.EQ
x(n)~ = ~~ sum from {k=- infinity} to infinity ~ x(k) delta (n-k) ,
.EN
.LE
because $delta (n-k)$ is non-zero only when $k=n$, and so for any
particular value of $n$, the summation contains only
one non-zero term \(em that is, $x(n)$.
The action of the system on each term of the sum is to produce an output
$x(k)h(n-k)$, because $x(k)$ is just a constant, and
the system is linear.
Furthermore, the complete input $x(n)$ is just the sum of such terms, and since
the system is linear, the output is the sum of $x(k)h(n-k)$.
Hence the response of the system to an arbitrary input is
.LB
.EQ
y(n)~ = ~~ sum from {k=- infinity} to infinity ~ x(k) h(n-k) .
.EN
.LE
This is called a
.ul
convolution sum,
and is sometimes written
.LB
.EQ
y(n)~ =~ x(n) ~*~ h(n).
.EN
.LE
.pp
Let's write this in terms of $z$-transforms.  The (two-sided) $z$-transform of y(n)
is
.LB
.EQ
Y(z)~ = ~~ sum from {n=- infinity} to infinity ~y(n)z sup -n ~~ =
~~ sum from n ~ sum from k ~x(k)h(n-k) ~z sup -n ,
.EN
.LE
Writing $z sup -n$ as  $z sup -(n-k) z sup -k$,  and interchanging the order
of summation, this becomes
.LB
.EQ
Y(z)~ mark = ~~ sum from k ~[~ sum from n ~ h(n-k)z sup -(n-k) ~]~x(k)z sup -k
.EN
.br
.EQ
lineup = ~~ sum from k ~H(z)~z sup -k ~~ = ~~ H(z)~ sum from k ~x(k)z sup
-k ~~=~~H(z)X(z) .
.EN
.LE
Thus convolution in the time domain is the same as multiplication in the
$z$-transform domain; a very important result.  Applied to the linear system of
Figure 4.10, this means that the output $z$-transform is the input $z$-transform
multiplied by the $z$-transform of the system's impulse response.
.pp
What we really want to do is to relate the frequency spectrum of
the output to the response of the system and the spectrum of the
input.
In fact, frequency spectra are very closely connected with $z$-transforms.  A
periodic signal $x(n)$ which repeats every $N$ samples has DFT
.LB
.EQ
sum from n=0 to N-1 ~x(n)~e sup {-j2 pi rn/N} ,
.EN
.LE
and its $z$-transform is
.LB
.EQ
sum from {n=- infinity} to infinity ~x(n) ~z sup -n .
.EN
.LE
Hence the DFT is the same as the $z$-transform of a single cycle of the signal,
evaluated at the points  $z= e sup {j2 pi r/N}$  for $r=0,~ 1,~ ...~ ,~ N-1$.
In other
words, the frequency components are samples of the $z$-transform at $N$
equally-spaced points around the unit circle.
Hence the frequency spectrum at the output of a linear system is the product of
the
input spectrum and the frequency response of the system itself (that is, the
transform of its impulse response function).
It should be admitted that this statement is somewhat questionable,
because to get from $z$-transforms to DFT's we have assumed that
a single cycle only is transformed \(em and the impulse response function of
a system is not necessarily periodic.  The real action of the system is
to multiply $z$-transforms, not DFT's.  However, it is useful in imagining
the behaviour of the system to think in terms of products of DFT's; and in
practice it is always these rather than $z$-transforms which are computed
because of the existence of the FFT algorithm.
.pp
Figure 4.11 shows the frequency spectrum of a typical voiced speech signal.
.FC "Figure 4.11"
The overall shape shows humps at the formant positions, like those in the
idealized Figure 2.2.  However, superimposed on this is an "oscillation"
(in the frequency domain!) at the pitch frequency.  This occurs because the
transform of the vocal tract filter has been multiplied by that of the
pitch pulse, the latter having components at harmonics of the pitch frequency.
The oscillation must be suppressed before the formants
can be estimated to any degree of accuracy.
.pp
One way of eliminating the oscillation is to perform pitch-synchronous
analysis.
This removes the influence of pitch from the frequency domain by dealing with
it in the time domain!  The snag is, of course, that it is not easy to estimate
the pitch frequency:  some techniques for doing so are discussed in the next
main section.
Another way is to use linear predictive analysis, which really does get rid
of pitch information without having to estimate the pitch period first.  A
smooth
frequency spectrum can be produced using the analysis techniques described in
Chapter 6, which provides
a suitable starting-point for formant frequency estimation.
The third method is to remove the pitch ripple from the frequency spectrum
directly.  This will be discussed in an intuitive rather than a
theoretical way, because linear predictive methods are becoming dominant
in speech processing.
.rh "Cepstral processing of speech."
Suppose the frequency spectrum of Figure 4.11 were actually a time waveform.
To remove the high-frequency pitch ripple is easy:  just filter it out!
However,
filtering removes
.ul
additive
ripples, whereas this is a
.ul
multiplicative
ripple.  To turn multiplication into addition, take logarithms.  Then the
procedure would be
.LB
.NP
compute the DFT of the speech waveform (windowed, overlapped);
.NP
take the logarithm of the transform;
.NP
filter out the high-frequency part, corresponding to pitch ripple.
.LE
.pp
Filtering is often best done using the DFT.  If the rippled waveform of Figure
4.11 is transformed, a strong component could be expected at the ripple
frequency, with weaker ones at its harmonics.  These components can be
simply removed by setting them to zero, and inverse-transforming the result
to give a smoothed version of the original frequency spectrum.
A spectrum of the logarithm of a frequency spectrum is often called a
.ul
cepstrum
\(em a sort of backwards spectrum.  The horizontal axis of the cepstrum,
having the dimension of time, is called "quefrency"!  Note that high-frequency
signals have low quefrencies and vice versa.  In practice,
because the pitch ripple is usually well above the quefrency of interest for
formants, the upper end of the cepstrum is often simply cut off from a fixed
quefrency which corresponds to the maximum pitch expected.  However, identifying
the pitch peaks of the cepstrum has the useful byproduct of giving the pitch
period of the original speech.
.pp
To summarize, then, the procedure for spectral smoothing by the cepstral method
is
.LB
.NP
compute the DFT of the speech waveform (windowed, overlapped);
.NP
take the logarithm of the transform;
.NP
take the DFT of this log-transform, calling it the cepstrum;
.NP
identify the lowest-quefrency peak in the spectrum as the pitch,
confirming it by examining its harmonics, which should be
equally spaced at the pitch quefrency;
.NP
remove pitch effects from the cepstrum by cutting off its high-quefrency
part above either the pitch quefrency or some constant representing the maximum
expected pitch (which is the minimum expected pitch quefrency);
.NP
inverse DFT the resulting cepstrum to give a smoothed spectrum.
.LE
.rh "Estimating formant frequencies from smoothed spectra."
The difficulties of formant extraction are not over even when a smooth frequency
spectrum has been obtained.  A simple peak-picking algorithm which identifies
a peak at the $k$'th frequency component whenever
.LB
$
X(k-1) ~<~ X(k)
$  and  $
X(k) ~>~ X(k+1)
$
.LE
will quite often identify formants incorrectly.
It helps to specify in advance minimum and maximum formant frequencies \(em say
100\ Hz and 3\ kHz for three-formant identification, and ignore peaks lying
outside these limits.  It helps to estimate
the bandwidth of the peaks and reject those with bandwidths greater than
500\ Hz \(em for real formants are never this wide.  However, if two formants are
very close, then they may appear as a single, wide, peak and be rejected by
this criterion.  It is usual to take account of formant positions identified
in previous frames under these conditions.
.pp
Markel and Gray (1976) describe in detail several estimation algorithms.
.[
Markel Gray 1976 Linear prediction of speech
.]
Their simplest uses the number of peaks identified in the raw spectrum
(under 3\ kHz, and with
bandwidths greater than 500\ Hz), to determine what to do.  If exactly three
peaks are found, they are used as the formant positions.  It is claimed that
this happens about 85% to 90% of the time.
If only one peak is found, the present frame is ignored and the
previously-identified
formant positions are used (this happens less than 1% of the time).
The remaining cases are two peaks \(em corresponding to omission of one formant \(em
and four peaks \(em corresponding to an extra formant being included.  (More
than
four peaks never occurred in their data.)  Under these conditions,
a nearest-neighbour measure is used for disambiguation.  The measure is
.LB
.EQ
v sub ij ~ = ~ |{ F sup * } sub i (k) ~-~ F sub j (k-1)| ,
.EN
.LE
where $F sub j sup (k-1)$ is the $j$'th formant frequency defined
in the previous frame
$k-1$ and ${ F sup * } sub i (k)$ is the $i$'th raw data frequency estimate
for frame $k$.
If two peaks only are found, this measure is used to identify
the closest peaks in the previous frame; and then the
third peak of that frame is taken to be the missing formant
position.  If four peaks are found, the measure is used to
determine which of them is furthest from the previous formant
values, and this one is discarded.
.pp
This procedure works forwards, using the previous frame to
disambiguate peaks given in the current one.  More sophisticated
algorithms work backwards as well, identifying
.ul
anchor points
in the data which have clearly-defined formant positions, and
moving in both directions from these to disambiguate
neighbouring frames of data.  Finally, absolute limits can be
imposed upon the magnitude of formant movements between frames
to give an overall smoothing to the formant tracks.
.pp
Very often, people will refine the result of such automatic formant
estimation procedures by hand, looking at the tracks, knowing
what was said, and making adjustments in the light of their
experience of how formants move in speech.  Unfortunately, it is difficult to
obtain high-quality formant tracks by completely automatic
means.
.pp
One of the most difficult cases in formant estimation is where
two formants are so close together that the individual peaks
cannot be resolved.  One simple solution to this problem is to
employ "analysis-by-synthesis", whereby once a formant is
identified, a standard formant shape at this position is
synthesized and
subtracted from the
logarithmic spectrum (Coker, 1963).
.[
Coker 1963
.]
Then, even if two formants
are right on top of each other, the second is not missed because
it remains after the first one has been subtracted.
.pp
Unfortunately, however, the single peak which appears when
two formants are close together usually does not correspond exactly with the
position of either one.
There is one rather advanced signal-processing technique that
can help in this case.
The frequency spectrum of
speech is determined by
.ul
poles
which lie in the complex $z$-plane inside the unit circle.  (They
must be inside the unit circle if the system is stable.  Those
familiar with Laplace analysis of analogue systems may like to note that the
left half of the $s$-plane corresponds with the inside of the unit
circle in the $z$-plane.)  As shown earlier, computing a DFT is tantamount to
evaluating the $z$-transform at equally-spaced points around the
unit circle.  However, better resolution is obtained by
evaluating around a circle which lies
.ul
inside
the unit circle, but
.ul
outside
the outermost pole position.  Such a circle is sketched in
Figure 4.12.
.FC "Figure 4.12"
.pp
Recall that the FFT is a fast way of calculating the DFT of a
sequence.  Is there a similarly fast way of evaluating the
$z$-transform inside the unit circle?  The answer is yes, and the
technique is known as the "chirp $z$-transform", because it
involves considering a signal whose frequency increases
linearly \(em just like a radar chirp signal.  The chirp method
allows the $z$-transform to be computed quickly at equally-spaced
points along spirally-shaped contours around the origin of the
$z$-plane \(em corresponding to signals of linearly increasing
complex frequency.  The spiral nature of these curves is not of
particular interest in speech processing.  What
.ul
is
of interest, though, is that the spiral can begin at any point
on
the $z=0$ axis, and its pitch can be set arbitrarily.
If we begin spiralling at $z=0.9$, say, and set the pitch
to zero, the contour becomes a circle inside the unit one, with
radius 0.9.  Such a circle is exactly what is needed to refine
formant resolution.
.sh "4.8  Pitch extraction"
.pp
The last section discussed how to characterize the vocal tract filter
in the source-filter model of speech production:  this one looks
at how the most important property of the source \(em that is, the
pitch period \(em can be derived.  In many ways pitch extraction
is more important from a practical point of view than is formant
estimation.  In a voice-output system, formant estimation is
only necessary if speech is to be stored in formant-coded form.
For linear predictive storage of speech, or for speech synthesis
from phonetics or text, formant extraction is unnecessary \(em
although of course general information about formant
frequencies and formant tracks in natural speech is needed
before a synthesis-from-phonetics system can be built.
However, knowledge of the pitch contour is needed for
many different purposes.  For example, compact encoding of
linearly predicted speech relies on the pitch being estimated and
stored as a parameter separate from the articulation.
Significant improvements in frequency analysis can be made by
performing pitch-synchronous Fourier transformations,
because the need to window is eliminated.
Many synthesis-from-phonetics systems require the pitch contour
for utterances to be stored rather computed from markers in the
phonetic text.
.pp
Another issue which is closely bound up with pitch extraction is
the voiced-unvoiced distinction.   A good pitch estimator ought to
fail when presented with aperiodic input such as an unvoiced
sound, and so give a reliable indication of whether the frame of
speech is voiced or not.
.pp
One method of pitch estimation, which uses the cepstrum, has been outlined
above.  It involves a substantial amount of computation,
and has a high degree of complexity.  However, if implemented
properly it gives excellent results, because the source-filter
structure of the speech is fully utilized.
Another method, using the
linear prediction residual, will be described in Chapter 6.
Again, this requires a great deal of computation of a fairly sophisticated
nature, and gives good results \(em although it relies on a
somewhat more
restricted version of the source-filter model than cepstral
analysis.
.rh "Autocorrelation methods."
The most reliable way of estimating the pitch of a periodic
signal which is corrupted by noise is to examine its
short-time autocorrelation function.
The autocorrelation of a signal $x(n)$ with lag $k$ is defined as
.LB
.EQ
phi (k) ~~ = ~~ sum from {n=- infinity} to infinity ~ x(n)x(n+k) .
.EN
.LE
If the signal is quasi-periodic, with slowly varying period,
a finite stretch of it can be isolated with a window
$w(i)$, which is 0 when $i$ is outside the range $[0,N)$.
Beginning this window at sample $m$ gives the windowed signal
.LB
.EQ
x(n)w(n-m),
.EN
.LE
whose autocorrelation,
the
.ul
short-time
autocorrelation of the signal $x$ at point $m$ is
.LB
.EQ
phi sub m (k)~ = ~~ sum from n ~ x(n)w(n-m)x(n+k)w(n-m+k) .
.EN
.LE
.pp
The autocorrelation function exhibits peaks at lags which correspond to
the pitch periods and multiples of it.  At such lags, the signal is in
phase with a delayed version of itself, giving high correlation.
The pitch of natural speech ranges about three octaves, from 50\ Hz (low-pitched men) to around
400\ Hz (children).  To ensure that at least two pitch cycles are seen, even at
the
low end, the window needs to be at least 40\ msec long, and the autocorrelation
function calculated for lags up to 20\ msec.  The peaks which occur at lags
corresponding to multiples of the pitch become smaller as the multiple
increases, because the speech waveform will change slightly and the pitch
period is not perfectly constant.  If signals at the high end of the pitch
range, 400\ Hz, are
viewed through a 40\ msec autocorrelation window, considerable smearing of
pitch resolution in the time domain is to be expected.  Finally, for unvoiced
speech, no substantial peaks of autocorrelation will occur.
.pp
If all deviations from perfect periodicity can be attributed to
additive, white, Gaussian noise, then it can be shown from
standard detection theory that autocorrelation methods are
appropriate for pitch identification.  Unfortunately, this is
certainly not the case for speech signals.  Although the
short-time autocorrelation of voiced speech exhibits peaks at
multiples of the pitch period, it is not clear that it is any
easier to detect these peaks in the autocorrelation function
than it is in the original time waveform!  To take a simple
example, if a signal contains a fundamental and in-phase first
and second harmonics,
.LB
.EQ
x(n)~ =~ a sin 2 pi fnT ~+~ b sin 4 pi fnT ~+~ c sin 6 pi fnT ,
.EN
.LE
then its autocorrelation function is
.LB
.EQ
phi (k) ~=~~ {a sup 2 ~cos~2 pi fkT~+~b sup 2 ~cos~2 pi
fkT~+~c sup 2 ~cos 2 pi fkT} over 2 ~ .
.EN
.LE
There is no reason to believe that detection of the fundamental
period of this signal will be any easier in the autocorrelation
domain than in the time domain.
.pp
The most common error of pitch detection by autocorrelation
analysis is that the periodicities of the formants are confused
with the pitch.  This typically leads to the repetition time
being identified as  $T sub pitch ~ +- ~ T sub formant1$,  where the
$T$'s are the periods of the pitch and first formant.  Fortunately,
there are simple ways of processing the signal non-linearly to
reduce the effect of formants on pitch estimation using autocorrelation.
.pp
One way
is to low-pass filter the
signal with a cut-off above the maximum pitch period, say 600
Hz.  However, formant 1 is often below this value.  A different
technique, which may be used in conjunction with filtering, is
to "centre-clip" the signal as shown in Figure 4.13.
.FC "Figure 4.13"
This
removes many of
the ripples which are associated with formants.  However, it
entails the use of an adjustable clipping threshold to cater for
speech of varying amplitudes.  Sondhi (1968), who introduced the
technique, set the clipping level at 30% of the maximum
amplitude.
.[
Sondhi 1968
.]
An alternative which achieves
much the same effect without the need to fiddle with thresholds,
is to cube the signal, or raise it to some other high (odd!)
power, before taking the autocorrelation.  This highlights the
peaks and suppresses the effect of low-amplitude parts.
.pp
For very accurate pitch detection, it is best to combine the evidence
from several different methods of analysis of the time waveform.
The autocorrelation function provides one source of evidence;
and the cepstrum provides another.
A third source comes from the time waveform itself.
McGonegal
.ul
et al
(1975) have described a semi-automatic method of pitch
detection which uses human judgement to make a final decision based upon these
three sources of evidence.
.[
McGonegal Rabiner Rosenberg 1975 SAPD
.]
This appears to provide highly accurate pitch contours at the expense of
considerable human effort \(em it takes an experienced user 30 minutes to
process each second of speech.
.rh "Speeding up autocorrelation."
Calculating the autocorrelation function is an
arithmetic-intensive procedure.  For large lags, it can best be
done using FFT methods; although there are simpler arithmetic
tricks which speed it up without going to such complexity.
However, with the availability of analogue delay lines using
charge-coupled devices, autocorrelation can now be done
effectively and cheaply by analogue, sampled-data, hardware.
.pp
Nevertheless, some techniques to speed up digital
calculation of short-time autocorrelations are in wide use.  It
is tempting to hard-limit the signal so that it becomes binary
(Figure 4.14(a)), thus eliminating multiplication.
.FC "Figure 4.14"
This can be
disastrous, however, because hard-limited speech is known to
retain considerable intelligibility and therefore the formant
structure is still there.  A better plan is to take
centre-clipped speech and hard-limit that to a ternary signal
(Figure 4.14(b)).  This simplifies the computation considerably
with essentially no degradation in performance (Dubnowski
.ul
et al,
1976).
.[
Dubnowski Schafer Rabiner 1976 Digital hardware pitch detector
.]
.pp
A different approach to reducing the amount of calculation is to
perform a kind of autocorrelation which does not use
multiplications.  The
"average magnitude difference function",
which is defined by
.LB
.EQ
d(k)~ = ~~ sum from {n=- infinity} to infinity ~ |x(n)-x(n+k)| ,
.EN
.LE
has been used for this purpose with some success (Ross
.ul
et al,
1974).
.[
Ross Schafer Cohen Freuberg Manley 1974
.]
It exhibits dips at pitch periods (instead of the peaks of the
autocorrelation function).
.rh "Feature-extraction methods."
Another possible way of extracting pitch in the time domain is to try to
integrate information from different sources to give reliable
pitch estimates.  Several features of the time
waveform can be defined, each of which provides an estimate of the pitch period,
and
an overall estimate can be obtained by majority vote.
.pp
For example, suppose that the only feature of the speech
waveform which is retained is the height and position of the
peaks, where a "peak" is defined by the simplistic criterion
.LB
$
x(n-1) ~<~ x(n)
$  and  $
x(n) $>$ x(n+1) .
$
.LE
Having found a peak which is thought to represent a pitch pulse,
one could define a "blanking period", based upon the current
pitch estimate, within which the next pitch pulse could not
occur.  When this period has expired, the next pitch pulse is
sought.  At first, a stringent criterion should be used for
identifying the next peak as a pitch pulse; but it can gradually be
relaxed if time goes on without a suitable pulse being
located.  Figure 4.15 shows a convenient way of doing this:  a
decaying exponential is begun at the end of the blanking period
and when a peak shows above, it is identified as a pitch pulse.
.FC "Figure 4.15"
One big advantage of this type of algorithm is that the data is
greatly reduced by considering peaks only \(em which can be
detected by simple hardware.  Thus it can permit real-time
operation on a small processor with minimal special-purpose
hardware.
.pp
Such a pitch pulse detector is exceedingly simplistic, and will
often identify the pitch incorrectly.  However, it can be used
in conjunction with other features to produce good pitch
estimates.  Gold and Rabiner (1969), who pioneered the
approach, used six features:
.[
Gold Rabiner 1969 Parallel processing techniques for pitch periods
.]
.LB
.NP
peak height
.NP
valley depth
.NP
valley-to-peak height
.NP
peak-to-valley depth
.NP
peak-to-peak height (if greater than 0)
.NP
valley-to-valley depth (if greater than 0).
.LE
The features are symmetric with regard to peaks and valleys.
The first feature is the one described above, and the second one works in
exactly the same way.
The third feature records the
height between each valley and the succeeding peak, and fourth
uses the depth between each peak and the succeeding valley.  The
purpose of the final two detectors is to eliminate secondary,
but rather large, peaks from consideration.  Figure 4.16 shows
the kind of waveform on which the other features might
incorrectly double the pitch, but the last two features identify
correctly.
.FC "Figure 4.16"
.pp
Gold and Rabiner also included the last two pitch estimates from each
feature detector.
Furthermore, for each feature, the present estimate
was added to the previous one to make a fourth, and the previous one to
the one before that to make a fifth, and all three were added together
to make a sixth; so that for each feature there were 6 separate estimates of
pitch.  The reason for this is that if three consecutive estimates of the
fundamental period are $T sub 0$, $T sub 1$ and $T sub 2$; then if some peaks are
being falsely identified, the actual period could be any of
.LB
.EQ
T sub 0 ~+~ T sub 1 ~~~~ T sub 1 ~+~ T sub 2 ~~~~
T sub 0 ~+~ T sub 1 ~+~ T sub 2 .
.EN
.LE
It is essential to do this, because
a feature of a given type can occur more than once in a pitch period \(em
secondary peaks usually exist.
.pp
Six features, each contributing six separate estimates, makes 36 estimates
of pitch in all.
An overall figure was obtained from this
set by selecting the most popular estimate (within some
pre-specified tolerance).  The complete scheme has been
evaluated extensively (Rabiner
.ul
et al,
1976) and compares
favourably with other methods.
.[
Rabiner Cheng Rosenberg McGonegal 1976
.]
.pp
However, it must be admitted that this procedure seems to be rather
.ul
ad hoc
(as are many other successful speech parameter estimation
algorithms!).  Specifically, it is not easy to predict what
kinds of waveforms it will fail on, and evaluation of it can
only be pragmatic.  When used to
estimate the pitch of musical
instruments and singers over a 6-octave range (40\ Hz to 2.5\ kHz),
instances were found where it failed dramatically (Tucker and Bates, 1978).
.[
Tucker Bates 1978
.]
This is, of
course, a much more difficult problem than pitch estimation for
speech, where the range is typically 3 octaves.
In fact, for speech the feature
detectors are usually preceded by
a low-pass filter to attenuate the myriad
of peaks
caused by higher formants, and this
is inappropriate for
musical applications.
.pp
There is evidence which shows that additional features can
assist with pitch identification.  The above features are all
based upon the signal amplitude, and could be described as
.ul
secondary
features derived from a single
.ul
primary
feature.  Other primary features can easily be defined.
Tucker and Bates (1978) used a centre-clipped waveform, and considered only
the peaks rising above the central region.
.[
Tucker Bates 1978
.]
They defined two
further primary features, in addition to the peak amplitude:  the
.ul
time width
of a peak (period for which it is
outside the clipping level), and its
.ul
energy
(again, outside the clipping level).  The primary
features are shown in Figure 4.17.
.FC "Figure 4.17"
Secondary features are
defined, based on these three primary ones, and pitch estimates
are made for each one.  A further innovation was to combine the
individual estimates on a way which is based upon
autocorrelation analysis, reducing to some degree the
.ul
ad-hocery
of the pitch detection process.
.sh "4.9  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "4.10  Further reading"
.pp
There are a lot of books on digital signal analysis, although in general
I find them rather turgid and difficult to read.
.LB "nn"
.\"Ackroyd-1973-1
.]-
.ds [A Ackroyd, M.H.
.ds [D 1973
.ds [T Digital filters
.ds [I Butterworths
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Here is the exception to prove the rule.
This book
.ul
is
easy to read.
It provides a good introduction to digital signal processing,
together with a wealth of practical design information on digital filters.
.in-2n
.\"Committee.I.D.S.P-1979-3
.]-
.ds [A IEEE Digital Signal Processing Committee
.ds [D 1979
.ds [T Programs for digital signal processing
.ds [I Wiley
.ds [C New York
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
This is a remarkable collection of tried and tested Fortran programs
for digital signal analysis.
They are all available from the IEEE in machine-readable form on magnetic
tape.
Included are programs for digital filter design, discrete Fourier transformation,
and cepstral analysis, as well as others (like linear predictive analysis;
see Chapter 6).
Each program is accompanied by a concise, well-written description of how
it works, with references to the relevant literature.
.in-2n
.\"Oppenheim-1975-4
.]-
.ds [A Oppenheim, A.V.
.as [A " and Schafer, R.W.
.ds [D 1975
.ds [T Digital signal processing
.ds [I Prentice Hall
.ds [C Englewood Cliffs, New Jersey
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is one of the standard texts on most aspects of digital signal processing.
It treats the $z$-transform, digital filters, and discrete Fourier transformation
in far more detail than we have been able to here.
.in-2n
.\"Rabiner-1975-5
.]-
.ds [A Rabiner, L.R.
.as [A " and Gold, B.
.ds [D 1975
.ds [T Theory and application of digital signal processing
.ds [I Prentice Hall
.ds [C Englewood Cliffs, New Jersey
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is the other standard text on digital signal processing.
It covers the same ground as Oppenheim and Schafer (1975) above,
but with a slightly faster (and consequently more difficult) presentation.
It also contains major sections on special-purpose hardware for
digital signal processing.
.in-2n
.\"Rabiner-1978-1
.]-
.ds [A Rabiner, L.R.
.as [A " and Schafer, R.W.
.ds [D 1978
.ds [T Digital processing of speech signals
.ds [I Prentice Hall
.ds [C Englewood Cliffs, New Jersey
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Probably the best single reference for digital speech analysis,
as it is for the time-domain encoding techniques of the last chapter.
Unlike the books cited above, it is specifically oriented to speech processing.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "5  RESONANCE SPEECH SYNTHESIZERS"
.ds RT "Resonance speech synthesizers
.ds CX "Principles of computer speech
.pp
This chapter considers the design of speech synthesizers which
implement a direct electrical analogue of
the resonance properties of the vocal tract by providing a filter for each
formant whose resonant frequency is to be controlled.  Another method is the
channel vocoder, with a bank of fixed filters whose gains are varied to match
the spectrum of the speech as described in Chapter 4.  This is not generally
used for synthesis from a written representation, however, because it is hard
to get good quality speech.  It
.ul
is
used sometimes for low-bandwidth
transmission and storage, for
it is fairly easy to analyse natural speech into fixed frequency bands.
A second alternative to the resonance synthesizer is the linear predictive
synthesizer, which at present is used quite extensively and is likely to become
even more popular.  This is covered in the next chapter.
Another alternative is the articulatory synthesizer, which
attempts to model the vocal tract directly, rather than
modelling the acoustic output from it.
Although, as noted in Chapter 2, articulatory synthesis holds a promise of
high-quality speech \(em for the coarticulation effects caused by tongue
and jaw inertia can be modelled directly \(em this has not yet been realized.
.pp
The source-filter model of speech production indicates that an electrical
analogue of the vocal tract can be obtained by considering the source
excitation and the filter that produces the formant frequencies separately.
This approach was pioneered by Fant (1960), and we shall present much of his
work in this chapter.
.[
Fant 1960 Acoustic theory of speech production
.]
There has been some discussion over whether the source-filter model really
is a good one, and some
synthesizers
explicitly introduce an element of
"sub-glottal coupling", which simulates the effect of the lung cavity
on the vocal tract transfer function during the periods when the glottis is
open (for an example see Rabiner, 1968).
.[
Rabiner 1968 Digital formant synthesizer JASA
.]
However, this is very much a low-order effect when considering
speech synthesized by rule from a written representation, for the software
which calculates parameter values to drive the synthesizer is a far greater
source of degradation in speech quality.
.sh "5.1  Overall spectral considerations"
.pp
Figure 5.1 shows the source-filter model of speech production.
.FC "Figure 5.1"
For voiced speech, the excitation source produces a waveform whose frequency
components decay at about 12\ dB/octave, as we shall see in a later section.
The excitation passes into the vocal tract filter.  Conceptually, this can best
be viewed as an infinite series of formant filters, although for implementation
purposes only the first few are modelled explicitly and the effect of the rest
is lumped together into a higher-formant compensation network.  In either case
the overall frequency profile of the filter is a flat one, upon which humps are
superimposed at the various formant frequencies.  Thus the output of the
vocal tract filter falls off at 12\ dB/octave just as the input does.
However, measurements of actual speech show a 6\ dB/octave decay with increasing
frequency.  This is explained by the effect of radiation of speech from the
lips, which in fact has a "differentiating" action, producing a 6\ dB/octave
rise in the frequency spectrum.  This 6\ dB/octave lift is similar to that
provided by a treble boost control on a radio or amplifier.  Speech synthesized
without it sounds unnaturally heavy and bassy.
.pp
These overall spectral shapes, which are derived from considering the human
vocal tract, are summarized in the upper annotations in Figure 5.1.  But there
is no real necessity for a synthesizer to model the frequency characteristics
of the human vocal tract at intermediate points:  only the output speech is of
any concern.  Because the system is a linear one, the filter blocks in the
figure can be shuffled around to suit engineering requirements.  One such
requirement is the desire to minimize internally-generated noise in the
electrical implementation, most of which will arise in the vocal tract filter
(because it is much more complicated than the other components).  For this
reason an excitation source with a flat spectrum is often preferred, as shown
in the lower annotations.  This can be generated either by taking the desired
glottal pulse shape, with its 12\ dB/octave fall-off, and passing it through a
filter giving 12\ dB/octave lift at higher frequencies; or, if the pulse shape
is to be stored digitally, by storing its second derivative instead.
Then the radiation compensation, which is now more properly called
"spectral equalization", will comprise a 6\ dB/octave fall-off to give the
required trend in the output spectrum.
.pp
For a given pitch period, this scheme yields exactly the same spectral
characteristics as the original system which modelled the human vocal tract.
However, when the pitch varies there will be a difference, for sounds with
higher excitation frequencies will be attenuated by \-6\ dB/octave in the new
system and +6\ dB/octave in the old by the final spectral equalization.
In practice, the pitch of the human voice lies quite low in the frequency
region \(em usually below 400\ Hz \(em and if all filter characteristics begin
their roll-off at this frequency the two systems will be the same.  This
simplifies the implementation with a slight compromise in its accuracy in
modelling the spectral trend of human speech, for the overall \-6\ dB/octave
decay actually begins at a frequency of around 100\ Hz.  If this is
implemented, some adjustment will need to be made to the amplitudes to ensure
that high-pitched sounds are not attenuated unduly.
.pp
The discussion so far pertains to voiced speech only.  The source spectrum of
the random excitation in unvoiced sounds is substantially flat, and combines
with the radiation from the lips to give a +6\ dB/octave rise in the output
spectrum.  Hence if spectral equalization is changed to \-6\ dB/octave to
accomodate a voiced excitation with flat spectrum, the noise source should
show a 12\ dB/octave rise to give the correct overall effect.
.sh "5.2  The excitation sources"
.pp
In human speech, the excitation source for voiced sounds is produced by two
flaps of skin called the "vocal cords".  These are blown apart by pressure from
the lungs.  When they come apart the pressure is relieved, and the muscles
tensioning the skin cause the flaps to come together again.  Subsequently, the
lung pressure \(em called "sub-glottal pressure" \(em builds up once more and the
process is repeated.  The factors which influence the rate and nature of
vibration are muscular tension of the cords and the sub-glottal pressure.  The detail
of the excitation has considerable importance to speech synthesis because it
greatly influences the apparent naturalness of the sound produced.  For example,
if you have inflamed vocal cords caused by laryngitis the sound quality
changes dramatically.  Old people who do not have proper muscular control over
their vocal cord tension produce a quavering sound.  Shouted speech can easily
be distinguished from quiet speech even when the volume cue is absent \(em you
can verify this by fiddling with the volume control of a tape recorder \(em because
when shouting, the vocal cords stay apart for a much smaller fraction of the
pitch cycle than at normal volumes.
.rh "Voiced excitation in natural speech."
There are two basic ways to examine the shape of the excitation source in
people.  One is to use a dentist's mirror and high-speed photography to observe
the vocal cords directly.  Although it seems a lot to ask someone to speak
naturally with a mirror stuck down the back of his throat, the method has been
used and photographs can be found, for example, in Flanagan (1972).
.[
Flanagan 1972 Speech analysis synthesis and perception
.]
The second
technique is to process the acoustic waveform digitally, identifying the
formant positions and deducting the formant contributions from the waveform by
filtering.  This leaves the basic excitation waveform, which can then be
displayed.  Such techniques lead to excitation shapes like those sketched in
Figure 5.2, in which the gradual opening and abrupt closure of the vocal cords
can easily be seen.
.FC "Figure 5.2"
.pp
It is a fact that if a periodic function has one or more discontinuities, its frequency
spectrum will decay at sufficiently high frequencies at the rate of 6\ dB/octave.
For example, the components of the square wave
.LB
$
g(t) ~~ = ~~ mark 0
$  for $
0 <= t < h
$
.br
$
lineup 1
$  for $
h <= t < b
$
.LE
can be calculated from the Fourier series
.LB
.EQ
G(r) ~~ = ~~ 1 over b ~ integral from 0 to b ~g(t)~e sup {-j2 pi rt/b} ~dt
~~ = ~~ j over {2 pi r} ~e sup {-j2 pi rh/b} ,
.EN
.LE
so $|G(r)|$ is proportional to $1/r$, and the change in one octave is
.LB
.EQ
20~log sub 10 ~ |G(2r)| over |G(r)|
~~=~~20~log sub 10 ~ 1 over 2
~~ = ~ 
.EN
\-6\ dB.
.LE
However, if the discontinuities are ones of slope only, then the asymptotic decay
at high frequencies is 12\ dB/octave.  Thus the glottal excitation of Figure 5.2
will decay at this rate.
Note that it is not the
.ul
number
but the
.ul
type
of discontinuities which are important in determining the asymptotic spectral
trend.
.rh "Voiced excitation in synthetic speech."
There are several ways that glottal excitation can be simulated in a synthesizer,
four of which are shown in Figure 5.3.
.FC "Figure 5.3"
The square pulse and the sawtooth pulse
both exhibit discontinuities, and so will have the wrong asymptotic rate of
decay (6\ dB/octave instead of 12\ dB/octave).  A better bet is the triangular
pulse.  This has the correct decay, for there are only discontinuities of slope.
However, although the asymptotic rate of decay is of first importance, the fine
structure of the frequency spectrum at the lower end is also significant, and
the fact that there are two discontinuities of slope instead of just one in the
natural waveform means that the spectra cannot match closely.
.pp
Rosenberg (1971) has investigated several different shapes using listening
tests, and he found that the polynomial approximation sketched in Figure 5.3
was preferred by listeners.
.[
Rosenberg 1971
.]
This has one slope discontinuity, and comprises
three sections:
.LB
$g(t) ~~ = ~~ 0$  for $0 <= t < t sub 1$    (flat during the period of closure)
.sp
$g(t) ~~ = ~~ A~ u sup 2 (3 - 2u) $,	where
$u ~=~ {t-t sub 1} over {t sub 2 -t sub 1} $ ,    for
$t sub 1 <= t < t sub 2$  (opening phase)
.sp
.sp
$g(t) ~~ = ~~ A~ (1 - v sup 2 )$,	where
$v ~=~ {t-t sub 2} over {b-t sub 2} $ ,    for
$t sub 2 <= t < b$    (closing phase).
.LE
It is easy to see that the joins between the first and second section, and
between the second and third section, are smooth; but that the slope of the third
section at the end of the cycle when $t=b$ is
.LB
.EQ
dg over dt ~~ = ~~ -~ 2A.
.EN
.LE
$A$ is the maximum amplitude of the pulse, and is reached when $t=t sub 2$.
.pp
A much simpler glottal pulse shape to implement is the filtered impulse.
Passing an impulse through a filter with characteristic
.LB
.EQ
1 over {(1+sT) sup 2}
.EN
.LE
imparts a 12\ dB/octave decay after frequency $1/T$.  This gives a pulse shape of
.LB
.EQ
g(t) ~~ = ~~ A~ t over T ~e sup {1-t/T} ,
.EN
.LE
which is sketched in Figure 5.4.
.FC "Figure 5.4"
The pulse is the wrong way round in time
when compared with the desired one; but this is not important under most
listening conditions because phase differences are not noticeable (this
point is discussed further below).
The maximum is reached when $t=T$ and has
height $A$.  The value zero is never actually attained, for the decay to it
is asymptotic, and if the slight discontinuity between pulses shown in the
Figure is left, the asymptotic rate of decay of the frequency spectrum will
be 6\ dB/octave rather than 12\ dB/octave.  However, in a real implementation
involving filtering an impulse there will be no such discontinuity, for the
next pulse will start off where the last one ended.
.pp
This seems to be an attractive scheme because of its simplicity,
and indeed is sometimes used in speech synthesis.  However, it does not have
the right properties when the pitch is varied, for in real glottal
waveforms the maximum occurs at a fixed
.ul
fraction
of the period, whereas the filtered impulse's maximum is at a fixed time, $T$.
If $T$ is chosen to make the system correct at high pitch frequencies (say
400\ Hz), then the pulse will be much too narrow at low pitches and sound rather
harsh.  The only solution is to vary the filter parameters with the pitch,
leading to complexity again.
.pp
Holmes (1973) has made an extensive study of the effect of the glottal
waveshape on the naturalness of high-quality synthesized speech.
.[
Holmes 1973 Influence of glottal waveform on naturalness
.]
He employed a rather special speech synthesizer, which provides far more
comprehensive and sophisticated control than most.  It was driven by parameters
which were extracted from natural utterances by hand \(em but the process of
generating and tuning them took many months of a skilled person's time.
By using the pulse shape
extracted from the natural utterance, he found that synthetic and natural
versions could actually be made indistinguishable to most people, even under high-quality
listening conditions using headphones.  Performance dropped quite drastically
when one of Rosenberg's pulse shapes, similar to the three-section one given
above, was used.  Holmes also investigated phase effects and found that whilst
different pulse shapes with identical frequency spectra could easily be
distinguished when listening over headphones, there was no perceptible difference
if the listener was placed at a comfortable distance from a loudspeaker in
a room.  This is attributable to the fact that the room itself imposes a
complex modification to the phase characteristics of the speech signal.
.pp
Although a great deal of care must be taken with the glottal pulse shape for very
high-quality synthetic speech, for speech synthesized by rule from a written
representation the degradation which stems from incorrect control of the
synthesizer parameters is much greater than that caused by using a slightly
inferior glottal pulse.  The triangular pulse illustrated in Figure 5.3
has been found quite satisfactory for speech synthesis by rule.
.rh "Unvoiced excitation."
Speech quality is much less sensitive to the characteristics of the unvoiced
excitation.  Broadband white noise will serve admirably.  It is quite
acceptable to generate this digitally, using a pseudo-random feedback shift
register.  This gives a bit sequence whose autocorrelation is zero except at
multiples of the repetition length.  The repetition length
can easily be made as long as the number of states in the shift
register (less one) \(em in this case, the configuration is called
"maximal length" (Gaines, 1969).
.[
Gaines 1969 Stochastic computing advances in information science
.]
For example, an 18-bit maximal-length shift register will repeat
every $2 sup 18 -1$ cycles.  If the bit-stream is used as a source of analogue
noise, the autocorrelation function will have triangular parts whose width is
twice the clock period, as shown in Figure 5.5.
.FC "Figure 5.5"
According to a well-known
result (the Weiner-Kinchine theorem; see for example Chirlian, 1973)
the power density of the frequency
spectrum is the same as the Fourier transform of the autocorrelation function.
.[
Chirlian 1973
.]
Since the feedback shift register gives a periodic autocorrelation function,
its transform is a Fourier series.  The $r$'th frequency component is
.LB
.EQ
G(r) ~~ = ~~ {R sup 2} over {4 pi sup 2 r sup 2 T}
~(1~-~~cos~{{2 pi rT} over R}) ~ .
.EN
.LE
Here, $T$ is the clock period and  $R=(2 sup N -1)T$  is the repetition time of
an $N$-bit shift register.
.pp
The spectrum is a bar spectrum, with components spaced
at
.LB
$
{1 over R}~~=~~{1 over {(2 sup N -1)T}}$   Hz.
.LE
These are very close together \(em with $N=18$ and
sampling at 20\ kHz (50\ $mu$sec)
the spacing becomes under 0.1\ Hz \(em and so it is reasonable to treat the
spectrum as continuous, with
.LB
.EQ
G(f) ~~ = ~~ 1 over {4 pi sup 2 f sup 2 T}~~(1~-~cos 2 pi fT) .
.EN
.LE
This spectrum is sketched in Figure 5.6(a), and the measured result of an actual
implementation in Figure 5.6(b).
.FC "Figure 5.6"
The 3\ dB point occurs when
.LB
.EQ
{G(f) over G(0)} ~~=~~{1 over 2} ~ ,
.EN
.LE
and $G(0)$ is $T/2$.  Hence, at the 3\ dB point,
.LB
.EQ
{1~-~cos 2 pi fT} over {2 pi sup 2 f sup 2 T sup 2}
~~ = ~~ 1 over 2 ~ ,
.EN
.LE
which has solution  $f=0.45/T$.
Thus a pseudo-random shift register generates
noise whose spectrum is substantially flat up to half the clock frequency.
Anything over 10\ kHz is therefore a suitable clocking rate for speech-quality
noise.  Choose 20\ kHz to err on the conservative side.  If the repetition occurs
in less than 3 or 4 seconds, it can be heard quite clearly; but above this figure
it is not noticeable.  An 18-bit shift register clocked at 20\ kHz repeats
every  $(2 sup 18 -1)/20000 ~ = ~ 13$ seconds, which is more than adequate.
.sh "5.3  Simulating vocal tract resonances"
.pp
The vocal tract, from glottis to lips, can be modelled as an unconstricted
tube of varying cross-section with no side branches and no sub-glottal coupling.
This has an all-pole transfer function, which can be written in the form
.LB
.EQ
H(s) ~~ = ~~
{w sub 1 sup 2} over {s sup 2 ~+~ b sub 1 s ~+~ w sub 1 sup 2}
~.~{w sub 2 sup 2} over {s sup 2 ~+~ b sub 2 s ~+~ w sub 2 sup 2} ~~ .~ .~ .
.EN
.LE
There is an unspecified (conceptually infinite) number of terms in the
product.  Each of them produces a peak in the energy spectrum,
and these are the formants we observed in Chapter 2.
.pp
Formants appear even in an over-simplified
model of the tract as a tube of uniform cross-section, with a sound source
at one end (the larynx) and open at the other (the lips).
This extremely crude model was discussed in Chapter 2, and surprisingly,
perhaps, it gives a good approximation to the observed formant frequencies
for a neutral, relaxed vowel such as that in
.ul
"a\c
bove".
.pp
Speech is made by varying the postures of the various organs of the vocal tract.
Different vowels, for example, result largely from different tongue positions
and lip postures.  Naturally, such physical changes alter the frequencies of the
resonances, and successful automatic speech synthesis depends upon
successful movement of the formants.  Fortunately, only the first three or
four resonances need to be altered even for extremely realistic synthesis, and
virtually all existing synthesizers provide control over these formants only.
.rh "Analysis of a single formant."
Each formant is modelled as a second-order resonance, with transfer function
.LB
.EQ
H(s) ~~ = ~~ {w sub c sup 2} over {s sup 2 ~+~ b s ~+~ w sub c sup 2} ~ .
.EN
.LE
As will be shown below, $w sub c$ is the nominal resonant frequency in
radians/s, and $b$ is the
approximate 3\ dB bandwidth of the resonance.  The term $w sub c sup 2$ in the
numerator adjusts the gain to be unity at DC ($s=0$).
.pp
To calculate the frequency response of the formant, write  $s=jw$.  Then the
energy spectrum is
.LB
.EQ
|H(jw)| sup 2 ~~ mark = ~~
{w sub c sup 4} over {(w sup 2 - w sub c sup 2 ) sup 2 ~+~ b sup 2 w sup 2}
.EN
.sp
.sp
.EQ
lineup = ~~
{w sub c sup 4} over
{[w sup 2 ~-~(w sub c sup 2 -~ {b sup 2} over 2 )] sup 2 ~~
+~~b sup 2 (w sub c sup 2~-~{{b sup 2} over 4})} ~ .
.EN
.sp
.LE
This reaches a maximum when the squared term in the denominator of the second
expression is zero, namely when  $w=(w sub c sup 2 ~-~ b sup 2 /2) sup 1/2$.
However,
formant bandwidths are low compared with their centre frequencies, and so to
a good approximation the peak occurs
at  $w=w sub c$  and is of amplitude  $w sub c /b$,  that
is,  $10~log sub 10 w sub c /b$\ dB above the DC gain.
At frequencies higher than the peak the energy falls off as $1/w sup 4$,
a factor of 1/16 for each doubling
in frequency, and so the asymptotic decay is 12\ dB/octave.
.pp
At the points which are 3\ dB below the peak,
.LB
.EQ
|H(jw sub 3dB )| sup 2 ~~ = ~~
1 over 2 ~|H(jw sub max )| sup 2 ~~ = ~~
1 over 2 ~ times ~ {w sub c sup 2} over {b sup 2} ~ ,
.EN
.LE
and it is easy to show that
this is satisfied by  $w sub 3dB ~ = ~ w sub c ~ +- ~ b/2$  to a
good approximation (neglecting higher powers of $b/w sub c )$.  Figure 5.7
summarizes the shape of an individual formant resonance.
.FC "Figure 5.7"
.pp
The bandwidth of a formant is fairly constant, regardless of the formant
frequency.  This makes the formant filter a slightly unusual one:  most
engineering applications which use variable-frequency resonances require
the bandwidth to be a constant proportion of the resonant
frequency \(em the ratio
$w sub c /b$, often called the "$Q$" of the filter, is to be constant.
For formants, we wish the Q to increase linearly with resonant frequency.
Since the amplitude gain of the formant at resonance is $w sub c /b$,
this peak gain increases as the formant frequency is increased.
.pp
Although it is easy to measure formant frequencies on a spectrogram
(cf Chapter 2),
it is not so easy to measure bandwidths accurately.  One rather unusual method
was reported by van den Berg (1955), who took a subject who had had a partial
laryngectomy, an operation which left an opening into the vocal tract near
the larynx position.  Into this he inserted a sound source and made a
swept-frequency calibration of the vocal tract!
.[
Berg van den 1955
.]
Almost as bizarre is a
technique which involves setting off a spark inside the mouth of a subject
as he holds his articulators in a given position.
.pp
The results of several different kinds of experiment are reported by Dunn (1961),
and are summarized in Table 5.1, along with the formant frequency ranges.
.[
Dunn 1961
.]
.RF
.in+0.5i
.ta 1.7i +2.5i
.nr x1 (\w'range of formant'/2)
.nr x2 (\w'range of bandwidths'/2)
	\h'-\n(x1u'range of formant	\h'-\n(x2u'range of bandwidths
.nr x1 (\w'frequencies (Hz)'/2)
.nr x2 (\w'as measured in different'/2)
	\h'-\n(x1u'frequencies (Hz)	\h'-\n(x2u'as measured in different
.nr x1 (\w'experiments (Hz)'/2)
		\h'-\n(x1u'experiments (Hz)
.nr x1 (\w'0000 \- 0000'/2)
.nr x2 (\w'000 \- 000'/2)
.nr x0 2.5i+(\w'range of formant'/2)+(\w'as measured in different'/2)
.nr x3 (\w'range of formant'/2)
	\h'-\n(x3u'\l'\n(x0u\(ul'
.sp
formant 1	\h'-\n(x1u'\0100 \- 1100	\h'-\n(x2u'\045 \- 130
formant 2	\h'-\n(x1u'\0500 \- 2500	\h'-\n(x2u'\050 \- 190
formant 3	\h'-\n(x1u'1500 \- 3500	\h'-\n(x2u'\070 \- 260
	\h'-\n(x3u'\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in-0.5i
.MT 2
Table 5.1  Different estimates of formant bandwidths, with range of
formant frequencies for reference
.TE
Note that the bandwidths really are narrow compared with the resonant frequencies
of the filters, except at the lower end of the formant 1 range.  Choosing the
lowest bandwidth estimate leads to an amplification factor at resonance of 50 for formant 2
when its frequency is at the top of its range; and formant 3 happens to give
the same value.
.rh "Series synthesizers."
The simplest realization of the vocal tract filter is a chain of formant
filters in series, as illustrated in Figure 5.8.
.FC "Figure 5.8"
This leads to particular difficulties if the frequencies of two formants
stray close together.  The worst case occurs if formants 2 and 3 have the
same resonant frequencies, at the top of the range of formant 2, namely 2500\ Hz.
In this case, and if the bandwidths of the formants are set to the lowest
estimates, a combined amplification factor
of  $(2500/50) times (2500/70)=1800$  is
obtained at the point of resonance \(em that is,
65\ dB above the DC value.  This is enough
to tax most analogue implementations, and can evoke clipping in the formant
filters, with a very noticeable effect on speech quality.  This
extreme case will not occur during synthesis of realistic speech, for
although the formant
.ul
ranges
overlap, the values for any particular (human) sound will not coincide exactly.  However,
it illustrates the difficulty of designing a series synthesizer which copes
sensibly with arbitrary parameter settings, and explains why designers often
choose formant bandwidths in the top half of the ranges given in Table 5.1.
.pp
The problem of excessive amplification within a series synthesizer can be
alleviated to a small extent by choosing carefully the order in which the
filters are placed in the chain.  In a linear system, of course, the order in
which the components occur does not matter.
In physical implementations, however, it is advantageous to minimize extreme
amplification at intermediate points.  By placing the formant 1 filter between
formants 2 and 3, the formant 2 resonance is attenuated somewhat before it
reaches formant 3.  Continuing with the extreme example above, where both
formants 2 and 3 were set to 2500\ Hz; assume that formant 1 is at its
nominal value of 500\ Hz.  It provides attenuation at approximately 12\ dB/octave
above this, and so at the formant 2 peak, 2.3\ octaves higher, the attenuation
is 28\ dB.  Thus the gain at 2500\ Hz,
which is $20 ~ log sub 10 ~ 2500/50 ~ = ~ 34$\ dB after
passing through the formant 2 filter, is reduced to 6\ dB by formant 1, only
to be increased by $20 ~ log sub 10 ~ 2500/70 ~ = ~ 31$\ dB to
a value of 37\ dB by formant 3.
This avoids the extreme 65\ dB gain of formants 2 and 3 combined.
.pp
Figure 5.8 shows only three formant filters modelled explicitly.
The effect of the rest \(em and they do have an effect, although it is small
at low frequencies \(em is
incorporated by lumping them together into the "higher-formant correction" filter.
To calculate the characteristics of this filter, assume that the lumped
formants have the values given by the simple uniform-tube model of Chapter 2,
namely 3500\ Hz for formant 4, 4500\ Hz for formant 5, and, in general,
$500(2n-1)$\ Hz for formant $n$.  The effect of each of these on the spectrum is
.LB
.EQ
10~ log sub 10  {w sub n sup 4} over {(w sup 2 ~-~w sub n sup 2 ) sup 2
~~+~~b sub n sup 2 w sup 2}
~~ = ~~ -~ 10~ log sub 10 ~[(1~-~~{{w sup 2} over {w sub n sup 2}}) sup 2
~~+~~ {{b sub n sup 2 w sup 2} over {w sub n sup 4}}]
.EN
dB,
.LE
following from what was calculated above.
We will have to approximate this by assuming that
$b sub n sup 2 /w sub n sup 2$ is
negligible \(em this is quite reasonable for these higher formants because
Table 5.1 shows that the bandwidth does not increase in proportion to the
formant frequency range \(em and approximate the logarithm by the first
term of its series expansion:
.LB
.EQ
-10 ~ log sub 10 ~ (1~-~~{{w sup 2} over {w sub n sup 2}}) sup 2
~~ = ~~ -20~ log sub 10 ~ e ~ log sub e 
(1~-~~{{w sup 2} over {w sub n sup 2}})
~~ = ~~ 20~ log sub 10 ~ e ~ times ~ {w sup 2} over {w sub n sup 2} ~ .
.EN
.LE
.pp
Now the total effect of formants 4, 5, ... at frequency $f$\ Hz (as distinct
from $w$\ radians/s) is
.LB
.EQ
20~ log sub 10 ~ e ~ times ~ sum from n=4 to infinity
~{{f sup 2} over {500 sup 2 (2n-1) sup 2}} ~ .
.EN
.LE
This expression is
.LB
.EQ
20~ log sub 10 ~ e ~ times ~
{{f sup 2} over {500 sup 2}}~~(~sum from n=1 to infinity
~{1 over {(2n-1) sup 2}} ~~-~~ sum from n=1 to 3 ~{1 over {(2n-1) sup 2}}~)
~ .
.EN
.LE
The infinite sum can actually be calculated in closed form, and is equal
to  $pi sup 2 /8$.  Hence the total correction is
.LB
.EQ
20~ log sub 10 ~ e ~ times {{f sup 2} over {500 sup 2}}
~~(~{pi sup 2} over 8 ~~-~~ sum from n=1 to 3 ~{1 over {(2n-1) sup 2}}~)
~~ = ~~ 2.87 times 10 sup -6 f sup 2
.EN
dB.
.LE
.pp
Although this may at first seem to be a rather small correction,
it is in fact 72\ dB when
$f=5$\ kHz!  On further reflection this is not an unreasonable figure, for the
12\ dB/octave decays contributed by formants 1, 2, and 3 must all be annihilated
by the higher-formant correction to give an overall flat spectral trend.
In fact, formant 1 will contribute
12\ dB/octave from 500\ Hz (3.3\ octaves to 5\ kHz, representing 40\ dB); formant
2 will contribute 12\ dB/octave from 1500\ Hz (1.7\ octaves to 5\ kHz, representing
21\ dB); and formant 3 will contribute 12\ dB/octave from 2500\ Hz (1\ octave to 5\ kHz,
representing 12\ dB).
These sum to 73\ dB.
.pp
If the first five formants are synthesized explicitly instead of just the
first three, the correction is
.LB
.EQ
20~ log sub 10 ~ e ~ times ~ {{f sup 2} over {500 sup 2}}
~~(~{pi sup 2} over 8 ~-~~ sum from n=1 to 5 ~{1 over {(2n-1) sup 2}}~)
~~ = ~~ 1.73 times 10 sup -6  f sup 2
.EN
dB,
.LE
giving a rather more reasonable value of 43\ dB when $f=5$\ kHz.  In actual
implementations, fixed filters are sometimes included explicitly for
formants 4 and 5.  Although this lowers the gain of the higher-formant
correction filter, the total amplification at 5\ kHz of the combined correction
is still 72\ dB.  If one is less demanding and aims for a synthesizer that
produces a correct spectrum only up to 3.5\ kHz, it is 35\ dB.
This places quite stringent requirements on the preceding formant filters if
the stray noise that they generate internally is not to be amplified to
perceptible magnitudes by the correction filter at high frequencies.
.pp
Explicit inclusion of fixed filters for formants 4 and 5 undoubtedly improves
the accuracy of the higher-formant correction.  Recall that the above derivation
of the correction filter characteristic used the first-order approximation
.LB
.EQ
log sub e (1~-~{{w sup 2} over {w sub n sup 2}})
~~ = ~~ -~ {w sup 2} over {w sub n sup 2} ~ ,
.EN
.LE
which is only valid if $w << w sub n$.
Thus it only holds at frequencies less than
the highest explicitly synthesized formant,
and so with formants 4 (3.5\ kHz) and
5 (4.5\ kHz) included a reasonable correction should be obtained for
telephone-quality speech.  However, detailed analysis with a second-order
approximation shows that the coefficient of the neglected term is in fact
small (Fant, 1960).
.[
Fant 1960 Acoustic theory of speech production
.]
A second, perhaps more compelling, reason for explicitly
including a couple of fixed formants is that the otherwise enormous amplification
provided by the correction can be distributed throughout the formant chain.
We saw earlier why there is reason to prefer the
order F3\(emF1\(emF2 over F1\(emF2\(emF3.
With explicit formants 4 and 5, a suitable order which helps
to keep the amplification at intermediate points in the chain within reasonable
bounds is F3\(emF5\(emF2\(emF4\(emF1.
.rh "Parallel synthesizers."
A series synthesizer models the vocal tract resonances by a chain of formant
filters in series.  A parallel synthesizer utilizes a parallel connection of
filters as illustrated in Figure 5.9.
.FC "Figure 5.9"
.pp
Consider a parallel combination of two formants with individually-controllable
amplitudes.  The combined transfer function is
.LB
.EQ
H(s) ~~ mark = ~~ {A sub 1 w sub 1 sup 2} over
{s sup 2 ~+~ b sub 1 s ~+~ w sub 1 sup 2}
~~+~~{A sub 2 w sub 2 sup 2} over {s sup 2 ~+~ b sub 2 s ~+~ w sub 2 sup 2}
.EN
.sp
.sp
.EQ
lineup = ~~ { (A sub 1 w sub 1 sup 2 + A sub 2 w sub 2 sup 2 )s sup 2
~+~(A sub 1 b sub 2 w sub 1 sup 2 + A sub 2 b sub 1 w sub 2 sup 2 )s
~+~ (A sub 1 +A sub 2 )w sub 1 sup 2 w sub 2 sup 2 }
over
{ (s sup 2 ~+~b sub 1 s~+~w sub 1 sup 2 )
(s sup 2 ~+~b sub 2 s~+~w sub 2 sup 2 ) }
.EN
.LE
If the formant bandwidths $b sub 1$ and $b sub 2$
are equal and the amplitudes are
chosen as
.LB
.EQ
A sub 1 ~~=~~ {w sub 2 sup 2} over {w sub 2 sup 2 -w sub 1 sup 2}
~~~~~~~~
A sub 2 ~~=~~-~ {w sub 1 sup 2} over {w sub 2 sup 2 -w sub 1 sup 2} ~ ,
.EN
.LE
then the transfer function becomes the same as that of a two-formant series synthesizer,
namely
.LB
.EQ
H(s) ~~ = ~~ {w sub 1 sup 2} over {s sup 2 ~+~ b sub 1 s ~+~ w sub 1 sup 2}
~ . ~{w sub 2 sup 2} over {s sup 2 ~+~ b sub 2 s ~+~ w sub 2 sup 2} ~ .
.EN
.LE
The argument can be extended to any number of formants, under the assumption
that the formant bandwidths are equal.  Note that the signs of $A sub 1$
and $A sub 2$
differ:  in general the formant amplitudes for a parallel synthesizer alternate
in sign.
.pp
In theory, therefore, it would be possible to use five parallel formants to
model a five-formant series synthesizer exactly.  Then the same higher-formant
correction filter would be needed for the parallel synthesizer as for the
series one.  If the formant amplitudes were set slightly incorrectly, however,
the five filters would not combine to give a total of 60\ dB/octave high-frequency
decay above the resonances.  It is easy to see this in the context of the
simplified two-formant combination above:  if the amplitudes were not chosen
exactly right then the $s sup 2$
term in the numerator would not be quite zero.
Then, the decay in the two-formant combination would be \-12\ dB/octave instead
of \-24\ dB/octave, and in the five-formant case the decay would in fact still be
\-12\ dB/octave.  Advantage can be taken of this to equalize the levels
within the synthesizer so that large amplitude variations do not occur.
This can best be done by associating relatively low-gain fixed correction filters
with each formant instead of providing one comprehensive correction to the
combined spectrum:  these are shown in Figure 5.9.
Suitable correction filters
have been determined empirically by Holmes (1972).
.[
Holmes 1972 Speech synthesis
.]
They provide a 6\ dB/octave
lift above 640\ Hz for formant 1, and 6\ dB/octave lift above 300\ Hz for formant
2.  Formants 3 and 4 are uncorrected, whilst for formant 5 the correction begins
as a 6\ dB/octave decay above 600\ Hz and increases to an 18\ dB/octave decay
above 5.5\ kHz.
.pp
The disadvantage of a parallel synthesizer is that the amplitudes of the
formants must be specified as well as their frequencies.  (Furthermore, the
formant bandwidths should all be equal, but they are often chosen to be such
in series synthesizers because of the uncertainty as to their exact
values.)  However, the extra amplitude parameters clearly give greater
control over the frequency spectrum of the synthesized speech.
.pp
A good example of how this extra control can usefully be exploited is the
synthesis of nasal sounds.
Nasalization introduces a cavity parallel to the oral tract, as illustrated
in Figure 5.10, and this causes zeros in the transfer function.
.FC "Figure 5.10"
It is as if two different copies of the vocal tract transfer function, one for
the oral and the other for the nasal passage, were added
together.  We have seen the effect of this above when considering parallel
synthesis.  The combination
.LB
.EQ
H(s) ~~ = ~~ {A sub 1 w sub o sup 2} over
{s sup 2 ~+~ b sub o s ~+~ w sub o sup 2}
~~+~~{A sub 2 w sub n sup 2}
over {s sup 2 ~+~ b sub n s ~+~ w sub n sup 2} ~ ,
.EN
.LE
where the subscript "$o$" stands for oral and "$n$" for nasal,
produces zeros in the
numerator (unless the amplitudes are carefully adjusted to avoid them).
These cannot be modelled by a series synthesizer, but they obviously can be
by a parallel one.
.pp
Although they are certainly needed for accurate imitation of human speech,
transfer function zeros to simulate nasal sounds are not essential for
synthesis of intelligible English.  It is not difficult to get a sound
like a nasal consonant
(\c
.ul
n,
or
.ul
m\c
)
with an all-pole synthesizer.
Nevertheless, it is certainly true that a parallel synthesizer gives better
.ul
potential
control over the spectrum than a series one.  Whether the added flexibility
can be used properly by a synthesis-by-rule computer program is another matter.
.rh "Implementation of formant filters."
Formant filters can be built in either analogue or digital form.  A
second-order resonance is needed, whose centre frequency can be controlled
but whose bandwidth is fixed.  If the control can be arranged as two
tracking resistors, then the simple analogue configuration of Figure 5.11,
with two operational amplifiers, will suffice.
.FC "Figure 5.11"
.pp
The transfer function of this arrangement is
.LB
.EQ
- ~~ { 1/C sub 1 R sub 1 C sub 2 R sub 2 } over
{ s sup 2 ~~+~~ {1 over {C sub 2 R sub 2}}~s
~~+~~{1 over {C sub 1 R' sub 1 C sub 2 R sub 2 }}} ~ ,
.EN
.LE
which characterizes it as a low-pass resonator with DC gain
of  $- R' sub 1 /R sub 1 $,  bandwidth of  $1/2 pi C sub 2 R sub 2$\ Hz,  and
centre frequency of  $1/2 pi (C sub 1 R' sub 1 C sub 2 R sub 2 ) sup 1/2$\ Hz.
Tracking $R' sub 1$ with $R sub 1$ ensures that the DC gain remains constant,
and that the centre frequency follows  $R sub 1 sup -1/2$.  Moreover,
neither is especially sensitive to slight departures from exact tracking
of $R' sub 1$ with $R sub 1$.
Such a filter has been used in a simple hand-controlled speech synthesizer,
built for demonstration and amusement (Witten and Madams, 1978).
.[
Witten Madams 1978 Chatterbox
.]
However, the need for tracking resistors, and the inverse square root variation
of the formant frequency with $R sub 1$, makes it rather unsuitable for serious
applications.
.pp
A better analogue filter is the ring-of-three configuration
shown in Figure 5.12.
.FC "Figure 5.12"
(Ignore the secondary output for now.)  Control
is achieved over the centre frequency by two multipliers, driven from
the same control input $k$.  These have a high-impedance output, producing a
current $kx$ if the input voltage is $x$.
It is not too difficult to show that the transfer function of the circuit is
.LB
.EQ
- ~~ { {k sup 2} over {C sup 2} } over
{ s sup 2 ~~+~~ 2 over RC ~s
~~+~~{1+k sup 2 R sup 2} over {R sup 2 C sup 2} } ~ .
.EN
.LE
Suppose that $R$ is chosen so that  $k sup 2 R sup 2 ~ >>~ 1$.  Then this is a
unity-gain resonator with constant bandwidth  $1/ pi RC$\ Hz  and centre
frequency  $k/2 pi C$\ Hz.  Note that it is the combination of both multipliers that
makes the centre frequency grow linearly with $k$:  with one multiplier there
would be a square-root relationship.
.pp
The ring-of-three filter of Figure 5.12 is arranged in a slightly unusual
way, with an inverting stage at the beginning and the two resonant stages
following it.  This ensures that the signal level at intermediate
points in the filter does not exceed that at the output, and gives the filter
the best chance of coping with a wide range of input amplitudes without
clipping.  This contrasts markedly with the resonator of Figure 5.11, where
the voltage at the output of the first integrator is $w/b$ times the final output \(em a
factor of 50 in the worst case.
.pp
For a digital implementation of a formant, consider the recurrence relation
.LB
.EQ
y(n)~ = ~~ a sub 1 y(n-1) ~-~ a sub 2 y(n-2) ~+~ a sub 0 x(n) ,
.EN
.LE
where $x(n)$ is the input and $y(n)$ the output at time $n$,
$y(n-1)$ and $y(n-2)$ are the previous two values of the output,
and $a sub 0$, $a sub 1$, and $a sub 2$ are (real) constants.
The minus sign is in front of the second term because it makes $a sub 2$
turn out to be
positive.  To calculate the $z$-transform version of this relationship, multiply
through by $z sup -n$ and sum from $n=- infinity$ to $infinity$ :
.LB "nn"
.EQ
sum from {n=- infinity} to infinity ~y(n)z sup -n ~~ mark =~~
a sub 1 sum from {n=- infinity} to infinity ~y(n-1)z sup -n ~~-~
a sub 2 sum from {n=- infinity} to infinity ~y(n-2)z sup -n ~~+~
a sub 0 sum from {n=- infinity} to infinity ~x(n)z sup -n
.EN
.sp
.EQ
lineup = ~~ a sub 1 z sup -1 ~ sum ~y(n-1)z sup -(n-1) ~~-~~
a sub 2 z sup -2 ~ sum ~y(n-2)z sup -(n-2)
~~+~~ a sub 0 ~ sum ~x(n)x sup -n ~ .
.EN
.LE "nn"
Writing this in terms of $z$-transforms,
.LB
.EQ
Y(z)~ = ~~ a sub 1 z sup -1 Y(z) ~-~ a sub 2 z sup -2 Y(z) ~+~ a sub 0 X(z) .
.EN
.LE
Thus the input-output transfer function of the system is
.LB
.EQ
H(z)~ = ~~ Y(z) over X(z)
~~=~~ {a sub 0 } over {1~-~a sub 1 z sup -1 ~+~a sub 2 z sup -2} ~ .
.EN
.LE
.pp
We learned in the previous chapter that the frequency response is obtained
from the $z$-transform of a system by replacing $z sup -1$
by  $e sup {-j2 pi fT}$,  where $f$ is the frequency variable in\ Hz.
Hence the amplitude response of the digital formant filter is
.LB
.EQ
|H(e sup {j2 pi fT} )| sup 2
~~ = ~~ left [ {a sub 0} over {1~-~a sub 1 e sup {-j2 pi fT}
~+~a sub 2 e sup {-j4 pi fT} } ~ right ] sup 2 ~ .
.EN
.sp
.LE
It is fairly obvious from this that a DC gain of 1 is obtained if
.LB
.EQ
a sub 0 ~ = ~~ 1 ~-~ a sub 1  ~+~ a sub 2 ,
.EN
.LE
for  $e sup {-j2 pi fT}$  is 1 at a frequency of 0\ Hz.  Some manipulation is
required to show that, under the usual assumption that the bandwidth is
small, the centre frequency is
.LB
.EQ
1 over {2 pi T} ~~ cos sup -1 ~ {a sub 1} over {2 a sub 2 sup 1/2} ~
.EN
Hz.
.LE
Furthermore, the 3\ dB bandwidth of the resonance is given approximately by
.LB
.EQ
-~ 1 over {2 pi T} ~~ log sub e a sub 2 ~
.EN
Hz.
.LE
.pp
As an example, Figure 5.13 shows an amplitude response for this digital filter.
.FC "Figure 5.13"
The parameters $a sub 0$, $a sub 1$ and $a sub 2$
were generated from the above
relationships for a sampling frequency of 8\ kHz, centre frequency of 1\ kHz,
and bandwidth of 75\ Hz.
It exhibits a peak of approximately the right bandwidth at the correct
frequency, 1\ kHz.  Note that the response is flat at half the sampling
frequency, for the frequency response from 4\ kHz to 8\ kHz is just a reflection of
that up to 4\ kHz.
This contrasts sharply with that of an analogue formant filter, also shown
in Figure 5.13, which slopes
at \-12\ dB/octave at frequencies above resonance.
.pp
The behaviour of a digital formant filter at frequencies above
resonance actually makes it preferable to an analogue implementation.
We saw earlier that considerable trouble must be taken with the latter to
compensate for the cumulative effect of \-12\ dB/octave at higher frequencies for
each of the formants.
This is not necessary with digital implementations, for the response of
a digital formant filter is flat at half the sampling frequency.  In fact, further
study shows that digital synthesizers without any higher-pole correction
give a closer approximation to the vocal tract than analogue ones with higher-pole
correction (Gold and Rabiner, 1968).
.[
Gold Rabiner 1968 Analysis of digital and analogue formant synthesizers
.]
.rh "Time-domain methods."
An interesting alternative to frequency-domain speech synthesis is to construct
the formants in the time domain.  When a second-order resonance is excited by
an impulse, an exponentially decaying sinusoid is produced, as illustrated by
Figure 5.14.
.FC "Figure 5.14"
The oscillation occurs at the resonant frequency of the filter,
while the decay is related to the bandwidth.  In fact, if the formant filter
has transfer function
.LB
.EQ
{w sup 2} over {s sup 2 ~+~ b s ~+~ w sup 2} ~ ,
.EN
.LE
the time waveform for impulsive excitation is
.LB
.EQ
x(t)~ = ~~ w~ e sup -bt/2 ~ sin ~ wt ~~~~~~~~
.EN
(neglecting  $b sup 2 /w sup 2$).
.LE
It is the combination of several such time waveforms, coupled with the regular
reappearance of excitation at the pitch period, that produces the characteristic
wiggly waveform of voiced speech.
.pp
Now suppose we take a sine wave of frequency $w$ and multiply it by a
decaying exponential  $e sup -bt/2$.  This gives a signal
.LB
.EQ
x(t)~ = ~~ e sup -bt/2 ~ sin ~ wt ,
.EN
.LE
which is identical with the filtered impulse except for a factor $w$.
If there are several formants in parallel, all with the same bandwidth,
the exponential factor is the same for each:
.LB
.EQ
x(t)~ = ~~ e sup -bt/2 ~ (A sub 1 ~ sin ~ w sub 1 t
~~+ ~~ A sub 2 ~ sin ~ w sub 2 t ~~ + ~~ A sub 3 ~  sin ~ w sub 3 t) .
.EN
.LE
$A sub 1$, $A sub 2$, and $A sub 3$ control the formant amplitudes,
as in an ordinary parallel synthesizer;
except that they need adjusting to account for the missing
factors $w sub 1$, $w sub 2$, and $w sub 3$.
.pp
A neat way of implementing such a synthesizer digitally is to store one cycle of a
sine wave in a read-only memory (ROM).  Then, the formant frequencies can be
controlled by reading the ROM at different rates.  For example, if twice the
basic frequency is desired, every second value should be read.
Multiplication is needed for amplitude control of each formant:  this can be
accomplished by shifting the digital word (each place shifted accounts for
6\ dB of attenuation).  Finally, the exponential damping factor can be
provided in analogue hardware by a single capacitor after the D/A converter.
This implementation gives a system for hardware-software synthesis which
involves an absolutely minimal amount of extra hardware apart from the computer,
and does not need hardware multiplication for real-time operation.
It could easily be made to work in real time with a microprocessor coupled
to a D/A converter, damping capacitor, and fixed tone-control filter to give
the required spectral equalization.
.pp
Because the overall spectral decay of an impulse exciting a second-order
formant filter is 12\ dB/octave, the appropriate equalization is +6\ dB/octave
lift at high frequencies, to give an overall \-6\ dB/octave spectral trend.
.pp
Note, however, that this synthesis model is an extremely basic one.  Only
impulsive excitation can be accomodated.  For fricatives, which we will
discuss in more detail below, a different implementation is needed.  A
hardware noise generator, with a few fixed filters \(em one
for each fricative type \(em will suffice for a simple system.  More damaging
is the lack of aspiration, where random noise excites the vocal tract resonances.
This cannot be simulated in the model.  The
.ul
h
sound can be provided by
treating it as a fricative, and although it will not sound completely realistic,
because there will be no variation with the formant positions of adjacent phonemes,
this can be tolerated because
.ul
h
is not too important for speech intelligibility.
A bigger disadvantage is the lack of proper aspiration control for producing
unvoiced stops, which as mentioned in Chapter 2 consist of an silent phase
followed by a burst of aspiration.
Experience has shown that although it is difficult to drive such a synthesizer
from a software synthesis-by-rule system, quite intelligible output can
be obtained if parameters are derived from real speech and tweaked by hand.
Then, for each aspiration burst the most closely-matching fricative sound
can be used.
.sh "5.4  Aspiration and frication"
.pp
The model of the vocal tract as a filter which affects the frequency spectrum
of the basic voiced excitation breaks down if there are constrictions in it,
for these introduce new sound sources caused by turbulent air.
The generation of unvoiced excitation has been discussed earlier in this
chapter:  now we must consider how to simulate the filtering action of
the vocal tract for unvoiced sounds.
.pp
Aspiration and frication need to be dealt with separately.  The former
is caused by excitation at the vocal cords \(em the cords are held
so close together that turbulent noise is produced.
This noise passes through the same vocal tract filter that modifies voiced
sounds, and the same kind of formant structure can be observed.
All that is needed to simulate it is to replace the voiced excitation
source by white noise, as shown in the upper part of Figure 5.15.
.FC "Figure 5.15"
.pp
Speech can be whispered by substituting aspiration for voicing throughout.
Of course, there is no fundamental frequency associated with aspiration.
An interesting way of assessing informally the degradation caused by inadequate
pitch control in a speech synthesis-by-rule system is to listen to
whispered speech, in which pitch variations play no part.
.pp
Voiced and aspirative excitation are rarely produced at the same time
in natural speech (but see the discussion in Chapter 2 about breathy voice).
However, the excitation can change from one to the other quite quickly, and
when this happens there is no discontinuity in the formant structure.
.pp
Fricative, or sibilant, excitation is quite different from aspiration,
because it introduces a new sound source at a different place from the vocal
cords.  The constriction which produces the sound may be at the lips,
the teeth, the hard ridge just behind the top front teeth, or further
back along the palate.
These positions each produce a different sound
(\c
.ul
f,
.ul
th,
.ul
s,
and
.ul
sh
respectively).  However, smooth transitions from one of these sounds to another
do not occur in natural speech; and dynamical movement of the frequency
spectrum during a fricative is unnecessary for speech synthesis.
.pp
It is necessary, however, to be able to produce an approximation to the
noise spectrum for each of these sound types.  This is commonly achieved
by a single high-pass resonance whose centre frequency can be controlled.
This is the purpose of the secondary output
of the formant filter of Figure 5.12.
Taking the output from this point gives a high-pass instead of a low-pass
resonance, and this same filter configuration is quite acceptable for
fricatives.  Figure 5.15 shows the fricative sound path as a noise generator
followed by such a filter.
.pp
Unlike aspiration, fricative excitation is frequently combined with voicing.
This gives the voiced fricative sounds
.ul
v,
.ul
dh,
.ul
z,
and
.ul
zh.
It is possible to produce frication and aspiration together, and although
there are no examples of this in English, speech synthesis-by-rule
programs often use a short burst of aspiration
.ul
and
frication when simulating the opening of unvoiced stops.
Separate amplitude controls are therefore needed for voicing and frication,
but the former can be used for aspiration as well, with a "glottal excitation
type" switch to indicate aspiration rather than voicing.
.sh "5.5  Summary"
.pp
A resonance speech synthesizer consists of a vocal tract filter, excited by
either a periodic pitch pulse or aspiration noise.  In addition, a set of
sibilant sounds must be provided.  The vocal tract filter is dynamic, with
three controllable resonances.  These, coupled with some fixed spectral
compensation, give it a fairly high order \(em about 10 complex poles are
needed.  Although several different sibilant sound types must be simulated,
dynamical movement is less important in fricative sound spectra than
for voiced and aspirated sounds because
smooth transitions between one fricative and another are not important
in speech.
However, fricative timing and amplitude must be controlled rather precisely.
.pp
The speech synthesizer is controlled by several parameters.
These include fundamental frequency (if voiced), amplitude of voicing,
frequency of the first few \(em typically three \(em formants,
aspiration amplitude, sibilance amplitude, and frequency of one (or more)
sibilance filters.
Additionally, if the synthesizer is a parallel one, parameters for the
amplitudes of individual formants will need to be included.
It may be that some control over formant bandwidths is provided too.
Thus synthesizers have from eight up to about 20 parameters (Klatt, 1980,
describes one with 20 parameters).
.[
Klatt 1980 Software for a cascade/parallel formant synthesizer
.]
.pp
The parameters are supplied to the synthesizer at regular intervals of time.
For a 10-parameter synthesizer, the control can be thought of as a set of
10 graphs, each representing the time evolution of one parameter.
They are usually called parameter
.ul
tracks,
the terminology dating from the days when a track was painted on a glass
slide for each parameter to provide dynamic control of the synthesizer
(Lawrence, 1953).
.[
Lawrence 1953
.]
The pitch track is often called a pitch
.ul
contour;
this is a common phonetician's usage.
Do not confuse this with the everyday meaning of "contour"
as a line joining points of equal height on a map \(em a pitch contour is
just the time evolution of the pitch frequency.
.pp
For computer-controlled synthesizers, of course, the parameter tracks
are sampled, typically every 5 to 20\ msec.
The rate is determined by the need to generate fast amplitude transitions
for nasals and stop consonants.
Contrast it with the 125\ $mu$sec sampling period needed to digitize
telephone-quality speech.
The raw data rate for a 10-parameter synthesizer updated every 10 msec
is 1,000 parameters/sec, or 6\ Kbit/s if each parameter is represented
by 6\ bits.
This is a substantial reduction over the 56\ Kbit/s needed for PCM representation.
For speech synthesis by rule (Chapter 7), these parameter tracks
are generated by a computer program from a phonetic (or English)
version of the utterance, lowering the data rate by a further one or two
orders of magnitude.
.pp
Filters for speech
synthesizers can be implemented in either analogue or digital form.
High-order filters are usually broken down into second-order sections in
parallel or in series.  A third possibility, which has not been discussed
above, is to implement a single high-order filter directly.  Finally, the
action of formant filters can be synthesized in the time domain.  This gives
eight possibilities which are summarized in Table 5.2.
.RF
.in +0.5i
.ta 2.1i +2.0i
.nr x1 (\w'Analogue'/2)
.nr x2 (\w'Digital'/2)
	\h'-\n(x1u'Analogue	\h'-\n(x2u'Digital
.nr x0 2.0i+(\w'Liljencrants (1968)'/2)+(\w'Morris and Paillet (1972)'/2)
.nr x3 (\w'Liljencrants (1968)'/2)
	\h'-\n(x3u'\l'\n(x0u\(ul'
.sp
.nr x1 (\w'Rice (1976)'/2)
.nr x2 (\w'Rabiner \fIet al\fR'/2)
Series	\h'-\n(x1u'Rice (1976)	\h'-\n(x2u'Rabiner \fIet al\fR
.nr x1 (\w'Liljencrants (1968)'/2)
.nr x2 (\w'Holmes (1973)'/2)
Parallel	\h'-\n(x1u'Liljencrants (1968)	\h'-\n(x2u'Holmes (1973)
.nr x1 (\w'unpublished'/2)
.nr x2 (\w'unpublished'/2
Time-domain	\h'-\n(x1u'unpublished	\h'-\n(x2u'unpublished
.nr x1 (\w'\(em'/2)
.nr x2 (\w'Morris and Paillet (1972)'/2)
High-order filter	\h'-\n(x1u'\(em	\h'-\n(x2u'Morris and Paillet (1972)
	\h'-\n(x3u'\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in-0.5i
.FG "Table 5.2  Implementation options for resonance speech synthesizers"
.[
Rice 1976 Byte
.]
.[
Rabiner Jackson Schafer Coker 1971
.]
.[
Liljencrants 1968
.]
.[
Holmes 1973 Influence of glottal waveform on naturalness
.]
.[
Morris and Paillet 1972
.]
All but one have certainly been used as the basis for synthesis, and
the table includes reference to published descriptions.
.pp
Each method has advantages and disadvantages.  Series decomposition obviates
the need for control over the amplitudes of individual formants, but does
not allow synthesis of sounds which use the nasal tract as well as the oral
one; for these are in parallel.  Analogue implementation of series synthesizers
is complicated by the need for higher-pole correction, and the fact that
the gains at different frequencies can vary widely throughout the system.
Higher-pole correction is not so important for digital synthesizers.
Parallel decomposition eliminates some of these problems:  higher-pole correction
can be implemented individually for each formant.  However, the formant
amplitudes must be controlled rather precisely to simulate the vocal tract,
which is essentially serial.
Time-domain synthesis is associated with low hardware costs but does not
easily allow proper control over the excitation sources.  In particular,
it cannot simulate dynamical movement of the spectrum during aspiration.
Implementation of the entire vocal tract model as a single high-order filter,
without breaking it down into individual formants in series or parallel,
is attractive from the computational point of view because less arithmetic
operations are required.  It is best analysed in terms of linear predictive
coding, which is the subject of the next chapter.
.sh "5.6  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "5.7  Further reading"
.pp
Historically-minded readers should look at the early speech synthesizer
designed by Lawrence (1953).
This and other classic papers on the subject
are reprinted in Flanagan and Rabiner (1973).
A good description of a quite sophisticated parallel synthesizer can
be found in Holmes (1973), above, and another of a switchable
series/parallel one in Klatt (1980), who even includes a listing of
the Fortran program that implements it.
Here are some useful books on speech synthesizers.
.LB "nn"
.\"Fant-1960-1
.]-
.ds [A Fant, G.
.ds [D 1960
.ds [T Acoustic theory of speech production
.ds [I Mouton
.ds [C The Hague
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Fant really started the study of the vocal tract as an acoustic system,
and this book marks the beginning of modern speech synthesis.
.in-2n
.\"Flanagan-1972-1
.]-
.ds [A Flanagan, J.L.
.ds [D 1972
.ds [T Speech analysis, synthesis, and perception (2nd, expanded, edition)
.ds [I Springer Verlag
.ds [C Berlin
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This book is the speech researcher's bible, and like the bible, it's not
all that easy to read.
However, it is an essential reference source for speech acoustics and
speech synthesis (as well as for human speech perception).
.in-2n
.\"Flanagan-1973-2
.]-
.ds [A Flanagan, J.L.
.as [A " and Rabiner, L.R.(Editors)
.ds [D 1973
.ds [T Speech synthesis
.ds [I Dowsen, Hutchinson and Ross
.ds [C Stroudsburg, Pennsylvania
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
I recommended this book at the end of Chapter 1 as a collection of
classic papers on the subject of speech synthesis and synthesizers.
.in-2n
.\"Holmes-1972-3
.]-
.ds [A Holmes, J.N.
.ds [D 1972
.ds [T Speech synthesis
.ds [I Mills and Boom
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This little book, by one of Britain's foremost workers in the field,
introduces the subject of speech synthesis and speech synthesizers.
It has a particularly good discussion of parallel synthesizers.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "6  LINEAR PREDICTION OF SPEECH"
.ds RT "Linear prediction of speech
.ds CX "Principles of computer speech
.pp
The speech coding techniques which were discussed in Chapter 3 operate
in the time domain, while the analysis and synthesis techniques
of Chapters 4 and 5 are
based in the frequency domain.  Linear prediction is a relatively
new method of speech analysis-synthesis,
introduced in the early 1970's and used
extensively since then, which is primarily a time-domain coding method
but can be used to give frequency-domain parameters like formant
frequency, bandwidth, and amplitude.
.pp
It has several advantages over other speech analysis techniques, and is
likely to become increasingly dominant in speech output systems.
As well as bridging the gap between time- and frequency-domain techniques, it
is of equal value for both speech storage and speech synthesis, and forms
an extremely convenient basis for speech-output systems which use high-quality
stored speech for routine messages and synthesis from phonetics or text
for unusual or exceptional conditions.  Linear prediction can be used to
separate the excitation source properties of pitch and amplitude from the
vocal tract filter which governs phoneme articulation, or, in other words,
to separate much of the prosodic from the segmental information.
Hence it makes it easy to use stored segmentals with synthetic prosody,
which is just what is needed to enhance the flexibility of stored speech by
providing overall intonation contours for utterances formed by word
concatenation (see Chapter 7).
.pp
The frequency-domain analysis technique
of Fourier transformation necessarily involves approximation because it
applies only to periodic waveforms, and so the artificial operation
of windowing is required to suppress the aperiodicity of real
speech.  In contrast, the linear predictive technique, being a time-domain
method, can \(em in certain forms \(em deal more rationally with aperiodic
signals.
.pp
The basic idea of linear predictive coding is exactly the same as
one form of adaptive differential pulse code modulation which
was introduced briefly in Chapter 3.  There it was noted that a speech
sample $x(n)$ can be predicted quite closely by the previous sample
$x(n-1)$.  The prediction can be improved by multiplying the previous
sample by a number, say $a sub 1$, which is adapted on a syllabic
time-scale.  This can be utilized for speech coding by transmitting
only the prediction error
.LB
.EQ
e(n)~=~~x(n)~-~a sub 1 x(n-1),
.EN
.LE
and using it (and the value of $a sub 1$) to reconstitute the signal
$x(n)$ at the receiver.  It is worthwhile noting that
exactly the same relationship was used for digital
preemphasis in Chapter 4, with the value of $a sub 1$
being constant at about 0.9 \(em although
the possibility of adapting it to take into account the difference
between voiced and unvoiced speech was discussed.
.pp
An obvious extension is to use several past values of the signal to form
the prediction, instead of just one.  Different multipliers for each would
be needed, so that the prediction error could be written as
.LB
.EQ
e(n)~~ mark =~~x(n)~-~a sub 1 x(n-1)~-~a sub 2 x(n-2)~-~...~-~a sub p x(n-p)
.EN
.sp
.EQ
lineup =~~x(n)~-~~sum from k=1 to p ~a sub k x(n-k).
.EN
.LE
The multipliers $a sub k$ should be adapted to minimize the error signal,
and we will consider how to do this in the next section.  It turns out
that they must be re-calculated and transmitted on a time-scale that is
rather faster than syllabic but much slower than
the basic sampling rate:  intervals
of 10\-25\ msec are usually used (compare this with the 125\ $mu$sec sampling
rate for telephone-quality speech).
A configuration for high-order adaptive differential
pulse code modulation is shown in Figure 6.1.
.FC "Figure 6.1"
.pp
Figure 6.2 shows typical time waveforms for each of the ten coefficients
over a 1-second stretch of speech.
.FC "Figure 6.2"
Notice that they vary much more slowly than, say, the speech waveform of
Figure 3.5.
.pp
Turning the above relationship into $z$-transforms gives
.LB
.EQ
E(z)~~=~~X(z)~-~~sum from k=1 to p ~a sub k z sup -k ~X(z)~~=~~(1~-~~
sum from k=1 to p ~a sub k z sup -k )~X(z).
.EN
.LE
Rewriting the speech signal in terms of the error,
.LB
.EQ
X(z)~~=~~1 over {1~-~~ sum ~a sub k z sup -k }~.~E(z) .
.EN
.LE
.pp
Now let us bring together some facts from the previous chapter which will
allow the time-domain technique of linear prediction to be interpreted
in terms of the frequency-domain formant model of speech.  Recall that speech
can be viewed as an excitation source passing through a vocal tract filter,
followed by another filter to model the effect of radiation from the lips.
The overall spectral levels can be reassigned as in Figure 5.1 so that
the excitation source has a 0\ dB/octave spectral profile, and hence is
essentially impulsive.
Considering the vocal tract filter as a series connection
of digital formant filters, its transfer function is the product of terms like
.LB
.EQ
1 over {1~-~b sub 1 z sup -1 ~+~b sub 2 z sup -2}~ ,
.EN
.LE
where $b sub 1$ and $b sub 2$ control the position and bandwidth of the formant resonances.
The \-6\ dB/octave spectral compensation can be modelled by the
first-order digital filter
.LB
.EQ
1 over {1~-~bz sup -1}~ .
.EN
.LE
The product of all these terms, when multiplied out, will have the
form
.LB
.EQ
1 over {1~-~c sub 1 z sup -1 ~-~c sub 2 z sup -2 ~-~...~-~
c sub q z sup -q }~ ,
.EN
.LE
where $q$ is twice the number of formants plus one, and the $c$'s are calculated
from the positions and bandwidths of the formant resonances and the spectral
compensation parameter.  Hence
the $z$-transform of the speech is
.LB
.EQ
X(z)~=~~1 over {1~-~~ sum from k=1 to q ~c sub k z sup -k }~.~I(z) ,
.EN
.LE
where $I(z)$ is the transform of the impulsive excitation.
.pp
This is remarkably similar to the linear prediction relation given earlier!  If
$p$ and $q$ are the same, then the linear predictive coefficients $a sub k$
form a $p$'th order polynomial which is the same as that obtained by multiplying
together the second-order polynomials representing the individual formants
(together with the first-order one for spectral compensation).
Furthermore, the predictive error $E(z)$ can be identified with the
impulsive excitation $I(z)$.  This raises the very interesting
possibility of parametrizing the error signal by its frequency and
amplitude \(em two relatively slowly-varying quantities \(em instead of
transmitting it sample-by-sample (at an 8\ kHz rate).  This is how
linear prediction separates out the excitation properties of the source
from the vocal tract filter:  the source parameters can be derived
from the error signal and the vocal tract filter is represented by
the linear predictive coefficients.
Figure 6.3 shows how this can be used for speech transmission.
.FC "Figure 6.3"
Note that
.ul
no
signals need now be transmitted at the speech sampling rate; for the
source parameters vary relatively slowly.  This leads to an extremely
low data rate.
.pp
Practical linear predictive coding schemes operate with a value of $p$ between
10 and 15, corresponding approximately to 4-formant and 7-formant synthesis
respectively.  The $a sub k$'s are re-calculated every 10 to 25\ msec, and
transmitted to the receiver.  Also, the pitch and amplitude
of the speech are estimated and transmitted at the same rate.
If the speech
is unvoiced, there is no pitch value:  an "unvoiced flag" is
transmitted instead.
Because the linear predictive coefficients are intimately related to
formant frequencies and bandwidths, a "frame rate" in the region
of 10 to 25\ msec is appropriate because this approximates the maximum rate
at which acoustic events happen in speech production.
.pp
At the receiver, the excitation waveform
is reconstituted.
For voiced speech, it is impulsive at the specified
frequency and with the specified amplitude, while for unvoiced speech it
is random, with the specified amplitude.  This signal $e(n)$, together
with the transmitted parameters $a sub 1$, ..., $a sub p$, is used
to regenerate the speech waveform by
.LB
.EQ
x(n)~=~~e(n)~+~~sum from k=1 to p ~a sub k x(n-k) ,
.EN
.LE
\(em which is the inverse of the transmitter's formula for calculating $e(n)$,
namely
.LB
.EQ
e(n)~=~~x(n)~-~~sum from k=1 to p ~a sub k x(n-k) .
.EN
.LE
This relies on knowing the past $p$ values of the speech samples.
Many systems set these past values to zero at the beginning of each pitch
cycle.
.pp
Linear prediction can also be used for speech analysis, rather than
for speech coding, as shown in Figure 6.4.
.FC "Figure 6.4"
Instead of transmitting the coefficients $a sub k$,
they are used to determine the formant positions and bandwidths.
We saw above that the polynomial
.LB
.EQ
1~-~a sub 1 z sup -1 ~-~a sub 2 z sup -2 ~-~...~-~a sub p z sup -p ,
.EN
.LE
when factored into a product of second-order terms, gives the formant
characteristics (as well as the spectral compensation term).
Factoring is equivalent to finding the complex roots of the polynomial,
and this is fairly demanding computationally \(em especially if done at
a high rate.  Consequently, peak-picking algorithms are sometimes
used instead.  The absolute value of the polynomial gives the
frequency spectrum of the vocal tract filter, and the formants
appear as peaks \(em just as they do in cepstrally smoothed speech
(see Chapter 4).
.pp
The chief deficiency in the linear predictive method, whether it
is used for speech coding or for speech analysis, is that \(em like a series
synthesizer \(em it
implements an all-pole model of the vocal tract.
We mentioned in Chapter 5 that this is rather simplistic,
especially for nasalized sounds which involve a cavity in parallel
with the oral one.  Some research has been done on incorporating zeros
into a linear predictive model, but it complicates the problem of
calculating the parameters enormously.  For most purposes people seem
to be able to live with the limitations of the all-pole model.
.sh "6.1  Linear predictive analysis"
.pp
The key problem in linear predictive coding is to determine the values
of the coefficients $a sub 1$, ..., $a sub p$.
If the error signal is to be transmitted on a sample-by-sample basis,
as it is in adaptive differential pulse code modulation, then it can be most
economically encoded if its mean power is as small as possible.
Thus the coefficients are chosen to minimize
.LB
.EQ
sum ~e(n) sup 2
.EN
.LE
over some period of time.
The period of time used is related to the frame rate at which the
coefficients are transmitted or stored, although there is no need
to make it exactly the same as one frame interval.  As mentioned above,
the frame size
is usually chosen to be in the region of 10 to 25\ msec.  Some
schemes minimize the error signal over as few as 30 samples
(corresponding to 3\ msec at a 10\ kHz sampling rate).  Others take
longer; up to 250 samples (25\ msec).
.pp
However, if the error signal is to be considered as impulsive and
parametrized by its frequency and amplitude before transmission,
or if the coefficients $a sub k$ are to be used for spectral calculations,
then it is not immediately obvious how the coefficients should be
calculated.
In fact, it is still best to choose them to minimize the above sum.
This is at least plausible, for an impulsive excitation will have a
rather small mean power \(em most of the samples are zero.
It can be justified theoretically in terms of
.ul
spectral whitening,
for it can be shown that minimizing the mean-squared error
produces an error signal whose spectrum is maximally flat.
Now the only two waveforms whose spectra are absolutely flat
are a single impulse and white noise.  Hence if
the speech is voiced, minimizing the mean-squared error
will lead to an error signal which is as nearly impulsive
as possible.  Provided the time-frame for minimizing is short enough,
the impulse will correspond to a single excitation pulse.
If the speech is unvoiced, minimization will lead to an error
signal which is as nearly white noise as possible.
.pp
How does one choose the linear predictive coefficients to minimize
the mean-squared error?  The total squared prediction error is
.LB
.EQ
M~=~~sum from n ~e(n) sup 2~~=~~sum from n
~[x(n)~-~ sum from k=1 to p ~a sub k x sub n-k ] sup 2 ,
.EN
.LE
leaving the range of summation unspecified for the moment.
To minimize $M$ by choice of the coefficients $a sub j$, differentiate
with respect to each of them and set the resulting derivatives
to zero.
.LB
.EQ
dM over {da sub j} ~~=~~-2 sum from n ~x(n-j)[x(n)~-~~
sum from k=1 to p ~a sub k x(n-k)]~~=~0~,
.EN
.LE
so
.LB
.EQ
sum from k=1 to p ~a sub k ~ sum from n ~x(n-j)x(n-k)~~=~~
sum from n ~x(n)x(n-j)~~~~j~=~1,~2,~...,~p.
.EN
.LE
.pp
This is a set of $p$ linear equations for the $p$ unknowns $a sub 1$, ...,
$a sub p$.
Solving it is equivalent to inverting a $p times p$ matrix.
This job must be repeated at the frame rate, and so if
real-time operation is desired quite a lot of calculation is needed.
.rh "The autocorrelation method."
So far, the range of the $n$-summation has been left open.  The
coefficients of the matrix equation have the form
.LB
.EQ
sum from n ~x(n-j)x(n-k).
.EN
.LE
If a doubly-infinite summation were made, with $x(n)$ being defined
as zero whenever $n<0$, we could make use of the fact that
.sp
.ce
.EQ
sum from {n=- infinity} to infinity ~x(n-j)x(n-k)~=~~
sum from {n=- infinity} to infinity ~x(n-j+1)x(n-k+1)~=~...~=~~
sum from {n=- infinity} to infinity ~x(n)x(n+j-k)
.EN
.sp
to simplify the matrix equation.  This just states that the
autocorrelation of an infinite sequence depends only on the lag at which
it is computed, and not on absolute time.
.pp
Defining $R(m)$ as the
autocorrelation at lag $m$, that is,
.LB
.EQ
R(m)~=~ sum from n ~x(n)x(n+m),
.EN
.LE
the matrix equation becomes
.LB
.ne7
.nf
.EQ
R(0)a sub 1 ~+~R(1)a sub 2 ~+~R(2)a sub 3 ~+~...~~=~R(1)
.EN
.EQ
R(1)a sub 1 ~+~R(0)a sub 2 ~+~R(1)a sub 3 ~+~...~~=~R(2)
.EN
.EQ
R(2)a sub 1 ~+~R(1)a sub 2 ~+~R(0)a sub 3 ~+~...~~=~R(3)
.EN
.EQ
etc
.EN
.fi
.LE
An elegant method due to Durbin and Levinson exists for solving this
special system of equations.  It requires much less computational
effort than is generally needed for symmetric matrix equations.
.pp
Of course, an infinite range of summation can not be used in
practice.  For one thing, the power spectrum is changing, and
only the data from a short time-frame should be used for
a realistic estimate of the optimum linear predictive coefficients.
Hence a windowing procedure,
.LB
.EQ
x(n) sup * ~=~w sub n x(n),
.EN
.LE
is used to reduce the signal to zero outside a finite range of
interest.  Windows were discussed in Chapter 4 from the
point of view of Fourier analysis of speech signals, and the same
sort of considerations apply to choosing a window for linear
prediction.
.pp
This is known as the
.ul
autocorrelation method
of computing prediction parameters.  Typically a window of
100 to 250 samples is used for analysis of one frame of speech.
.rh "Algorithm for the autocorrelation method."
The algorithm for obtaining linear prediction coefficients
by the autocorrelation method is quite simple.  It is
straightforward to compute the matrix coefficients
$R(m)$ from the speech samples and window coefficients.
The Durbin-Levinson method of solving matrix equations operates
directly on this $R$-vector to produce the coefficient vector $a sub k$.
The complete procedure is given as Procedure 6.1, and is shown
diagrammatically in Figure 6.5.
.FC "Figure 6.5"
.RF
.fi
.na
.nh
.ul
const
N=256; p=15;
.ul
type
svec =
.ul
array
[0..N\-1]
.ul
of
real;
cvec =
.ul
array
[1..p]
.ul
of
real;
.sp
.ul
procedure
autocorrelation(signal: vec; window: svec;
.ul
var
coeff: cvec);
.sp
{computes linear prediction coefficients by autocorrelation method
in coeff[1..p]}
.sp
.ul
var
R, temp:
.ul
array
[0..p]
.ul
of
real;
n: [0..N\-1]; i,j: [0..p]; E: real;
.sp
.ul
begin
{window the signal}
.in+6n
.ul
for
n:=0
.ul
to
N\-1
.ul
do
signal[n] := signal[n]*window[n];
.sp
{compute autocorrelation vector}
.br
.ul
for
i:=0
.ul
to
p
.ul
do begin
.in+2n
R[i] := 0;
.br
.ul
for
n:=0
.ul
to
N\-1\-i
.ul
do
R[i] := R[i] + signal[n]*signal[n+i]
.in-2n
.ul
end;
.sp
{solve the matrix equation by the Durbin-Levinson method}
.br
E := R[0];
.br
coeff[1] := R[1]/E;
.br
.ul
for
i:=2
.ul
to
p
.ul
do begin
.in+2n
E := (1\-coeff[i\-1]*coeff[i\-1])*E;
.br
coeff[i] := R[i];
.br
.ul
for
j:=1
.ul
to
i\-1
.ul
do
coeff[i] := coeff[i] \- R[i\-j]*coeff[j];
.br
coeff[i] := coeff[i]/E;
.br
.ul
for
j:=1
.ul
to
i\-1
.ul
do
temp[j] := coeff[j] \- coeff[i]*coeff[i\-j];
.br
.ul
for
j:=1
.ul
to
i\-1
.ul
do
coeff[j] := temp[j]
.in-2n
.ul
end
.in-6n
.ul
end.
.nf
.FG "Procedure 6.1  Pascal algorithm for the autocorrelation method"
.pp
This algorithm is not quite as efficient as it might be, for some
multiplications are repeated during the calculation of the
autocorrelation vector.  Blankinship (1974) shows how
the number of multiplications can be reduced by about half.
.[
Blankinship 1974
.]
.pp
If the algorithm is performed in fixed-point arithmetic
(as it often is in practice because of speed considerations),
some scaling must be done.  The maximum and minimum values of
the windowed signal can be determined within the window
calculation loop, and one extra pass over the vector will
suffice to scale it to maximum significance.
(Incidentally, if all sample values are the same the procedure
cannot produce a solution because $E$ becomes zero, and this
can easily be checked when scaling.)
.pp
The absolute value of the $R$-vector has no significance, and since
$R(0)$ is always the greatest element, this can be set to the largest
fixed-point number and the other $R$'s scaled down appropriately
after they have been calculated.
These scaling operations are shown as dashed boxes in Figure 6.5.
$E$ decreases monotonically
as the computation proceeds, so it is safe to initialize it to $R(0)$
without extra scaling.  The remainder of the scaling is straightforward,
with the linear prediction coefficients $a sub k$ appearing as fractions.
.rh "The covariance method."
One of the advantages of linear predictive methods that was
promised earlier was that it allows us to escape from
the problem of windowing.  To do this, we must abandon the
requirement that the coefficients of the matrix equation have
the symmetry property of autocorrelations.  Instead, suppose
that the range of $n$-summation uses a fixed number of
elements, say N, starting at $n=h$, to estimate the prediction
coefficients between sample number $h$ and sample number $h+N$.
.pp
This leads to the matrix equation
.LB
.EQ
sum from k=1 to p ~a sub k sum from n=h to h+N-1 ~x(n-j)x(n-k) ~~=~~
sum from n=h to h+N-1 ~x(n)x(n-j)~~~~j~=~1,~2,~...,~p.
.EN
.LE
Alternatively, we could write
.LB
.EQ
sum from k=1 to p ~a sub k ~ Q sub jk sup h~~=~~Q sub 0j sup h
~~~~j~=~1,~2,~...,~p;
.EN
.LE
where
.LB
.EQ
Q sub jk sup h~~=~~sum from n=h to h+N-1 ~x(n-j)x(n-k).
.EN
.LE
Note that some values of $x(n)$ outside the range  $h ~ <= ~ n ~ < ~ h+N$  are
required:  these are shown diagrammatically in Figure 6.6.
.FC "Figure 6.6"
.pp
Now  $Q sub jk sup h ~=~ Q sub kj sup h$,  so the equation has
a diagonally symmetric matrix; and in fact the matrix $Q sup h$ can
be shown to be positive semidefinite \(em and is almost always positive
definite in practice.  Advantage can be taken of these facts
to provide a computationally efficient method for solving the
equation.  According to a result called Cholesky's theorem, a
positive definite symmetric matrix $Q$ can be factored into the form
$Q ~ = ~ LL sup T$, where $L$ is a lower triangular matrix.
This leads to an efficient
solution algorithm.
.pp
This method of computing prediction coefficients has become known
as the
.ul
covariance method.
It does not use windowing of the speech signal, and can give accurate
estimates of the prediction coefficients with a smaller analysis
frame than the autocorrelation method.  Typically, 50 to 100 speech samples
might be used to estimate the coefficients, and they are re-calculated
every 100 to 250 samples.
.rh "Algorithm for the covariance method."
An algorithm for the covariance method is given in Procedure 6.2,
.RF
.fi
.na
.nh
.ul
const
N=100; p=15;
.ul
type
svec =
.ul
array
[\-p..N\-1]
.ul
of
real;
cvec =
.ul
array
[1..p]
.ul
of
real;
.sp
.ul
procedure
covariance(signal: svec;
.ul
var
coeff: cvec);
.sp
{computes linear prediction coefficients by covariance method
in coeff[1..p]}
.sp
.ul
var
Q:
.ul
array
[0..p,0..p]
.ul
of
real;
n: [0..N\-1]; i,j,r: [0..p]; X: real;
.sp
.ul
begin
{calculate upper-triangular covariance matrix in Q}
.in+6n
.ul
for
i:=0
.ul
to
p
.ul
do
.in+2n
.ul
for
j:=i
.ul
to
p
.ul
do begin
.in+2n
Q[i,j]:=0;
.br
.ul
for
n:=0
.ul
to
N\-1
.ul
do
.in+2n
Q[i,j] := Q[i,j] + signal[n\-i]*signal[n\-j]
.in-2n
.in-2n
.ul
end;
.in-2n
.sp
{calculate the square root of Q}
.br
.ul
for
r:=2
.ul
to
p
.ul
do
.in+2n
.ul
begin
.in+2n
.ul
for
i:=2
.ul
to
r\-1
.ul
do
.in+2n
.ul
for
j:=1
.ul
to
i\-1
.ul
do
.in+2n
Q[i,r] := Q[i,r] \- Q[j,i]*Q[j,r];
.in-2n
.ul
for
j:=1
.ul
to
r\-1
.ul
do
.in+2n
.ul
begin
.in+2n
X := Q[j,r];
.br
Q[j,r] := Q[j,r]/Q[j,i];
.br
Q[r,r] := Q[r,r] \- Q[j,r]*X
.in-2n
.ul
end
.in-2n
.in-2n
.in-2n
.ul
end;
.in-2n
.sp
{calculate coeff[1..p]}
.br
.ul
for
r:=2
.ul
to
p
.ul
do
.in+2n
.ul
for
i:=1
.ul
to
r\-1
.ul
do
Q[0,r] := Q[0,r] \- Q[i,r]*Q[0,i];
.in-2n
.ul
for
r:=1
.ul
to
p
.ul
do
Q[0,r] := Q[0,r]/Q[r,r];
.br
.ul
for
r:=p\-1
.ul
downto
1
.ul
do
.in+2n
.ul
for
i:=r+1
.ul
to
p
.ul
do
Q[0,r] := Q[0,r] \- Q[r,i]*Q[0,i];
.in-2n
.ul
for
r:=1
.ul
to
p
.ul
do
coeff[r] := Q[0,r]
.in-6n
.ul
end.
.nf
.FG "Procedure 6.2  Pascal algorithm for the covariance method"
and is shown diagrammatically in Figure 6.7.
.FC "Figure 6.7"
The algorithm shown is not terribly efficient from a computation
and storage point of view, although it is workable.  For one thing,
it uses the obvious method for computing the covariance matrix
by calculating
.EQ
Q sub 01 sup h ,
.EN
.EQ
Q sub 02 sup h , ~ ...,
.EN
.EQ
Q sub 0p sup h ,
.EN
.EQ
Q sub 11 sup h , ...,
.EN
in turn, which repeats most of the multiplications $p$ times \(em not
an efficient procedure.  A simple alternative is to precompute the necessary
multiplications and store them in a  $(N+h) times (p+1)$ diagonally symmetric
table, but even apart from the extra storage required for this, the number
of additions which must be performed subsequently to give the $Q$'s is far
larger than necessary.  It is possible, however, to write a procedure which is
both time- and space-efficient (Witten, 1980).
.[
Witten 1980 Algorithms for linear prediction
.]
.pp
The scaling problem is rather more tricky for the covariance
method than for the autocorrelation method.  The $x$-vector
should be scaled initially in the same way as before, but now there
are $p+1$ diagonal elements of the covariance matrix, any of which could
be the greatest element.  Of course,
.LB
.EQ
Q sub jk ~~ <= ~~ Max ( Q sub 11 , Q sub 22 , ..., Q sub pp ),
.EN
.LE
but despite the considerable communality in the summands of the diagonal
elements, there are no
.ul
a priori
bounds on the ratios between them.
.pp
The only way to scale the $Q$ matrix properly is to calculate each of its $p$
diagonal elements and use the greatest as a scaling factor.
Alternatively, the fact that
.LB
.EQ
Q sub jk ~~ <= ~~ N times Max( x sub n sup 2 )
.EN
.LE
can be used to give a bound for scaling purposes; however, this
is usually a rather conservative bound, and as $N$ is often around 100, several
bits of significance will be lost.
.pp
Scaling difficulties do not cease when $Q$ has been determined.  It is possible
to show that the elements of the lower-triangular matrix $L$ which represents
the square root of $Q$ are actually
.ul
unbounded.
In fact there is a slightly different variant of the Cholesky decomposition
algorithm which guarantees bounded coefficients but suffers from the
disadvantage that it requires square roots to be taken (Martin
.ul
et al,
1965).
.[
Martin Peters Wilkinson 1965
.]
However, experience with the method indicates that it is rare for the elements
of $L$ to exceed 16 times the maximum element of $Q$, and the possibility of
occasional failure to adjust the coefficients may be tolerable in a practical
linear prediction system.
.rh "Comparison of autocorrelation and covariance analysis."
There are various factors which should be taken into account when
deciding whether to use the autocorrelation or covariance method for linear
predictive analysis.  Furthermore, there is a rather different technique,
called the "lattice method", which will be discussed shortly.
The autocorrelation method involves windowing, which means that in
practice a rather longer stretch of speech should be used
for analysis.  We have illustrated this by setting $N$=256 in the
autocorrelation algorithm and 100 in the covariance one.
Offsetting the extra calculation that this entails is the
fact that the Durbin-Levinson method of inverting a matrix is much more
efficient than Cholesky decomposition.  In practice, this means
that similar amounts of computation are needed for each method \(em a
detailed comparison is made in Witten (1980).
.[
Witten 1980 Algorithms for linear prediction
.]
.pp
A factor which weighs against the covariance method is the
difficulty of scaling intermediate quantities within the algorithm.
The autocorrelation method can be implemented quite satisfactorily
in fixed-point arithmetic, and this makes it more suitable for
hardware implementation.  Furthermore, serious instabilities sometimes
arise with the covariance method, whereas it can be shown that
the autocorrelation one is always stable.  Nevertheless, the approximations
inherent in the windowing operation, and the smearing effect of taking a
larger number of sample points, mean that covariance-method coefficients
tend to represent the speech more accurately, if they can be obtained.
.pp
One way of using the covariance method which has proved to be rather
satisfactory in practice is to synchronize the analysis frame with
the beginning of a pitch period, when the excitation is strongest.
Pitch synchronous techniques were discussed in Chapter 4 in the context
of discrete Fourier transformation of speech.  The snag, of course, is that
pitch peaks do not occur uniformly in time, and furthermore it is difficult
to estimate their locations precisely.
.sh "6.2  Linear predictive synthesis"
.pp
If the linear predictive coefficients and the error signal are available,
it is easy to regenerate the original speech by
.LB
.EQ
x(n)~=~~e(n)~+~~ sum from k=1 to p ~a sub k x(n-k) .
.EN
.LE
If the error signal is parametrized into the sound source type
(voiced or unvoiced), amplitude, and pitch (if voiced), it can be
regenerated by an impulse repeated at the appropriate pitch
frequency (if voiced), or white noise (if unvoiced).
.pp
However, it may be that the filter represented by the coefficients $a sub k$ is
unstable, causing the output speech signal to oscillate wildly.
In fact, it is only possible for the covariance method to produce an
unstable filter, and not the autocorrelation method \(em although even
with the latter, truncation of the $a sub k$'s for transmission may turn
a stable filter into an unstable one.  Furthermore, the coefficients
$a sub k$ are not suitable candidates for quantization, because small
changes in them can have a dramatic effect on the characteristics of
the synthesis filter.
.pp
Both of these problems can be solved by using a different set of numbers,
called
.ul
reflection coefficients,
for quantization and transmission.  Thus, for example, in Figures 6.1
and 6.3 these reflection coefficients could be derived at the
transmitter, quantized, and used by the receiver to reproduce
the speech waveform.  They can be related to reflection and transmission
parameters at the junctions of an acoustic tube model of the vocal tract;
hence the name.  Procedure 6.3 shows an algorithm for calculating the
reflection coefficients from the filter coefficients $a sub k$.
.RF
.fi
.na
.nh
.ul
const
p=15;
.ul
type
cvec =
.ul
array
[1..p]
.ul
of
real;
.sp
.ul
procedure
reflection(coeff: cvec;
.ul
var
refl: cvec);
.sp
{computes reflection coefficients in refl[1..p] corresponding
to linear prediction coefficients in coeff[1..p]}
.sp
.ul
var
temp: cvec;  i, m: 1..p;
.sp
.ul
begin
.in+6n
.ul
for
m:=p
.ul
downto
1
.ul
do begin
.in+2n
refl[m] := coeff[m];
.br
.ul
for
i:=1
.ul
to
m\-1
.ul
do
temp[i] := coeff[i];
.br
.ul
for
i:=1
.ul
to
m\-1
.ul
do
.ti+2n
coeff[i] :=
.ti+4n
(coeff[i] + refl[m]*temp[m\-i]) / (1 \- refl[m]*refl[m]);
.in-2n
.ul
end
.in-6n
.ul
end.
.nf
.MT 2
Procedure 6.3  Pascal algorithm for producing reflection coefficients
from filter coefficients
.TE
.pp
Although we will not go into the theoretical details here,
reflection coefficients are bounded by $+-$1 for stable filters,
and hence form a useful test for stability.  Having a limited
range makes them easy to quantize for transmission, and in fact
they behave better under quantization than do the filter coefficients.
One could resynthesize speech from reflection coefficients by first
converting them to filter coefficients and using the synthesis
method described above.  However, it is natural to seek a single-stage
procedure which can regenerate speech directly from reflection
coefficients.
.pp
Such a procedure does exist, and is called a
.ul
lattice filter.
Figure 6.8 shows one form of lattice for speech synthesis.
.FC "Figure 6.8"
The error signal (whether transmitted or synthesized)
enters at the upper left-hand corner, passes along the top forward
signal path, being modified on the way, to give the output signal
at the right-hand side.
Then it passes back through a chain of delays along the bottom,
backward, path, and is used to modify subsequent forward signals.
Finally it is discarded at the lower left-hand corner.
.pp
There are $p$ stages in the lattice structure of Figure 6.8, where $p$ is the
order of the linear predictive filter.
Each stage involves two multiplications by the appropriate
reflection coefficients, one by the backward signal \(em the
result of which is added into the forward path \(em and the other by
the forward signal \(em the result of which is subtracted from the
backward path.  Thus the number of multiplications is twice
the order of the filter, and hence twice as many as for the
realization using coefficients $a sub k$.  If the labour necessary
to turn the reflection coefficients into $a sub k$'s is included,
the computational load becomes the same.  Moreover, since the
reflection coefficients need fewer quantization bits than the $a sub k$'s
(for a given speech quality), the word lengths are smaller in the
lattice realization.
.pp
The advantages of the lattice method of synthesis over direct evaluation
of the prediction using filter coefficients $a sub k$, then, are:
.LB
.NP
the reflection coefficients are used directly
.NP
the stability of the filter is obvious from the reflection coefficient
values
.NP
the system is more tolerant to quantization errors in fixed-point
implementations.
.LE
Although it may seem unlikely that an unstable filter would be produced
by linear predictive analysis, instability is in fact a real problem
in non-lattice implementations.  For example,
coefficients are often interpolated at the receiver, to allow longer
frame times and smooth over sudden transitions, and it is quite likely that
an unstable configuration is obtained when interpolating filter coefficients
between two stable configurations.
This cannot happen with reflection coefficients, however, because a
necessary and sufficient condition for stability is that all
coefficients lie in the interval $(-1,+1)$.
.sh "6.3  Lattice filtering"
.pp
Lattice filters are an important new method of linear predictive
.ul
analysis
as well as synthesis, and so
it is worth considering the theory behind them a little further.
.rh "Theory of the lattice synthesis filter."
Figure 6.9 shows a single stage of the synthesis lattice given earlier.
.FC "Figure 6.9"
There are two signals at each side of the lattice, and the $z$-transforms
of these have been labelled $X sup +$ and $X sup -$ at the left-hand side
and $Y sup +$ and $Y sup -$ at the right-hand side.
The direction of signal flow is forwards along the upper ("positive") path
and backwards along the lower ("negative") one.
.pp
The signal flows show that the following two relationships hold:
.LB
.EQ
Y sup + ~=~~ X sup + ~+~ k z sup -1 Y sup - ~~~~~~
.EN
for the forward (upper) path
.br
.EQ
X sup - ~ =~ -kY sup + ~+~ z sup -1 Y sup - ~~~~~~~
.EN
\h'-\w'\-'u'for the backward (lower) path.
.LE
Re-arranging the first equation yields
.LB
.EQ
X sup + ~ =~~ Y sup + ~-~ k z sup -1 Y sup - ,
.EN
.LE
and so we can describe the function of the lattice by a single matrix
equation:
.LB
.ne4
.EQ
left [ matrix {ccol {X sup + above X sup -}} right ] ~~=~~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {Y sup + above Y sup -}} right ] ~ .
.EN
.LE
It would be nice to be able to
call this an input-output equation, but it is not;
for the input signals to the lattice stage are $X sup +$ and $Y sup -$,
and the outputs are $X sup -$ and $Y sup +$.
We have written it in this form because it allows a multi-stage lattice to
be described by cascading these matrix equations.
.pp
A single-stage lattice filter has $Y sup +$ and $Y sup -$ connected together,
forming its output (call this $X sub output$), while the input is $X sup +$
($X sub input$).
Hence the input is related to the output by
.LB
.EQ
left [ matrix {ccol {X sub input above \(sq }} right ] ~~ =
~~ left [ matrix {ccol {1 above -k} ccol {-k z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {X sub output above X sub output}} right ] ~ ,
.EN
.LE
so
.LB
.EQ
X sub input ~ = ~~ (1~-~ k z sup -1 )~X sub output ,
.EN
.LE
or
.LB
.EQ
{X sub output} over {X sub input} ~~=~~ 1 over {1~-~ k sub 1 z sup -1} ~ .
.EN
.LE
(The symbol \(sq is used here and elsewhere
to indicate an unimportant element of a vector
or matrix.)  This certainly has the form of a linear predictive
synthesis filter, which is
.LB
.EQ
X(z) over E(z) ~~=~~ 1 over {1~-~~ sum from k=1 to p ~a sub k
z sup -k}~~=~~ 1 over {1~-~a sub 1 z sup -1 } ~~~~~~
.EN
when $p=1$.
.LE
.pp
The behaviour of a second-order lattice filter, shown in Figure 6.10,
can be described by
.LB
.ne4
.EQ
left [ matrix {ccol {X sub 3 sup + above X sub 3 sup -}} right ] ~~ =
~~ left [ matrix {ccol {1 above -k sub 2 } ccol {-k sub 2 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {X sub 2 sup + above X sub 2 sup -}} right ]
.EN
.sp
.ne4
.EQ
left [ matrix {ccol {X sub 2 sup + above X sub 2 sup -}} right ] ~~ =
~~ left [ matrix {ccol {1 above -k sub 1 } ccol {-k sub 1 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {X sub 1 sup + above X sub 1 sup -}} right ]
.EN
.LE
with
.LB
.ne3
.EQ
X sub 3 sup + ~=~X sub input
.EN
.br
.EQ
X sub 1 sup + ~=~ X sub 1 sup - ~=~ X sub output .
.EN
.LE
.FC "Figure 6.10"
$X sub 2 sup +$ and $X sub 2 sup -$ can be eliminated by substituting the
second equation into the first, which yields
.LB
.EQ
left [ matrix {ccol {X sub input above \(sq }} right ] ~~ mark =
~~ left [ matrix {ccol {1 above -k sub 2 } ccol {-k sub 2 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {1 above -k sub 1 } ccol {-k sub 1 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {X sub output above X sub output}} right ]
.EN
.sp
.sp
.EQ
lineup = ~~ left [ matrix {ccol {1+k sub 1 k sub 2 z sup -1 above \(sq }
ccol { -k sub 1 z sup -1 -k sub 2 z sup -2 above \(sq }} right ]
~ left [ matrix {ccol {X sub output above X sub output}} right ] ~ .
.EN
.LE
This leads to an input-output relationship
.LB
.EQ
{X sub output} over {X sub input} ~~ = ~~
1 over {1~+~k sub 1 (k sub 2 -1)z sup -1 ~-~k sub 2 z sup -2} ~ ,
.EN
.LE
which has the required form, namely
.LB
.EQ
1 over {1~-~~ sum from k=1 to p ~a sub k z sup -k } ~~~~~~ (p=2)
.EN
.LE
when
.LB
.EQ
a sub 1 ~=~-k sub 1 (k sub 2 -1)
.EN
.br
.EQ
a sub 2 ~=~k sub 2.
.EN
.LE
.pp
A third-order filter is described by
.LB
.EQ
left [ matrix {ccol {X sub input above \(sq }} right ] ~~ =
~~ left [ matrix {ccol {1 above -k sub 3 } ccol {-k sub 3 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {1 above -k sub 2 } ccol {-k sub 2 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {1 above -k sub 1 } ccol {-k sub 1 z sup -1
above z sup -1}} right ]
~ left [ matrix {ccol {X sub output above X sub output}} right ] ~ ,
.EN
.LE
and brave souls can verify that this gives an input-output
relationship
.LB
.EQ
{X sub output} over {X sub input} ~~ = ~~ 
1 over {1~+~[k sub 2 k sub 3 + k sub 1 (1-k sub 2 )] z sup -1 ~+~
[k sub 1 k sub 3 (1-k sub 2 ) -k sub 2 ] z sup -2 ~-~ k sub 3 z sup -3 } ~ .
.EN
.LE
It is fairly obvious that a $p$'th order lattice filter will give the
required all-pole $p$'th order synthesis form,
.LB
.EQ
1 over { 1~-~~ sum from k=1 to p ~a sub k z sup -k } ~ .
.EN
.LE
.pp
We have not shown that the algorithm given in Procedure 6.3 for producing
reflection coefficients from filter coefficients gives those values
for $k sub i$ which are necessary to make the lattice filter equivalent
to the ordinary synthesis filter.  However, this is the case, and it is
easy to verify by hand for the first, second, and third-order cases.
.rh "Different lattice configurations."
The lattice filters of Figures 6.8, 6.9, and 6.10 have two multipliers
per section.
This is called a "two-multiplier" configuration.
However, there are other configurations which achieve
the same effect, but require different numbers of multiplies.
Figure 6.11 shows one-multiplier and four-multiplier configurations,
along with the familiar two-multiplier one.
.FC "Figure 6.11"
It is easy to verify that the three configurations can be modelled in
matrix terms by
.LB
.ne4
$
left [ matrix {ccol {X sup + above X sup -}} right ] ~~ = ~~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {Y sup + above Y sup -}} right ]
$		two-multiplier configuration
.sp
.sp
.ne4
$
left [ matrix {ccol {X sup + above X sup -}} right ] ~~ = ~~
left [ {1-k over 1+k} right ] sup 1/2 ~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {Y sup + above Y sup -}} right ]
$	one-multiplier configuration
.sp
.sp
.ne4
$
left [ matrix {ccol {X sup + above X sup -}} right ] ~~ = ~~
1 over {(1-k sup 2) sup 1/2} ~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {Y sup + above Y sup -}} right ]
$	four-multiplier configuration.
.LE
Each of the three has the same frequency-domain response, although
a different constant factor is involved in each case.
The effect of this can be annulled by performing a single multiply
operation on the output of a complete lattice chain.
The multiplier has the form
.LB
.EQ
left [ {1 - k sub p} over {1 + k sub p} ~.~
{1 - k sub p-1} over {1 + k sub p-1} ~.~...~.~
{1 - k sub 1} over {1 + k sub 1} right ] sup 1/2
.EN
.sp
.LE
for single-multiplier lattices, and
.LB
.EQ
left [ 1 over {1 - k sub p sup 2} ~.~
1 over {1 - k sub p-1 sup 2} ~.~...~.~
1 over {1 - k sub 1 sup 2} right ] sup 1/2
.EN
.LE
for four-multiplier lattices, where the reflection coefficients
in the lattice are $k sub p$, $k sub p-1$, ..., $k sub 1$.
.pp
There are important differences between these three configurations.
If multiplication is time-consuming, the one-multiplier model has obvious
computational advantages over the other two methods.
However, the four-multiplier structure behaves substantially better
in finite word-length implementations.  It is easy to show that, with this
configuration,
.LB
.EQ
(X sup - ) sup 2 ~+~ (Y sup + ) sup 2 ~~ = ~~
(X sup + ) sup 2 ~+~ (z sup -1 Y sup - ) sup 2 ,
.EN
.LE
\(em a relationship which suggests that the "energy" in the
the input signals, namely  $X sup +$ and $Y sup -$,  is preserved in the output
signals,  $X sup -$ and $Y sup +$.
Notice that care must be taken with the $z$-transforms, since squaring is a
non-linear operation.  $(z sup -1 Y sup - ) sup 2$  means the square of
the previous value of  $Y sup -$,  which is not the same
as  $z sup -2 (Y sup - ) sup 2$.
.pp
It has been shown (Gray and Markel, 1975) that the four-multiplier
configuration has some stability properties which are not shared by other
digital filter structures.
.[
Gray Markel 1975 Normalized digital filter structure
.]
When a linear predictive filter is used for synthesis, the parameters
of the filter \(em the $k$-parameters in the case of lattice filters,
and the $a$-parameters in the case of direct ones \(em change with time.
It is usually rather difficult to guarantee stability in the case of
time-varying filter parameters, but some guarantees can be made for a
chain of four-multiplier lattices.  Furthermore, if the input is a
discrete delta function, the cumulative energies at each stage of the
lattice are the same, and so maximum dynamic range will be achieved
for the whole filter if each section is implemented with the same
word size.
.rh "Lattice analysis."
It is quite easy to construct a filter which is inverse to
a single-stage lattice.
The structure of Figure 6.12(a) does the job.
(Ignore for a moment
the dashed lines connecting Figure 6.12(a) and (b).)  Its matrix transfer
function is
.FC "Figure 6.12"
.LB
.ne4
$
left [ matrix {ccol {Y sup + above Y sup -}} right ] ~~=~~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {X sup + above X sup -}} right ]
$	analysis lattice (Figure 6.12(a)).
.LE
Notice that this is exactly the same as the transfer function of the
synthesis lattice of Figure 6.9, which is reproduced
in Figure 6.12(b), except that the $X$'s and $Y$'s are reversed:
.LB
.ne4
$
left [ matrix {ccol {X sup + above X sup -}} right ] ~~=~~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}} right ]
~ left [ matrix {ccol {Y sup + above Y sup -}} right ]
$	synthesis lattice (Figure 6.12(b)),
.LE
or, in other words,
.LB
.ne4
$
left [ matrix {ccol {Y sup + above Y sup -}} right ] ~~ = ~~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}}
right ] sup -1
~ left [ matrix {ccol {X sup + above X sup -}} right ]
$	synthesis lattice (Figure 6.12(b)).
.LE
Hence if the filters of Figures 6.12(a) and (b) were connected together
as shown by the dashed lines, they
would cancel each other out, and the overall transfer would be unity:
.LB
.ne4
.EQ
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}}
right ] ~
left [ matrix {ccol {1 above -k} ccol {-kz sup -1 above z sup -1}}
right ] sup -1 ~~ = ~~
left [ matrix {ccol {1 above 0} ccol {0 above 1}} right ] ~ .
.EN
.LE
Actually, such a connection is not possible in physical terms,
for although the upper paths can be joined together the lower ones can not.
The right-hand lower point of Figure 6.12(a) is an
.ul
output
terminal, and so is the left-hand lower one of Figure 6.12(b)!  However,
there is no need to envisage a physical connection of the lower paths.
It is sufficient for cancellation just to assume that the signals at both
of the points turn out to be the same.
.pp
And they do.
The general case of a $p$-stage analysis lattice
connected to a $p$-stage synthesis
lattice is shown in Figure 6.13.
.FC "Figure 6.13"
Notice that the forward and backward paths are connected together at both
of the extreme ends of the system.
It is not difficult to show that under these
conditions the signal at the lower righthand
terminal of the analysis chain will equal that at the lower lefthand
terminal of the synthesis chain, even though they are not connected,
provided the upper terminals are connected together as shown by the dashed
line.
Of course, the reflection coefficients  $k sub 1$, $k sub 2$, ...,
$k sub p$  in the analysis lattice must equal those in the synthesis
lattice, and as Figure 6.13 shows the order is reversed in the synthesis
lattice.
Successive analysis and synthesis sections pair off, working from
the middle outwards.  At each stage the sections cancel each other out,
giving a unit transfer function as demonstrated above.
.rh "Estimating reflection coefficients."
As stated earlier in this chapter, the key problem in linear prediction is to
determine the values of the predictive coefficients \(em in this case, the
reflection coefficients.
If this is done correctly, we have shown using Procedure 6.3 that
the the synthesis part of Figure 6.13 performs the same calculation that
a conventional direct-form linear predictive synthesizer would, and hence
the signal that excites it \(em that is, the signal represented by the
dashed line \(em must be the prediction residual, or error signal, discussed
earlier.  The system is effectively the same as the high-order adaptive
differential pulse code modulation one of Figure 6.1.
.pp
One of the most interesting features of the lattice structure for
analysis filters is that calculation of suitable values for the
reflection coefficients can be done locally at each stage of the lattice.
For example, consider the $i$'th section of the analysis lattice in
Figure 6.13.  It is possible to determine a suitable value of $k sub i$
simply by performing a calculation on the inputs to the $i$'th
section (ie $X sup +$ and $X sup -$ in Figure 6.12).
No longer need the complicated global optimization technique of matrix
inversion be used, as in the autocorrelation and covariance methods discussed
earlier.
.pp
A suitable value for $k$ in the single lattice section of Figure 6.12 is
.LB
.EQ
k~ = ~~ {E[ x sup + (n) x sup - (n-1)]} over
{( E[ x sup + (n) sup 2 ] E[ x sup - (n-1) sup 2 ] ) sup 1/2} ~~ ;
.EN
.LE
that is, the statistical correlation between $x sup + (n)$ and
$x sup - (n-1)$.
Here, $x sup + (n)$ and $x sup - (n)$ represent the input signals to the
upper and lower paths (recall that $X sup +$ and $X sup -$
are their $z$-transforms).
$x sup - (n-1)$ is just $x sup - (n)$ delayed by one time unit, that is,
the output of the $z sup -1$ box in the Figure.
.pp
The criterion of optimality for the autocorrelation and covariance methods
was that the prediction error, that is, the signal which emerges from
the right-hand end of the upper path of a lattice analysis filter,
should be minimized in a mean-square sense.
The reflection coefficients obtained from the above formula do not necessarily
satisfy any such global minimization criterion.
Nevertheless, they do keep the error signal small, and have been used with
success in speech analysis systems.
.pp
It is easy to minimize the output from either the upper or the lower path
of the lattice filter at each stage.  For example, the $z$-transform of the
upper output is given by
.LB
.EQ
Y sup + ~~=~~ X sup + ~-~ k z sup -1 X sup - ,
.EN
.LE
or
.LB
.EQ
y sup + (n) ~~=~~ x sup + (n) ~-~ k x sup - (n-1) .
.EN
.LE
Hence
.LB
.EQ
E[y sup + (n) sup 2 ] ~~ = ~~ E[x sup + (n) sup 2 ] ~-~
2kE[x sup + (n) x sup - (n-1) ] ~+~ k sup 2 E [x sup - (n-1) sup 2 ] ,
.EN
.LE
where $E$ stands for expected value, and this reaches a minimum when the
derivative with respect to $k$ becomes zero:
.LB
.EQ
-2E[x sup + (n) x sup - (n-1) ] ~+~ 2kE[x sup - (n-1) sup 2 ] ~~=~0 ,
.EN
.LE
that is, when
.LB
.EQ
k~ = ~~ {E[x sup + (n) x sup - (n-1) ]} over {E[x sup - (n-1) sup 2 ]
} ~ .
.EN
.LE
A similar calculation shows that the output of the lower path is minimized
when
.LB
.EQ
k~ = ~~ {E[x sup + (n) x sup - (n-1) ]} over {E[x sup + (n-1) sup 2 ]
} ~ .
.EN
.LE
Unfortunately, either of these expressions can exceed 1, leading to an
unstable filter.
The value of $k$ cited earlier is the geometric mean of these two
expressions, and since it is a correlation coefficient, must be less than 1.
.pp
Another possibility is to minimize the expected value of the sum of the
squares of the upper and lower outputs:
.LB
.EQ
y sup + (n) sup 2 ~+~ y sup - (n) sup 2 ~~ = ~~
(1+k sup 2 )x sup + (n) sup 2 ~-~ 2kx sup + (n) x sup - (n-1) ~+~
(1+k sup 2 )x sup - (n) sup 2 .
.EN
.LE
Taking expected values and setting the derivative with respect to k to zero
leads to
.LB
.EQ
k~ = ~~ {E[x sup + (n) x sup - (n-1) ]} over
{ half ~ E[x sup + (n) sup 2 ~+~ x sup - (n-1) sup 2 ]} ~.
.EN
.LE
This also is guaranteed to be less than 1, and has given good results
in speech analysis systems.
.pp
Figure 6.14 shows the implementation of a single section of an analysis
lattice.
.FC "Figure 6.14"
The signals $x sup + (n)$ and $x sup - (n-1)$ are fed to a
correlator, which produces a suitable value for $k$.
This value is used to calculate the output of the lattice section,
and hence the input to the next lattice section.
The reflection coefficient needs to be low-pass filtered, because it will
only be transmitted to the synthesizer occasionally (say every 20\ msec) and so a
short-term average is required.
.pp
One implementation of the correlator is shown in Figure 6.15 (Kang, 1974).
.[
Kang 1974
.]
.FC "Figure 6.15"
This calculates the value of $k$ given by the last equation above, and does it
by summing and differencing the two
signals $x sup + (n)$ and $x sup - (n-1)$, squaring the results to give
.LB
.EQ
x sup + (n) sup 2 + 2x sup + (n mark ) x sup - (n-1) +x sup - (n-1) sup 2
~~~~~~~~ x sup + (n) sup 2 - 2x sup + (n) x sup - (n-1) +x sup - (n-1) sup 2
~ ,
.EN
.LE
and summing and differencing these, to yield
.LB
.EQ
lineup 2x sup + (n) sup 2 + 2x sup - (n-1) sup 2 ~~~~~~~~
4x sup + (n) x sup - (n-1) ~ .
.EN
.LE
.sp
Before these are divided to give the final coefficient $k$, they are
individually low-pass filtered.
While some rather complex schemes have been proposed,
based upon Kalman filter theory (eg Matsui
.ul
et al,
1972),
.[
Matsui Nakajima Suzuki Omura 1972
.]
a simple exponential weighted past average has been found to be
satisfactory.  This has $z$-transform
.LB
.EQ
1 over {64 - 63 z sup -1} ~ ,
.EN
.LE
that is, in the time domain,
.LB
.EQ
y(n)~ = ~~ 63 over 64 ~ y(n-1) ~+~ 1 over 64 ~ y(n) ~ .
.EN
.LE
This filter exponentially averages past sample values
with a time-constant of 64 sampling intervals
\(em that is, 8\ msec at an 8\ kHz sampling rate.
.sh "6.4  Pitch estimation"
.pp
It is sometimes useful to think of linear prediction as a kind of
curve-fitting technique.
Figure 6.16 illustrates how four samples of a speech signal can predict
the next one.
.FC "Figure 6.16"
In essence, a curve is drawn through four points
to predict the position of the fifth, and only the prediction error
is actually transmitted.  Now if the order of linear prediction
is high enough (at least 10), and if the coefficients are chosen
correctly, the prediction will closely model the resonances of the
vocal tract.  Thus the error will actually be zero, except at pitch
pulses.
.pp
Figure 6.17 shows a segment of voiced speech together with the prediction
error (often called the prediction residual).
.FC "Figure 6.17"
It is apparent that the
error is indeed small, except at pitch pulses.
This suggests that a good way to determine the pitch period is to examine
the error signal, perhaps by looking at its autocorrelation function.
As with all pitch detection methods, one must be
careful:  spurious peaks can occur, especially in nasal sounds when
the all-pole model provided by linear prediction fails.  Continuity
constraints, which use previous values of pitch period when determining
which peak to accept as a new pitch impulse, can eliminate many of these
spurious peaks.  Unvoiced speech should produce an error signal with no
prominent peaks, and this needs to be detected.
Voiced fricatives are a difficult case:  peaks should be present
but the general noise level of the error signal will be greater than
it is in
purely voiced speech.
Such considerations have been taken into account in a practical pitch
estimation system based upon this technique (Markel, 1972).
.[
Markel 1972 SIFT
.]
.pp
This method of pitch detection highlights another advantage of the lattice
analysis technique.  When using autocorrelation or covariance analysis to
determine the filter (or reflection) coefficients, the error signal is not
normally produced.  It can, of course, be found by taking the speech samples
which constitute the current frame and running them through an analysis
filter whose parameters are those determined by the analysis, but this
is a computationally demanding exercise, for the filter must run at the
speech sampling rate (say 8\ kHz) instead of at the frame rate (say 50\ Hz).
Usually, pitch is estimated by other methods, like those discussed in
Chapter 4, when using autocorrelation or covariance linear prediction.
However, we have seen above that with the lattice method, the error
signal is produced as a byproduct:  it appears at the right-hand end
of the  upper path of the lattice chain.  Thus it is already available
for use in determining pitch periods.
.sh "6.5  Parameter coding for linear predictive storage or transmission"
.pp
In this section, the coding requirements of linear predictive parameters
will be examined.  The parameters that need to be stored or transmitted
are:
.LB
.NP
pitch
.NP
voiced-unvoiced flag
.NP
overall amplitude level
.NP
filter coefficients or reflection coefficients.
.LE
The first three are parameters of the excitation source.
They can be derived directly from the error signal as indicated above, if
it is generated (as it is in lattice implementations); or by other
methods if no error signal is calculated.
The filter or reflection coefficients are, of course, the main product
of linear predictive analysis.
.pp
It is generally agreed that around 60 levels, logarithmically spaced,
are needed to represent pitch for telephone quality speech.
The voiced-unvoiced indication requires one bit, but since pitch is
irrelevant in unvoiced speech it can be coded as one of the pitch
levels.  For example, with 6-bit coding of pitch, the value 0 can be
reserved to indicate unvoiced speech, with values 1\-63 indicating the
pitch of voiced speech.
The overall gain has not been discussed above:  it is simply the average
amplitude of the error signal.  Five bits on a logarithmic scale
are sufficient to represent it.
.pp
Filter coefficients are not very amenable to quantization.  At least
8\-10\ bits are required for each one.  However, reflection coefficients
are better behaved, and 5\-6\ bits each seems adequate.  The number of
coefficients that must be stored or transmitted is the same as the
order of the linear prediction:  10 is commonly used for low-quality
speech, with as many as 15 for higher qualities.
.pp
These figures give around 100\ bits/frame for a 10'th order system using
filter coefficients, and around 65\ bits/frame for a 10'th order system
using reflection coefficients.  Frame lengths vary between 10\ msec
and 25\ msec, depending on the quality desired.  Thus for 20\ msec frames,
the data rates work out at around 5000\ bit/s using filter coefficients,
and 3250\ bit/s using reflection coefficients.
.pp
Substantially lower data rates can be achieved by more careful
coding of parameters.  In 1976, the US Government defined a standard
coding scheme for 10-pole linear prediction with a data rate of
2400\ bit/s \(em conveniently chosen as one of the
commonly-used rates for serial data transmission.
This standard, called LPC-10, tackles the difficult problem of
protection against transmission errors (Fussell
.ul
et al,
1978).
.[
Fussell Boudra Abzug Cowing 1978
.]
.pp
Whenever data rates are reduced, redundancy inherent in the signal is
necessarily lost and so the effect of transmission errors becomes
greatly magnified.
For example, a single corrupted sample in PCM transmission of speech
will probably not be noticed, and even a short burst of errors will be
perceived as a click which can readily be distinguished from the speech.
However, any error in LPC transmission will last for one entire
frame \(em say 20\ msec \(em and worse still, it will be integrated into the
speech signal and not easily discriminated from it by the listener's brain.
A single corruption may, for example, change a voiced frame into an
unvoiced one, or vice versa.  Even if it affects only 
a reflection coefficient it will change the resonance characteristics
of that frame, and change them in a way that does not simply sound like
superimposed noise.
.pp
Table 6.1 shows the LPC-10 coding scheme.
.RF
.in+0.1i
.ta 2.0i +1.8i +0.6i
.nr x1 (\w'voiced sounds'/2)
.nr x2 (\w'unvoiced sounds'/2)
.ul
	\h'-\n(x1u'voiced sounds	\h'-\n(x2u'unvoiced sounds
.sp
pitch/voicing	7	7	60 pitch levels, Hamming
			\h'\w'00 'u'and Gray coded
energy	5	5	logarithmically coded
$k sub 1$	5	5	coded by table lookup
$k sub 2$	5	5	coded by table lookup
$k sub 3$	5	5
$k sub 4$	5	5
$k sub 5$	4	\-
$k sub 6$	4	\-
$k sub 7$	4	\-
$k sub 8$	4	\-
$k sub 9$	3	\-
$k sub 10$	2	\-
synchronization	1	1	alternating 1,0 pattern
error detection/	\-	\h'-\w'0'u'21
correction
	\h'-\w'__'u+\w'0'u'__	\h'-\w'__'u+\w'0'u'__
.sp
	\h'-\w'0'u'54	\h'-\w'0'u'54
.sp
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
	frame rate: 44.4\ Hz (22.5\ msec frames)
.in 0
.FG "Table 6.1  Bit requirements for each parameter in LPC-10 coding scheme"
Different coding is used for voiced and unvoiced frames.
Only four reflection coefficients are transmitted for unvoiced frames,
because it has been determined that no perceptible increase in speech quality
occurs when more are used.
The bits saved are more fruitfully employed to provide error detection
and correction for the other parameters.
Seven bits are used for pitch and the voiced-unvoiced flag, and they are
redundant in that only 60 possible pitch values are
allowed.
Most transmission errors in this field will be detected by the receiver;
which can then use an estimate of pitch based on previous values and
discard the erroneous one.  Pitch values are also Gray coded so that
even if errors are not detected, there is a good chance that an adjacent
pitch value is read instead.
Different numbers of bits are allocated to the various reflection
coefficients:  experience shows that the lower-numbered ones contribute
most highly to intelligibility and so these are quantized most finely.
In addition, a table lookup operation is performed on the code
generated for the first two, providing a non-linear quantization which is
chosen to minimize the error on a statistical basis.
.pp
With 54\ bits/frame and 22.5\ msec frames, LPC-10 requires a 2400\ bit/s
data rate.  Even lower rates have been used successfully for lower-quality
speech.  The Speak 'n Spell toy, described in Chapter 11, has an
average data rate of 1200\ bit/s.  Rates as low as 600\ bit/s have
been achieved (Kang and Coulter, 1976) by pattern recognition techniques operating
on the reflection coefficients:  however, the speech quality is not good.
.[
Kang Coulter 1976
.]
.sh "6.6  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "6.7  Further reading"
.pp
Most recent books on digital signal processing contain some information
on linear prediction (see Oppenheim and Schafer, 1975; Rabiner and Gold, 1975;
and Rabiner and Schafer, 1978; all referenced at the end of Chapter 4).
.LB "nn"
.\"Atal-1971-1
.]-
.ds [A Atal, B.S.
.as [A " and Hanauer, S.L.
.ds [D 1971
.ds [T Speech analysis and synthesis by linear prediction of the acoustic wave
.ds [J JASA
.ds [V 50
.ds [P 637-655
.nr [P 1
.ds [O August
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
This paper is of historical importance because it introduced the idea
of linear prediction to the speech processing community.
.in-2n
.\"Makhoul-1975-2
.]-
.ds [A Makhoul, J.I.
.ds [D 1975
.ds [K *
.ds [T Linear prediction: a tutorial review
.ds [J Proc IEEE
.ds [V 63
.ds [N 4
.ds [P 561-580
.nr [P 1
.ds [O April
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
An interesting, informative, and readable survey of linear prediction.
.in-2n
.\"Markel-1976-3
.]-
.ds [A Markel, J.D.
.as [A " and Gray, A.H.
.ds [D 1976
.ds [T Linear prediction of speech
.ds [I Springer Verlag
.ds [C Berlin
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is the only book which is entirely devoted to linear prediction of speech.
It is an essential reference work for those interested in the subject.
.in-2n
.\"Wiener-1947-4
.]-
.ds [A Wiener, N.
.ds [D 1947
.ds [T Extrapolation, interpolation and smoothing of stationary time series
.ds [I MIT Press
.ds [C Cambridge, Massachusetts
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Linear prediction is often thought of as a relatively new technique,
but it is only its application to speech processing that is novel.
Wiener develops all of the basic mathematics used in linear prediction
of speech, except the lattice filter structure.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "7  JOINING SEGMENTS OF SPEECH"
.ds RT "Joining segments of speech
.ds CX "Principles of computer speech
.pp
The obvious way to provide speech output from computers
is to select the basic acoustic units to be used; record them;
and generate utterances by concatenating together appropriate segments
from this pre-stored inventory.
The crucial question then becomes, what are the basic units?
Should they be whole sentences, words, syllables, or phonemes?
.pp
There are several trade-offs to be considered here.
The larger the units, the more utterances have to be stored.
It is not so much the length of individual utterances that is of concern,
but rather their variety, which tends to increase exponentially instead
of linearly with the size of the basic unit.  Numbers provide an
easy example:  there are $10 sup 7$ 7-digit telephone numbers, and it is
certainly infeasible to record each one individually.
Note that as storage technology improves the limitation is becoming
more and more one of recording the utterances in the first place rather
than finding somewhere to store them.
At a PCM data rate of 50\ Kbit/s, a 100\ Mbyte disk can hold over 4\ hours
of continuous speech.
With linear predictive coding at 1\ Kbit/s it holds 0.8 of a
megasecond \(em well over a week.  And this is a 24-hour 7-day week,
which corresponds to a working month; and continuous speech \(em without
pauses \(em which probably requires another factor of five for
production by a person.
Setting up a recording session to fill the disk would be a formidable
task indeed!
Furthermore, the use of videodisks \(em which will be common domestic items
by the end of the decade \(em could increase these figures by a factor of 50.
.pp
The word seems to be a sensibly-sized basic unit.
Many applications use a rather limited vocabulary \(em 190 words
for the airline reservation system described in Chapter 1.
Even at PCM data rates, this will consume less than 0.5\ Mbyte of
storage.
Unfortunately, coarticulation and prosodic factors now come into play.
.pp
Real speech is connected \(em there are few gaps between words.
Coarticulation, where sounds are affected by those on either side,
naturally operates across word boundaries.
And the time constants of coarticulation are associated with the
mechanics of the vocal tract and hence measure tens or hundreds
of msec.  Thus the effects straddle several pitch periods (100\ Hz pitch
has 10\ msec period) and cannot be simulated by simple interpolation of the
speech waveform.
.pp
Prosodic features \(em notably pitch and rhythm \(em span much longer
stretches of speech than single words.  As far as most speech output
applications are concerned, they operate at the utterance level of
a single, sentence-sized, information unit.  They cannot be
accomodated if speech waveforms of individual words of
the utterance are stored,
for it is rarely feasible to alter the fundamental
frequency or duration of a time waveform without changing all the formant
resonances as well.
However, both word-to-word coarticulation and the essential features
of rhythm and intonation can be incorporated if the stored words are
coded in source-filter form.
.pp
For more general applications of speech output, the limitations of
word storage soon become apparent.  Although people's daily
vocabularies are not large, most words have a variety
of inflected forms which need to be treated separately if a strict
policy is adopted of word storage.  For instance, in this book
there are 84,000 words, and 6,500 (8%) different ones (counting
inflected forms).
In Chapter 1 alone, there are 6,800 words and 1,700 (25%) different ones.
.pp
It seems crazy to treat a simple inflection like "$-s$" or its voiced
counterpart, "$-z$" (as in "inflection\c
.ul
s\c
"),
as a totally different word from the base form.
But once you consider storing roots and endings separately,
it becomes apparent
that there is a vast number of different endings, and it is difficult to know
where to draw the line.  It is natural to think instead of simply
using the syllable as the basic unit.
.pp
A generous estimate of the number of different syllables in English is 10,000.
At three a second, only about an
hour's storage is required for them all.  But waveform storage
will certainly not do.
Although coarticulation effects between words are needed to make
speech sound fluent, coarticulation between syllables is necessary
for it even to be
.ul
comprehensible.
Adopting a source-filter form of representation is essential, as is
some scheme of interpolation between syllables which simulates
coarticulation.
Unfortunately, a great deal of acoustic action occurs at syllable
boundaries \(em stops are exploded, the sound source changes
between voicing and frication, and so on.  It may be more appropriate
to consider inverse syllables, comprising a vowel-consonant-vowel sequence
instead of consonant-vowel-consonant.
(These have jokingly been dubbed "lisibles"!)
.pp
There is again some considerable practical difficulty in creating
an inventory of syllables, or lisibles.
Now it is not so much the recording that is impractical, but
the editing needed to ensure that the cuts between syllables are made
at exactly the right point.  As units get smaller, the exact
placement of the boundaries becomes ever more critical; and several thousand
sensitive editing jobs is no easy task.
.pp
Since quite general effects of coarticulation must be accomodated
with syllable synthesis, there will not necessarily be significant
deterioration if smaller, demisyllable, units are employed.
This reduces the segment inventory to an estimated 1000\-2000 entries,
and the tedious job of editing each one individually becomes at
least feasible, if not enviable.
Alternatively, the segment inventory could be created by artificial
means involving cut-and-try experiments with resonance parameters.
.pp
The ultimate in economy of inventory size, of course, is to use
phonemes as the basic unit.  This makes the most critical
part of the task interpolation between units, rather than their
construction or recording.  With only about 40 phonemes
in English, each one can be examined in many different contexts to
ascertain the best data to store.
There is no need to record them directly from a human voice \(em it
would be difficult anyway for most cannot be produced in isolation.
In fact, a phoneme is an abstract unit, not a particular sound
(recall the discussion of phonology in Chapter 2), and so it is
most appropriate that data be abstracted from several different
realizations rather than an exact record made of any one.
.pp
If information is stored about phonological units of
speech \(em phonemes \(em the difficult task of phonological-to-phonetic
conversion must necessarily be performed automatically.
Allophones are created by altering the transitions between units,
and to a lesser extent by modifying the central parts of the units
themselves.
The rules for making transitions will have a big effect on the
quality of the resulting speech.
Instead of trying to perform this task automatically by a computer
program, the allophones themselves could be stored.  This will
ease the job of generating transitions between segments, but
will certainly not eliminate it.
The total number of allophones will depend on the narrowness of the
transcription system:  60\-80 is typical, and it is unlikely to exceed
one or two hundred.  In any case there will not be a storage problem.
However, now the burden of producing an allophonic transcription
has been transferred to the person who codes the utterance prior
to synthesizing it.  If he is skilful and patient, he should
be able to coax the system into producing fairly understandable
speech, but the effort required for this on a per-utterance basis
should not be underestimated.
.RF
.nr x0 \w'sentences  '
.nr x1 \w'  '
.nr x2 \w'depends on  '
.nr x3 \w'generalized or  '
.nr x4 \w'natural speech  '
.nr x5 \w'author of segment'
.nr x6 \n(x0u+\n(x1u+\n(x2u+\n(x3u+\n(x4u+\n(x5u
.nr x7 (\n(.l-\n(x6)/2
.in \n(x7u
.ta \n(x0u +\n(x1u +\n(x2u +\n(x3u +\n(x4u
	|	size of	storage	source of	principal
	|	utterance	method	utterance	burden is
	|	inventory		inventory	placed on
	|\h'-1.0i'\l'\n(x6u\(ul'
	|
sentences	|	depends on	waveform or	natural speech	recording artist,
	|	application	source-filter		storage medium
	|		parameters
	|
words	|	depends on	source-filter	natural speech	recording artist
	|	application	parameters		and editor,
	|				storage medium
	|
syllables/	|	\0\0\010000	source-filter	natural speech	recording editor
  lisibles	|		parameters
	|
demi-	|	\0\0\0\01000	source-filter	natural speech	recording editor
  syllables	|		parameters	or artificially	or inventory
	|			generated	compiler
	|
phonemes	|	\0\0\0\0\0\040	generalized	artificially	author of segment
	|		parameters	generated	concatenation
	|				program
	|
allophones	|	\0\050\-100	generalized or	artificially	coder of
	|		source-filter	generated or	synthesized
	|		parameters	natural speech	utterances
	|\h'-1.0i'\l'\n(x6u\(ul'
.in 0
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 7.1  Some issues relevant to choice of basic unit"
.pp
Table 7.1 summarizes in broad brush-strokes the issues which relate to the
choice of basic unit for concatenation.
The sections which follow provide more detail about the different
methods of joining segments of speech together.
Only segmental aspects are considered, for the important problems of
prosody will be treated in the next chapter.
All of the methods rely to some extent on the acoustic properties of speech,
and as smaller basic units are considered the role of speech acoustics
becomes more important.
It is impossible in a book like this to give a detailed account of acoustic
phonetics, for it would take several volumes!
What I aim to do in the following pages is to highlight some salient features
which are relevant to segment concatenation, without attempting to be
complete.
.sh "7.1  Word concatenation"
.pp
For general speech output, word concatenation is an inherently limited
technique because of the large number of phonetically different words.
Despite this fact, it is at present the most widely-used synthesis
method, and is likely to remain so for several years.
We have seen that the primary problems are word-to-word
coarticulation and prosody; and both can be overcome, at least to a useful
approximation, by coding the words in source-filter form.
.rh "Time-domain techniques."
Nevertheless, a surprising number of applications simply store
the time waveform, coded, usually, by one of the techniques described in
Chapter 3.
From an implementation point of view there are many advantages to this.
Speech quality can easily be controlled by selecting a suitable sampling
rate and coding scheme.
A natural-sounding voice is guaranteed; male or female as desired.
The equipment required is minimal \(em a digital-to-analogue
converter and post-sampling filter will do for synthesis if
PCM coding is used, and
DPCM, ADPCM, and delta modulation decoders are not much more complicated.
.pp
From a speech point of view, the resulting utterances can never be made
convincingly fluent.
We discussed the early experiments of Stowe and Hampton (1961)
at the beginning of Chapter 3.
.[
Stowe Hampton 1961
.]
A major drawback to word concatenation in the
analogue domain is the introduction of clicks and other interference
between words:  it is difficult to prevent the time waveform transitions
from adding extraneous sounds.
This poses no problem with digital storage, however, for the waveforms
can be edited accurately prior to storage so that they start
and finish at an exactly
zero level.
Rather, the lack of fluency stems from the absence of proper control
of coarticulation and prosody.
.pp
But this is not necessarily a serious drawback if the application is
a sufficiently limited one.  Complete, invariant utterances can be
stored as one unit.  Often they must contain data-dependent
slot-fillers, as in
.LB
This flight makes \(em stops
.LE
and
.LB
Flight number \(em leaves \(em at \(em , arrives in \(em at \(em
.LE
(taken from the airline reservation system of Chapter 1
(Levinson and Shipley, 1980)).
.[
Levinson Shipley 1980
.]
Then, each slot-filling word is recorded in an intonation consistent
both with its position in the template utterance and with the
intonation of that utterance.
This could be done by embedding the word in the utterance
for recording, and excising it by digital editing before storage.
It would be dangerous to try to take into account coarticulation effects,
for the coarticulation could not be made consistent with both the
several slot-fillers and the single template.
This could be overcome if several versions of the template were stored,
but then the scheme becomes subject to combinatorial explosion
if there is more than one slot in a single utterance.
But it is not really necessary, for the lack of fluency will probably
be interpreted by a benevolent listener as an attempt to convey the
information as clearly as possible.
.pp
Difficulties will occur if the same slot-filler is used in different
contexts.  For instance, the first gap in each of the sentences above
contains a number; yet the intonation of that number is different.
Many systems simply ignore this problem.
Then one does notice anomalies, if one is attentive:  the words come,
as it were, from different mouths, without fluency.
However, the problem is not necessarily acute.  If it is, two or more
versions of each slot-filler can be recorded, one for each context.
.pp
As an example, consider the synthesis of 7-digit telephone numbers,
like 289\-5371.  If one version only of each digit is stored,
it should be recorded in a level tone of voice.  A pause should be
inserted after the third digit of the synthetic number, to accord
with common elocution.  The result will certainly be unnatural, although
it should be clear and intelligible.
Any pitch errors in the recordings will make certain numbers
audibly anomalous.
At the other extreme, 70 single digits could be stored, one version of
each digit for each position in the number.  The recording will be
tedious and error-prone, and the synthetic utterances will still not
be fluent \(em for coarticulation is ignored \(em but instead
unnaturally clearly enunciated.  A compromise is to record only
three versions of each digit, one for any of the
five positions
.nr x1 \w'\(ul'
.nr x2 (8*\n(x1)
.nr x3 0.2m
\zx\h'\n(x1u'\zx\h'\n(x1u'\h'\n(x1u'\z\-\h'\n(x1u'\zx\h'\n(x1u'\zx\h'\n(x1u'\c
\zx\h'\n(x1u'\h'\n(x1u'\v'\n(x3u'\l'-\n(x2u\(ul'\v'-\n(x3u' ,
another one for the third position
\h'\n(x1u'\h'\n(x1u'\zx\h'\n(x1u'\z\-\h'\n(x1u'\h'\n(x1u'\c
\h'\n(x1u'\h'\n(x1u'\h'\n(x1u'\v'\n(x3u'\l'-\n(x2u\(ul'\v'-\n(x3u' ,
and the last for the final position
\h'\n(x1u'\h'\n(x1u'\h'\n(x1u'\z\-\h'\n(x1u'\h'\n(x1u'\c
\h'\n(x1u'\h'\n(x1u'\zx\h'\n(x1u'\v'\n(x3u'\l'-\n(x2u\(ul'\v'-\n(x3u' .
The first version will be in a level voice, the second an
incomplete, rising tone; and the third a final, dropping pitch.
.rh "Joining formant-coded words."
The limitations of the time-domain method are lack of
fluency caused by unnatural transitions between words, and the
combinatorial explosion created by recording slot-fillers several times
in different contexts.
Both of these problems can be alleviated by storing formant tracks,
concatenating them with suitable interpolation, and applying a complete
pitch contour suitable for the whole utterance.
But one can still not generate conversational speech, for natural speech
rhythms cause non-linear warpings of the time axis which cannot reasonably
be imitated by this method.
.pp
Solving problems often creates others.
As we saw in Chapter 4, it is not easy to obtain reliable formant tracks
automatically.  Yet hand-editing of formant parameters adds a whole new
dimension to the problem of vocabulary construction, for it is
an exceedingly tiresome and time-consuming task.
Even after such tweaking, resynthesized utterances will be degraded
considerably from the original, for the source-filter model is by no means
a perfect one.
A hardware or real-time software formant synthesizer must be added
to the system, presenting design problems and creating extra cost.
Should a serial or parallel synthesizer be used? \(em the latter offers
potentially better speech (especially in nasal sounds), but requires
additional parameters, namely formant amplitudes, to be estimated.
Finally, as we will see in the next chapter, it is not an easy matter to
generate a suitable pitch contour and apply it to the utterance.
.pp
Strangely enough, the interpolation itself does not present any great
difficulty, for there is not enough information in the formant-coded
words to make possible sophisticated coarticulation.
The need for interpolation is most pressing when one word ends with
a voiced sound and the next begins with one.
If either the end of the first or the beginning of the second word
(or both) is unvoiced, unnatural formant transitions do not matter
for they will not be heard.
Actually, this is only strictly true for fricative transitions:  if
the juncture is aspirated then formants will be perceived in the
aspiration.  However,
.ul
h
is the only fully aspirated sound in English,
and it is relatively uncommon.
It is not absolutely necessary to interpolate the fricative filter resonance,
because smooth transitions from one fricative sound to another are rare
in natural speech.
.pp
Hence unless both sides of the junction are voiced, no interpolation
is needed:  simple abuttal of the stored parameter tracks will do.
Note that this is
.ul
not
the same as joining time waveforms, for the synthesizer
will automatically ensure a relatively smooth transition from one
segment to another because of energy storage in the filters.
A new set of resonance parameters for the formant-coded words will be stored
every 10 or 20 msec (see Chapter 5), and so the transition will automatically
be smoothed over this time period.
.pp
For voiced-to-voiced transitions, some interpolation is needed.
An overlap period of duration, say, 50\ msec, is established, and
the resonance parameters in the final 50\ msec of the first word are
averaged with those in the first 50\ msec of the second.
The average is weighted, with the first word's formants dominating
at the beginning and their effect progressively dying out
in favour of the second word.
.pp
More sophisticated than a simple average is to weight the components
according to how rapidly they are changing.
If the spectral change in one word is much greater than that in the
other, we might expect that this will dominate the transition.
A simple measure of spectral derivative at any given time can be found
by adding the magnitude of the discrepancies in each formant frequency
between one sample and the next.
The spectral change in the transition region can be obtained by summing
the spectral derivatives at each sample in the region.
Such a measure can perhaps be made more accurate by taking into
account the relative importance of the formants, but will probably
never be more than a rough and ready yardstick.
At any rate, it can be used to load the average in favour of the
dominant side of the junction.
.pp
Much more important for naturalness of the speech are the effects
of rhythm and intonation, discussed in the next chapter.
.pp
Such a scheme has been implemented and tested on \(em guess what! \(em 7-digit
telephone numbers (Rabiner
.ul
et al,
1971).
.[
Rabiner Schafer Flanagan 1971
.]
Significant improvement (at the 5% level of statistical
significance) in people's
ability to recall numbers was found for this method over direct
abuttal of either natural or synthetic versions of the digits.
Although the method seemed, on balance, to produce utterances that were
recalled less accurately than completely natural spoken
telephone numbers, the difference was not significant (at the 5% level).
The system was also used to generate wiring instructions by computer
directly from the connection list, as described in Chapter 1.
As noted there, synthetic speech was actually preferred to natural speech
in the noisy environment of the production line.
.rh "Joining linear predictive coded words."
Because obtaining accurate formant tracks for natural utterances
by Fourier transform methods is difficult, it is worth considering
the use of linear prediction as the source-filter model.
Actually, formant resonances can be extracted from linear predictive
coefficients quite easily, but there is no need to do this because
the reflection coefficients themselves are quite suitable
for interpolation.
.pp
A slightly different interpolation scheme from that described in the
previous section has been reported (Olive, 1975).
.[
Olive 1975
.]
The reflection coefficients were spliced during an overlap region of
only 20\ msec.
More interestingly, attempts were made to suppress the plosive bursts
of stop sounds in cases where they were followed by another stop at
the beginning of the next word.
This is a common coarticulation, occurring, for instance, in the phrase
"stop burst".  In running speech, the plosion on the
.ul
p
of "stop" is
normally suppressed because it is followed by another stop.
This is a particularly striking case because the place of articulation
of the two stops
.ul
p
and
.ul
b
is the same:  complete suppression is not as likely
to happen in "stop gap", for example (although it may occur).
Here is an instance of how extra information could improve the
quality of the synthetic transitions considerably.
However, automatically identifying the place of articulation of stops is
a difficult job, of a complexity far above what is appropriate for
simply joining words stored in source-filter form.
.pp
Another innovation was introduced into the transition between two
vowel sounds, when the second word began with an accented syllable.
A glottal stop was placed at the juncture.
Although the glottal stop was not described in Chapter 2, it is a sound
used in many dialects of English.  It frequently occurs
in the utterance "uh-uh", meaning "no".  Here it
.ul
is
used to separate two vowel sounds, but in fact this is not particularly
common in most dialects.
One could say "the apple", "the orange", "the onion" with a neutral vowel
in "the" (to rhyme with "\c
.ul
a\c
bove") and a glottal stop as separator,
but it is much more usual to rhyme "the" with "he" and introduce a
.ul
y
between the words.
Similarly, even speakers who do not normally pronounce an
.ul
r
at the
end of words will introduce one in "bigger apple", rather than
using a glottal stop.
Note that it would be wrong to put an
.ul
r
in "the apple", even
for speakers who usually terminate "the" and "bigger" with the same sound.
Such effects occur at a high level of processing, and are practically
impossible to simulate with word-interpolation rules.
Hence the expedient of introducing a glottal stop is a good one, although
it is certainly unnatural.
.sh "7.2  Concatenating whole or partial syllables"
.pp
The use of segments larger than a single phoneme or allophone but smaller
than a word as the basic unit for speech synthesis has an interesting
history.
It has long been realized that transitions between phonemes are
extremely sensitive and critical components of speech, and thus are
essential for successful synthesis.
Consider the unvoiced stop sounds
.ul
p, t,
and
.ul
k.
Their central portion is actually silence!  (Try saying a word like
"butter" with a very long
.ul
t.\c
)  Hence
in this case it is
.ul
only
the transitional information which can distinguish these sounds from
each other.
.pp
Sound segments which comprise the transition from the centre of one phoneme
to the centre of the next are called
.ul
dyads
or
.ul
diphones.
The possibility of using them as the basic units for concatenation
was first mooted in the mid 1950's.
The idea is attractive because there is relatively little spectral
movement in the central, so-called "steady-state", portion of many
phonemes \(em in the extreme case of unvoiced stops there is not only
no spectral movement, but no spectrum at all in the steady state!
At that time the resonance synthesizer was in its infancy, and
so recorded segments of live speech were used.  The early experiments
met with little success because of the technical difficulties
of joining analogue waveforms and inevitable discrepancies between
the steady-state parts of a phoneme recorded in different contexts \(em not
to mention the problems of coarticulation and prosody which effectively
preclude the use of waveform concatenation at such a low level.
.pp
In the mid 1960's, with the growing use of resonance synthesizers,
it became possible to generate diphones by copying resonance parameters
manually from a spectrogram, and improving the result by trial and error.
It was not feasible to extract formant frequencies automatically from real
speech, though, because the fast Fourier transform was not yet widely
known and the computational burden of slow Fourier transformation was
prohibitive.
For example, a project at IBM stored manually-derived parameter tracks
for diphones, identified by pairs of phoneme names (Dixon and Maxey, 1968).
.[
Dixon Maxey 1968
.]
To generate a synthetic utterance it was coded in
phonetic form and used to access
the diphone table to give a set of parameter tracks for the complete
utterance.  Note that this is the first system we have encountered
whose input is a phonetic transcription which relates to an inventory
of truly synthetic character:  all previous schemes used recordings of
live speech, albeit processed in some form.
Since the inventory was synthetic, there was no difficulty in ensuring
that discontinuities did not arise between segments beginning and ending with
the same phoneme.  Thus interpolation was irrelevant, and the synthesis
procedure concentrated on prosodic questions.  The resulting speech
was reported to be quite impressive.
.pp
Strictly speaking, diphones are not demisyllables but phoneme pairs.
In the simplest case they happen to be similar, for two primary diphones
characterize a consonant-vowel-consonant syllable.
There is an advantage to using demisyllables rather than diphones as the basic
unit, for many syllables begin or end with complicated consonant clusters
which are not easy to produce convincingly by diphone
concatenation.
But they are not easy to produce by hand-editing resonance parameters
either!
Now that speech analysis methods have been developed and refined,
resonance parameters or linear predictive coefficients
can be extracted automatically
from natural utterances, and there has been a resurgence of interest in
syllabic and demisyllabic synthesis methods.  The wheel has turned
full circle, from segments of natural speech to hand-tailored parameters
and back again!
.pp
The advantage of storing demisyllables over syllables (or lisibles) from
the point of view of storage capacity has already been pointed out
(perhaps 1,000\-2,000 demisyllables as opposed to 4,000\-10,000 syllables).
But it is probably not too significant with the continuing decline
of storage costs.
The requirements are of the order of 25\ Kbyte versus 0.5\ Mbyte
for 1200\ bit/s linear predictive coding, and the latter could
almost be accomodated today \(em 1981 \(em on a state-of-the-art
read-only memory chip.
A bigger advantage comes from rhythmic considerations.
As we will see in the next chapter, the rhythms of fluent speech cause
dramatic variations in syllable duration, but these seem to affect
the vowel and closing consonant cluster much more than the initial consonant
cluster.  Thus if a demisyllable is deemed to begin shortly (say 60\ msec)
after onset of the vowel, when the formant structure has settled down,
the bulk of the vowel and the closing consonant cluster will form a
single demisyllable.  The opening cluster of the next syllable will lie
in the next demisyllable.  Then differential lengthening can be applied
to that part of the syllable which tends to be stretched in live speech.
.pp
One system for demisyllable concatenation has produced excellent results
for monosyllabic English words (Lovins and Fujimura, 1976).
.[
Lovins Fujimura 1976
.]
Complex word-final consonant clusters are excluded from the inventory by
using syllable affixes
.ul
s, z, t,
and
.ul
d;
these are attached to the
syllabic core as a separate exercise (Macchi and Nigro, 1977).
.[
Macchi Nigro 1977
.]
Prosodic rather than segmental considerations are likely to prove the major
limiting factor when this scheme is extended to running speech.
.pp
Monosyllabic words spoken in isolation are coded as linear predictive
reflection coefficients, and segmented by digital editing into the initial
consonant cluster and the vocalic nucleus plus final cluster.
The cut is made 60\ msec into the vowel, as suggested above.
This minimizes the difficulty of interpolation when concatenating
segments, for there is ample voicing on either side of the juncture.
The reflection coefficients should not differ radically because the
vowel is the same in each demisyllable.
A 40\ msec overlap is used, with the usual linear interpolation.
An alternative smoothing rule applies when the second segment has
a nasal or glide after the vowel.  In this case anticipatory coarticulation
occurs, affecting even the early part of the vowel.  For example, a vowel
is frequently nasalized when followed by a nasal sound \(em even in English
where nasalization is not a distinctive feature in vowels (see Chapter 2).
Under these circumstances the overlap area is moved forward in time so
that the colouration applies throughout almost the whole vowel.
.sh "7.3  Phoneme synthesis"
.pp
Acoustic phonetics is the study of how the acoustic
signal relates to the phonetic sequence which was spoken or heard.
People \(em especially engineers \(em often ask, how could phonetics not
be acoustic?  In fact it can be articulatory, auditory, or linguistic
(phonological), for example, and we have touched on the first and last
in Chapter 2.
The invention of the sound spectrograph in the late 1940's was an
event of colossal significance for acoustic phonetics, for it somehow
seemed to make the intricacies of speech visible.
(This was thought to be a greater advance than actually turned
out:  historically-minded readers should refer to Potter
.ul
et al,
1947,
for an enthusiastic contemporary appraisal of the invention.)  A
.[
Potter Kopp Green 1947
.]
result of several years of research at Haskins Laboratories in New York
during the 1950's was a set of "minimal rules for synthesizing speech",
which showed how stylized formant patterns could generate cues for
identifying vowels and, particularly, consonants
(Liberman, 1957; Liberman
.ul
et al,
1959).
.[
Liberman 1957 Some results of research on speech perception
.]
.[
Liberman Ingemann Lisker Delattre Cooper 1959
.]
.pp
These were to form the basis of many speech synthesis-by-rule computer
programs in the ensuing decades.  Such programs take as input a
phonetic transcription of the utterance and generate a spoken version
of it.  The transcription may be broad or narrow, depending on the
system.  Experience has shown that the Haskins rules really are
minimal, and the success of a synthesis-by-rule program depends on
a vast collection of minutia, each seemingly insignificant in isolation
but whose effects combine to influence the speech quality dramatically.
The best current systems produce clearly understandable
speech which is nevertheless something of a strain to listen to for
long periods.
However, many are not good; and some are execrable.
In recent times commercial influences have unfortunately restricted
the free exchange of results and programs between academic researchers,
thus slowing down progress.
Research attention has turned to prosodic factors,
which are certainly less well understood than segmental ones, and
to synthesis from plain English text rather than from phonetic transcriptions.
.pp
The remainder of this chapter describes the techniques of segmental
synthesis.  First it is necessary to introduce some
elements of acoustic phonetics.
It may be worth re-reading Chapter 2 at this point, to refresh
your memory about the classification of speech sounds.
.sh "7.4  Acoustic characterization of phonemes"
.pp
Shortly after the invention of the sound spectrograph an inverse
instrument was developed, called the "pattern playback" synthesizer.
This took as input a spectrogram, either in its original form or
painted by hand.
An optical arrangment was used to modulate the amplitude of some
fifty harmonically-related oscillators by the lightness or darkness
of each point on the frequency axis of the spectrogram.
As it was drawn past the playing head, sound was produced which
had approximately the frequency components shown on the spectrogram,
although the fundamental frequency was constant.
.pp
This device allowed the complicated
acoustic effects seen on a spectrogram (see for example Figures 2.3 and 2.4)
to be replayed in either original or simplified form.
Hence the features which are important for perception of the different sounds
could be isolated.  The procedure was to copy from an actual spectrogram
the features which were most prominent visually, and then to make further
changes by trial and error until the result was judged to have
reasonable intelligibility when replayed.
.pp
For the purpose of acoustic characterization of particular phonemes,
it is useful to consider the central, steady-state part separately from
transitions into and out of the segment.
The steady-state part is that sound which is heard when the phoneme
is prolonged.  The term "phoneme" is being used in a rather loose sense
here:  it is more appropriate to think of a "sound segment" rather than
the abstract unit which forms the basis of phonological classification,
and this is the terminology I will adopt.
.pp
The essential auditory characteristics of some sound segments are inherent in
their steady states.
If a vowel, for example, is spoken and prolonged, it can readily be
identified by listening to any part of the utterance.
This is not true for diphthongs:  if you say "I" very slowly and freeze
your vocal tract posture at any time, the resulting steady-state sound
will not be sufficient to identify the diphthong.  Rather, it will be
a vowel somewhere between
.ul
aa
(in "had") or
.ul
ar
(in "hard") and
.ul
ee
(in "heed").
Neither is it true for glides, for prolonging
.ul
w
(in "want") or
.ul
y
(in "you") results in vowels resembling respectively
.ul
u
("hood") or
.ul
ee
("heed").
Fricatives, voiced or unvoiced, can be identified from the steady state;
but stops can not, for their's is silent (or \(em in the case
of voiced stops \(em something close to it).
.pp
Segments which are identifiable from their steady state are easy to synthesize.
The difficulty lies with the others, for it must be the transitions which
carry the information.  Thus "transitions" are an essential part of speech,
and perhaps the term is unfortunate for it calls to mind an unimportant
bridge between one segment and the next.
It is tempting to use the words "continuant" and "non-continuant" to distinguish
the two categories; unfortunately they are used by phoneticians in a different
sense.
We will call them "steady-state" and "transient" segments.  The latter term
is not particularly appropriate, for even sounds in this class
.ul
can
be prolonged:  the point is that the identifying information is in the
transitions rather than the steady state.
.RF
.nr x1 (\w'excitation'/2)
.nr x2 (\w'formant resonance'/2)
.nr x3 (\w'fricative'/2)
.nr x4 (\w'frequencies (Hz)'/2)
.nr x5 (\w'resonance (Hz)'/2)
.nr x0 4n+1.7i+0.8i+0.6i+0.6i+1.0i+\w'00'+\n(x5
.nr x6 (\n(.l-\n(x0)/2
.in \n(x6u
.ta 4n +1.7i +0.8i +0.6i +0.6i +1.0i
		\h'-\n(x1u'excitation		\0\0\h'-\n(x2u'formant resonance	\0\0\h'-\n(x3u'fricative
				\0\0\h'-\n(x4u'frequencies (Hz)	\0\0\c
\h'-\n(x5u'resonance (Hz)
\l'\n(x0u\(ul'
.sp
.nr x1 (\w'voicing'/2)
\fIuh\fR	(the)	\h'-\n(x1u'voicing	\0500	1500	2500
\fIa\fR	(bud)	\h'-\n(x1u'voicing	\0700	1250	2550
\fIe\fR	(head)	\h'-\n(x1u'voicing	\0550	1950	2650
\fIi\fR	(hid)	\h'-\n(x1u'voicing	\0350	2100	2700
\fIo\fR	(hod)	\h'-\n(x1u'voicing	\0600	\0900	2600
\fIu\fR	(hood)	\h'-\n(x1u'voicing	\0400	\0950	2450
\fIaa\fR	(had)	\h'-\n(x1u'voicing	\0750	1750	2600
\fIee\fR	(heed)	\h'-\n(x1u'voicing	\0300	2250	3100
\fIer\fR	(heard)	\h'-\n(x1u'voicing	\0600	1400	2450
\fIar\fR	(hard)	\h'-\n(x1u'voicing	\0700	1100	2550
\fIaw\fR	(hoard)	\h'-\n(x1u'voicing	\0450	\0750	2650
\fIuu\fR	(food)	\h'-\n(x1u'voicing	\0300	\0950	2300
.nr x1 (\w'aspiration'/2)
\fIh\fR	(he)	\h'-\n(x1u'aspiration
.nr x1 (\w'frication'/2)
.nr x2 (\w'frication and voicing'/2)
\fIs\fR	(sin)	\h'-\n(x1u'frication				6000
\fIz\fR	(zed)	\h'-\n(x2u'frication and voicing				6000
\fIsh\fR	(shin)	\h'-\n(x1u'frication				2300
\fIzh\fR	(vision)	\h'-\n(x2u'frication and voicing				2300
\fIf\fR	(fin)	\h'-\n(x1u'frication				4000
\fIv\fR	(vat)	\h'-\n(x2u'frication and voicing				4000
\fIth\fR	(thin)	\h'-\n(x1u'frication				5000
\fIdh\fR	(that)	\h'-\n(x2u'frication and voicing				5000
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 7.2  Resonance synthesizer parameters for steady-state sounds"
.rh "Steady-state segments."
Table 7.2 shows appropriate values for the resonance parameters and
excitation sources of a resonance synthesizer, for steady-state
segments only.
There are several points to note about it.
Firstly, all the frequencies involved obviously depend upon the
speaker \(em the size of his vocal tract, his accent and speaking habits.
The values given are nominal ones for a male speaker with a dialect of
British English called "received pronunciation" (RP) \(em for it is what
used to be "received" on the wireless in the old days
before the British Broadcasting Corporation
adopted a policy of more informal, more regional, speech.
Female speakers have formant frequencies approximately 15% higher
than male ones.
Secondly, the third formant is relatively unimportant for vowel
identification; it is
the first and second that give the vowels their character.
Thirdly, formant values for
.ul
h
are not given, for they would be meaningless.
Although it is certainly a steady-state sound,
.ul
h
changes radically
in context.  If you say "had", "heed", "hud", and so on, and freeze
your vocal tract posture on the initial
.ul
h,
you will find it
already configured for the following vowel \(em an excellent
example of anticipatory coarticulation.
Fourthly, amplitude values do play some part in identification,
particularly for fricatives.
.ul
th
is the weakest sound, closely followed by
.ul
f,
with
.ul
s
and
.ul
sh
the
strongest.  It is necessary to get a reasonable mix of excitation in
the voiced fricatives; the voicing amplitude is considerably less than
in vowels.  Finally, there are other sounds that might be considered
steady state ones.  You can probably identify
.ul
m, n,
and
.ul
ng
just by
their steady states.  However, the difference is not particularly
strong; it is the transitional parts which discriminate most effectively
between these sounds.  The steady state of
.ul
r
is quite distinctive, too,
for most speakers, because the top of the tongue is curled back in a
so-called "retroflex" action and this causes a radical change in the
third formant resonance.
.rh "Transient segments."
Transient sounds include diphthongs, glides,
nasals, voiced and unvoiced stops, and affricates.
The first two are relatively easy to characterize, for they are
basically continuous, gradual transitions from one vocal tract posture
to another \(em sort of dynamic vowels.  Diphthongs and glides are
similar to each other.  In fact "you" could be transcribed as
a triphthong,
.ul
i e uu,
except that in the initial posture the tongue
is even higher, and the vocal tract correspondingly more constricted,
than in
.ul
i
("hid") \(em though not as constricted as in
.ul
sh.
Both categories can be represented in terms of target formant
values, on the understanding that these are not to be
interpreted as steady state configurations but strictly as
extreme values at the beginning or end of the formant motion (for
transitions out of and into the segment, respectively).
.pp
Nasals have a steady-state portion comprising a strong nasal formant
at a fairly low frequency, on account of the large size of the
combined nasal and oral cavity which is resonating.
Higher formants are relatively weak, because of attenuation effects.
Transitions into and out of nasals are strongly nasalized,
as indeed are adjacent vocalic segments, with
the oral and nasal tract operating in parallel.  As discussed in
Chapter 5, this cannot be simulated on a series synthesizer.
However, extremely fast motions of the formants occur on account of
the binary switching action of the velum, and it turns out that
fast formant transitions are sufficient to simulate nasals because
the speech perception mechanism is accustomed to hearing them only
in that context!  Contrast this with the extremely slow transitions
in diphthongs and glides.
.pp
Stops form the most interesting category, and research using the pattern
playback synthesizer was instrumental in providing adequate acoustic
characterizations for them.  Consider unvoiced stops.
They each have three phases:  transition in, silent central portion,
and transition out.  There is a lot of action on the transition out
(and many phoneticians would divide this part alone into several "phases").
First, as the release occurs, there is a small burst of fricative noise.
Say "t\ t\ t\ ..." as in "tut-tut", without producing any voicing.
Actually, when used as an admonishment this is accompanied by
an ingressive, inhaling air-stream instead of the normal egressive,
exhaling one used in English speech (although some languages
do have ingressive sounds).
In any case, a short fricative somewhat resembling a tiny
.ul
s
can be heard as the tongue leaves the roof of the mouth.
Frication is produced when the gap is very narrow, and ceases
rapidly as it becomes wider.
Next, when an unvoiced stop is released, a significant amount of aspiration
follows the release.
Say "pot", "tot", "cot" with force and you will hear the
.ul
h\c
-like
aspiration quite clearly.
It doesn't always occur, though; for example you will hear little
aspiration when a fricative like
.ul
s
precedes the stop in the
same syllable, as in "spot", "scot".  The aspiration is a distinguishing
feature between "white spot" and the rather unlikely "White's pot".
It tends to increase as the emphasis on the syllable increases,
and this in an example of a prosodic feature influencing segmental
characteristics.  Finally, at the end of the segment,
the aspiration \(em if any \(em will turn to voicing.
.pp
What has been described applies to
.ul
all
unvoiced stops.
What distinguishes one from another?
The tiny fricative burst will be different because the noise is produced
at different places in the vocal tract \(em at the lips for
.ul
p,
tongue and front of palate for
.ul
t,
and tongue and back of palate for
.ul
k.
The most important difference, however, is the formant motion illuminated
by the last vestiges of voicing at closure and by both aspiration and the
onset of voicing at opening.
Each stop has target formant values which, although
they cannot be heard during the stopped portion (for there is no
sound there), do affect the transitions in and out.
An added complexity is that the target positions themselves vary to some
extent depending on the adjacent segments.
If the stop is heavily aspirated, the vocal posture will have almost
attained that for the following vowel before voicing begins, but
the formant transitions will be perceived because they affect
the sound quality of aspiration.
.pp
The voiced stops
.ul
b, d,
and
.ul
g
are quite similar to their unvoiced analogues
.ul
p, t,
and
.ul
k.
What distinguishes them from each other are the formant transitions to
target positions, heard during closure and opening.
They are distinguished from their unvoiced counterparts by the fact
that more voicing is present:  it lingers on longer at closure
and begins earlier on opening.  Thus little or no aspiration appears
during the opening phase.  If an unvoiced stop is uttered in a context
where aspiration is suppressed, as in "spot", it is almost identical to the
corresponding voiced stop, "sbot".  Luckily no words in English require
us to make a distinction in such contexts.
Voicing sometimes pervades the entire stopped portion of a voiced stop,
especially when it is surrounded by other voiced segments.
When saying a word like "baby" slowly you can choose whether or not to
prolong voicing throughout the second
.ul
b.
If you do, creating what is
called a "voice bar" in spectrograms,
the sound escapes through the cheeks, for
the lips are closed \(em try doing it for a very long time and your cheeks
will fill up with air!
This severely attenuates high-frequency components, and can
be simulated with a weak first formant at a low resonant frequency.
.RF
.nr x0 \w'unvoiced stops:    'u
.nr x1 4n
.nr x2 \n(x0+\n(x1+\w'aspiration burst (context- and emphasis-dependent)'u
.nr x3 (\n(.l-\n(x2)/2
.in \n(x3u
.ta \n(x0u +\n(x1u
unvoiced stops:	closure (early cessation of voicing)
	silent steady state
	opening, comprising
		short fricative burst
		aspiration burst (context- and emphasis-dependent)
		onset of voicing
.sp
voiced stops:	closure (late cessation of voicing)
	steady state (possibility of voice bar)
	opening, comprising
		pre-voicing
		short fricative burst
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 7.3  Acoustic phases of stop consonants"
.pp
Table 7.3 summarizes some of the acoustic phases of voiced and unvoiced
stops.  There are many variations that have not been mentioned.
Nasal plosion ("good news") occurs (at the word boundary, in this case)
when the nasal formant pervades the
opening phase.  Stop bursts are suppressed when the next sound is a stop
too (the burst on the
.ul
p
of "apt", for example).
It is difficult to distinguish a voiced stop from an unvoiced one
at the end of a word ("cab" and "cap"); if the speaker is trying to
make himself particularly clear he will put a short neutral vowel
after the voiced stop to emphasize its early onset of voicing.
(If he is Italian he will probably do this anyway, for it is the norm
in his own language.)
.pp
Finally, we turn to affricates, of which there are only two
in English:
.ul
ch
("chin") and
.ul
j
("djinn").
They are very similar to the stops
.ul
t
and
.ul
d
followed by the fricatives
.ul
sh
and
.ul
zh
respectively, and their acoustic characterization is similar to that
of the phoneme pair.
.ul
ch
has a closing phase, a stopped phase, and a long fricative burst.
There is no aspiration,
for the vocal cords are not involved.
.ul
j
is the same except that voicing extends further into the stopped
portion, and the terminating fricative is also voiced.
It may be pronounced with a voice bar if the preceding segment is voiced
("adjunct").
.sh "7.5  Speech synthesis by rule"
.pp
Generation of speech by rules acting upon a phonetic transcription
was first investigated in the early 1960's (Kelly and Gerstman, 1961).
.[
Kelly Gerstman 1961
.]
Most systems employ a hardware resonance synthesizer, analogue or digital,
series or parallel,
to reduce the load on the computer which operates the rules.
The speech-by-rule program, rather than the
synthesizer, inevitably contributes by far the greater part of the
degradation in the resulting speech.
Although parallel synthesizers offer greater potential control over
the spectrum, it is not clear to what extent a synthesis program can take
advantage of this.  Parameter tracks for a series synthesizer can
easily be converted into linear predictive coefficients, and systems
which use a linear predictive synthesizer will probably become popular
in the near future.
.pp
The phrase "synthesis by rule", which is in common use, does not
make it clear just what sort of features the rules are supposed to
accomodate, and what information must be included explicitly in the
input transcription.
Early systems made no attempt to simulate prosodics.
Pitch and rhythm could be controlled, but only by inserting
pitch specifiers and duration markers in the input.
Some kind of prosodic control was often incorporated later,
but usually as a completely separate phase from segmental synthesis.
This does not allow interaction effects (such as the extra
aspiration for voiceless stops in accented syllables) to be taken
into account easily.
Even systems which perform prosodic operations invariably need to have
prosodic specifications embedded explicitly in the input.
.pp
Generating parameter tracks for a synthesizer from a phonetic transcription
is a process of data
.ul
expansion.
Six bits are ample to specify a phoneme, and a speaking rate of 12 phonemes/sec
leads to an input data rate of 72 bit/s.
The data rate required to control the synthesizer will depend upon the number
of parameters and the rate at which they are sampled,
but a typical figure is 6 Kbit/s (Chapter 5).
Hence there is something like a hundredfold data expansion.
.pp
Figure 7.1 shows the parameter tracks for a series synthesizer's rendering
of the utterance
.ul
s i k s.
.FC "Figure 7.1"
There are eight parameters.
You can see the onset of frication at the beginning and end (parameter 5),
and the amplitude of voicing (parameter 1) come on for the
.ul
i
and off again before the
.ul
k.
The pitch (parameter 0) is falling slowly throughout the utterance.
These tracks are stylized:  they come from a computer synthesis-by-rule
program and not from a human utterance.
With a parameter update rate of 10 msec, the graphs can be represented
by 90 sets of eight parameter values, a total of 720 values or 4320 bits
if a 6-bit representation is used for each value.
Contrast this with the input of only four phoneme segments, or say 24 bits.
.rh "A segment-by-segment system."
A seminal paper appearing in 1964 was the first comprehensive
description of a computer-based synthesis-by-rule system
(Holmes
.ul
et al,
1964).
.[
Holmes Mattingly Shearme 1964
.]
The same system is still in use and has been reimplemented in a more
portable form (Wright, 1976).
.[
Wright 1976
.]
The inventory of sound segments
includes the phonemes listed in Table 2.1, as well as diphthongs and
a second allophone of
.ul
l.
(Many British speakers use quite a different vocal posture for
pre- and post-vocalic
.ul
l\c
\&'s, called clear and dark
.ul
l\c
\&'s
respectively.)  Some phonemes are expanded into sub-phonemic
"phases" by the program.  Stops have three phases, corresponding to
the closure, silent steady state, and opening.
Diphthongs have two phases.  We will call individual phases and
single-phase phonemes "segments", for they are subject to exactly
the same transition rules.
.pp
Parameter tracks are constructed out of linear pieces.
Consider a pair of adjacent segments in an utterance to be synthesized.
Each one has a steady-state portion and an internal transition.
The internal transition of one phoneme is dubbed "external"
as far as the other is concerned.
This is important because instead of each segment being responsible
for its own internal transition, one of the pair is identified
as "dominant" and it controls the duration of both transitions \(em its
internal one and its external (the other's internal) one.
For example, in Figure 7.2 the segment
.ul
sh
dominates
.ul
ee
and so it
governs the duration of both transitions shown.
.FC "Figure 7.2"
Note that each
segment contributes as many as three linear pieces to the parameter track.
.pp
The notion of domination is similar to that discussed earlier for
word concatenation.
The difference is that for word concatenation the dominant segment was
determined by computing the spectral derivative over the transition
region, whereas for synthesis-by-rule
segments are ranked according to a static precedence,
and the higher-ranking segment dominates.
Segments of stop consonants have the highest rank (and also
the greatest spectral derivative), while fricatives, nasals, glides,
and vowels follow in that order.
.pp
The concatenation procedure is controlled by a table which associates
25 quantities with each segment.  They are
.LB
.NI
rank
.NI
2\ \ overall durations (for stressed and unstressed occurrences)
.NI
4\ \ transition durations (for internal and external transitions of
formant frequencies and amplitudes)
.NI
8\ \ target parameter values (amplitudes and frequencies of three
formant resonances, plus fricative information)
.NI
5\ \ quantities which specify how to calculate boundary values for
formant frequencies (two for each formant except the third,
which has only one)
.NI
5\ \ quantities which specify how to calculate boundary values for
amplitudes.
.LE
This table is rather large.  There are 80 segments in all (remember
that many phonemes are represented by more than one segment),
and so it has 2000 entries.  The system was an offline one which ran on
what was then \(em 1964 \(em a large computer.
.pp
The advantage of such a large table of "rules" is the
flexibility it affords.
Notice that transition durations are specified independently for
formant frequency and amplitude parameters \(em this permits
fine control which is particularly useful for stops.
For each parameter the boundary value between segments is calculated
using a fixed contribution from the dominant one
and a proportion of the steady state value of the other.
.pp
It is possible that the two transition durations which are
calculated for a segment actually exceed the overall duration specified
for it.  In this case, the steady-state target values will be approached
but not actually attained, simulating a situation where coarticulation
effects prevent a target value from being reached.
.rh "An event-based system."
The synthesis system described above, in common with many others, takes
an uncompromisingly segment-by-segment view of speech.
The next phoneme is read, perhaps split into a few segments, and
these are synthesized one by one with due attention being paid
to transitions between them.
Some later work has taken a more syllabic view.
Mattingly (1976) urges a return to syllables for both practical and
theoretical reasons.
.[
Mattingly 1976 Syllable synthesis
.]
Transitional effects are particularly strong
within a syllable and comparatively weak (but by no means negligible)
from one syllable to the next.  From a theoretical viewpoint,
there are much stronger phonetic restrictions on phoneme sequences
than there are on syllable sequences:  pretty well any syllable can
follow another (although whether the pair makes sense is
a different matter), but the linguistically
acceptable phoneme sequences are only a fraction
of those formed by combining phonemes in all
possible ways.
Hill (1978) argues against what be calls the "segmental assumption"
that progress through the utterance should be made one segment at a time,
and recommends a description of speech based upon perceptually relevant
"events".
.[
Hill 1978 A program structure for event-based speech synthesis by rules
.]
This framework is interesting because it provides an opportunity for prosodic
considerations to be treated as an integral part of the synthesis
process.
.pp
The phonetic segments and other information that specify an utterance
can be regarded as a list of events which describes it
at a relatively high level.
Synthesis-by-rule is the act of taking this list and elaborating on it
to produce lower-level events which are realized by the vocal tract,
or acoustically simulated by a resonance synthesizer, to give a speech
waveform.
In articulatory terms, an event might be "begin tongue motion towards
upper teeth with a given effort", while in resonance terms it could be
"begin second formant transition towards 1500\ Hz at a given rate".
(These two examples are
.ul
not
intended to describe the same event:  a tongue motion causes much more
than the transition of a single formant.)  Coarticulation
issues such as stop burst suppression and nasal plosion should
be easier to imitate within an event-based scheme than a segment-to-segment
one.
.pp
The ISP system (Witten and Abbess, 1979) is event-based.
.[
Witten Abbess 1979
.]
The key to its operation is the
.ul
synthesis list.
To prepare an utterance for synthesis, the lexical items which specify
it are joined into a linked list.  Figure 7.3 shows the start of
the list created for
.LB
1
.ul
dh i z  i z  /*d zh aa k s  /h aa u s
.LE
(this is Jack's house); the "1\ ...\ /*\ ...\ /\ ..." are
prosodic markers which will be discussed in the next chapter.
.FC "Figure 7.3"
Next, the rhythm and pitch assignment routines
augment the list with syllable boundaries, phoneme
cluster identifiers, and duration and pitch specifications.
Then it is passed to the segmental synthesis routine
which chains events into the appropriate places and, as it
proceeds, removes the no longer useful elements (phoneme names,
pitch specifiers, etc) which originally constituted the synthesis list.
Finally, an interrupt-driven speech synthesizer handler removes
events from the list as they become due and uses them to control
the hardware synthesizer.
.pp
By adopting the synthesis list as a uniform data structure for
holding utterances at every stage of processing, the problems of storage
allocation and garbage collection are minimized.
Each list element has a forward pointer and five data words, the first
indicating what type of element it is.
Lexical items which may appear in the input are
.LB
.NI
end of utterance (".", "!", ",", ";")
.NI
intonation indicator ("1", ...)
.NI
rhythm indicator ("/", "/*")
.NI
word boundary ("  ")
.NI
syllable boundary ("'")
.NI
phoneme segment
(\c
.ul
ar, b, ng, ...\c
)
.NI
explicit duration or pitch information.
.LE
Several of these have to do with prosodic features \(em a prime
advantage of the structure is that it does not create an artificial
division between segmentals and prosody.
Syllable boundaries and duration and pitch information are optional.
They will normally be computed by ISP, but the user can override them in the
input in a natural way.
The actual characters which identify lexical items are not fixed
but are taken from the rule table.
.pp
As synthesis
proceeds, new elements are chained in to the synthesis list.
For segmental purposes, three types of event are defined \(em
target events, increment events, and aspiration events.
With each event is associated a time at which the event becomes due.
For a target event, a parameter number, target parameter value,
and time-increment are specified.
When it becomes due, motion of the parameter towards the
target is begun.  If no other event for that parameter intervenes,
the target value will be reached after the given time-increment.
However, another target event for the parameter may change its motion
before the target has been attained.
Increment events contain a parameter number, a parameter increment,
and a time-increment.  The fixed increment is added to the parameter value
throughout the time specified.  This provides an easy way to make a
fricative burst during the opening phase of a stop consonant.
Aspiration events switch the mode of excitation from voicing to aspiration
for a given period of time.  Thus the aspirated part of unvoiced stops
can be accomodated in a natural manner, by changing the mode of excitation
for the duration of the aspiration.
.RF
.nr x1 (\w'excitation'/2)
.nr x2 (\w'formant resonance'/2)
.nr x3 (\w'fricative'/2)
.nr x4 (\w'type'/2)
.nr x5 (\w'frequencies (Hz)'/2)
.nr x6 (\w'resonance (Hz)'/2)
.nr x0 1.0i+0.7i+0.6i+0.6i+1.0i+1.2i+(\w'long vowel'/2)
.nr x7 (\n(.l-\n(x0)/2
.in \n(x7u
.ta 1.0i +0.7i +0.6i +0.6i +1.0i +1.2i
	\h'-\n(x1u'excitation		\0\0\h'-\n(x2u'formant resonance	\0\0\h'-\n(x3u'fricative	\h'-\n(x4u'type
			\0\0\h'-\n(x5u'frequencies (Hz)	\0\0\h'-\n(x6u'resonance (Hz)
\l'\n(x0u\(ul'
.sp
.nr x1 (\w'voicing'/2)
.nr x2 (\w'vowel'/2)
\fIuh\fR	\h'-\n(x1u'voicing	\0490	1480	2500		\c
\h'-\n(x2u'vowel
\fIa\fR	\h'-\n(x1u'voicing	\0720	1240	2540		\h'-\n(x2u'vowel
\fIe\fR	\h'-\n(x1u'voicing	\0560	1970	2640		\h'-\n(x2u'vowel
\fIi\fR	\h'-\n(x1u'voicing	\0360	2100	2700		\h'-\n(x2u'vowel
\fIo\fR	\h'-\n(x1u'voicing	\0600	\0890	2600		\h'-\n(x2u'vowel
\fIu\fR	\h'-\n(x1u'voicing	\0380	\0950	2440		\h'-\n(x2u'vowel
\fIaa\fR	\h'-\n(x1u'voicing	\0750	1750	2600		\h'-\n(x2u'vowel
.nr x2 (\w'long vowel'/2)
\fIee\fR	\h'-\n(x1u'voicing	\0290	2270	3090		\h'-\n(x2u'long vowel
\fIer\fR	\h'-\n(x1u'voicing	\0580	1380	2440		\h'-\n(x2u'long vowel
\fIar\fR	\h'-\n(x1u'voicing	\0680	1080	2540		\h'-\n(x2u'long vowel
\fIaw\fR	\h'-\n(x1u'voicing	\0450	\0740	2640		\h'-\n(x2u'long vowel
\fIuu\fR	\h'-\n(x1u'voicing	\0310	\0940	2320		\h'-\n(x2u'long vowel
.nr x1 (\w'aspiration'/2)
.nr x2 (\w'h'/2)
\fIh\fR	\h'-\n(x1u'aspiration					\h'-\n(x2u'h
.nr x1 (\w'voicing'/2)
.nr x2 (\w'glide'/2)
\fIr\fR	\h'-\n(x1u'voicing	\0240	1190	1550			 \h'-\n(x2u'glide
\fIw\fR	\h'-\n(x1u'voicing	\0240	\0650			\h'-\n(x2u'glide
\fIl\fR	\h'-\n(x1u'voicing	\0380	1190			\h'-\n(x2u'glide
\fIy\fR	\h'-\n(x1u'voicing	\0240	2270			\h'-\n(x2u'glide
.nr x2 (\w'nasal'/2)
\fIm\fR	\h'-\n(x1u'voicing	\0190	\0690	2000		\h'-\n(x2u'nasal
.nr x1 (\w'none'/2)
.nr x2 (\w'stop'/2)
\fIb\fR	\h'-\n(x1u'none	\0100	\0690	2000		\h'-\n(x2u'stop
\fIp\fR	\h'-\n(x1u'none	\0100	\0690	2000		\h'-\n(x2u'stop
.nr x1 (\w'voicing'/2)
.nr x2 (\w'nasal'/2)
\fIn\fR	\h'-\n(x1u'voicing	\0190	1780	3300		\h'-\n(x2u'nasal
.nr x1 (\w'none'/2)
.nr x2 (\w'stop'/2)
\fId\fR	\h'-\n(x1u'none	\0100	1780	3300		\h'-\n(x2u'stop
\fIt\fR	\h'-\n(x1u'none	\0100	1780	3300		\h'-\n(x2u'stop
.nr x1 (\w'voicing'/2)
.nr x2 (\w'nasal'/2)
\fIng\fR	\h'-\n(x1u'voicing	\0190	2300	2500		\h'-\n(x2u'nasal
.nr x1 (\w'none'/2)
.nr x2 (\w'stop'/2)
\fIg\fR	\h'-\n(x1u'none	\0100	2300	2500		\h'-\n(x2u'stop
\fIk\fR	\h'-\n(x1u'none	\0100	2300	2500		\h'-\n(x2u'stop
.nr x1 (\w'frication'/2)
.nr x2 (\w'voice + fric'/2)
.nr x3 (\w'fricative'/2)
\fIs\fR	\h'-\n(x1u'frication				6000	\h'-\n(x3u'fricative
\fIz\fR	\h'-\n(x2u'voice + fric	\0190	1780	3300	6000	\h'-\n(x3u'fricative
\fIsh\fR	\h'-\n(x1u'frication				2300	\h'-\n(x3u'fricative
\fIzh\fR	\h'-\n(x2u'voice + fric	\0190	2120	2700	2300	\h'-\n(x3u'fricative
\fIf\fR	\h'-\n(x1u'frication				4000	\h'-\n(x3u'fricative
\fIv\fR	\h'-\n(x2u'voice + fric	\0190	\0690	3300	4000	\h'-\n(x3u'fricative
\fIth\fR	\h'-\n(x1u'frication				5000	\h'-\n(x3u'fricative
\fIdh\fR	\h'-\n(x2u'voice + fric	\0190	1780	3300	5000	\h'-\n(x3u'fricative
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 7.4  Rule table for an event-based synthesis-by-rule program"
.pp
Now the rule table, which is shown in Table 7.4,
holds simple target positions for each phoneme segment, as well as
the segment type.  The latter is used to trigger events by computer
procedures which have access to the context of the segment.
In principle, this allows considerably more sophistication to be
introduced than does a simple segment-by-segment approach.
.RF
.nr x1 0.5i+0.5i+\w'preceding consonant in this syllable (suppress burst if fricative)'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta 0.5i +0.5i
fricative bursts on stops
aspiration bursts on unvoiced stops, affected by
	preceding consonant in this syllable (suppress burst if fricative)
	following consonant (suppress burst if another stop; introduce
		nasal plosion if a nasal)
	prosodics (increase burst if syllable is stressed)
voice bar on voiced stops (in intervocalic position)
post-voicing on terminating voiced stops, if syllable is stressed
anticipatory coarticulation for \fIh\fR
vowel colouring when a nasal or glide follows
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 7.5  Some coarticulation effects"
.pp
For example, Table 7.5 summarizes some of the subtleties of the
speech production process which have been mentioned earlier in this
chapter.  Most of them are context-dependent, with the prosodic
context (whether two segments are in the same syllable; whether a
syllable is stressed) playing a significant role.  A scheme where
data-dependent "demons" fire on particular patterns in a linked list
seems to be a sensible approach towards incorporating such rules.
.rh "Discussion."
There are two opposing trends in speech synthesis by rule.
On the one hand larger and larger segment inventories can be used,
containing more and more allophones explicitly.
This is the approach of the Votrax sound-segment synthesizer,
discussed in Chapter 11.
It puts an increasing burden on the person who codes the utterances
for synthesis, although, as we shall see, computer programs can assist with
this task.
On the other hand the segment inventory can be kept small, perhaps
comprising just the logical phonemes as in the ISP system.
This places the onus on the computer program to accomodate allophonic variations,
and to do so it must take account of the segmental and prosodic
context of each phoneme.
An event-based approach seems to give the best chance of incorporating
contextual modification whilst avoiding undesired interactions.
.pp
The second trend brings synthesis closer to the articulatory process
of speech production.  In fact an event-based system would be
an ideal way of implementing an articulatory model for speech synthesis
by rule.  It would be much more satisfying to have the rule table
contain articulatory target positions instead of resonance ones,
with events like "begin tongue motion towards upper teeth with a given
effort".  The problem is that hard data on articulatory postures and
constraints is much more difficult to gather than resonance information.
.pp
An interesting question that relates to articulation is whether formant
motion can be simulated adequately by a small number of linear pieces.
The segment-by-segment system described above had as many as nine
pieces for a single phoneme, for some phonemes had three phases
and each one contributes up to three pieces (transition in,
steady state, and transition out).
Another system used curves of decaying exponential
form which ensured that all transitions started rapidly towards
the target position but slowed down as it was approached (Rabiner, 1968, 1969).
.[
Rabiner 1968 Speech synthesis by rule Bell System Technical J
.]
.[
Rabiner 1969 A model for synthesizing speech by rule
.]
The time-constant of decay was stored with each segment in the rule
table.  The rhythm of the synthetic speech was controlled at this level,
for the next segment was begun when all the formants had attained
values sufficiently close to the current targets.
This is a poor model of the human speech production process, where rhythm
is dictated at a relatively high level and the next phoneme is not
simply started when the current one happens to end.
Nevertheless, the algorithm produced smooth, continuous formant motions
not unlike those found in spectrograms.
.pp
There is, however, by no means universal agreement on decaying exponential formant
motions.  Lawrence (1974) divided segments into "checked" and "free"
categories, corresponding roughly to consonants and vowels; and postulated
.ul
increasing
exponential transitions into checked segments, and decaying transitions into
free ones.
.[
Lawrence 1974
.]
This is a reasonable supposition if you consider the mechanics of
articulation.  The speed of movement of the tongue (for example) is likely
to increase until it is physically stopped by reaching the roof of the
mouth.
When moving away from a checked posture into a free one the transition will
be rapid at first but slow down to approach the target asymptotically,
governed by proprioceptive feedback.
.pp
The only thing that seems to be agreed is that the formant tracks should
certainly
.ul
not
be piecewise linear.  However, in the face of
conflicting opinions as to whether exponentials should be decaying
or increasing, piecewise linear motions seem to be a reasonable
compromise!  It is likely that the precise shape of formant
tracks is unimportant so long as the gross features are imitated
correctly.
Nevertheless, this is a question which an articulatory model
could help to answer.
.sh "7.6  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "7.7  Further reading"
.pp
There are unfortunately few books to recommend on the subject of
joining segments of speech.
The references form a representative and moderately comprehensive bibliography.
Here is some relevant background reading in linguistics.
.LB "nn"
.\"Fry-1976-1
.]-
.ds [A Fry, D.B.(Editor)
.ds [D 1976
.ds [T Acoustic phonetics
.ds [I Cambridge Univ Press
.ds [C Cambridge, England
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
This book of readings contains many classic papers on acoustic phonetics
published from 1922\-1965.
It covers much of the history of the subject, and is intended
primarily for students of linguistics.
.in-2n
.\"Lehiste-1967-2
.]-
.ds [A Lehiste, I.(Editor)
.ds [D 1967
.ds [T Readings in acoustic phonetics
.ds [I MIT Press
.ds [C Cambridge, Massachusetts
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
Another basic collection of references which covers much the same ground
as Fry (1976), above.
.in-2n
.\"Sivertsen-1961-3
.]-
.ds [A Sivertsen, E.
.ds [D 1961
.ds [K *
.ds [T Segment inventories for speech synthesis
.ds [J Language and Speech
.ds [V 4
.ds [P 27-89
.nr [P 1
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
This is a careful early study of the quantitative implications of using
phonemes, demisyllables, syllables, and words as the basic building
blocks for speech synthesis.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "8  PROSODIC FEATURES IN SPEECH SYNTHESIS"
.ds RT "Prosodic features
.ds CX "Principles of computer speech
.pp
Prosodic features are those which characterize an utterance as a whole,
rather than having a local influence on individual sound segments.
For speech output from computers, an "utterance" usually comprises a
single unit of information which stretches over several words \(em a clause
or sentence.  In natural speech an utterance can be very much longer, but
it will be broken into prosodic units which are again roughly the size of a
clause or sentence.  These prosodic units are certainly closely related
to each other.  For example, the pitch contour used when introducing a new
topic is usually different from those employed to develop it subsequently.
However, for the purposes of synthesis the successive prosodic units can
be treated independently, and information about pitch contours to be used
will have to be specified in the input for each one.
The independence between them is not complete, however, and
lower-level contextual effects, such as interpolation of pitch between
the end of one prosodic unit and the start of the next, must still be
imitated.
.pp
Prosodic features were introduced briefly in Chapter 2.
Variations in voice dynamics occur in three dimensions:  pitch of the voice,
time, and amplitude.
These dimensions are inextricably twined together in living speech.
Variations in voice quality are much less important for the factual
kind of speech usually sought in voice response applications,
although they can play a considerable in conveying emotions
(for a discussion of the acoustic manifestations of emotion in speech,
see Williams and Stevens, 1972).
.[
Williams Stevens 1972
.]
.pp
The distinction between prosodic and segmental effects is a traditional one,
but it becomes rather fuzzy when examined in detail.
It is analogous to the distinction between hardware and
software in computer science:  although useful from some points of view
the borderline becomes blurred as one gets closer to actual systems \(em with
microcode, interrupts, memory management, and the like.
At a trivial level, prosodics
cannot exist without segmentals, for there must be some vehicle to carry the
prosodic contrasts.
Timing \(em a prosodic feature \(em is actually realized by the durations of
individual segments.  Pauses are tantamount to silent segments.
.pp
While pitch may seem to be relatively independent of segmentals \(em and
this view is reinforced by the success of the source-filter model
which separates the frequency of the
excitation source from the filter characteristics \(em there
are some subtle phonetic effects of pitch.
It has been observed that it drops on the transition into certain
consonants, and rises again on the transition out (Haggard
.ul
et al,
1970).
.[
Haggard Ambler Callow 1970
.]
This can be explained in terms of variations in pressure from the
lungs on the vocal cords (Ladefoged, 1967).
.[
Ladefoged 1967
.]
Briefly, the increase in mouth pressure which occurs during some consonants
causes a reduction in the pressure difference across the vocal cords
and in the rate of flow of air between them.
This results in a decrease in their frequency of vibration.
When the constriction is released, there is a temporary increase in the air
flow which increases the pitch again.
The phenomenon is called "microintonation".
It is particularly noticeable in voiced stops, but also occurs in voiced
fricatives and unvoiced stops.
Simulation of the effect in synthesis-by-rule has often been found to give
noticeable improvements in the speech quality.
.pp
Loudness also has a segmental role.  For example, we noted in the last chapter
that amplitude values play a small part in identification of fricatives.
In fact loudness is a very
.ul
weak
prosodic feature.  It contributes little to the perception of stress.
Even for shouting the distinction from normal speech is as much in the voice
quality as in amplitude
.ul
per se.
It is not necessary to consider varying loudness on a prosodic basis
in most speech synthesis systems.
.pp
The above examples show how prosodic features have segmental influences
as well.
The converse is also true:  some segmental features have a prosodic effect.
The last chapter described how stress is associated with increased aspiration
of syllable-initial unvoiced stops.  Furthermore, stressed syllables
are articulated with greater effort than unstressed ones, and hence the formant
transitions are more likely to attain their target values
under circumstances which would otherwise cause them to fall short.
In unstressed syllables, extreme vowels (like
.ul
ee, aa, uu\c
)
tend to more centralized sounds
(like
.ul
i, uh, u
respectively).
Although all British English vowels
.ul
can
appear in unstressed syllables, they often become "reduced" into a
centralized form.
Consider the following examples.
.LB
.NI
diplomat	\ 
.ul
d i p l uh m aa t
.NI
diplomacy	\ 
.ul
d i p l uh u m uh s i
.NI
diplomatic	\ 
.ul
d i p l uh m aa t i k.
.LE
The vowel of the second syllable is reduced to
.ul
uh
in "diplomat" and "diplomatic", whereas the root form "diploma", and also
"diplomacy", has a diphthong
(\c
.ul
uh u\c
)
there.  The third syllable has an
.ul
aa
in "diplomat" and "diplomatic" which is reduced to
.ul
uh
in "diplomacy".
In these cases the reduction is shown explicitly in the phonetic transcription;
but in more marginal examples where it is less extreme it will not be.
.pp
I have tried to emphasize in previous chapters that prosodic features are
important in speech synthesis.
There is something very basic about them.
Rhythm is an essential part of all bodily activity \(em of breathing,
walking, working and playing \(em and so it pervades speech too.
Mothers and babies communicate effectively using intonation alone.
Some experiments have indicated that the language environment of
an infant affects his babbling at an early age, before he has effective
segmental control.
There is no doubt that "tone of voice" plays a large part in human
communication.
.pp
However, early attempts at synthesis did not pay too
much attention to prosodics, perhaps because it was thought sufficient to get the
meaning across by providing clear segmentals.
As artificial speech grows more widespread, however, it is becoming
apparent that its acceptability to users, and hence its ultimate
success, depends to a large extent on incorporating natural-sounding
prosodics.  Flat, arhythmic speech may be comprehensible in short stretches,
but it strains the concentration in significant discourse and people
are not usually prepared to listen to it.
Unfortunately, current commercial speech output systems do not really tackle
prosodic questions, which indicates our present rather inadequate
state of knowledge.
.pp
The importance of prosodics for automatic speech
.ul
recognition
is beginning to be appreciated too.  Some research projects
have attended to the automatic identification of points of stress,
in the hope that the clear articulation of stressed syllables can be used
to provide anchor points in an unknown utterance (for example, see Lea
.ul
et al,
1975).
.[
Lea Medress Skinner 1975
.]
.pp
But prosodics and segmentals are closely intertwined.
I have chosen to
treat them in separate chapters in order to split the material up into
manageable chunks rather than to enforce a deep division between them.
It is also true that synthesis of prosodic features is an uncharted and
controversial area, which gives this chapter rather a different
flavour from the last.
It is hard to be as definite about alternative strategies
and methods as you can for segment concatenation.
In order to make the treatment as concrete and down-to-earth as possible,
I will describe in some detail two example projects in prosodic synthesis.
The first treats the problem of transferring pitch from one utterance to
another, while the second considers how artificial timing and pitch can be
assigned to synthetic speech.
These examples illustrate quite different problems, and are reasonably
representative of current research activity.
(Other systems are described by Mattingly, 1966; Rabiner
.ul
et al,
1969.)  Before
.[
Mattingly 1966
.]
.[
Rabiner Levitt Rosenberg 1969
.]
looking at the two examples, we will discuss
a feature which is certainly prosodic but does not appear in the
list given earlier \(em stress.
.sh "8.1  Stress"
.pp
Stress is an everyday notion, and when
listening to natural speech people can usually agree on which syllables
are stressed.  But it is difficult to characterize in acoustic terms.
From the speaker's point of view, a stressed syllable is produced by
pushing more air out of the lungs.  For a listener, the points of stress
are "obvious".
You may think that stressed syllables are louder than the others:  however,
instrumental studies show that this is not necessarily (nor even usually)
so (eg Lehiste and Peterson, 1959).
.[
Lehiste Peterson 1959
.]
Stressed syllables frequently have a longer vowel than unstressed
ones, but this is by no means universally true \(em if you say "little"
or "bigger" you will find that the vowel in the first, stressed, syllable
is short and shows little sign of lengthening as you increase the emphasis.
Moreover, experiments using bisyllabic nonsense words have indicated
that some people consistently judge the
.ul
shorter
syllable to be stressed in the absence of other clues (Morton and Jassem,
1965).
.[
Morton Jassem 1965
.]
Pitch often helps to indicate stress.
It is not that stressed syllables are always higher- or lower-pitched
than neighbouring ones, or even that they are uttered with a rising or
falling pitch.  It is the
.ul
rate of change
of pitch that tends to be greater
for stressed syllables:  a sharp rise or fall,
or a reversal of direction, helps to give emphasis.
.pp
Stress is acoustically manifested in timing and pitch,
and to a much lesser extent in loudness.
However it is a rather subtle feature and does
.ul
not
correspond simply to duration increases or pitch rises.
It seems that listeners unconsciously put together all the clues
that are present in an utterance in order to deduce which syllables are
stressed.
It may be that speech is perceived by a listener with reference to how
he would have produced it himself, and that this is how he detects which syllables
were given greater vocal effort.
.pp
The situation is confused by the fact that certain syllables in words are
often said in ordinary language to be "stressed" on account of their
position in the word.  For example, the words
"diplomat", "diplomacy", and "diplomatic" have stress on the first,
second, and third syllables respectively.
But here we are talking about the word itself rather than
any particular utterance of it.  The "stress" is really
.ul
latent
in the indicated syllables and only made manifest upon uttering them,
and then to a greater or lesser degree depending on exactly how
they are uttered.
.pp
Some linguists draw a careful distinction between salient syllables,
accented syllables, and stressed syllables,
although the words are sometimes used differently by different authorities.
I will not adopt a precise terminology here,
but it is as well to be aware of the subtle distinctions involved.
The term "salience" is applied to actual utterances, and salient
syllables are those that are perceived as being more prominent than their
neighbours.
"Accent" is the potential for salience, as marked, for example,
in a dictionary or lexicon.
Thus the discussion of the "diplo-" words above is about accent.
Stress is an articulatory phenomenon associated with increased
muscular activity.
Usually, syllables which are perceived as salient were produced with stress,
but in shouting, for example, all syllables can be stressed \(em even
non-salient ones.
Furthermore, accented syllables may not be salient.
For instance, the first syllable of the word "very" is accented,
that is, potentially salient, but in a sentence as uttered it may or may not be
salient.  One can say
.LB
"\c
.ul
he's
very good"
.LE
with salience on "he" and possibly "good", or
.LB
"he's
.ul
very
good"
.LE
with salience on the first syllable of "very", and possibly "good".
.pp
Non-standard stress patterns are frequently used to bring out contrasts.
Words like "a" and "the" are normally unstressed, but can be stressed
in contexts where ambiguity has arisen.
Thus factors which operate at a much higher level than the phonetic structure
of the utterance must be taken into account when deciding where stress
should be assigned.  These include syntactic and semantic considerations,
as well as the attitude of the speaker and the likely attitude of
the listener to the material being spoken.
For example, I might say
.LB
"Anna
.ul
and
Nikki should go",
.LE
with emphasis on the "and" purely because I was aware that my listener
might quibble about the expense of sending them both.
Clearly some notation is needed to communicate to the synthesis process
how the utterance is supposed to be rendered.
.sh "8.2  Transferring pitch from one utterance to another"
.pp
For speech stored in source-filter form and concatenated on a
slot-filling basis, it would be useful to
have stored typical pitch contours which can be applied to the
synthetic utterances.
From a practical point of view it is important to be able to generate
natural-sounding pitch for high-quality artificial speech.
Although several algorithms for creating completely synthetic contours
have been proposed \(em and we will examine one later in this chapter \(em
they are unsuitable for high-quality speech.
They are generally designed for use with synthesis-by-rule from phonetics,
and the rather poor quality of articulation does not encourage the
development of excellent pitch assignment procedures.  With speech
synthesized by rule there is generally an emphasis on keeping the
data storage requirements to a minimum, and so it is not appropriate
to store complete contours.
Moreover, if speech is entered in textual
form as phoneme strings, it is natural to attach pitch information as markers
in the text rather than by entering a complete and detailed contour.
.pp
The picture is rather different for concatenated segments of natural speech.
In the airline reservation system, with utterances formed from templates like
.LB
Flight number \(em leaves \(em at \(em , arrives in \(em at \(em ,
.LE
it is attractive to store the pitch contour of one complete instance of the
utterance and apply it to all synthetic versions.
.pp
There is an enormous literature on the anatomy of intonation, and much of it
rests upon the notion of a pitch contour as a descriptive aid to analysis.
Underlying this is the assumption, usually unstated, that a contour can be
discussed independently of the particular stream of words that manifests it;
that a single contour can somehow be bound to any sentence (or phrase, or
clause) to produce an acceptable utterance.  But the contour, and its binding,
are generally described only at the grossest level, the details being left
unspecified.
.pp
There are phonetic influences on pitch \(em the characteristic lowering
during certain consonants was mentioned above \(em and these are
not normally considered as part of intonation.
Such effects will certainly spoil attempts to store contours extracted
from living speech and apply them to different utterances, but the impairment
may not be too great, for pitch is only one of many segmental clues to
consonant identification.
.pp
In the system mentioned earlier which generated 7-digit telephone numbers
by concatenating formant-coded words, a single natural pitch contour
was applied to all utterances.
It was taken to match as well as possible the general shape of the
contours measured in naturally-spoken telephone numbers.  However, this is a very
restricted environment, for telephone numbers exhibit almost no variety in
the configuration of stressed and unstressed syllables \(em
the only digit which is not a monosyllable is "seven".
Significant problems arise when more general utterances are considered.
.pp
Suppose the pitch contour of one utterance (the "source")
is to be transferred to another (the "target").
Assume that the utterances are encoded in source-filter form,
either as parameter tracks for a formant synthesizer or as linear predictive
coefficients.
Then there are no technical obstacles to combining pitch and segmentals.
The source must be available as a complete utterance, while the target
may be formed by concatenating smaller units such as words.
.pp
For definiteness, we will consider utterances of the form
.LB
The price is \(em dollars and \(em cents,
.LE
where the slots are filled by numbers less than 100;
and of the form
.LB
The price is \(em cents.
.LE
The domain of prices encompasses a wide range of syllable
configurations.
There are between one and five syllables in each variable part,
if the numbers are restricted to be less than 100.
The sentences have a constant pragmatic, semantic, and syntactic structure.
As in the vast majority of real-life situations,
minimal phonetic distinctions between utterances do not occur.
.pp
Pitch transfer is complicated by the fact that values of the source pitch
are only known during the voiced parts of the utterance.
Although it would certainly be possible to extrapolate pitch
over unvoiced parts, this would introduce some artificiality into
the otherwise completely natural contours.
Let us assume, therefore, that the pitch contour
of the voiced nucleus of each syllable in the source is applied to the
corresponding syllable nucleus in the target.
.pp
The primary factors which might tend to inhibit successful transfer
are
.LB
.NP
different numbers of syllables in the utterances;
.NP
variations in the pattern of stressed and unstressed syllables;
.NP
different syllable durations;
.NP
pitch discontinuities;
.NP
phonetic differences between the utterances.
.LE
.rh "Syllabification."
It is essential to take into account the syllable structures
of the utterances, so that pitch is transferred between
corresponding syllables rather than over the utterance
as a whole.
Fortunately, syllable boundaries can be detected automatically
with a fair degree of accuracy, especially if the speech is carefully
enunciated.
It is worth considering briefly how this can be done, even though it takes
us off the main topic of synthesis and into speech analysis.
.pp
A procedure developed by Mermelstein (1975)
involves integrating the spectral energy
at each point in the utterance.
.[
Mermelstein 1975 Automatic segmentation of speech into syllabic units
.]
First the low (<500\ Hz) and high (>4000\ Hz) ends are filtered out
with 12\ dB/octave cutoffs.
The resulting energy signal is smoothed
by a 40\ Hz lowpass filter, giving a so-called "loudness"
function.
All this can be accomplished with simple recursive digital filters.
.pp
Then, the loudness function is compared with its convex hull.
The convex hull is the shape a piece of elastic would assume if
stretched over the top of the loudness function and anchored down at
both ends, as illustrated in Figure 8.1.
.FC "Figure 8.1"
The point of maximum difference between the hull and loudness function
is taken to be a tentative syllable
boundary.
The hull is recomputed, but anchored to the actual loudness function
at the tentative boundary,
and the points of maximum hull-loudness difference in each of the
two halves  are selected as further tentative
boundaries.
The procedure continues recursively until the maximum hull-loudness
difference, with the hull anchored at each tentative boundary,
falls below a certain minimum (say 4\ dB).
.pp
At this stage, the number of tentative boundaries will greatly exceed
the actual number of syllables (by a factor of around 5).
Many of the extraneous boundaries are eliminated by the following
constraints:
.LB
.NP
if two boundaries lie within a certain time of each other
(say 120\ msec), one of them is discarded;
.NP
if the maximum loudness within a tentative syllable falls too
far short of the overall maximum for the utterance
(more than 20\ dB), one boundary is discarded.
.LE
The question of which boundary to discard can be decided by
examining the voicing continuity of the utterance.
If possible, voicing across a syllable boundary should be avoided.
Otherwise, the boundary with the smallest hull-loudness
difference should be rejected.
.RF
.nr x0 \w'boundaries moved slightly to correspond better with voicing:'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 3.4i +0.5i
\l'\n(x0u\(ul'
.sp
total syllable count:	332
boundaries missed by algorithm:	\0\09	(3%)
extra boundaries inserted by algorithm:	\029	(9%)
boundaries moved slightly to correspond better with voicing:
	\0\03	(1%)
.sp
total errors:	\041	(12%)
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 8.1  Success of the syllable segmentation procedure"
.pp
Table 8.1 illustrates the success of this syllabification
procedure, in a particular example.
Segmentation is performed with less than 10% of extraneous
boundaries being inserted,
and much less than 10% of actual boundaries being missed.
These figures are rather sensitive to the values of the
three thresholds.
The values were chosen to err on the side
of over-zealous syllabification, because all the boundaries need to be checked
by ear and eye and it is easier to delete
a boundary by hand than to insert one at an appropriate place.
It may well be that with careful optimization of thresholds,
better figures could be
achieved.
.rh "Stressed and unstressed syllables."
If the source and target utterances have the same number of
syllables, and the same pattern of stressed and unstressed syllables,
pitch can simply be transferred from a syllable in the source
to the corresponding one in the target.
But if the pattern differs \(em even though the
number of syllables may be the same, as in "eleven" and "seventeen" \(em
then a one-to-one mapping will conflict with the stress points,
and certainly sound unnatural.
Hence an attempt should be made to ensure that the pitch is mapped in a
plausible way.
.pp
The syllables of each utterance can be classified as "stressed"
and "unstressed".
This distinction could be made automatically by
inspection of the pitch contour, within the domain of utterances used,
and possibly even in general (Lea
.ul
et al,
1975).
.[
Lea Medress Skinner 1975
.]
However, in many cases it is expedient to perform the job by hand.
In our example, the sentences have fixed "carrier" parts and
variable "number" parts.
The stressed carrier syllables, namely
.LB
"... price ... dol\- ... cents",
.LE
can be marked as such, by hand,
to facilitate proper alignment between the source and target.
This marking would be difficult to do automatically
because it would be hard to distinguish the carrier from the numbers.
.pp
Even after classifying the syllables as "carrier stressed",
"stressed", and "unstressed", alignment still presents problems,
because the configuration of syllables in the variable parts
of the utterances may differ.
Syllables in the source which have no
correspondence in the target can be ignored.
The pitch track of
the source syllable can be replicated for each
additional syllable in corresponding
position in the target.
Of course, a stressed syllable should be selected for copying
if the unmatched target syllable is stressed,
and similarly for unstressed ones.
It is rather dangerous to copy exactly a part of a pitch
contour, for the ear is very sensitive to the juxtaposition of
identically intoned segments of speech \(em especially when the segment is stressed.
To avoid this, whenever a stressed syllable is replicated the
pitch values should be decreased by, say, 20%, on the second copy.
It sometimes happens that a single stressed syllable in the source
needs to cover a stressed-unstressed pair in the target:  in
this case the first part of the source pitch track can be used
for the stressed syllable, and the remainder for the
unstressed one.
.pp
The example of Figure 8.2 will help to make these rules clear.
.FC "Figure 8.2"
Note that the marking alone is done by hand.
The detailed mapping decisions can be left to the computer.
The rules were derived intuitively, and do not have any sound theoretical
basis.
They are intended to give reasonable results in the majority of cases.
.pp
Figure 8.3 shows the result of transferring the pitch from "the price is ten
cents" to "the price is seventy-seven cents".
.FC "Figure 8.3"
The syllable boundaries which are marked were determined automatically.
The use of the last 30% of the
"ten" contour to cover the first "-en" syllable, and its replication
to serve the "-ty" syllable, can be seen.
However, the 70%\(em30% proportion is applied to the source contour,
and the linear distortion (described next) upsets the proportion in the
target utterance.
The contour of the second "seven" can be seen to be a
replication of that of the first one, lowered by 20%.
Notice that the pitch extraction procedure has introduced an artifact into the final
part of one of the "cents" contours by doubling the pitch.
.rh "Stretching and squashing."
The pitch contour over a source syllable nucleus must be stretched
or squashed to match the duration
of the target nucleus.
It is difficult to see how anything other than linear stretching
and squashing could be done without considerably increasing the
complexity of the procedure.
The gross non-linearities will have been accounted for
by the syllable alignment process, and so simple linear time-distortion
should not cause too much degradation.
.rh "Pitch discontinuities."
Sudden jumps in pitch during voiced speech sound peculiar,
although they can in fact be produced naturally (by yodelling).
People frequently burst into laughter on hearing them in synthetic speech.
It is particularly important to avoid this diverting effect in
voice response applications,
for the listener's attention is instantly directed
away from what is said to the voice that speaks.
.pp
Discontinuities can arise in the pitch-transfer procedure either by a
voiced-unvoiced-voiced transition between syllables mapping on to
a voiced-voiced transition in the target,
or by voicing continuity being broken when the syllable
alignment procedure drops or replicates a syllable.
There are several ways in which at least some of the possibilities can
be avoided.
For example, one could hold unstressed syllables at a constant pitch
whose value coincides with either the end of the previous
syllable's contour or the beginning of the next syllable's contour,
depending on which transition is voiced.
Alternatively, the policy of reserving the trailing part
of a stressed syllable in the source to cover an unmatched following
unstressed syllable in the target could be generalized to allow use of the leading 30%
of the next stressed syllable's contour instead,
if that maintained voicing continuity.
A third solution is simply to merge the pitch contours
at a discontinuity by mixing the average pitch value at the break
with the pitch contour on either side of it in a proportion which
increases linearly from the edges of the domain of influence to the discontinuity.
Figure 8.4 shows the effect of this merging,
when the pitch contour of "the price is seven cents"
is transferred to "the price is eleven cents".
.FC "Figure 8.4"
Of course, the
interpolated part will not necessarily be linear.
.rh "Results of an experiment on pitch transfer."
Some experiments have been conducted to evaluate the performance
of this pitch transfer method on the kind of utterances discussed above
(Witten, 1979).
.[
Witten 1979 On transferring pitch from one utterance to another
.]
First, the source and target sentences
were chosen to be lexically identical, that is, the same words were spoken.
For this experiment alone,
expert judges were employed.
Each sentence was recorded twice (by the same person),
and pitch was transferred from copy A
to copy B and vice versa.  Also, the originals were resynthesized from their linear
predictive coefficients with their own pitch contours.
Although all four often sounded extremely similar, sometimes the pitch
contours of originals A and B were quite different,
and in these cases it was immediately obvious to the ear that two of
the four utterances shared the same intonation,
which was different to that shared by the other two.
.pp
Experienced researchers in speech analysis-synthesis served as
judges.
In order to make the test as stringent as possible it was explained
to them exactly what had been done,
except that the order of the utterances in each quadruple was kept secret.
They were asked to identify which two of the four sentences did not have their
original contours,
and were allowed to listen to each quadruple as often as they liked.
On occasion they were prepared to identify only one, or even none,
of the sentences as artificial.
.pp
The result was that an utterance with pitch transferred
from another, lexically identical, one is indistinguishable from
a resynthesized version of the original, even to a skilled ear.
(To be more precise, this hypothesis
could not be rejected even at the 1% level of statistical significance.)  This
gave confidence in the transfer procedure.
However, one particular judge was quite successful at identifying the bogus contours,
and he attributed his success to the fact that
on occasion the segmental durations did not accord with the
pitch contour.
This casts a shadow of suspicion on the linear stretching and
squashing mechanism.
.pp
The second experiment examined pitch transfers between utterances having only one variable part
each ("the price is ... cents") to test the transfer
method under relatively controlled conditions.
Ten sentences of the form
.LB
"The price is \(em cents"
.LE
were selected to cover
a wide range of syllable structures.
Each one was regenerated with pitch transferred from each of
the other nine,
and these nine versions were paired with the original resynthesized
with its natural pitch.
The $10 times 9=90$ resulting pairs were recorded on tape in random order.
.pp
Five males and five females, with widely differing occupations
(secretaries, teachers, academics, and students), served as judges.
Written instructions explained that the tape contained pairs of
sentences which were lexically identical but had a slight difference
in "tone of voice", and that the subjects were to judge which of
each pair sounded "most natural and intelligible".  The
response form gave the price associated with each pair \(em
a preliminary experiment had shown that there was never
any difficulty in identifying this \(em and a column for decision.
With each decision, the subjects recorded their confidence in the decision.
Subjects could rest at any time during the test, which lasted for about
30 minutes, but they were not permitted to hear any pair a second time.
.pp
Defining a "success" to be a choice of the utterance with
natural pitch as the best of a pair,
the overall success rate was about 60%.
If choices were random, one would of course expect only a 50% success rate,
and the figure obtained was significantly different from this.
Almost half the choices were correct and made with high confidence;
high-confidence but incorrect choices accounted for a quarter of the
judgements.
.pp
To investigate structural effects in the pitch transfer process,
low confidence decisions were ignored to eliminate noise, and the others
lumped together and tabulated by source and target utterance.
The number of stressed and unstressed syllables does not appear to play
an important part in determining whether a particular utterance is an
easy target.
For example, it proved to be particularly difficult to tell
.EQ
delim @@
.EN
natural from transferred contours with utterances $0.37 and $0.77.
.EQ
delim $$
.EN
In fact, the results showed no better than random discrimination for them,
even though the decisions in which listeners expressed little confidence
had been discarded.
Hence it seems that the syllable alignment procedure and the policy
of replication were successful.
.pp
.EQ
delim @@
.EN
The worst target scores were for utterances $0.11 and $0.79.
.EQ
delim $$
.EN
Both of these contained large unbroken voiced periods
in the "variable" part \(em almost twice as long as the next longest
voiced period.
The first has an unstressed syllable followed by
a stressed one with no break in voicing,
involving, in a natural contour,
a fast but continuous climb in pitch over the juncture,
and it is not surprising that it proved to be the most difficult target.
A more sophisticated "smoothing" algorithm than the
one used may be worth investigating.
.pp
In a third experiment, sentences with two variable parts were used to check
that the results of the second experiment extended to more complex
utterances.
The overall success rate was 75%, significantly different from chance.
However, a breakdown of the results by source and target utterance
showed that there was one contour (for the utterance
"the price is 19 dollars and 8 cents") which exhibited very successful
transfer, subjects identifying the transferred-pitch utterances at only
a chance level.
.pp
Finally, transfers of pitch from utterances with two variable parts
to those with one variable part were tested.
Pitch contours were transferred to sentences with the same "cents"
figure but no "dollars" part; for example,
"the price is five dollars and thirteen cents"
to
"the price is thirteen cents".  The
contour was simply copied between the corresponding
syllables, so that no adjustment needed to be made
for different syllable structures.
The overall score was 60 successes in 100 judgements \(em
the same percentage as in the second experiment.
.pp
To summarize the results of these four experiments,
.LB
.NP
even accomplished linguists cannot distinguish an utterance from one with
pitch transferred from a different recording of it;
.NP
when the utterance contained only one variable part embedded in a
carrier sentence,
lay listeners identified the original correctly in 60% of cases,
over a wide variety of syllable structures:  this
figure differs significantly from the chance value of 50%;
.NP
lay listeners identified the original confidently and correctly in
50% of cases; confidently but incorrectly in 25% of cases;
.NP
the greatest hindrance to successful transfer was the presence of
a long uninterrupted period of voicing in the target utterance;
.NP
the performance of the method deteriorates as the number
of variable parts in the utterances increases;
.NP
some utterances seemed to serve better than others as the pitch source for
transfer, although this was not correlated with complexity of syllable structure;
.NP
even when the utterance contained two variable parts,
there was one source utterance whose pitch contour was
transferred to all the others so successfully that listeners could not identify
the original.
.LE
.pp
The fact that only 60% of originals in the second experiment were
spotted by lay listeners in a stringent
paired-comparison test \(em many of them being identified without confidence \(em
does encourage the use of the procedure for generating stereotyped,
but different, utterances of high quality in voice-response systems.
The experiments indicate that although different syllable patterns
can be handled satisfactorily by this procedure,
long voiced periods should be avoided if possible when designing
the message set,
and that if individual utterances must contain multiple variable parts
the source utterance should be chosen with the aid of listening tests.
.sh "8.3  Assigning timing and pitch to synthetic speech"
.pp
The pitch transfer method can give good results within a fairly narrow
domain of application.
But like any speech output technique which treats complete utterances
as a single unit, with provision for a small number of slot-fillers to
accomodate data-dependent messages, it becomes unmanageable in more general
situations with a large variety of utterances.
As with segmental synthesis it becomes necessary to consider methods
which use a textual rather than an acoustically-based representation
of the prosodic features.
.pp
This raises a problem with prosodics that was not there for segmentals:  how
.ul
can
prosodic features be written in text form?
The standard phonetic transcription method does not give much help with
notation for prosodics.  It does provide a diacritical mark to indicate
stress, but this is by no means enough information for synthesis.
Furthermore, text-to-speech procedures (described in the next chapter)
promise to allow segmentals to be specified by an ordinary orthographic
representation of the utterance; but we have seen that considerable
intelligence is required to derive prosodic features from text.
(More than mere intelligence may be needed:  this is underlined by a paper
(Bolinger, 1972)
delightfully entitled
"Accent is predictable \(em if you're a mind reader"!)
.[
Bolinger 1972 Accent is predictable \(em if you're a mind reader
.]
.pp
If synthetic speech is to be used as a computer output medium rather
than as an experimental tool for linguistic research, it is important
that the method of specifying utterances is natural and easy to learn.
Prosodic features must be communicated to the computer in a manner
considerably simpler than individual duration and pitch specifications
for each phoneme, as was required in early synthesis-by-rule systems.
Fortunately, a notation has been developed for conveying some of the
prosodic features of utterances, as a by-product of the linguistically
important task of classifying the intonation contours used in
conversational English (Halliday, 1967).
.[
Halliday 1967
.]
This system has even been used to help foreigners speak English
(Halliday, 1970) \(em which emphasizes the fact that it was designed for use
by laymen, not just linguists!
.[
Halliday 1970 Course in spoken English: Intonation
.]
.pp
Here are examples of the way utterances can be conveyed to the ISP
speech synthesis system which was described in the previous chapter.
The notation is based upon Halliday's.
.LB
.NI
3
.ul
^  aw\ t\ uh/m\ aa\ t\ i\ k  /s\ i\ n\ th\ uh\ s\ i\ s  uh\ v  /*s\ p\ ee\ t\ sh,
.NI
1
.ul
^  f\ r\ uh\ m  uh  f\ uh/*n\ e\ t\ i\ k  /r\ e\ p\ r\ uh\ z\ e\ n/t\ e\ i\ sh\ uh\ n.
.LE
(Automatic synthesis of speech, from a phonetic representation.)  Three
levels of stress are distinguished:  tonic or "sentence" stress,
marked by "*" before the syllable; foot stress (marked by "/");
and unstressed syllables.
The notion of a "foot" controls the rhythm of the speech in a way that
will be described shortly.
A fourth level of stress is indicated on a segmental basis when a syllable
contains a reduced vowel.
.pp
Utterances are divided by punctuation into
.ul
tone groups,
which are the basic prosodic unit \(em there are two in the example.
The shape of the pitch contour is governed by a numeral at the start of
each tone group.
Crude control over pauses is achieved by punctuation marks:  full stop, for
example, signals a pause while comma does not.
(Longer pauses can be obtained by several full stops as in "...".)  The
"^" character stands for a so-called "silent stress" or breath point.
Word boundaries are marked by two spaces between phonemes.
As mentioned in the previous chapter, syllable boundaries and explicit
pitch and duration specifiers can also be included in the input.
If they are not, the ISP system will attempt to compute them.
.rh "Rhythm."
Our understanding of speech rhythm knows many laws but little order.
In the mid 1970's there was a spate of publications reporting new data
on segmental duration in various contexts, and there is a growing
awareness that segmental duration is influenced by a great many factors,
ranging from the structure of a discourse, through semantic and syntactic
attributes of the utterances, their phonemic and phonetic make-up,
right down to physiological constraints
(these multifarious influences are ably documented and reviewed by
Klatt, 1976).
.[
Klatt 1976 Linguistic uses of segment duration in English
.]
What seems to be lacking in this work is a conceptual framework on to
which new information about segmental duration can be nailed.
.pp
One starting-point for imitating the rhythm of English speech is the
hypothesis of regularly recurring stresses.
These stresses are primarily
.ul
rhythmic
ones, and should be distinguished from the tonic stress mentioned above which
is primarily an
.ul
intonational
one.
Rhythmic stresses are marked in the transcription by a "/".
The stretch between one and the next is called a "foot",
and the hypothesis above is often referred to as that of isochronous feet
("isochronous" means "of equal time").
There is considerable controversy about this hypothesis.
It is most popular among British linguists and, it must be admitted,
amongst those who work by introspection and intuition and do not actually
.ul
measure
things.
Although the question of isochrony of feet has long been debated, there
seems to be general agreement
\(em even amongst American linguists \(em
that there is at least a tendency towards
equal spacing of foot boundaries.
However, little is known about the strength of this tendency and the extent
of deviations from it (see Hill
.ul
et al,
1979, for an attempt
to quantify it) \(em and there is even evidence to suggest that it may in part
be a
.ul
perceptual
phenomenon (Lehiste, 1973).
.[
Hill Jassem Witten 1979
.]
.[
Lehiste 1973
.]
On this basic point, as on many others, the designer of a prosodic synthesis
strategy must needs make assumptions which cannot be properly justified.
.pp
From a pragmatic point of view there are two advantages to basing
a synthesis strategy on this hypothesis.
Firstly, it provides a way to represent the many influences of higher-level
processes (like syntax and semantics) on rhythm using a simple notation which
fits naturally into the phonetic utterance representation,
and which people find quite easy to understand and generate.
Secondly, it tends to produce a heavily accentuated, but not unnatural,
speech rhythm which can easily be moderated into a more acceptable rhythm
by departing from isochrony in a controlled manner.
.pp
The ISP procedure does not make feet exactly isochronous.
It starts with a standard foot time and attempts to fit the syllables of the
foot into this time.
If doing so would result in certain syllables having less than a preset minimum
duration, the isochrony constraint is relaxed and the foot is expanded.
There is no preset
.ul
maximum
syllable length.
However, when the durations of individual phoneme postures are adjusted
to realize the calculated syllable durations,
limits are imposed on the amount by which individual phonemes can be expanded
or contracted.
Thus a hierarchy of limits exists.
.pp
The rate of talking is determined by the standard foot time.
If this time is short, many feet will be forced to have durations longer than
the standard, and the speech will be "less isochronous".
This seems to accord with common human experience.
If the standard time is longer, however, the minimum syllable limit
will always be exceeded and the speech will be completely isochronous.
If it is too long, the above-mentioned limits to phoneme expansion will
come into play and again partially destroy the isochrony.
.pp
It has often been observed that the final foot of an utterance tends to be
longer than others; as does the tonic foot \(em that which bears the
major stress.
This is easy to accomodate, simply by making the target duration
longer for these feet.
.rh "From feet to syllables."
A foot is a succession of syllables, one or more.
And it is obvious that since there are more syllables in some feet than
in others, some syllables must occupy less time than others in order to preserve
the tendency towards isochrony of feet.
.pp
However, the duration of a foot is not divided evenly between its constituent
syllables.  The syllables have a definite rhythm of their own, which seems
to be governed by
.LB
.NP
the nature of the salient (that is, the first) syllable of the foot
.NP
the presence of word boundaries within the foot.
.LE
A salient syllable tends to be long either if it contains one of
a class of so-called "long" vowels, or if there is a cluster of two or more
consonants following the vowel.
The pattern of syllables and word boundaries governs the rhythm of the foot,
and Table 8.2 shows the possibilities for one-, two-, and three-syllable feet.
This theory of speech rhythm is due to Abercrombie (1964).
.[
Abercrombie 1964 Syllable quantity and enclitics in English
.]
.RF
.nr x2 \w'three-syllable feet  'u
.nr x3 \w'sal-short  'u
.nr x4 \w'weak [#]  'u
.nr x5 \w'weak      'u
.nr x6 \w'/\fIit s incon\fR/ceivable    'u
.nr x1 (\w'syllable rhythm'/2)
.nr x7 \n(x2+\n(x3+\n(x4+\n(x5+\n(x6+\n(x1+\n(x1
.nr x7 (\n(.l-\n(x7)/2
.in \n(x7u
.ta \n(x2u +\n(x3u +\n(x4u +\n(x5u +\n(x6u
.ul
	syllable pattern		example	\0\0\h'-\n(x1u'syllable rhythm
.sp
one-syllable feet	salient			/\fIgood\fR /show	1
	^	weak		/\fI^ good\fR/bye	2:1
.sp
two-syllable feet	sal-long	weak		/\fIcentre\fR /forward	1:1
	sal-short	weak		/\fIatom\fR /bomb	1:2
	salient  #	weak		/\fItea for\fR /two	2:1
.sp
three-syllable feet	salient  #	weak [#]	weak	/\fIone for the\fR /road	2:1:1
				/\fIit's incon\fR/ceivable
	sal-long	weak #	weak	/\fIafter the\fR /war	2:3:1
	sal-short	weak #	weak	/\fImiddle to\fR /top	1:3:2
	sal-long	weak	weak	/\fInobody\fR /knows	3:1:2
	sal-short	weak	weak	/\fIanything\fR /more	1:1:1
.sp
	# denotes a word boundary;
	[#] is an optional word boundary
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 8.2  Syllable patterns and rhythms"
.pp
A foot may have the rhythmical characteristics of a two-syllable foot
while having only one syllable, if the first place in it is filled by a
silent stress (marked by "^").
This is shown in the second one-syllable example of
Table 8.2.
A similar effect may occur with two- and three-syllable feet,
although examples are not given in the table.
Feet of four and five syllables \(em with or without a silent stress \(em are
considerably rarer.
.pp
Syllabification \(em splitting an utterance into syllables \(em is a job
which had to be done for the pitch-transfer procedure described earlier,
and the nature of syllable rhythms calls for it here too.
Even though the utterance is now specified phonetically instead of
acoustically, the same basic principle applies.
Syllables normally coincide with peaks of sonority,
where "sonority" measures the inherent loudness of a sound relative to
other sounds of the same duration and pitch.
However, difficult cases exist where it seems to be unclear how many syllables
there are in a word.  (Ladefoged, 1975, discusses this problem with examples
such as "real", "realistic", and "reality".)  Furthermore,
.[
Ladefoged 1975
.]
care must be taken to avoid counting two syllables in a word like "sky"
because of its two peaks of sonority \(em for the stop
.ul
k
has lower
sonority than the fricative
.ul
s.
.pp
Three levels of notional sonority are enough for syllabification.
Dividing phoneme segments into
.ul
sonorants
(glides and nasals),
.ul
obstruents
(stops and fricatives), and vowels; a general syllable has the form
.LB
.EQ
<obstruent> sup * ~ <sonorant> sup * ~ <vowel> sup * ~ <sonorant> sup * ~
<obstruent> sup * ~ ,
.EN
.LE
where "*" means repetition, that is, occurrence zero or more times.
This sidesteps the "sky" problem by giving fricatives the same
sonority as stops.
It is easy to use the above structure to count the number
of syllables in a given utterance by counting the sonority
peaks.
.pp
However, what is required is an indication of syllable
.ul
boundaries
as well as a syllable count.
For slow conversational speech, these can be approximated as follows.
Word divisions obviously form syllable boundaries, as should
foot markers \(em but it may be wise not to assume that the latter do if the
utterance has been prepared by someone with little knowledge of linguistics.
Syllable boundaries should be made to coincide with sonority minima.
As an
.ul
ad hoc
pragmatic
rule, if only one segment has the minimum sonority the boundary is placed
before it.
If there are two segments, each with the minimum sonority, it is placed between
them, while for three or more it is placed after the first two.
.pp
These rules produce obviously acceptable divisions in many cases
(to'day, ash'tray, tax'free), with perhaps unexpected positioning of the
boundary in others (ins'pire, de'par'tment).
Actually, people do differ in placement of syllable boundaries
(Abercrombie, 1967).
.[
Abercrombie 1967
.]
.rh "From syllables to segments."
The theory of isochronous feet (with the caveats noted earlier)
and that of syllable rhythms provide a way of producing durations for
individual syllables.  But where are these durations supposed to be measured?
There is a beat point, or tapping point, near the beginning of each syllable.
This is the place where a listener will tap if asked to give one tap to each
syllable; it has been investigated experimentally by Allen (1972).
.[
Allen 1972 Location of rhythmic stress beats in English One
.]
It is not necessarily at the very beginning of the syllable.
For example, in "straight", the tapping point is certainly after the
.ul
s
and the stopped part of the
.ul
t.
.pp
Another factor which relates to the division of the syllable duration
amongst phonetic segments is the often-observed fact that the length of the
vocalic nucleus is a strong clue to the degree of voicing of the terminating
cluster (Lehiste, 1970).
.[
Lehiste 1970 Suprasegmentals
.]
If you say in pairs words like "cap", "cab"; "cat", "cad"; "tack", "tag"
you will find that the vowel in the first word of each pair is significantly
shorter than that in the second.
In fact, the major difference between such pairs is the vowel length,
not the final consonant.
.pp
Such effects can be taken into account by considering a syllable to comprise
an initial consonant cluster, followed by a vocalic nucleus and a final
consonant cluster.
Any of these elements can be missing \(em the most unusual case where the
nucleus is absent occurs, for example, in so-called syllabic
.ul
n\c
\&'s
(as in renderings of "button", "pudding" which might be written
"butt'n", "pudd'n").
However, it is convenient to modify the definition of the nucleus
so as to rule out the possibility of it being empty.
Using the characterization of the syllable given above, the clusters can
be defined as
.LB
.NI
initial cluster	=  <obstruent>\u*\d <sonorant>\u*\d
.NI
nucleus	=  <vowel>\u*\d <sonorant>\u*\d
.NI
final cluster	=  <obstruent>\u*\d.
.LE
Sonorants are included in the nucleus so that it is always present,
even in the case of a syllabic consonant.
.pp
Then, rules can be used to divide the syllable duration between the
initial cluster, nucleus, and final cluster.
These must distinguish between situations where the terminating cluster
is voiced or unvoiced so that the characteristic differences in vowel lengths
can be accomodated.
.pp
Finally, the cluster durations must be apportioned amongst their constituent
phonetic segments.  There is little published data on which to base this.
Two simple schemes which have been used in ISP are described in
Witten (1977) and Witten & Smith (1977).
.[
Witten 1977 A flexible scheme for assigning timing and pitch to synthetic speech
.]
.[
Witten Smith 1977 Synthesizing British English rhythm
.]
.rh "Pitch."
There are two basically different ways of looking at the pitch of an
utterance.
One is to imagine pitch
.ul
levels
attached to individual syllables.
This has been popular amongst American linguists, and some people
have even gone so far as to associate pitch levels with levels of
stress.
The second approach is to consider pitch
.ul
contours,
as we did earlier when examining how to transfer pitch from one utterance
to another.
This seems to be easier for the person who transcribes the utterances
to produce, for the information required is much less detailed than levels
attached to each syllable.  Some indication needs to be given of how
the contour is to be bound to the utterance, and in the notation introduced above
the most prominent, or "tonic", syllable is indicated in the transcription.
.pp
Halliday's (1970) classification identifies five different primary intonation
contours, each hinging on the tonic syllable.
.[
Halliday 1970 Course in spoken English: Intonation
.]
These are sketched in Figure 8.5, in the style of Halliday.
.FC "Figure 8.5"
Several secondary contours, which are variations on the primary ones,
are defined as well.
However, this classification scheme is intended for consumption by people,
who bring to the problem a wealth of prior knowledge of speech and years
of experience with it!  It captures only the gross features
of the infinite variety of pitch contours found in living speech.
In a sense, the classification is
.ul
phonological
rather than
.ul
phonetic,
for it attempts to distinguish the features which make a logical difference
to the listener instead of the acoustic details of the pitch contours.
.pp
It is necessary to take these contours and subject them to a sort of
phonological-to-phonetic embellishment before applying them in synthetic
speech.
For example, the stretches with constant pitch which precede the tonic
syllable in tone groups 1, 2, and 3 sound
most unnatural when synthesized \(em for pitch is hardly ever
exactly constant in living speech.
Some pretonic pitch variation is necessary,
and this can be made to emphasize the salient syllable
of each foot.  A "lilting" effect which reaches a peak at each foot
boundary, and drops rather faster at the beginning of the foot than it
rises at the end, sounds more natural.  The magnitude of this inflection
can be altered slightly to add interest, but a considerable increase in it
produces a semantic change by making the utterance sound more emphatic.
It is a major problem to pin down exactly the turning points of pitch in
the falling-rising and rising-falling contours (4 and 5 in Figure 8.5).
And even deciding on precise values for the pitch frequencies involved is not
always easy.
.pp
The aim of the pitch assignment method of ISP is to allow the person
(or program) which originates a spoken message to exercise a great deal
of control over its intonation, without having to concern himself with
foot or syllable structure.  The message to be spoken must be broken down
into tone groups,
which correspond roughly to Halliday's tone groups.
Each one comprises a
.ul
tonic
of one or more feet, which is optionally preceded by a
.ul
pretonic,
also with a number of feet.  It is advantageous to allow a tone group
boundary to occur in the middle of a foot (whereas Halliday's scheme
insists that it occurs at a foot boundary).
The first foot of the tonic, the
.ul
tonic foot,
is marked by an asterisk at the beginning.
It is on the first syllable of this foot \(em the
"tonic" or "nuclear"
syllable \(em that the major stress of the tone group occurs.
If there is no asterisk in a tone group,
ISP takes the final foot as the tonic
(since this is the most common case).
.pp
The pitch contour on a tone group is specified by an array of ten numbers.
Of course, the system cannot generate all conceivable contours for a tone
group, but the definitions of the ten specifiable quantities have been
chosen to give a useful range of contours.
If necessary, more precise control over the pitch of an utterance can
be achieved by making the tone groups smaller.
.pp
The overall pitch movement is controlled by specifying the pitch at three
places:  the beginning of the tone group, the beginning of the tonic syllable,
and the end of the tone group.
Provision is made for an abrupt pitch break at the start of the tonic
syllable in order to simulate tone groups 2 and 3, and, to a lesser
extent, tone groups 4 and 5.
The pitch is interpolated linearly over the first part of the
tone group (up to the tonic syllable) and over the last part (from there to
the end), except that it is possible to specify a non-linearity on the tonic
syllable, for emphasis, as shown in Figure 8.6.
.FC "Figure 8.6"
.pp
On this basic shape are superimposed two finer pitch patterns.
One of these is an initialization-continuation option which allows
the pitch to rise (or fall) independently on the initial and final feet
to specified values, without affecting the contour on the rest
of the tone group (Figure 8.7).
.FC "Figure 8.7"
The other is a foot pattern which is superimposed on each pretonic foot,
to give the stressed syllables of the pretonic added prominence and avoid
the monotony of constant pitch.
This is specified by a
.ul
non-linearity
parameter which distorts the contour on the foot at a pre-determined
point along it.
Figure 8.8 shows the effect.
.FC "Figure 8.8"
.pp
The ten quantities that define a pitch contour are summarized in
Table 8.3, and shown diagrammatically in Figure 8.9.
.FC "Figure 8.9"
.RF
.nr x0 \w'H:    'u
.nr x1 \n(x0+\w'fraction along foot of the non-linearity position, for the tonic foot'u
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta \n(x0u +4n
A:	continuation from previous tone group
		zero gives no continuation
		non-zero gives pitch at start of tone group
B:	notional pitch at start
C:	pitch range on whole of pretonic
D:	departure from linearity on each foot of pretonic
E:	pitch change at start of tonic
F:	pitch range on tonic
G:	departure from linearity on tonic
H:	continuation to next tone group
		zero gives no continuation
		non-zero gives pitch at end of tone group
I:	fraction along foot of the non-linearity position, for pretonic feet
J:	fraction along foot of the non-linearity position, for the tonic foot
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 8.3  The quantities that define a pitch contour"
.pp
The intention of this parametric method of specifying contours
is that the parameters should be easily derivable from semantic variables
like emphasis, novelty of idea, surprise, uncertainty, incompleteness.
Here we really are getting into controversial, unresearched areas.
Roughly speaking, parameters D and G control emphasis, G by itself
controls novelty and surprise, and H and the relative sizes of E and F
control uncertainty and incompleteness.
Certain parameters (notably I and J) are defined because although they
do not appear to correspond to semantic distinctions, we do not yet know
how to generate them automatically.
.RF
.nr x0 0.6i+0.5i+0.5i+0.5i+0.5i+0.5i+0.5i+0.5i+0.5i+0.5i+0.5i+\w'0000'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 0.6i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i
Halliday's
tone group	\0\0A	\0\0B	\0\0C	\0\0D	\0\0E	\0\0F	\0\0G	\0\0H	\0\0I	\0\0J
\l'\n(x0u\(ul'
.sp
	1	\0\0\00	\0175	\0\0\00	\0\-40	\0\0\00	\-100	\0\-40	\0\0\00	0.33	\00.5
	2	\0\0\00	\0280	\0\0\00	\0\-40	\-190	\0100	\0\0\00	\0\0\00	0.33	\00.5
	3	\0\0\00	\0175	\0\0\00	\0\-40	\0\-70	\0\045	\0\-10	\0\0\00	0.33	\00.5
	4	\0\0\00	\0280	\-100	\0\-40	\0\020	\0\045	\0\-45	\0\0\00	0.33	\00.5
	5	\0\0\00	\0175	\0\060	\0\-40	\0\-20	\0\-45	\0\045	\0\0\00	0.33	\00.5
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 8.4  Pitch contour table for Halliday's primary tone groups"
.pp
One basic requirement of the pitch assignment scheme was the ability to
generate contours which approximate Halliday's five primary tone groups.
Values of the ten specifiable quantities are given in Table 8.4, for each
tone group.
All pitches are given in\ Hz.
A distinctly dipping pitch movement has been given to each pretonic foot
(parameter D),
to lend prominence to the salient syllables.
.sh "8.4  Evaluating prosodic synthesis"
.pp
It is extraordinarily difficult to evaluate schemes for prosodic synthesis,
and this is surely a large part of the reason why prosodics are among the
least advanced aspects of artificial speech.
Segmental synthesis can be tested by playing people minimal pairs of
words which differ in just one feature that is being investigated.
For example, one might experiment with "pit", "bit"; "tot", "dot";
"cot", "got" to test the rules which discriminate unvoiced from voiced stops.
There are standard word-lists for intelligibility tests which can be
used to compare systems, too.
No equivalent of such micro-level evaluation exists for prosodics,
for they by definition have a holistic effect on utterances.
They are most noticeable, and most important, in longish stretches of speech.
Even monotonous, arhythmic speech will be intelligible in
sufficiently short samples provided the segmentals are good enough;
but it is quite impossible to concentrate on such speech in quantity.
Some attempts at evaluation appear in Ainsworth (1974) and McHugh (1976),
but these are primarily directed at assessing the success of pronunciation
rules, which are discussed in the next chapter.
.[
Ainsworth 1974 Performance of a speech synthesis system
.]
.[
McHugh 1976 Listener preference and comprehension tests
.]
.pp
One evaluation technique is to compare synthetic with natural versions
of utterances, as was done in the pitch transfer experiment.
The method described earlier used a sensitive paired-comparison test,
where subjects heard both versions in quick succession and were asked
to judge which was "most natural and intelligible".
This is quite a stringent test, and one that may not be so useful
for inferior, completely synthetic, contours.
It is essential to degrade the "natural" utterance so that it is
comparable segmentally to the synthetic one:  this was done in the
experiment described by extracting its pitch and resynthesizing it
from linear predictive coefficients.
.pp
Several other experiments could be undertaken to evaluate artificial
prosody.
For example, one could compare
.LB
.NP
natural and artificial rhythms, using artificial segmental synthesis
in both cases;
.NP
natural and artificial pitch contours, using artificial segmental synthesis
in both cases;
.NP
natural and artificial pitch contours, using segmentals extracted from
natural utterances.
.LE
There are many other topics which have not yet been fully investigated.
It would be interesting, for example, to define rules for generating speech
at different tempos.
Elisions, where phonemes or even whole syllables are suppressed,
occur in fast speech; these have been analyzed by linguists
but not yet incorporated into synthetic models.
It should be possible to simulate emotion by altering parameters such as
pitch range and mean pitch level; but this seems exceptionally difficult
to evaluate.  One situation where it would perhaps be possible to
measure emotion is in the reading of sports results \(em in fact a study
has already been made of intonation in soccer results (Bonnet, 1980)!
.[
Bonnet 1980
.]
Even the synthesis of voices with different pitch ranges requires
investigation, for, as noted earlier, it is difficult to place
precise frequency specifications on phonological contours such as
those sketched in Figure 8.5.
Clearly the topic of prosodic synthesis is a rich and potentially
rewarding area of research.
.sh "8.5  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "8.6  Further reading"
.pp
There are quite a lot of books in the field of linguistics which
describe prosodic features.
Here is a small but representative sample from both sides of the Atlantic.
.LB "nn"
.\"Abercrombie-1965-1
.]-
.ds [A Abercrombie, D.
.ds [D 1965
.ds [T Studies in phonetics and linguistics
.ds [I Oxford Univ Press
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Abercrombie is one of the leading English authorities on phonetics,
and this is a collection of essays which he has written over the years.
Some of them treat prosodics explicitly, and others show the influence
of verse structure on Abercrombie's thinking.
.in-2n
.\"Bolinger-1972-2
.]-
.ds [A Bolinger, D.(Editor)
.ds [D 1972
.ds [T Intonation
.ds [I Penguin
.ds [C Middlesex, England
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
A collection of papers that treat a wide variety of different aspects
of intonation in living speech.
.in-2n
.\"Crystal-1969-3
.]-
.ds [A Crystal, D.
.ds [D 1969
.ds [T Prosodic systems and intonation in English
.ds [I Cambridge Univ Press
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This book attempts to develop a theoretical basis for the study of British
English intonation.
.in-2n
.\"Gimson-1966-3
.]-
.ds [A Gimson, A.C.
.ds [D 1966
.ds [T The linguistic relevance of stress in English
.ds [B Phonetics and linguistics
.ds [E W.E.Jones and J.Laver
.ds [P 94-102
.nr [P 1
.ds [I Longmans
.ds [C London
.nr [T 0
.nr [A 1
.nr [O 0
.][ 3 article-in-book
.in+2n
Here is a careful discussion of what is meant by "stress", with much more
detail than has been possible in this chapter.
.in-2n
.\"Lehiste-1970-4
.]-
.ds [A Lehiste, I.
.ds [D 1970
.ds [T Suprasegmentals
.ds [I MIT Press
.ds [C Cambridge, Massachusetts
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This is a comprehensive study of suprasegmental phenomena in natural speech.
It is divided into three major sections:  quantity (timing), tonal features
(pitch), and stress.
.in-2n
.\"Pike-1945-5
.]-
.ds [A Pike, K.L.
.ds [D 1945
.ds [T The intonation of American English
.ds [I Univ of Michigan Press
.ds [C Ann Arbor, Michigan
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
A classic, although somewhat dated, study.
Notice that it deals specifically with American English.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "9  GENERATING SPEECH FROM TEXT"
.ds RT "Generating speech from text
.ds CX "Principles of computer speech
.pp
In the preceding two chapters I have described how artificial speech
can be produced from a written phonetic representation with additional
markers indicating intonation contours, points of major stress, rhythm,
and pauses.
This representation is substantially the same as that used by linguists
when recording natural utterances.
What we will discuss now are techniques for generating this information,
or at least some of it, from text.
.pp
Figure 9.1 shows various levels of the speech synthesis process.
.FC "Figure 9.1"
Starting from the top with plain text, the first box splits it into
intonation units (tone groups), decides where the major emphases
(tonic stresses) should be placed,
and further subdivides the tone group into rhythmic units (feet).
For intonation analysis it is necessary to decide on an "interpretation"
of the text, which in turn, as was emphasized at the beginning of the
previous chapter, depends both on the semantics of what is being said and
on the attitude of the speaker to his material.
The resulting representation will be at the level of Halliday's notation
for utterances, with the words still in English rather than phonetics.
Table 9.1 illustrates the utterance representation at the various levels
of the Figure.
.RF
.nr x0 \w'pitch and duration    '+\w'at 8 kHz sampling rate a 4-second utterance'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \w'pitch and duration    'u +\w'pause  'u +\w'00 msec   'u
representation	example
\l'\n(x0u\(ul'
.sp
plain text	Automatic synthesis of speech,
	from a phonetic representation.
.sp
text adorned with	3\0^ auto/matic /synthesis of /*speech,
prosodic markers	1\0^ from a pho/*netic /represen/tation.
.sp
phonetic text with	3\0\fI^  aw t uh/m aa t i k  /s i n th uh s i s\fR
prosodic markers	\0\0\fIuh v  /*s p ee t sh\fR ,
	1\0\fI^  f r uh m  uh  f uh/*n e t i k\fR
	\0\0\fI/r e p r uh z e n/t e i sh uh n\fR .
.sp
phonemes with	pause	80 msec
pitch and duration	\fIaw\fR	70 msec	105 Hz
	\fIt\fR	40 msec	136 Hz
	\fIuh\fR	50 msec	148 Hz
	\fIm\fR	70 msec	175 Hz
	\fIaa\fR	90 msec	140 Hz
		...
		...
		...
.sp
parameters for	10 parameters, each updated at a frame
formant or linear	rate of 10 msec
predictive	(4 second utterance gives 400 frames,
synthesizer	or 4,000 data values)
.sp
acoustic wave	at 8 kHz sampling rate a 4-second utterance
	has 32,000 samples
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.1  Utterance representations at various levels in speech synthesis"
.pp
The next job is to translate the plain text into a broad phonetic
transcription.
This requires knowledge of letter-to-sound pronunciation
rules for the language under consideration.
But much more is needed.  The structure of each word must be examined for
prefixes and suffixes, because they \(em especially the latter \(em have a
strong influence on pronunciation.
This is called "morphological" analysis.
Actually it is also required for rhythmical purposes, because prefixes
are frequently unstressed (note that the word "prefix" is itself an
exception to this!).
Thus the appealing segmentation of the overall problem shown in Figure 9.1
is not very accurate, for the individual processes cannot be rigidly
separated as it implies.  In fact, we saw earlier how this intermixing of
levels occurs with prosodic and segmental features.
Nevertheless, it is helpful to structure discussion of the problem by
separating levels as a first approximation.
Further influences on pronunciation come from the semantics and syntax
of the utterance \(em and both also play a part in intonation and rhythm analysis.
The result of this second process is a phonetic representation, still
adorned with prosodic markers.
.pp
Now we move down from higher-level intonation and rhythm considerations
to the details of the pitch contour and segment durations.
This process was the subject of the previous chapter.
The problems are twofold:  to map an appropriate acoustic pitch contour
on to the utterance, using tonic stress point and foot boundaries as
anchor points; and to assign durations to segments using the
foot\(emsyllable\(emcluster\(emsegment hierarchy.
If it is accepted that the overall rhythm can be captured adequately by foot
markers, this process does not interact with earlier ones.
However, many researchers do not, believing instead that rhythm is
syntactically determined at a very detailed level.
This will, of course, introduce strong interaction between the duration
assignment process and the levels above.
(Klatt, 1975, puts it into his title \(em
"Vowel lengthening is syntactically determined in a connected discourse".
.[
Klatt 1975 Vowel lengthening is syntactically determined
.]
Contrast this with the paper cited earlier (Bolinger, 1972) entitled
"Accent is predictable \(em if you're a mind reader".
.[
Bolinger 1972 Accent is predictable \(em if you're a mind reader
.]
No-one would disagree that "accent" is an influential factor in vowel length!)
.pp
Notice incidentally that the representation of the result of the pitch
and duration assignment process in Table 9.1 is inadequate, for each segment
is shown as having just one pitch.
In practice the pitch varies considerably throughout every segment,
and can easily rise and fall on a single one.  For example,
.LB
"he's
.ul
very
good"
.LE
may have a rise-fall on the vowel of "very".
The linked event-list data-structure of ISP is much more suitable
than a textual string for utterance representation at this level.
.pp
The fourth and fifth processes of Figure 9.1 have little interaction with
the first two, which are the subject of this chapter.  Segmental
concatenation, which was treated in Chapter 7, is affected by prosodic
features like stress; but a notation which indicates stressed syllables
(like Halliday's) is sufficient to capture this influence.
Contextual modification of segments, by which I mean
the coarticulation effects which govern allophones of phonemes,
is included explicitly in the fourth process to emphasize that the upper levels
need only provide a broad phonemic transcription rather than a detailed
phonetic one.
Signal synthesis can be performed by either a formant synthesizer or a
linear predictive one (discussed in Chapters 5 and 6).
This will affect the details of the segmental concatenation process but should have no
impact at all on the upper levels.
.pp
Figure 9.1 performs a useful function by summarizing where we have
been in earlier chapters \(em the lower three boxes \(em and introducing the
remaining problems that must be faced by a full text-to-speech system.
It also serves to illustrate an important point:  that a speech output system
can demand that its utterances be entered in any of a wide range of
representations.
Thus one can enter at a low level with a digitized waveform or linear
predictive parameters; or higher up with a phonetic representation
that includes detailed pitch and duration specification at the phoneme level;
or with a phonetic text or plain text adorned with prosodic markers;
or at the very top with plain text as it would appear in a book.
A heavy price in naturalness and intelligibility is paid by moving up
.ul
any
of these levels \(em and this is just as true at the top of the Figure as
at the bottom.
.sh "9.1  Deriving prosodic features"
.pp
If you really need to start with plain text,
some very difficult problems present themselves.
The text should be understood, first of all, and then decisions need to be
made about how it is to be interpreted.
For an excellent speaker \(em like an actor \(em these decisions will be artistic,
at least in part.
They should certainly depend upon the opinion and attitude of the speaker,
and his perception of the structure and progress of the dialogue.
Very little is known about this upper level of speech synthesis from text.
In practice it is almost completely ignored \(em and the speech is at most
barely intelligible, and certainly uncomfortable to listen to.
Hence anybody contemplating building or using a speech output system which
starts from something close to plain text should consider carefully whether some extra
semantic information can be coded into the initial utterances to help with
prosodic interpretation.
Only rarely is this impossible \(em and reading machines for the blind are
a prime example of a situation where arbitrary, unannotated, texts
must be read.
.rh "Intonation analysis."
One distinction which a program can usefully try
to make is between basically rising
and basically falling pitch contours.  It is often said that pitch rises on
a question and falls on a statement, but if you listen to speech you will
find this to be a gross oversimplification.  It normally
falls on statements, certainly; but it falls as often as it rises on questions.
It is more accurate to say that pitch rises on "yes-no" questions
and falls on other utterances, although this rule is still only a rough guide.
A simple test which operates lexically on the input text is to determine
whether a sentence is a question by looking at the 
punctuation mark at its end, and then to examine the first word.
If it is a "wh"-word like "what", "which", "when", "why" (and also "how")
a falling contour is likely to fit.
If not, the question is probably a yes-no one, and the contour
should rise.
Such a crude rule will certainly not be very accurate
(it fails, for example, when the "wh"-word is embedded in a phrase as in
"at what time are you going?"), but at least it provides a starting-point.
.pp
An air of finality is given to an utterance when it bears a definite
fall in pitch, dropping to a rather low value at the end.
This should accompany the last intonation unit in an utterance
(unless it is a yes-no question).
However, a rise-fall contour such as Halliday's tone group 5 (Figure 8.5)
can easily be used in utterance-final position by one person
in a conversation \(em
although it would be unlikely to terminate the dialogue altogether.
A new topic is frequently introduced by a fall-rise contour \(em such as
Halliday's tone group 4 \(em and this often begins a paragraph.
.pp
Determining the type of pitch contour is only one part of
intonation assignment.  There are really three separate problems:
.LB
.NP
dividing the utterance into tone groups
.NP
choosing the tonic syllable, or major stress point, of each one
.NP
assigning a pitch contour to each tone group.
.LE
Let us continue to use the Halliday notation for intonation, which was introduced
in simplified form in the previous chapter.
Moreover, assume that the foot boundaries can be placed correctly \(em
this problem will be discussed in the next subsection.
Then a scheme which considers only the lexical form of the utterance
and does not attempt to "understand" it (whatever that means) is as follows:
.LB
.NP
place a tone group boundary at every punctuation mark
.NP
place the tonic at the first syllable of the last foot in a tone group
.NP
use contour 4 for the first tone group in a paragraph and contour 1
elsewhere, except for a yes-no question which receives contour 2.
.LE
.RF
.nr x0 \w'From Scarborough to Whitby\0\0\0\0'+\w'4  ^  from /Scarborough to /*Whitby is a'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \w'From Scarborough to Whitby\0\0\0\0\0\0'u
plain text	text adorned with prosodic markers
\l'\n(x0u\(ul'
.sp
From Scarborough to Whitby is a	4 ^ from /Scarborough to /*Whitby is a
very pleasant journey, with	1\- very /pleasant /*journey with
very beautiful countryside.	1\- very /beautiful /*countryside ...
In fact the Yorkshire coast is	1+ ^ in /fact the /Yorkshire /coast is
\0\0\0\0lovely,	\0\0\0\0/*lovely
all along, ex-	1+ all a/*long ex
cept the parts that are covered	_4 cept the /parts that are /covered
\0\0\0\0in caravans of course; and	\0\0\0\0in /*caravans of /course and
if you go in spring,	4 if you /go in /*spring
when the gorse is out,	4 ^ when the /*gorse is /out
or in summer,	4 ^ or in /*summer
when the heather's out,	4 ^ when the /*heather's /out
it's really one of the most	13 ^ it's /really /one of the /most
\0\0\0\0delightful areas in the	\0\0\0\0de/*lightful /*areas in the
whole country.	1 whole /*country
.sp
The moorland is	4 ^ the /*moorland is
rather high up, and	1 rather /high /*up and
fairly flat \(em a	1 fairly /*flat a
sort of plateau.	1 sort of /*plateau ...
At least,	1 ^ at /*least
it isn't really flat,	13 ^ it /*isn't /really /*flat
when you get up on the top;	\-3 ^ when you /get up on the /*top
it's rolling moorland	1 ^ it's /rolling /*moorland
cut across by steep valleys.  But	1 cut across by /steep /*valleys but
seen from the coast it's	4 seen from the /*coast it's ...
"up there on the moors", and you	1 up there on the /*moors and you
always think of it as a	_4 always /*think of it as a
kind of tableland.	1 kind of /*tableland
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.2  Example of intonation and rhythm analysis (from Halliday, 1970)"
.[
Halliday 1970 Course in spoken English: Intonation
.]
.pp
These extremely crude and simplistic rules are really the most that one can do
without subjecting the utterance to a complicated semantic analysis.
In statistical terms, they are actually remarkably effective.
Table 9.2 shows part of a spontaneous monologue which was transcribed by
Halliday and appears in his teaching text on intonation
(Halliday, 1970, p 133).
.[
Halliday 1970 Course in Spoken English: Intonation
.]
Among the prosodic markers are some that were not introduced in Chapter 8.
Firstly, each tone group has secondary contours which are identified
by "1+", "1\-" (for tone group 1), and so on.
Secondly, the mark "..." is used to indicate a pause which disrupts
the speech rhythm.
Notice that its positioning belies the advice of the old elocutionists:
.br
.ev2
.in 0
.LB
.fi
A Comma stops the Voice while we may privately tell
.NI
.ul
one,
a Semi-colon
.ul
two;
a Colon
.ul
three:\c
  and a Period
.ul
four.
.br
.nr x0 \w'\fIone,\fR a Semi-colon \fItwo;\fR a Colon \fIthree:\fR  and a Period \fIfour.'-\w'(Mason,\fR 1748)'
.NI
\h'\n(x0u'(Mason, 1748)
.nf
.LE
.br
.ev
Thirdly, compound tone groups such as "13" appear which contain
.ul
two
tonic syllables.
This differs from a simple concatenation of tone groups
(with contours 1 and 3 in this case) because the second is in some sense subsidiary to
the first.
Typically it forms an adjunct clause, while the first clause gives the
main information.  Halliday provides many examples, such as
.LB
.NI
/Jane goes /shopping in /*town /every /*Friday
.NI
/^ I /met /*Arthur on the /*train.
.LE
But he does not comment on the
.ul
acoustic
difference between a compound tone group and a concatenation of simple ones \(em
which is, after all, the information needed for synthesis.
A final, minor, difference between Halliday's scheme and that outlined earlier
is that he compels tone group boundaries to occur at the beginning
of a foot.
.RF
.nr x0 3.3i+1.3i+\w'complete'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 3.3i +1.3i
	excerpt in	complete
	Table 9.2	passage
\l'\n(x0u\(ul'
.sp
number of tone groups	25	74
.sp
number of boundaries correctly	19 (76%)	47 (64%)
placed
.sp
number of boundaries incorrectly	\00	\01 (\01%)
placed
.sp
number of tone groups having a	22 (88%)	60 (81%)
tonic syllable at the beginning
of the final foot
.sp
number of tone groups whose	17 (68%)	51 (69%)
contours are correctly assigned
\l'\n(x0u\(ul'
.sp
number of compound tone groups	\02 (\08%)	\06 (\08%)
.sp
number of secondary intonation	\07 (28%)	13 (17%)
contours
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.3  Success of simple intonation assignment rules"
.pp
Applying the simple rules given above to the text of Table 9.2 leads to
the results in the first column of Table 9.3.
Three-quarters of the foot boundaries are flagged by
punctuation marks, with no extraneous ones being included.
88% of tone groups have a tonic syllable at the start of the final foot.
However, the compound tone groups each have two tonic syllables,
and of course only the second one is predicted by the final-foot rule.
Assigning intonation contours on the extremely simple basis of using
contour 4 for the first tone group in a paragraph, and contour 1 thereafter,
also seems to work quite well.  Secondary contours such as "1+" and "1\-"
have been mapped into the appropriate primary contour (1, in this case)
for the present purpose, and compound tone groups have been assigned the first
contour of the pair.
The result is that 68% of contours are given correctly.
.pp
In order to give some idea of the reliability of these figures, the results
for the whole passage transcribed by Halliday \(em of which Table 9.2 is an
excerpt \(em are shown in the second column of Table 9.3.  Although it
looks as though the rules may have been slightly lucky with the excerpt,
the general trends are the same, with 65% to 80% of features being assigned
correctly.
It could be argued, though, that the complete text is punctuated fairly liberally by
present-day standards, so that the tone-group boundary rule is unusually
successful.
.pp
These results are really astonishingly good, considering the crudeness of
the rules.  However, they should be interpreted with caution.
What is missed by the rules, although appearing to comprise only
20% to 35% of the features, is certain to include the important,
information-bearing, and variety-producing features that give the utterance
its liveliness and interest.
It would be rash to assume that all tone-group boundaries,
all tonic positions, and all intonation contours, are equally
important for intelligibility and naturalness.
It is much more likely that the rules predict a
default pattern, while most information is borne by deviations from
them.
To give an engineering analogy, it may be as though the carrier waveform
of a modulated transmission is being simulated, instead of the
information-bearing signal!
Certainly the utterance will, if synthesized with intonation given by these
rules, sound extremely dull and repetitive, mainly because of the
overwhelming predominance of tone group 1 and the universal placement
of tonic stress on the final foot.
.pp
There are certainly many different ways to orate any particular text,
and that given by Halliday and reproduced in Table 9.2 is only one possible
version.
However, it is fair to say that the default intonation discussed above
could only occur naturally under very unusual circumstances \(em such as
a petulant child, unwilling and sulky, having been forced to read aloud.
This is hardly how we want our computers to speak!
.rh "Rhythm analysis."
Consider now how to decide where foot boundaries should be placed
in English text.
Clearly semantic considerations sometimes play a part in this \(em one could
say
.LB
/^ is /this /train /going /*to /London
.LE
instead of the more usual
.LB
/^ is /this /train /going to /*London
.LE
in circumstances where the train might be going
.ul
to
or
.ul
from
London.
Such effects are ignored here, although it is worth noting in passing that the
rogue words will often be marked by underscoring or italicizing
(as in the previous sentence).
If the text is liberally underlined, semantic analysis may
be unnecessary for the purposes of rhythm.
.pp
A rough and ready rule for placing foot boundaries is to insert one before
each word which is not in a small closed set of "function words".
The set includes, for example, "a", "and", "but", "for", "is", "the", "to".
If a verb or adjective begins with a prefix, the boundary should be moved
between it and the root \(em but not for a noun.
This will give the distinction between
.ul
con\c
vert (noun) and con\c
.ul
vert
(verb),
.ul
ex\c
tract and ex\c
.ul
tract,
and for many North American speakers,
will help to distinguish
.ul
in\c
quiry from in\c
.ul
quire.
However, detecting prefixes by a simple splitting algorithm is dangerous.
For example, "predate" is a verb with stress on what appears to be a prefix,
contrary to the rule; while the "pre" in "predator" is not a prefix \(em at
least, it is not pronounced as the prefix "pre" normally is.
Moreover, polysyllabic words like "/diplomat", "dip/lomacy", "diplo/matic";
or "/telegraph", "te/legraphy", "tele/graphic" cannot be handled on such a simple
basis.
.pp
In 1968, a remarkable work on English sound structure was published
(Chomsky and Halle, 1968) which proposes a system of rules to transform
English text into a phonetic representation in terms of distinctive features,
with the aid of a lexicon.
.[
Chomsky Halle 1968
.]
A great deal of attention is paid to stress, and rules are given which
perform well in many tricky cases.
.pp
It uses the American system of levels of stress, marking
so-called primary stress with a superscript 1, secondary stress with a
superscript 2, and so on.
The superscripts are written on the vowel of the stressed
syllable:  completely unstressed syllables receive no annotation.
For example, the sentence "take John's blackboard eraser" is written
.LB
ta\u2\dke Jo\u3\dhn's bla\u1\dckboa\u5\drd era\u4\dser.
.LE
In foot notation this utterance
is
.LB
/take /John's /*blackboard e/raser.
.LE
It undoubtedly contains less information than the stress-level version.
For example, the second syllable of "blackboard" and the first one of "erase"
are both unstressed, although the rhythm rules given in Chapter 8
will cause them
to be treated differently because they occupy different places in the
syllable pattern of the foot.
"Take", "John's", and the second syllable of "erase" are all non-tonic
foot-initial syllables and hence are not distinguished in the notation;
although the pitch contours schematized in Figure 8.9 will give them different
intonations.
.pp
An indefinite number of levels of stress can be used.  For example, according
to the rules given by Chomsky and Halle, the word "sad" in
.LB
my friend can't help being shocked at anyone who would fail to consider
his sad plight
.LE
has level-8 stress, the final two words being annotated
as "sa\u8\dd pli\u1\dght".
However, only the first few levels are used regularly, and
it is doubtful whether acoustic distinctions are made in speech
between the weaker ones.
.pp
Chomsky and Halle are concerned to distinguish between such utterances as
.LB
.NI
bla\u2\dck boa\u1\drd-era\u3\dser    ("board eraser that is black")
.NI
bla\u1\dckboa\u3\drd era\u2\dser     ("eraser for a blackboard")
.NI
bla\u3\dck boa\u1\drd era\u2\dser    ("eraser of a black board"),
.LE
and their stress assignment rules do indeed produce each version when
appropriate.
In foot notation the distinctions can still be made:
.LB
.NI
/black /*board-eraser/
.NI
/*blackboard e/raser/
.NI
/black /*board e/raser/
.LE
.pp
The rules operate on a grammatical derivation tree
of the text.
For instance, input for the three examples would be written
.LB
.NI
[\dNP\u[\dA\u black ]\dA\u [\dN\u[\dN\u board]\dN\u
[\dN\u eraser ]\dN\u]\dN\u]\dNP\u
.NI
[\dN\u[\dN\u[\dA\u black ]\dA\u [\dN\u board ]\dN\u]\dN\u [\dN\u eraser ]\dN\u]\dN\u
.NI
[\dN\u[\dNP\u[\dA\u black ]\dA\u [\dN\u board ]\dN\u]\dNP\u [\dN\u eraser ]\dN\u]\dN\u,
.LE
representing the trees shown in Figure 9.2.
.FC "Figure 9.2"
Here, N stands for a noun, NP for a noun phrase, and A for an adjective.
These categories appear explicitly as nodes in the tree.
In the linearized textual representation they are used to label
brackets which represent the tree structure.
An additional piece of information which is needed is the lexical entry for
"eraser", which would show that it has only one accented
(that is, potentially stressed) syllable, namely, the second.
.pp
Consider now how to account for stress in prefixed and
suffixed words, and those polysyllabic ones with more than one potential
stress point.
For these, the morphological structure must appear in the input.
.pp
Now
.ul
morphemes
are well-defined minimal units of grammatical analysis from which a word
may be composed.
For example,  [went]\ =\ [go]\ +\ [ed]  is
a morphemic decomposition, where "[ed]" denotes the
past-tense morpheme.
This representation is not particularly suitable for speech synthesis
for the obvious reason that the result bears no phonetic resemblance to
the input.
What is needed is a decomposition into
.ul
morphs,
which occur only when the lexical or phonetic representation of a word may
easily be segmented into parts.
Thus  [wanting]\ =\ [want]\ +\ [ing]  and  [bigger]\ =\ [big]\ +\ [er]  are
simultaneously morphic and morphemic decompositions.
Notice that in the second example, a rule about final consonant doubling has
been applied at the lexical level (although it is not needed in
a phonetic representation):  this comes into the sphere
of "easy" segmentation.
Contrast this with  [went]\ =\ [go]\ +\ [ed]  which
is certainly not an easy segmentation and hence a
morphemic but not a morphic decomposition.
But between these extremes there are some difficult
cases:  [specific]\ =\ [specify]\ +\ [ic]  is probably morphic
as well as morphemic, but it is not clear
that  [galactic]\ =\ [galaxy]\ +\ [ic]  is.
.pp
Assuming that the input is given as a derivation tree with morphological
structure made explicit, Chomsky and Halle present rules which assign stress
correctly in nearly all cases.  For example, their rules give
.LB
.NI
[\dA\u[\dN\u incident ]\dN\u + al]\dA\u  \(em>  i\u2\dncide\u1\dntal;
.LE
and if the stem is marked by  [\dS\u\ ...\ ]\dS\u  in prefixed words,
they can deduce
.LB
.NI
[\dN\u tele [\dS\u graph ]\dS\u]\dN\u		\(em>  te\u1\dlegra\u3\dph
.NI
[\dN\u[\dN\u tele [\dS\u graph ]\dS\u]\dN\u y ]\dN\u	\(em>  tele\u1\dgraphy
.NI
[\dA\u[\dN\u tele [\dS\u graph ]\dS\u]\dN\u ic ]\dA\u	\(em>  te\u3\dlegra\u1\dphi\u2\dc.
.LE
.pp
There are two rules which account for the word-level stress
on such examples:  the "main stress"
rule and the "alternating stress" rule.
In essence, the main stress rule emphasizes the last strong syllable
of a stem.
A syllable is "strong" either if it contains one of a class of so-called
"long" vowels, or if there is a cluster of two or more consonants
following the vowel; otherwise it is "weak".
(If you are exceptionally observant you will notice that this strong\(emweak
distinction has been used before, when discussing the rhythm of feet in
syllables.)  Thus the verb "torment" receives stress on the second syllable,
for it is a strong one.
A noun like "torment" is treated as being derived from the corresponding verb,
and the rule assigns stress to the verb first and then modifies it for the noun.
The second, "alternating stress", rule gives some stress to alternate
syllables of polysyllabic words like "form\c
.ul
al\c
de\c
.ul
hyde\c
".
.pp
It is quite easy to incorporate the word-level rules into a computer
program which uses feet rather than stress levels as the basis for prosodic
description.
A foot boundary is simply placed before the primary-stressed (level-1) syllable,
except for function words, which do not begin a foot.
The other stress levels should be ignored,
except that for slow, deliberate speech, secondary (level-2) stress is
mapped into a foot boundary too, if it precedes the primary stress.
There is also a rule which reduces vowels in unstressed
syllables.
.pp
The stress assignment rules can work on phonemic script, as well as English.
For example, starting from the phonetic
form  [\d\V\u\ \c
.ul
aa\ s\ t\ o\ n\ i\ sh\ \c
]\dV\u,
the stress assignment rules
produce  \c
.ul
aa\ s\ t\ o\u1\d\ n\ i\ sh\ ;\c
  the
vowel reduction rule
generates  \c
.ul
uh\ s\ t\ o\u1\d\ n\ i\ sh\ ;\c
  and
the foot conversion process
gives  \c
.ul
uh\ s/t\ o\ n\ i\ sh.
This appears to provide a fairly reliable algorithm for foot boundary
placement.
.rh "Speech synthesis from concept."
I argued earlier that in order to derive prosodic features
of an utterance from text it
is necessary to understand its role in the dialogue, its semantics,
its syntax, and \(em as we have just seen \(em its morphological structure.
This is a very tall order, and the problem of natural language comprehension
by machine is a vast research area in its own right.
However, in many applications requiring speech output,
utterances are generated by the computer from internally stored data
rather than being read aloud from pre-prepared text.
Then the problem of comprehending text may be evaded, for
presumably the language-generation module can provide a semantic,
syntactic, and even morphological decomposition of the utterance,
as well as some indication of its role in the dialogue
(that is, why it is necessary to say it).
.pp
This forms the basis of the appealing notion of "speech synthesis from concept".
It has some advantages over speech generation from text, and in principle
should provide more natural-sounding speech.
Every word produced by the system can have a complete lexical entry which
shows its morphological decomposition and potential stress points.
The full syntactic history of each utterance is known.
The Chomsky-Halle rules described above can therefore be used to place
foot boundaries accurately, without the need for a complex parsing program
and without the risk of having to make guesses about unknown words.
.pp
However, it is not clear how to take advantage of any semantic information
which is available.  Ideally, it should be possible to place tone group
boundaries and tonic stress points, and assign intonation contours, in
a natural-sounding way.
But look again at the example text of Table 9.2 and imagine that you have
at your disposal as much semantic information as is needed.
It is
.ul
still
far from obvious how the intonation features could be assigned!
It is, in the ultimate analysis, interpretive and stylistic
.ul
choices
that add variety and interest to speech.
.pp
Take the problem of determining pitch contours, for instance.
Some of them may be explicable.
Contour 4 on
.LB
.NI
except the parts that are covered in caravans of course
.LE
is due to its being a contrastive clause, for it presents
essentially new information.
Similarly, the succession
.LB
.NI
if you go in spring
.NI
when the gorse is out
.NI
or in summer
.NI
when the heather's out
.LE
could be considered contrastive, being in the subjunctive voice, and
this could explain why contour 4's were used.
But this is all conjecture, and it is difficult to apply throughout the
passage.
Halliday (1970) explains the contexts in which each tone group is typically
used, but in an extremely high-level manner which would be impossible
to embody directly in a computer program.
.[
Halliday 1970 Course in spoken English: Intonation
.]
At the other end of the spectrum, computer systems for written
discourse production do not seem to provide the subtle information needed
to make intonation decisions (see, for example, Davey, 1978, for a fairly
complete description of such a system).
.[
Davey 1978
.]
.pp
One project which uses such a method for generating speech has been
described (Young and Fallside, 1980).
.[
Young Fallside 1980
.]
Although some attention is paid to rhythm, the intonation contours
which are generated are disappointingly repetitive and lacking in
richness.
In fact, very little semantic information is used to assign contours; really
just that inferred by the crude punctuation-driven method described
earlier.
.pp
The higher-level semantic problems associated with speech output were
studied some years go under the
title "synthetic elocution" (Vanderslice, 1968).
.[
Vanderslice 1968
.]
A set of rules was generated and tested by hand on a sample passage,
the first part of which is shown in Table 9.4.
However, no attempt was made to formalize the rules in a computer program,
and indeed it was recognized that a number of important questions,
such as the form of the semantic information assumed at the input,
had been left unanswered.
.RF
.nr x0 \w'\0\0  psychologist   '+\w'emphasis assigned because of antithesis with  '
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \w'\0\0  psychologist   'u
\l'\n(x0u\(ul'
.sp
Human experience and human behaviour are accessible to
observation by everyone.  The psychologist tries to bring
them under systematic study.  What he perceives, however,
anyone can perceive; for his task he requires no microscope
or electronic gear.
.sp2
\0\0  word	comments
\l'\n(x0u\(ul'
.sp
\01  Human	special treatment because paragraph-initial
\04  human	accent deleted because it echoes word 1
13  psychologist	emphasis assigned because of antithesis with
	"everyone"
17  them	anaphoric to "Human experience and human
	behaviour"
19  systematic	emphasis assigned because of contrast with
	"observation"
20  study	emphasis? \(em text is ambiguous whether
	"observation" is a kind of study that is
	nonsystematic, or an activity contrasting
	with the entire concept of "systematic study"
21  What	increase in pitch for "What he perceives"
	because it is not the subject
22  he	accented although anaphoric to word 13
	because of antithesis with word 25
24  however	decrease in pitch because it is parenthetical
25  anyone	emphasized by antithesis with word 22
27  perceive	unaccented because it echoes word 23,
	"perceives"
\0\0  ;	semicolon assigns falling intonation
30  task	unaccented because it is anaphoric with
	"tries to bring them under systematic study"
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.4  Sample passage and comments pertinent to synthetic elocution"
.pp
The comments in the table, which are selected and slightly edited versions
of those appearing in the original work (Vanderslice, 1968), are intended
as examples of the nature and subtlety of the prosodic influences which
were examined.
.[
Vanderslice 1968
.]
The concepts of "accent" and "emphasis" are used; these relate to stress
but are not easy to define precisely in our tone-group terminology.
Fortunately we do not need an exact characterization of them for the present
purpose.
Roughly speaking, "accent" encompasses both foot-initial stress and
tonic stress, whereas "emphasis" is something more than this,
typically being realized by the fall-rise or rise-fall contours of
Halliday's tone groups 4 and 5 (Figure 8.5).
.pp
Particular attention is paid to anaphora and antithesis (amongst other things).
The first term means the repetition of a word or phrase in the text,
and is often applied to pronoun references.
In the example, the word "human" is repeated in the first few words;
"them" in the second sentence refers to "human experience and human
behaviour"; "he" in the third sentence is the previously-mentioned
psychologist; and "task" is anaphoric with "tries to bring them under
systematic study".
Other things being equal, anaphoric references are unaccented.
In our terms this means that they certainly do not receive tonic stress
and may not even receive foot stress.
.pp
Antithesis is defined as the contrast of ideas expressed by parallelism of
strongly contrasting words or phrases; and the second element taking part
in it is generally emphasized.
"Psychologist" in the passage is an antithesis of "everyone";
"systematic" and possibly "study" of "observation".
Thus
.LB
.NI
/^ the psy/*chologist
.LE
would probably receive intonation contour 4, since it is also introducing
a new actor; while
.LB
.NI
/tries to /bring them /under /system/*matic /study
.LE
could receive contour 5.
"He" and "everyone" are antithetical; not only does the latter receive
emphasis but the former has its accent restored \(em for otherwise
it would have been removed because of anaphora with "psychologist".
Hence it will certainly begin a foot, possibly a tonic foot.
.pp
A factor that does not affect the sample passage is the accentuation
of unusual syllables of similar words to bring out a contrast.
For example,
.LB
.NI
he went
.ul
out\c
side, not
.ul
in\c
side.
.LE
Although this may seem to be just another facet of antithesis,
Vanderslice points out that it is phonetic rather than structural
similarity that is contrasted:
.LB
.NI
I said
.ul
de\c
plane, not
.ul
com\c
plain.
.LE
This introduces an interesting interplay between the phonetic and
prosodic levels.
.pp
Anaphora and antithesis provide an ideal domain for speech synthesis from
concept.
Determining them from plain text is a very difficult problem,
requiring a great deal of real-world knowledge.
The first has received some attention in the field of natural language
understanding.
Finding pronoun referents is an important problem for language translation,
for their gender is frequently distinguished in, say, French where it is not
in English.
Examples such as
.LB
.NI
I bought the wine, sat on a table, and drank it
.NI
I bought the wine, sat on a table, and broke it
.LE
have been closely studied (Wilks, 1975); for if they were to be translated
into French the pronoun "it" would be rendered differently in each case
(\c
.ul
le
vin,
.ul
la
table).
.[
Wilks 1975 An intelligent analyzer and understander of English
.]
.pp
In spoken language, emphasis is used to indicate the referent of a pronoun
when it would not otherwise be obvious.
Vanderslice gives the example
.LB
.NI
Bill saw John across the room and he ran over to him
.NI
Bill saw John across the room and
.ul
he
ran over to
.ul
him,
.LE
where the emphasis reverses the pronoun referents
(so that John did the running).
He suggests accenting a personal pronoun whenever the true
antecedent is not the same as the "unmarked" or default one.
Unfortunately he does not elaborate on what is meant by "unmarked".
Does it mean that the referent cannot be predicted from
knowledge of the words alone \(em as in the second example above?
If so, this is a clear candidate for speech synthesis from concept,
for the distinction cannot be made from text! 
.sh "9.2  Pronunciation"
.pp
English pronunciation is notoriously irregular.
A poem by Charivarius, the pseudonym of a Dutch high school teacher
and linguist G.N.Trenite (1870\-1946), surveys the problems in an amusing
way and is worth quoting in full.
.br
.ev2
.in 0
.LB "nnnnnnnnnnnnnnnn"
.ul
              The Chaos
.sp2
.ne4
Dearest creature in Creation
Studying English pronunciation,
.in +5n
I will teach you in my verse
Sounds like corpse, corps, horse and worse.
.ne4
.in -5n
It will keep you, Susy, busy,
Make your head with heat grow dizzy;
.in +5n
Tear in eye your dress you'll tear.
So shall I!  Oh, hear my prayer:
.ne4
.in -5n
Pray, console your loving poet,
Make my coat look new, dear, sew it.
.in +5n
Just compare heart, beard and heard,
Dies and diet, lord and word.
.ne4
.in -5n
Sword and sward, retain and Britain,
(Mind the latter, how it's written).
.in +5n
Made has not the sound of bade,
Say \(em said, pay \(em paid, laid, but plaid.
.ne4
.in -5n
Now I surely will not plague you
With such words as vague and ague,
.in +5n
But be careful how you speak:
Say break, steak, but bleak and streak,
.ne4
.in -5n
Previous, precious; fuchsia, via;
Pipe, shipe, recipe and choir;
.in +5n
Cloven, oven; how and low;
Script, receipt; shoe, poem, toe.
.ne4
.in -5n
Hear me say, devoid of trickery;
Daughter, laughter and Terpsichore;
.in +5n
Typhoid, measles, topsails, aisles;
Exiles, similes, reviles;
.ne4
.in -5n
Wholly, holly; signal, signing;
Thames, examining, combining;
.in +5n
Scholar, vicar and cigar,
Solar, mica, war and far.
.ne4
.in -5n
Desire \(em desirable, admirable \(em admire;
Lumber, plumber; bier but brier;
.in +5n
Chatham, brougham; renown but known,
Knowledge; done, but gone and tone,
.ne4
.in -5n
One, anemone; Balmoral,
Kitchen, lichen; laundry, laurel;
.in +5n
Gertrude, German; wind and mind;
Scene, Melpemone, mankind;
.ne4
.in -5n
Tortoise, turquoise, chamois-leather,
Reading, Reading; heathen, heather.
.in +5n
This phonetic labyrinth
Gives:  moss, gross; brook, brooch; ninth, plinth.
.ne4
.in -5n
Billet does not end like ballet;
Bouquet, wallet, mallet, chalet;
.in +5n
Blood and flood are not like food,
Nor is mould like should and would.
.ne4
.in -5n
Banquet is not nearly parquet,
Which is said to rime with darky
.in +5n
Viscous, viscount; load and broad;
Toward, to forward, to reward.
.ne4
.in -5n
And your pronunciation's O.K.
When you say correctly:  croquet;
.in +5n
Rounded, wounded; grieve and sieve;
Friend and fiend, alive and live
.ne4
.in -5n
Liberty, library; heave and heaven;
Rachel, ache, moustache; eleven.
We say hallowed, but allowed;
People, leopard; towed, but vowed.
.in +5n
Mark the difference moreover
Between mover, plover, Dover;
.ne4
.in -5n
Leeches, breeches; wise, precise;
Chalice, but police and lice.
.in +5n
Camel, constable, unstable,
Principle, discipline, label;
.ne4
.in -5n
Petal, penal and canal;
Wait, surmise, plait, promise; pal.
.in +5n
Suit, suite, ruin; circuit, conduit,
Rime with:  "shirk it" and "beyond it";
.ne4
.in -5n
But it is not hard to tell
Why it's pall, mall, but Pall Mall.
.in +5n
Muscle, muscular; goal and iron;
Timber, climber; bullion, lion;
.ne4
.in -5n
Worm and storm; chaise, chaos, chair;
Senator, spectator, mayor.
.in +5n
Ivy, privy; famous, clamour
and enamour rime with "hammer".
.ne4
.in -5n
Pussy, hussy and possess,
Desert, but dessert, address.
.in +5n
Golf, wolf; countenants; lieutenants
Hoist, in lieu of flags, left pennants.
.ne4
.in -5n
River, rival; tomb, bomb, comb;
Doll and roll, and some and home.
.in +5n
Stranger does not rime with anger,
Neither does devour with clangour.
.ne4
.in -5n
Soul, but foul; and gaunt, but aunt;
Font, front, won't; want, grand and grant;
.in +5n
Shoes, goes, does.  Now first say:  finger,
And then; singer, ginger, linger.
.ne4
.in -5n
Real, zeal; mauve, gauze and gauge;
Marriage, foliage, mirage, age.
.in +5n
Query does not rime with very,
Nor does fury sound like bury.
.ne4
.in -5n
Dost, lost, post; and doth, cloth, loth;
Job, Job; blossom, bosom, oath.
.in +5n
Though the difference seems little
We say actual, but victual;
.ne4
.in -5n
Seat, sweat; chaste, caste; Leigh, eight, height;
Put, nut; granite but unite.
.in +5n
Reefer does not rime with deafer,
Feoffer does, and zephyr, heifer.
.ne4
.in -5n
Dull, bull; Geoffrey, George; ate, late;
Hint, pint; senate, but sedate.
.in +5n
Scenic, Arabic, Pacific;
Science, conscience, scientific.
.ne4
.in -5n
Tour, but our, and succour, four;
Gas, alas and Arkansas!
.in +5n
Sea, idea, guinea, area,
Psalm, Maria, but malaria.
.ne4
.in -5n
Youth, south, southern; cleanse and clean;
Doctrine, turpentine, marine.
.in +5n
Compare alien with Italian.
Dandelion with battalion,
.ne4
.in -5n
Sally with ally, Yea, Ye,
Eye, I, ay, aye, whey, key, quay.
Say aver, but ever, fever,
Neither, leisure, skein, receiver.
.in +5n
Never guess \(em it is not safe;
We say calves, valves, half, but Ralf.
.ne4
.in -5n
Heron, granary, canary;
Crevice and device and eyrie;
.in +5n
Face, preface, but efface,
Phlegm, phlegmatic; ass, glass, bass;
.ne4
.in -5n
Large, but target, gin, give, verging;
Ought, out, joust and scour, but scourging;
.in +5n
Ear, but earn; and wear and tear
Do not rime with "here", but "ere".
.ne4
.in -5n
Seven is right, but so is even;
Hyphen, roughen, nephew, Stephen;
.in +5n
Monkey, donkey; clerk and jerk;
Asp, grasp, wasp; and cork and work.
.ne4
.in -5n
Pronunciation \(em think of psyche -
Is a paling, stout and spikey;
.in +5n
Won't it make you lose your wits,
Writing groats and saying "groats"?
.ne4
.in -5n
It's a dark abyss or tunnel,
Strewn with stones, like rowlock, gunwale,
.in +5n
Islington and Isle of Wight,
Housewife, verdict and indict.
.ne4
.in -5n
Don't you think so, reader, rather
Saying lather, bather, father?
.in +5n
Finally:  which rimes with "enough",
Though, through, plough, cough, hough or tough?
.ne4
.in -5n
Hiccough has the sound of "cup",
My advice is ... give it up!
.LE "nnnnnnnnnnnnnnnn"
.br
.ev
.rh "Letter-to-sound rules."
Despite such irregularities, it is surprising how much can be done
with simple letter-to-sound rules.
These specify phonetic equivalents of word fragments and single letters.
The longest stored fragment which matches the current word is translated,
and then the same strategy is adopted on the remainder of the word.
Table 9.5 shows some English fragments and their pronunciations.
.RF
.nr x0 1.5i+\w'pronunciation  '
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 1.5i
fragment	pronunciation
\l'\n(x0u\(ul'
.sp
-p-	\fIp\fR
-ph-	\fIf\fR
-phe|	\fIf ee\fR
-phe|s	\fIf ee z\fR
-phot-	\fIf uh u t\fR
-place|-	\fIp l e i s\fR
-plac|i-	\fIp l e i s i\fR
-ple|ment-	\fIp l i m e n t\fR
-plie|-	\fIp l aa i y\fR
-post	\fIp uh u s t\fR
-pp-	\fIp\fR
-pp|ly-	\fIp l ee\fR
-preciou-	\fIp r e s uh\fR
-proce|d-	\fIp r uh u s ee d\fR
-prope|r-	\fIp r o p uh r\fR
-prov-	\fIp r uu v\fR
-purpose-	\fIp er p uh s\fR
-push-	\fIp u sh\fR
-put	\fIp u t\fR
-puts	\fIp u t s\fR
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.5  Word fragments and their pronunciations"
.pp
It is sometimes important to specify that a rule applies only when
the fragment is matched at the beginning or end of a word.
In the Table "-" means that other fragments can precede or follow this
one.
The "|" sign is used to separate suffixes from a word stem,
as will be explained
shortly.
.pp
An advantage of the longest-string search strategy is that it is easy
to account for exceptions simply by incorporating them into the fragment
table.
If they occur in the input, the complete word will automatically be
matched first, before any fragment of it is translated.
The exception list of complete words can be surprisingly small for
quite respectable performance.
Table 9.6 shows the entire dictionary for an excellent early pronunciation
system written at Bell Laboratories (McIlroy, 1974).
.[
McIlroy 1974
.]
Some of the words are notorious exceptions in English, while others are
included simply because the rules would run amok on them.
Notice that the exceptions are all quite short, with only a few of them
having more than two syllables.
.RF
.nr x1 0.9i+0.9i+0.9i+0.9i+0.9i+0.9i
.nr x1 (\n(.l-\n(x1)/2
.in \n(x1u
.ta 0.9i +0.9i +0.9i +0.9i +0.9i
a	doesn't	guest	meant	reader	those
alkali	doing	has	moreover	refer	to
always	done	have	mr	says	today
any	dr	having	mrs	seven	tomorrow
april	early	heard	nature	shall	tuesday
are	earn	his	none	someone	two
as	eleven	imply	nothing	something	upon
because	enable	into	nowhere	than	very
been	engine	is	nuisance	that	water
being	etc	island	of	the	wednesday
below	evening	john	on	their	were
body	every	july	once	them	who
both	everyone	live	one	there	whom
busy	february	lived	only	thereby	whose
copy	finally	living	over	these	woman
do	friday	many	people	they	women
does	gas	maybe	read	this	yes
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.6  Exception table for a simple pronunciation program"
.pp
Special action has to be taken with final "e"'s.
These lengthen and alter the quality
of the preceding vowel, so that "bit" becomes "bite" and so on.
Unfortunately, if the word has a suffix the "e" must be detected even though
it is no longer final, as in "lonely", and it is even dropped sometimes
("biting") \(em otherwise these would be pronounced "lonelly", "bitting".
To make matters worse the suffix may be another word:  we do not
want "kiteflying" to have an extra syllable which rhymes with "deaf"!
Although simple procedures can be developed to take care of common
word endings like "-ly", "-ness", "-d", it is difficult to decompose
compound words like "wisecrack" and "bumblebee" reliably \(em but this must
be done if they are not to be articulated with three syllables instead of two.
Of course, there are exceptions to the final "e" rule.
Many common words ("some", "done", "[live]\dV\u") disobey the rule by not
lengthening the main vowel, while in other, rarer, ones ("anemone",
"catastrophe", "epitome") the final "e" is actually pronounced.
There are also some complete anomalies ("fete").
.pp
McIlroy's (1974) system is a superb example of a robust program which takes
a pragmatic approach to these problems, accepting that they will never be
fully solved, and which is careful to degrade
gracefully when stumped.
.[
McIlroy 1974
.]
The pronunciation of each word is found by a succession of increasingly
desperate trials:
.LB
.NP
replace upper- by lower-case letters, strip punctuation, and try again;
.NP
remove final "-s", replace final "ie" by "y", and try again;
.NP
reject a word without a vowel;
.NP
repeatedly mark any suffixes with "|";
.NP
mark with "|" probable morph divisions in compound words;
.NP
mark potential long vowels indicated by "e|",
and long vowels elsewhere in the word;
.NP
mark voiced medial "s" as in "busy", "usual";
replace final "-s" if stripped;
.NP
scanning the word from left to right, apply letter-to-sound rules
to word fragments;
.NP
when all else fails spell the word, punctuation and all
(burp on letters for which no spelling rule exists).
.LE
.RF
.nr x0 \w'| ment\0\0\0'+\w'replace final ie by y\0\0\0'+\w'except when no vowel would remain in  '
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \w'| ment\0\0\0'u +\w'replace final ie by y\0\0\0'u
suffix	action	notes and exceptions
\l'\n(x0u\(ul'
.sp
s	strip off final s	except in context us
\&'	strip off final '
ie	replace final ie by y
e	replace final e by E	when it is the only vowel in a word
	(long "e")

| able	place suffix mark as	except when no vowel would remain in
| ably	shown	the rest of the word
e | d
e | n
e | r
e | ry
e | st
e | y
| ful
| ing
| less
| ly
| ment
| ness
| or

| ic	place suffix mark as
| ical	shown and terminate
e |	final e processing
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 9.7  Rules for detecting suffixes for final 'e' processing"
.pp
Table 9.7 shows the suffixes which the program recognizes, with some comments
on their processing.
Multiple suffixes are detected and marked in words like
"force|ful|ly" and "spite|ful|ness".
This allows silent "e"'s to be spotted even when they occur far back in a
word.
Notice that the suffix marks are available to the word-fragment
rules of Table 9.5, and are frequently used by them.
.pp
The program has some
.ul
ad hoc
rules for dealing with compound words like "race|track", "house|boat";
these are applied as well as normal suffix splitting so that multiple
decompositions like "pace|make|r" can be accomplished.
The rules look for short letter sequences which do not
usually appear in monomorphemic words.
It is impossible, however, to detect every morph boundary
by such rules, and the program inevitably makes mistakes.
Examples of boundaries which go undetected are
"edge|ways", "fence|post", "horse|back", "large|mouth", "where|in";
while boundaries are incorrectly inserted into "comple|mentary",
"male|volent", "prole|tariat", "Pame|la".
.pp
We now seem to have presented two opposing points of view on the pronunciation
problem.
Charivarius, the Dutch poet, shows that an enormous number of
exceptional words exist; whereas McIlroy's program makes do with a tiny
exception dictionary.
These views can be reconciled by noting that most of Charivarius' words
are relatively uncommon.
McIlroy tested his program against the 2000 most frequent words in a large
corpus (Kucera and Francis, 1967),
and found that 97% were pronounced correctly if word frequencies were
taken into account.
.[
Kucera Francis 1967
.]
(The notion of "correctness" is of course a rather subjective one.)  However,
he estimated that on the remaining words the success rate was only 88%.
.pp
The system is particularly impressive in that it is prepared to say
anything:  if used, for example, on source programs in a high-level
computer language it will say the keywords and pronouncable
identifiers, spell the other identifiers, and even give the names of special
symbols (like +, <, =) correctly!
.rh "Morphological analysis."
The use of letter-to-sound rules provides a cheap and fast technique
for pronunciation \(em the fragment table and exception dictionary for the
program described above occupy only 11 Kbyte of storage, and can easily
be kept in solid-state read-only memory.
It produces reasonable results if careful attention is paid to rules
for suffix-splitting.
However, it is inherently limited because it is not possible in general
to detect compound words by simple rules which operate on the lexical
structure of the word.
.pp
Compounds can only be found reliably by using a morph dictionary.
This gives the added advantage that syntactic information
can be stored with the morphs to assist with rhythm assignment according
to the Chomsky-Halle theory.
However, it was noted earlier that morphs, unlike the grammatically-determined
morphemes, are not very well defined from a linguistic point of view.
Some morphemic decompositions are obviously not morphic because the
constituents do not in any way resemble the final word;
while others, where the word is simply a concatenation
of its components, are clearly morphic.
Between these extremes lies a hazy region where what one considers
to be a morph depends upon how complex one is prepared to make the
concatenation rules.
The following description draws on techniques used in a project at MIT
in which a morph-based pronunciation system has been implemented
(Lee, 1969; Allen, 1976).
.[
Lee 1969
.]
.[
Allen 1976 Synthesis of speech from unrestricted text
.]
.pp
Estimates of the number of morphs in English vary from 10,000 to 30,000.
Although these seem to be very large numbers, they are considerably less
than the number of words in the language.
For example, Webster's
.ul
New Collegiate Dictionary
(7'th edition) contains about 100,000 entries.
If all forms of the words were included, this number would probably
double.
.pp
There are several classes of morphs, with restrictions on the combinations
that occur.
A general word has prefixes, a root, and suffixes, as shown in Figure 9.3;
only the root is mandatory.
.FC "Figure 9.3"
Suffixes usually perform a grammatical role, affecting the
conjugation of a verb or declension of a noun; or transforming one
part of speech into another
("-al" can make a noun into an adjective, while "-ness" performs the reverse
transformation.)  Other
suffixes, such as "-dom" or "-ship", only apply to certain parts of
speech (nouns, in this case), but do not change the grammatical
role of the word.  Such suffixes, and all prefixes, alter the meaning
of a word.
.pp
Some root morphs cannot combine with other morphs but always stand
alone \(em for instance, "this".
Others, called free morphs, can either occur on their own or combine
with further morphs to form a word.
Thus the root "house" can be joined on either side by another root,
such as "boat",
or by a suffix such as "ing".
A third type of root morph is one which
.ul
must
combine with another morph, like "crimin-", "-ceive".
.pp
Even with a morph dictionary, decomposing a word into a sequence
of morphs is not a trivial operation.
The process of lexical concatenation often results in a
minor change in the constituents.
How big this change is allowed to be governs the morph system being used.
For example, Allen (1976) gives three concatenation rules:  a
final "e" can be omitted, as in
.ta 1.1i
.LB
.NI
give + ing	\(em>  giving;
.LE
the last consonant of the root can be doubled, as in
.LB
.NI
bid + ing	\(em>  bidding;
.LE
or a final "y" can change to an "i", as in
.LB
.NI
handy + cap	\(em>  handicap.
.[
Allen 1976 Synthesis of speech from unrestricted text
.]
.LE
If these are the only rules permitted, the morph dictionary will
have to include multiple versions of some suffixes.
For example, the plural morpheme [-s] needs to be represented both by
"-s" and "-es", to account for
.LB
.NI
pea + s	\(em>  peas
.LE
and
.LB
.NI
baby + es	\(em>  babies  (using the "y" \(em> "i" rule).
.LE
This would not be necessary if a  "y" \(em> "ie"  rule were included too.
Similarly, the morpheme [-ic] will include morphs
"-ic" and "-c"; the latter to cope with
.LB
.NI
specify + c	\(em>  specific    (using the "y" \(em> "i" rule).
.LE
Furthermore, non-morphemic roots such as "galact" need to be included because
the concatenation rules do not capture the transformation
.LB
.NI
galaxy + ic	\(em>  galactic.
.LE
There is clearly a trade-off between the size of the morph dictionary
and the complexity of the concatenation rules.
.pp
Since a text-to-speech system is presented with already-concatenated
morphs, it must be prepared to reverse the effects of the concatenation
rules to deduce the constituents of a word.
When two morphs combine with any of the three rules given above,
the changes in spelling occur only in the lefthand one.
Therefore the word is best scanned in a right-to-left direction to
split off the morphs starting with suffixes, as McIlroy's program does.
If the procedure fails at any point, one of the three rules is
hypothesized, its effect is undone, and splitting continues.
For example, consider the word
.LB
.NI
grasshoppers	<\(em  grass + hop + er + s
.LE
(Lee, 1969).
.[
Lee 1969
.]
The "-s" is detected first, then "-er"; these are both stored in
the dictionary as suffixes.
The remainder, "grasshopp", cannot be decomposed and does not appear
in the dictionary.
So each of the rules above is hypothesized in turn, and the
result investigated.  (The "y" \(em> "i" rule is obviously not
applicable.)  When
the final-consonant-doubling rule is considered, the sequence
"grasshop" is investigated.
"Shop" could be split off this, but then the unknown morph "gras"
would result.
The alternative, to remove "hop", leaves a remainder "grass" which
.ul
is
a free morph, as desired.
Thus a unique and correct decomposition is obtained.
Notice that the procedure would fail if, for example, "grass" had
been inadvertently omitted from the dictionary.
.pp
Sometimes, several seemingly valid decompositions present themselves
(Allen, 1976).
.[
Allen 1976 Synthesis of speech from unrestricted text
.]
For example:
.LB
.NI
scarcity	<\(em  scar + city
.NI
	<\(em  scarce + ity  (using final-"e" deletion)
.NI
	<\(em  scar + cite + y  (using final-"e" deletion)
.NI
resting	<\(em  rest + ing
.NI
	<\(em  re + sting
.NI
biding	<\(em  bide + ing  (using final-"e" deletion)
.NI
	<\(em  bid + ing
.NI
unionized	<\(em  un + ion + ize + d
.NI
	<\(em  union + ize + d
.NI
winding	<\(em  [wind]\dN\u + ing
.NI
	<\(em  [wind]\dV\u + ing.
.LE
The last distinction is important because the pronunciation of "wind"
depends on whether it is a noun or a verb.
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.pp
Several sources of information can be used to resolve these ambiguities.
The word structure of Figure 9.3, together with the division of root
morphs into bound and free ones, may eliminate some possibilities.
Certain letter sequences (such as "rp") do not appear at the beginning
of a word or morph, and others never occur at the end.
Knowledge of these sequences can reject some unacceptable
decompositions \(em or perhaps more importantly, can enable intelligent guesses
to be made in cases where a constituent morph has been omitted from the
dictionary.
The grammatical function of suffixes allows suffix sequences to be
checked for compatibility.
The syntax of the sentence, together with suffix knowledge, can
rule out other combinations.
Semantic knowledge will occasionally be necessary (as in the "unionized"
and "winding" examples above \(em compare a "winding road" with a "winding
blow").
Finally, Allen (1976) suggests that a preference structure on composition
rules can be used to resolve ambiguity.
.[
Allen 1976 Synthesis of speech from unrestricted text
.]
.pp
Once the morphological structure has been determined,
the rest of the pronunciation
process is relatively easy.
A phonetic transcription of each morph may be stored in the morph dictionary,
or else letter-to-sound rules can be used on individual morphs.
These are likely to be quite successful because final-"e" processing can be
now be done with confidence:  there are no hidden final "e"'s in the middle
of morphs.
In either case the resulting phonetic transcriptions of the individual morphs
must be concatenated to give the transcription of the complete word.
Although some contextual modification has to be accounted for,
it is relatively straightforward and easy to predict.
For example, the plural morphs "-s" and "-es" can be realized phonetically
by
.ul
uh\ z,
.ul
s,
or
.ul
z
depending on context.
Similarly the past-tense suffix "-ed" may be rendered as
.ul
uh\ d,
.ul
t,
or
.ul
d.
The suffixes "-ion" and "-ure" sometimes cause modification of the previous
morph:  for example
.LB
.NI
act + ion  \(em>  \c
.ul
a k t\c
  + ion  \(em>  \c
.ul
a k sh uh n.
.LE
.pp
The morph dictionary does not remove the need for a lexicon of exceptional
words.
The irregular final-"e" words mentioned earlier ("done", "anemone", "fete")
need to be treated on an individual basis,
as do words such as "quadruped" which have misleading endings
(it should not be decomposed as "quadrup|ed").
.rh "Pronunciation of languages other than English."
Text-to-speech systems for other languages have been reported in
the literature.
(For example, French, Esperanto,
Italian, Russian, Spanish, and German are covered
by Lesmo
.ul
et al,
1978; O'Shaughnessy
.ul
et al,
1981; Sherwood, 1978;
Mangold and Stall, 1978).
.[
Lesmo 1978
.]
.[
O'Shaughnessy Lennig Mermelstein Divay 1981
.]
.[
Sherwood 1978
.]
.[
Mangold Stall 1978
.]
Generally speaking, these present fewer difficulties than does English.
Esperanto is particularly easy because each letter in its orthography
has only one sound, making the pronunciation problem trivial.
Moreover, stress in polysyllabic words always occurs on the penultimate
syllable.
.pp
It is tempting and often sensible when designing a synthesis system for
English to use an utterance representation somewhere between phonetics and
ordinary spelling.
This may happen in practice even if it is not intended:  a user, finding
that a given word is pronounced incorrectly, will alter the spelling to
make it work.
The Word English Spelling alphabet (Dewey, 1971), amongst others (Haas, 1966),
is a simplified and apparently natural scheme which was developed by the
spelling reform movement.
.[
Dewey 1971
.]
.[
Haas 1966
.]
It maps very simply on to a phonetic representation, just like Esperanto.
However, it can provide little help with the crucial problem of stress
assignment, except perhaps by explicitly indicating reduced vowels.
.sh "9.3  Discussion"
.pp
This chapter has really only touched the tip of a linguistic iceberg.
I have given some examples of representations, rules, algorithms,
and exceptions, to make the concepts more tangible; but a whole mass of
detail has been swept under the carpet.
.pp
There are two important messages that are worth reiterating once more.
The first is that the representation of the input \(em that is,
whether it be a "concept"
in some semantic domain, a syntactic description of an utterance, a
decomposition into morphs, plain text or some contrived re-spelling of it \(em
is crucial to the quality of the output.
Almost any extra information about the utterance can be taken into account
and used to improve the speech.
It is difficult to derive such information if it is not provided explicitly,
for the process of climbing the tree from text to semantic representation is
at least as hard as descending it to a phonetic transcription.
.pp
Secondly, simple algorithms perform remarkably well \(em witness the
punctuation-driven intonation assignment scheme, and word fragment rules
for pronunciation.
However, the combined degradation contributed by several imperfect
processes is likely to impair speech quality very seriously.
And great complexity is introduced when these simple algorithms are
discarded in favour of more sophisticated ones.
There is, for example, a world of difference between a pronunciation
program that copes with 97% of common words and one that deals correctly
with 99% of a random sample from a dictionary.
.pp
Some of the options that face the system designer are recapitulated in
Figure 9.4.
.FC "Figure 9.4"
Starting from text, one can take the simple approach of lexically-based
suffix-splitting, letter-to-sound rules, and prosodics derived
from punctuation, to generate a phonetic transcription.
This will provide a cheap system which is relatively easy to implement
but whose speech quality will probably not be acceptable to any but the
most dedicated listener
(such as a blind person with no other access to reading material).
.pp
The biggest improvement in speech quality from such a system would
almost certainly come from more intelligent prosodic
control \(em particularly of intonation.
This, unfortunately, is also by far the most difficult to make unless
intonation contours, tonic stresses, and tone-group boundaries are hand-coded
into the input.
To generate the appropriate information from text one has to climb to the
upper levels in Figure 9.4 \(em and even when these are reached, the problems
are by no means over.
Still, let us climb the tree.
.pp
For syntax analysis, part-of-speech information is needed; and for this
the grammatical roles of individual words in the text must be ascertained.
A morph dictionary is the most reliable way to do this.
A linguist may prefer to go from morphs to syntax by way of morphemes;
but this is not necessary for the present purpose.
Just the information that
the morph "went" is a verb can be stored in the dictionary, instead
of its decomposition  [went]\ =\ [go]\ +\ [ed].
.pp
Now that we have the morphological structure of the text, stress assignment rules
can be applied to produce more accurate speech rhythms.
The morph decomposition will also allow improvements to be made to the
pronunciation, particularly in the case of silent "e"'s in compound words.
But the ability to assign intonation has hardly been improved at all.
.pp
Let us proceed upwards.
Now the problems become really difficult.
A semantic representation of the text is needed; but what exactly does this
mean?
We certainly must have
.ul
morphemic
knowledge, for now the fact that "went" is a derivative of "go"
(rather than any other verb) becomes crucial.
Very well, let us augment the morph dictionary with morphemic information.
But this does not attack the problem of semantic representation.
We may wish to resolve pronoun references to help assign stress.
Parts of the problem are solved in principle
and reported in the artificial intelligence
literature, but if such an ability is incorporated into the speech
synthesis system it will become enormously complicated.
In addition, we have seen that knowledge of antitheses in the text will greatly
assist intonation assignment, but procedures for extracting this
information constitute a research topic in their own right.
.pp
Now step back and take a top-down approach.
What could we do with this semantic understanding and knowledge of the structure
of the discourse if we had it?
Suppose the input were a "concept" in some as yet undetermined representation.
What are the
.ul
acoustic
manifestations of such high-level features as anaphoric references or
antithetical comparisons,
of parenthetical or satirical remarks,
of emotions:  warmth, sarcasm, sadness and despair?
Can we program the art of elocution?
These are good questions. 
.sh "9.4  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "9.5  Further reading"
.pp
Books on pronunciation give surprisingly little help in designing
a text-to-speech procedure.
The best aid is a good on-line dictionary and flexible software to
search it and record rules, examples, and exceptions.
Here are some papers that describe existing systems.
.LB "nn"
.\"Ainsworth-1974-1
.]-
.ds [A Ainsworth, W.A.
.ds [D 1974
.ds [T A system for converting text into speech
.ds [J IEEE Trans Audio and Electroacoustics
.ds [V AU-21
.ds [P 288-290
.nr [P 1
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.\"Colby-1978-2
.]-
.ds [A Colby, K.M.
.as [A ", Christinaz, D.
.as [A ", and Graham, S.
.ds [D 1978
.ds [K *
.ds [T A computer-driven, personal, portable, and intelligent speech prosthesis
.ds [J Computers and Biomedical Research
.ds [V 11
.ds [P 337-343
.nr [P 1
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.\"Elovitz-1976-3
.]-
.ds [A Elovitz, H.S.
.as [A ", Johnson, R.W.
.as [A ", McHugh, A.
.as [A ", and Shore, J.E.
.ds [D 1976
.ds [K *
.ds [T Letter-to-sound rules for automatic translation of English text to phonetics
.ds [J IEEE Trans Acoustics, Speech and Signal Processing
.ds [V ASSP-24
.ds [N 6
.ds [P 446-459
.nr [P 1
.ds [O December
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.\"Kooi-1978-4
.]-
.ds [A Kooi, R.
.as [A " and Lim, W.C.
.ds [D 1978
.ds [T An on-line minicomputer-based system for reading printed text aloud
.ds [J IEEE Trans Systems, Man and Cybernetics
.ds [V SMC-8
.ds [P 57-62
.nr [P 1
.ds [O January
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.\"Umeda-1975-5
.]-
.ds [A Umeda, N.
.as [A " and Teranishi, R.
.ds [D 1975
.ds [K *
.ds [T The parsing program for automatic text-to-speech synthesis developed at the Electrotechnical Laboratory in 1968
.ds [J IEEE Trans Acoustics, Speech and Signal Processing
.ds [V ASSP-23
.ds [N 2
.ds [P 183-188
.nr [P 1
.ds [O April
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.\"Umeda-1976-6
.]-
.ds [A Umeda, N.
.ds [D 1976
.ds [K *
.ds [T Linguistic rules for text-to-speech synthesis
.ds [J Proc IEEE
.ds [V 64
.ds [N 4
.ds [P 443-451
.nr [P 1
.ds [O April
.nr [T 0
.nr [A 1
.nr [O 0
.][ 1 journal-article
.in+2n
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "10  DESIGNING THE MAN-COMPUTER DIALOGUE"
.ds RT "The man-computer dialogue
.ds CX "Principles of computer speech
.pp
Interactive computers are being used more and more by non-specialist people
without much previous computer experience.
As processing costs continue to decline, the overall expense of providing
highly interactive systems
becomes increasingly dominated by terminal and communications equipment.
Taken together, these two factors highlight the need for easy-to-use,
low-bandwidth interactive terminals that make maximum use of the existing
telephone network for remote access.
.pp
Speech output can provide versatile feedback from a computer at very low
cost in distribution and terminal equipment.  It is attractive from several
points of view.
Terminals \(em telephones \(em are invariably in place already.
People without experience of computers are accustomed to their use,
and are not intimidated by them.
The telephone network is cheap to use and extends all over the world.
The touch-tone keypad (or a portable tone generator)
provides a complementary data input device which will do for many
purposes until the technology of speech recognition becomes better developed
and more widespread.
Indeed, many applications \(em especially information retrieval ones \(em need
a much smaller bandwidth from user to computer than in the reverse direction,
and voice output combined with restricted keypad entry provides a good match
to their requirements.
.pp
There are, however, severe problems in implementing natural and useful
interactive systems using speech output.
The eye can absorb information at a far greater rate than can the ear.
You can scan a page of text in a way which has no analogy in auditory terms.
Even so, it is difficult to design a dialogue which allows you to search
computer output visually at high speed.
In practice, scanning a new report is often better done at your desk
with a printed copy than at a computer terminal with a viewing program
(although this is likely to change in the near future).
.pp
With speech, the problem of organizing output becomes even harder.
Most of the information we learn using our ears is presented in a
conversational way, either in face-to-face discussions or over the telephone.
Verbal but non-conversational presentations, as in the
university lecture theatre, are known to be a rather inefficient way
of transmitting information.
The degree of interaction is extremely high even in a telephone conversation,
and communication relies heavily on speech gestures such as hesitations,
grunts, and pauses; on prosodic features such as intonation, pitch range,
tempo, and voice quality; and on conversational gambits such as interruption
and long silence.
I emphasized in the last two chapters the rudimentary state of knowledge
about how to synthesize
prosodic features, and the situation is even worse
for the other, paralinguistic, phenomena.
.pp
There is also a very special problem with voice output, namely, the transient
nature of the speech signal.
If you miss an utterance, it's gone.
With a visual display unit, at least the last few interactions usually remain
available.
Even then, it is not uncommon to look up beyond the top of the screen and
wish that more of the history was still visible!
This obviously places a premium on a voice response system's
ability to repeat utterances.
Moreover, the dialogue designer must do his utmost to ensure that the user
is always aware of the current state of the interaction,
for there is no opportunity to refresh the memory by glancing at earlier
entries and responses.
.pp
There are two separate aspects to the man-computer interface in a voice
response system.
The first is the relationship between the system and the end user,
that is, the "consumer" of the synthesized dialogue.
The second is the relationship between the system and the applications
programmer who creates the dialogue.
These are treated separately in the next two sections.
We will have more to say about the former aspect,
for it is ultimately more important to more people.
But the applications programmer's view is important, too; for without him
no systems would exist!
The technical difficulties in creating synthetic dialogues
for the majority of voice systems probably
explain why speech output technology is still greatly under-used.
Finally we look at techniques for using small keypads such as those on
touch-tone telephones,
for they are an essential part of many voice response systems.
.sh "10.1  Programming principles for natural interaction"
.pp
Special attention must be paid to be details of the man-machine interface
in speech-output systems.
This section summarizes experience of human factors considerations
gained in developing the remote
telephone enquiry service described in Chapter 1 (Witten and Madams, 1977),
which employs an ordinary touch-tone keypad for input in conjunction with
synthetic voice response.
.[
Witten Madams 1977 Telephone Enquiry Service
.]
Most of the principles which emerged were the result of natural evolution
of the system, and were not clear at the outset.
Basically, they stem from the fact that speech is both more intrusive
and more ephemeral than writing, and so they are applicable in general to
speech output information retrieval systems with keyboard or even voice
input.
Be warned, however, that they are based upon casual observation and
speculation rather than empirical research.
There is a desperate need for proper studies of user psychology in speech
systems.
.rh "Echoing."
Most alphanumeric input peripherals echo on a character-by-character basis.
Although one can expect quite a high proportion of mistakes with
unconventional keyboards, especially when entering alphabetic data on a
basically numeric keypad, audio character echoing is distracting and annoying.
If you type "123" and the computer echoes
.LB
.NI
"one ... two ... three"
.LE
after the individual key-presses, it is liable to divert your
attention, for voice output is much more intrusive than a purely visual "echo".
.pp
Instead, an immediate response to a completed input line is preferable.
This response can take the form or a reply to a query, or, if successive
data items are being typed, confirmation of the data entered.
In the latter case, it is helpful if the information can be generated in
the same way that the user himself would be likely to verbalize it.
Thus, for example, when entering numbers:
.LB
.nr x0 \w'COMPUTER:'
.nr x1 \w'USER:'
.NI
USER:\h'\n(x0u-\n(x1u' "123#"	(# is the end-of-line character)
.NI
COMPUTER: "One hundred and twenty-three."
.LE
For a query which requires lengthy processing, the input should be
repeated in a neat, meaningful format to give the user a chance to abort
the request.
.rh "Retracting actions."
Because commands are entered directly without explicit confirmation,
it must always be easy for the user to revoke his actions.
The utility of an "undo" command is now commonly recognized for
any interactive system, and it becomes even more important in speech
systems because it is easier for the user to lose his place in the
dialogue and so make errors.
.rh "Interrupting."
A command which interrupts output and returns to a known state
should be recognized at every level of the system.
It is essential that voice output be terminated immediately,
rather than at the end of the utterance.
We do not want the user to live in fear of the system embarking on
a long, boring monologue that is impossible to interrupt!
Again, the same is true of interactive dialogues which do not use speech,
but becomes particularly important with voice response because it takes
longer to transmit information.
.rh "Forestalling prompts."
Computer-generated prompts must be explicit and frequent enough
to allow new users to understand what they are expected to do.
Experienced users will "type ahead" quite naturally,
and the system should suppress unnecessary prompts under these conditions
by inspecting the input buffer before prompting.
This allows the user to concatenate frequently-used commands into chunks whose
size is entirely at his own discretion.
.pp
With the above-mentioned telephone enquiry service, for example,
it was found that people often took advantage of the prompt-suppression
feature to enter their
user number, password, and required service number as a single keying
sequence.
As you becomes familiar with a service you quickly and easily learn to
forestall expected prompts by typing ahead.
This provides a very natural way for the system to adapt itself automatically
to the experience of the user.
New users will naturally wait to be prompted, and proceed through the dialogue
at a slower and more relaxed pace.
.pp
Suppressing unnecessary prompts is a good idea in any interactive system,
whether or not it uses the medium of speech \(em although it is hardly ever done
in conventional systems.
It is particularly important with speech, however, because an unexpected
or unwanted
prompt is quite distracting, and it is not so easy to ignore it as it is
with a visual display.
Furthermore, speech messages usually take longer to present
than displayed ones, so that the user is distracted for more time.
.rh "Information units."
Lengthy computer voice responses are inappropriate for conveying information,
because attention wanders if one is not actively involved in the conversation.
A sequential exchange of terse messages, each designed to dispense one
small unit of information, forces the user to take a meaningful part in the
dialogue.
It has other advantages, too, allowing a higher degree of input-dependent
branching, and permitting rapid recovery from errors.
.pp
The following example from the "Acidosis program", an audio response system
designed to help physicians to diagnose acidosis, is a good example
of what
.ul
not
to do.
.LB
"(Chime) A VALUE OF SIX-POINT-ZERO-ZERO HAS BEEN ENTERED FOR PH.
THIS VALUE IS IMPOSSIBLE.
TO CONTINUE THE PROGRAM, ENTER A NEW VALUE FOR PH IN THE RANGE
BETWEEN SIX-POINT-SIX AND EIGHT-POINT-ZERO
(beep dah beep-beep)"  (Smith and Goodwin, 1970).
.[
Smith Goodwin 1970
.]
.LE
The use of extraneous noises (for example, a "chime" heralds an error message,
and a "beep dah beep-beep" requests data input in the form
<digit><point><digit><digit>)
was thought necessary in the Acidosis program to keep the user awake
and help him with the format of the interaction.
Rather than a long monologue like this,
it seems much better to design a sequential interchange of terse messages,
so that the caller can be guided into a state where he can rectify his error.
For example,
.LB
.nf
.ne11
.nr x0 \w'COMPUTER:'
.nr x1 \w'CALLER:'
CALLER:\h'\n(x0u-\n(x1u' "6*00#"
COMPUTER: "Entry out of range"
CALLER:\h'\n(x0u-\n(x1u' "6*00#"  (persists)
COMPUTER: "The minimum acceptable pH value is 6.6"
CALLER:\h'\n(x0u-\n(x1u' "9*03#"
COMPUTER: "The maximum acceptable pH value is 8.0"
.fi
.LE
This dialogue allows a rapid exit from the error situation in the likely
event that the entry has simply been mis-typed.
If the error persists, the caller is given just one piece of information
at a time, and forced to continue to play an active role in the interaction.
.rh "Input timeouts."
In general, input timeouts are dangerous, because they introduce apparent
acausality in the system seen by the user.
A case has been reported where a user became "highly agitated and refused
to go near the terminal again after her first timed-out prompt.
She had been quietly thinking what to do and the terminal suddenly
interjecting and making its
own suggestions was just too much for her" (Gaines and Facey, 1975).
.[
Gaines Facey 1975
.]
.pp
However, voice response systems lack the satisfying visual feedback
of end-of-line on termination of an entry.
Hence a timed-out reminder is appropriate if a delay occurs after some
characters have been entered.
This requires the operating system to support a character-by-character mode
of input, rather than the usual line-by-line mode.
.rh "Repeat requests."
Any voice response system must support a universal "repeat last utterance"
command, because old output does not remain visible.
A fairly sophisticated facility is desirable, as repeat requests are
very frequent in practice.
They may be due to a simple inability to understand a response,
to forgetting what was said, or to distraction of attention \(em which is
especially common with office terminals.
.pp
In the telephone enquiry service two distinct commands were employed,
one to repeat the last utterance in case of misrecognition,
and the other to summarize the current state of the interaction
in case of distraction.
For the former, it is essential to avoid simply regenerating an utterance
identical with the last.
Some variation of intonation and rhythm is needed to prevent an annoying,
stereotyped response.
A second consecutive repeat request should trigger a paraphrased reply.
An error recovery sequence could be used which presented the misunderstood
information in a different way with more interaction, but experience
indicates that this is of minor importance, especially if information units
are kept small anyway.
To summarize the current state of the interaction in response to the second
type of repeat command necessitates the system maintaining a model of
the user.
Even a poor model, like a record of his last few transactions and their
results, is well worth having.
.rh "Varied speech."
Synthetic speech is usually rather dreary to listen to.
Successive utterances with identical intonations should be carefully avoided.
Small changes in speaking rate, pitch range, and mean pitch level,
all serve to add variety.
Unfortunately, little is known at present about the role of intonation in
interactive dialogue, although this is an active research area and
new developments can be expected (for a detailed report of a recent
research project relevant to this topic see Brown
.ul
et al,
1980).
.[
Brown Currie Kenworthy 1980
.]
However, even random variations in certain parameters of the pitch contour
are useful to relieve the tedium of repetitive intonation patterns.
.sh "10.2  The applications programming environment"
.pp
The comments in the last section are aimed at the applications programmer
who is designing the dialogue and constructing the interactive system.
But what kind of environment should
.ul
he
be given to assist with this work?
.pp
The best help the applications programmer can have is a speech generation
method which makes it easy for him to enter new utterances and modify
them on-line in cut-and-try attempts to render the man-machine dialogue
as natural as possible.
This is perhaps the most important advantage of synthesizing speech by rule
from a textual representation.
If encoded versions of natural utterances are stored, it becomes quite
difficult to make minor modifications to the dialogue in the light of
experience with it, for a recording session must be set up
to acquire new utterances.
This is especially true if more than one voice is used, or if the
voice belongs to a person who cannot be recalled quickly by the programmer
to augment the utterance library.
Even if it is his own voice there will still be delays, for recording
speech is a real-time job which usually needs a stand-alone processor,
and if data compression is used a substantial amount of computation will
be needed before the utterance is in a useable form.
.pp
The broad phonetic input required by segmental speech synthesis-by-rule
systems is quite suitable for utterance representation.
Utterances can be entered quickly from a standard computer terminal,
and edited as text files.
Programmers must acquire skill in phonetic transcription,
but this is a small inconvenience.
The art is easily learned in an interactive situation where the effect
of modifications to the transcription can be heard immediately.
If allophones must be represented explicitly in the input then the
programmer's task becomes considerably more complicated because of the
combinatorial explosion in trial-and-error modifications.
.pp
Plain text input is also quite suitable.
A significant rate of error is tolerable if immediate audio feedback
of the result is available, so that the operator can adjust his text
to suit the pronunciation idiosyncrasies of the program.
But it is acceptable, and indeed preferable, if prosodic features are
represented explicitly in the input rather than being assigned automatically
by a computer program.
.pp
The application of voice response to interactive computer dialogue is
quite different to the problem of reading aloud from text.
We have seen that a major concern with reading machines is how to glean
information about intonation, rhythm, emphasis, tone of voice, and so on,
from an input of ordinary English text.
The significant problems of semantic processing, utilization of pragmatic
knowledge, and syntactic analysis do not, fortunately, arise in interactive
information retrieval systems.
In these, the end user is communicating with a program which has been
created by a person who knows what he wants it to say.
Thus the major difficulty is in
.ul
describing
the prosodic features rather than
.ul
deriving
them from text.
.pp
Speech synthesis by rule is a subsidiary process to the main interactive
procedure.
It would be unwise to allow
the updating of resonance parameter tracks to be interrupted by
other calls on the system, and so the synthesis process needs to be executed
in real time.
If a stand-alone processor is used for the interactive dialogue, it may
be able to handle the synthesis rules as well.
In this case the speech-by-rule program could be a library procedure,
if the system is implemented in a compiled language.
An interesting alternative with an interpretive-language implementation,
such as Basic, is to alter the language interpreter to add a new
command, "speak", which simply transfers a string representing an utterance
to an asynchronous process which synthesizes it.
However, there must be some way for an intepreted program to abort the
current synthesis in the event of an interrupt signal from the user.
.pp
If the main computer system is time-shared, the synthesis-by-rule
procedure is best executed by an independent processor.
For example, a 16-bit microcomputer controlling a hardware
formant synthesizer has been used to run the
ISP system in real time without too much difficulty (Witten and Abbess, 1979).
.[
Witten Abbess 1979
.]
An important task is to define an interface between the two which
allows the main process to control relevant aspects of the prosody of
the speech in a way which is appropriate to the state of the interaction,
without having to bother about such things as matching the intonation contour
to the utterance and the details of syllable rhythm.
Halliday's notation appears to be quite suitable for this purpose.
.pp
If there is only one synthesizer on the system, there will be no
difficulty in addressing it.
One way of dealing with multiple synthesizers is to treat them as
assignable devices in the same way that non-spooling peripherals
are in many operating systems.
Notice that the data rate to the synthesizer is quite low
if the utterance is represented as text with prosodic markers,
and can easily be handled by a low-speed asynchronous serial line.
.pp
The Votrax ML-I synthesizer which is discussed in the next chapter has an
interface which interposes it between a visual display unit and the serial
port that connects it to the computer.
The VDU terminal can be used quite normally, except that a special sequence
of two control characters will cause Votrax to intercept the following
message up to another control character, and interpret it as speech.
The fact that the characters which specify the spoken message do not appear
on the VDU screen means that the operation is invisible to the user.
However, this transparency can be inhibited by a switch on the synthesizer
to allow visual checking of the sound-segment character sequence.
.pp
Votrax buffers up to 64 sound segments, which is sufficient to generate
isolated spoken messages.
For longer passages, it can be synchronized with the constant-rate
serial output using the modem control lines of the serial interface,
together with appropriate device-driving software.
.pp
This is a particularly convenient interfacing technique in cases when the
synthesizer should always be associated with a certain terminal. 
As an example of how it can be used,
one can arrange files each of whose lines contain a printed message,
together with its Votrax equivalent bracketed by the appropriate
control characters.
When such a file is listed, or examined with an editor program, the lines
appear simultaneously in spoken and typed English.
.pp
If a phonetic representation is used for utterances, with real-time
synthesis using a separate process (or processor), it is easy for
the programmer to fiddle about with the interactive dialogue to get
it feeling right.
For him, each utterance is just a textual string which
can be stored as a string constant within his program just as a VDU prompt
would be.  He can edit it as part of his program, and "print" it to
the speech synthesis device to hear it.
There are no more technical problems to developing an interactive dialogue
with speech output than there are for a conventional interactive program.
Of course, there are more human problems, and the points discussed
in the last section should always be borne in mind.
.sh "10.3  Using the keypad"
.pp
One of the greatest advantages of speech output from computers is the
ubiquity of the telephone network and the possibility of using it without
the need for special equipment at the terminal.
The requirement for input as well as output obviously presents something of a problem
because of the restricted nature of the telephone keypad.
.pp
Figure 10.1 shows the layout of the keypad.
.FC "Figure 10.1"
Signalling is achieved by dual-frequency tones.
For example, if key 7 is pressed, sinusoidal components at 852\ Hz and 1209\ Hz
are transmitted down the line.
During the process of dialling these are received by the telephone exchange
equipment, which assembles the digits that form a number and attempts to route
the call appropriately.
Once a connection is made, either party is free to press keys if desired
and the signals will be transmitted to the other end,
where they can be decoded by simple electronic circuits.
.pp
Dial telephones signal with closely-spaced dial pulses.
One pulse is generated for a "1", two for a "2", and so on.
(Obviously, ten pulses are generated for a "0", rather than none!)  Unfortunately,
once the connection is made it is difficult to signal with dial pulses.
They cannot be decoded reliably at the other end because the telephone
network is not designed to transmit such low frequencies.
However, hand-held tone generators can be purchased for use with dial
telephones.
Although these are undeniably extra equipment, and one purpose of using speech
output is to avoid this, they are very cheap and portable compared with other
computer terminal equipment.
.pp
The small number of keys on the telephone pad makes it rather difficult
to use for communicating with computers.
Provision is made for 16 keys, but only 12 are implemented \(em the others
may be used for some military purposes.
Of course, if a separate tone generator is used then advantage can be taken
of the extra keys, but this will introduce incompatibility with those
who use unmodified touch-tone phones.
More sophisticated terminals are available which extend the keypad \(em such
as the Displayphone of Northern Telecommunications.
However, they are designed as a complete communications terminal and
contain their own visual display as well.
.rh "Keying alphabetic data."
Figure 10.2 shows the near-universal scheme for overlaying alphabetic letters
on to the telephone keypad.
.FC "Figure 10.2"
Since more than one symbol occupies each key, it is obviously necessary
to have multiple keystrokes per character if the input sequence is to be
decodable as a string of letters.
One way of doing this is to depress the appropriate button the number of
times corresponding to the position of the letter on it.
For example, to enter the letter "L" the user would key the "5" button
three times in rapid succession.
Keying rhythm must be used to distinguish the four entries "J\ J\ J",
"J\ K", "K\ J", and "L", unless one of the bottom three buttons is used
as a separator.
A different method is to use "*", "0", and "#" as shift keys to indicate whether
the first, second, or third letter on a key is intended.
Then "#5" would represent "L".
Alternatively, the shift could follow the key instead of preceding it,
so that "5#" represented "L".
.pp
If numeric as well as alphabetic information may be entered, a mode-shift
operation is commonly used to switch between numeric and alphabetic modes.
.pp
The relative merits of these three methods, multiple depressions, shift
key prefix, and shift key suffix, have been investigated
experimentally (Kramer, 1970).
.[
Kramer 1970
.]
The results were rather inconclusive.
The first method seemed to be slightly inferior in terms of user accuracy.
It seemed that preceding rather than following shifts gave higher accuracy,
although this is perhaps rather counter-intuitive and may have been
fortuitous.
The most useful result from the experiments was that users exhibited
significant learning behaviour, and a training period of at least two hours
was recommended.
Operators were found able to key at rates of at least three to four
characters per second, and faster with practice.
.pp
If a greater range of characters must be represented then the coding problem
becomes more complex.
Figure 10.3 shows a keypad which can be used for entry of the full 64-character
standard upper-case ASCII alphabet (Shew, 1975).
.[
Shew 1975
.]
.FC "Figure 10.3"
The system is intended for remote vocabulary updating in a phonetically-based
speech synthesis system.
There are three modes of operation:  numeric, alphabetic, and symbolic.
These are entered by "##", "**", and "*0" respectively.
Two function modes, signalled by "#0" and "#*", allow some
rudimentary line-editing and monitor facilities to be incorporated.
Line-editing commands include character and line delete, and two kinds of
read-back commands \(em one tries to pronounce the words in a line
and the other spells out the characters.
The monitor commands allow the user to repeat the effect of the last input line
as though he had entered it again, to order the system to read back the
last complete output line, and to query time and system status.
.rh "Incomplete keying of alphanumeric data."
It is obviously going to be rather difficult for the operator to key
alphanumeric information unambiguously on a 12-key pad.
In the description of the telephone enquiry service in Chapter 1,
it was mentioned that single-key entry can be useful for alphanumeric data
if the ambiguity can be resolved by the computer.
If a multiple-character entry is known to refer to an item on a given
list, the characters can be keyed directly according to the coding scheme
of Figure 10.2.
.pp
Under most circumstances no ambiguity will arise.
For example, Table 10.1 shows the keystrokes that would be entered for the
first 50 5-letter words in an English dictionary.
Only two clashes occur \(em between " adore" and "afore", and
"agate" and "agave".
.RF
.nr x2 \w'abeam  'u
.nr x3 \w'00000#    'u
.nr x0 \n(x2u+\n(x3u+\n(x2u+\n(x3u+\n(x2u+\n(x3u+\n(x2u+\n(x3u+\n(x2u+\w'00000#'u
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \n(x2u +\n(x3u +\n(x2u +\n(x3u +\n(x2u +\n(x3u +\n(x2u +\n(x3u +\n(x2u
\l'\n(x0u\(ul'
.sp
aback	22225#	abide	22433#	adage	23243#	adore	23673#	after	23837#
abaft	22238#	abode	22633#	adapt	23278#	adorn	23676#	again	24246#
abase	22273#	abort	22678#	adder	23337#	adult	23858#	agape	24273#
abash	22274#	about	22688#	addle	23353#	adust	23878#	agate	24283#
abate	22283#	above	22683#	adept	23378#	aeger	23437#	agave	24283#
abbey	22239#	abuse	22873#	adieu	23438#	aegis	23447#	agent	24368#
abbot	22268#	abyss	22977#	admit	23648#	aerie	23743#	agile	24453#
abeam	22326#	acorn	22676#	admix	23649#	affix	23349#	aglet	24538#
abele	22353#	acrid	22743#	adobe	23623#	afoot	23668#	agony	24669#
abhor	22467#	actor	22867#	adopt	23678#	afore	23673#	agree	24733#
\l'\n(x0u\(ul'
.in 0
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 10.1  Keying equivalents of some words"
As a more extensive example, in a dictionary of 24,500 words, just under 2,000
ambiguities (8% of words) were discovered.
Such ambiguities would have to be resolved interactively by the system explaining
its dilemma, and asking the user for a choice.
Notice incidentally that although the keyed sequences do not have the same
lexicographic order as the words,
no extra cost will be associated with the table-searching
operation if the dictionary is stored in inverted form, with each legal
number pointing to its English equivalent or equivalents.
.pp
A command language syntax is also a powerful way of disambiguating
keystrokes entered.
Figure 10.4 shows the keypad layout for a telephone voice calculator
(Newhouse and Sibley, 1969).
.[
Newhouse Sibley 1969
.]
.FC "Figure 10.4"
This calculator provides the standard arithmetic operators,
ten numeric registers, a range of pre-defined mathematical functions,
and even the ability for a user to enter his own functions over the
telephone.
The number representation is fixed-point, with user control (through a system
function) over the precision.
Input of numbers is free format.
.pp
Despite the power of the calculator language, the dialogue is defined
so that each keystroke is unique in context and never has to be disambiguated
explicitly by the user.
Table 10.2 summarizes the command language syntax in an informal and rather
heterogeneous notation.
.RF
.nr x0 1.3i+1.7i+\w'some functions do not need the <value> part'u
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta 1.3i +1.7i
\l'\n(x0u\(ul'
construct	definition	explanation
\l'\n(x0u\(ul'
.sp
<calculation>		a sequence of <operation>s followed by a
		call to the system function  \fIE  X  I  T\fR
.sp
<operation>	<add> OR <subtract> OR
	<multiply> OR <divide> OR
	<function> OR <clear> OR
	<erase> OR <answer> OR
	<display-last> OR <display> OR
	<repeat> OR <cancel>
.sp
<add>	+  <value>  #  OR  +  #  <function>
.sp
<subtract>
<multiply>		similar to <add>
<divide>
.sp
<value>	<numeric-value>  OR  \fIregister\fR <single-digit>
.sp
<numeric-value>		a sequence of keystrokes like
		1  .  2  3  4  or  1  2  3  .  4  or  1  2  3  4
.sp
<function>	\fIfunction\fR <name>  #  <value>  #
		some functions do not need the <value> part
.sp
<name>		a sequence of keystrokes like
		\fIS  I  N\fR  or  \fIE  X  I  T\fR  or  \fIM  Y  F  U  N  C\fR
.sp
<clear>	\fIclear register\fR <single-digit>  #
		clears one of the 10 registers
.sp
<erase>	\fIerase\fR  #	undoes the effect of the last operation
.sp
<answer>	\fIanswer register\fR <single-digit>  #
		reads the contents of a register
.sp
<display-last>
<display>		these provide "repeat" facilities
<repeat>
.sp
<cancel>		aborts the current utterance
\l'\n(x0u\(ul'
.in 0
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 10.2  Syntax for a telephone calculator"
A calculation is a sequence of operations followed by an EXIT function call.
There are twelve different operations, one for each button on the keypad.
Actually, two of them \(em
.ul
cancel
and
.ul
function
\(em share the same key so that "#" can be reserved for use as a
separator; but the context ensures that they cannot be confused by the system.
.pp
Six of the operations give control over the dialogue.
There are three different "repeat" commands; a command (called
.ul
erase\c
)
which undoes the effect of the last operation;
one which reads out the value of a register;
and one which aborts the current utterance.
Four more commands provide the basic arithmetic operations of add,
subtract, multiply, and divide.
The operands of these may be keyed literal numbers, or register values,
or function calls.
A further command clears a register.
.pp
It is through functions that the extensibility of the language is achieved.
A function has a name (like SIN, EXIT, MYFUNC) which is keyed with an
appropriate single-key-per-character sequence (namely 746, 3948, 693862
respectively).
One function, DEFINE, allows new ones to be entered.
Another, LOOP, repeats sequences of operations.
TEST incorporates arithmetic testing.
The details of these are not important:  what is interesting is the evident
power of the calculator.
.pp
For example, the keying sequence
.LB
.NI
5  #  1  1  2  3  #  2  1  .  2  #  9  #  6  #  2  1  .  4  #
.LE
would be decoded as
.LB
.NI
.ul
clear\c
  +  123  \-  1.2  \c
.ul
display  erase\c
  \-  1.4.
.LE
One of the difficulties with such a tight syntax is that almost any sequence
will be intepreted as a valid calculation \(em syntax errors are nearly
impossible.
Thus a small mistake by the user can have a catastrophic effect on the
calculation.
Here, however, speech output gives an advantage over conventional
character-by-character echoing
on visual displays.
It is quite adequate to echo syntactic units as they are decoded, instead
of echoing keys as they are entered.
It was suggested earlier in this chapter that confirmation of entry
should be generated in the same way that the user would be likely to
verbalize it himself.
Thus the synthetic voice could respond to the above keying sequence as
shown in the second line, except that the
.ul
display
command would also state the result
(and possibly summarize the calculation so far).
Numbers could be verbalized as "one hundred and twenty-three"
instead of as "one ... two ... three".
(Note, however, that this will make it necessary to await the "#" terminator
after numbers and function names before they can be echoed.)
.sh "10.4  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.sh "10.5  Further reading"
.pp
There are no books which relate techniques of man-computer dialogue
to speech interaction.
The best I can do is to guide you to some of the standard works on
interactive techniques.
.LB "nn"
.\"Gilb-1977-1
.]-
.ds [A Gilb, T.
.as [A " and Weinberg, G.M.
.ds [D 1977
.ds [T Humanized input
.ds [I Winthrop
.ds [C Cambridge, Massachusetts
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
This book is subtitled "techniques for reliable keyed input",
and considers most aspects of the problem of data entry by
professional key operators.
.in-2n
.\"Martin-1973-2
.]-
.ds [A Martin, J.
.ds [D 1973
.ds [T Design of man-computer dialogues
.ds [I Prentice-Hall
.ds [C Englewood Cliffs, New Jersey
.nr [T 0
.nr [A 1
.nr [O 0
.][ 2 book
.in+2n
Martin concerns himself with all aspects of man-computer dialogue,
and the book even contains a short chapter on  the use of
voice response systems.
.in-2n
.\"Smith-1980-3
.]-
.ds [A Smith, H.T.
.as [A " and Green, T.R.G.(Editors)
.ds [D 1980
.ds [T Human interaction with computers
.ds [I Academic Press
.ds [C London
.nr [T 0
.nr [A 0
.nr [O 0
.][ 2 book
.in+2n
A recent collection of contributions on man-computer systems and programming
research.
.in-2n
.LE "nn"
.EQ
delim $$
.EN
.CH "11  COMMERCIAL SPEECH OUTPUT DEVICES"
.ds RT "Commercial speech output devices
.ds CX "Principles of computer speech
.pp
This chapter takes a look at four speech output peripherals that are
available today.
It is risky in a book of this nature to descend so close to the technology
as to discuss particular examples of commercial products,
for such information becomes dated very quickly.
Nevertheless, having covered the principles of various types of speech
synthesizer, and the methods of driving them from widely differing utterance
representations, it seems worthwhile to see how these principles are
embodied in a few products actually on the market.
.pp
Developments in electronic speech devices are moving so fast that it is
hard to keep up with them, and the newest technology today will undoubtedly
be superseded next year.
Hence I have not tried to choose examples from the very latest technology.
Instead, this chapter discusses synthesizers which exemplify rather different
principles and architectures, in order to give an idea of the range of options
which face the system designer.
.pp
Three of the devices are landmarks in the commercial adoption of speech
technology, and have stood the test of time.
Votrax was introduced in the early 1970's, and has been re-implemented
several times since in an attempt to cover different market sectors.
The Computalker appeared in 1976.
It was aimed primarily at the burgeoning computer hobbies market.
One of its most far-reaching effects was to stimulate the interest of
hobbyists, always eager for new low-cost peripherals, in speech synthesis;
and so provide a useful new source of experimentation and expertise
which will undoubtedly help this heretofore rather esoteric discipline to
mature.
Computalker is certainly the longest-lived and probably still the most
popular hobbyist's speech synthesizer.
The Texas Instruments speech synthesis chip brought speech output technology to the
consumer.
It was the first single-chip speech synthesizer, and is still the biggest
seller.
It forms the heart of the "Speak 'n Spell" talking toy which appeared in
toyshops in the summer of 1978.
Although talking calculators had existed several years before, they were
exotic gadgets rather than household toys.
.sh "11.1  Formant synthesizer"
.pp
The Computalker is a straightforward implementation of a serial formant
synthesizer.
A block diagram of it is shown in Figure 11.1.
.FC "Figure 11.1"
In the centre is the main vocal tract path, with three formant filters
whose resonant frequencies can be controlled individually.
A separate nasal branch in parallel with the oral one is provided,
with a nasal formant of fixed frequency.
It is less important to allow for variation of the nasal formant
frequency than it is for the oral ones, because the size and
shape of the nasal tract is relatively fixed.
However, it is essential to control the nasal amplitude, in particular to turn
it off during non-nasal sounds.
Computalker provides independent oral and nasal amplitude parameters.
.pp
Unvoiced excitation can be passed through the main vocal tract
through the aspiration amplitude control AH.
In practice, the voicing amplitudes AV and AN will probably always be zero when AH
is non-zero, for physiological constraints prohibit simultaneous voicing
and aspiration.
A second unvoiced excitation path passes through a fricative formant filter
whose resonant frequency can be varied, and has its amplitude independently
controlled by AF.
.rh "Control parameters."
Table 11.1 summarizes the nine parameters which drive Computalker.
.RF
.nr x0 \w'address0'+\w'fundamental frequency of voicing00'+\w'0 bits0'+\w'logarithmic00'+\w'0000\-00000 Hz'
.nr x1 (\n(.l-\n(x0)/2
.in \n(x1u
.ta \w'000'u \w'address0'u +\w'fundamental frequency of voicing00'u +\w'0 bits0'u +\w'logarithmic00'u
address	meaning	width		\0\0\0range
\l'\n(x0u\(ul'
.sp
\00	AV	amplitude of voicing	8 bits
\01	AN	nasal amplitude	8 bits
\02	AH	amplitude of aspiration	8 bits
\03	AF	amplitude of frication	8 bits
\04	FV	fundamental frequency of voicing	8 bits	logarithmic	\0\075\-\0\0470 Hz
\05	F1	formant 1 resonant frequency	8 bits	logarithmic	\0170\-\01450 Hz
\06	F2	formant 2 resonant frequency	8 bits	logarithmic	\0520\-\04400 Hz
\07	F3	formant 3 resonant frequency	8 bits	logarithmic	1700\-\05500 Hz
\08	FF	fricative resonant frequency	8 bits	logarithmic	1700\-14000 Hz
\09		not used
10		not used
11		not used
12		not used
13		not used
14		not used
15	SW	audio on-off switch	1 bit
\l'\n(x0u\(ul'
.in 0
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.FG "Table 11.1  Computalker control parameters"
Four of them control amplitudes, while the others control frequencies.
In the latter case the parameter value is logarithmically related to
the actual frequency of the excitation (FV) or resonance (F1, F2, F3, FF).
The ranges over which each frequency can be controlled is shown in the Table.
An independent calibration of one particular Computalker has shown that
the logarithmic specifications are met remarkably well.
.pp
Each parameter is specified to Computalker as an 8-bit number.
Parameters are addressed by a 4-bit code, and so a total of 12 bits
is transferred in parallel to Computalker from the computer
for each parameter update.
Parameters 9 to 14 are unassigned ("reserved for future expansion" is
the official phrase), and the last parameter, SW, governs the position of
an audio on-off switch.
.pp
Computalker does not contain a clock that is accessible to the user,
and so the timing of parameter updates is entirely up to the host computer.
Typically, a 10\ msec interval between frames is used,
with interrupts generated by a separate timer.
In fact the frame interval can be anywhere between 2\ msec and 50\ msec,
and can be changed to alter the rate of speaking.
However, it is rather naive to view fast speech as slow
speech speeded up by a linear time compression, for in human
speech production the rhythm changes and elisions occur in a rather
more subtle way.
Thus it is not particularly useful to be able to alter the frame rate.
.pp
At each interrupt, the host computer transfers values for all of the nine
parameters to Computalker, a total of 108 data bits.
In theory, perhaps, it is only necessary to transmit those parameters
whose values have changed; but in practice all of them should be updated
regardless.
This is because the parameters are stored for the duration of the frame
in analogue sample-and-hold devices.  Essentially, the parameter value
is represented as the charge on a capacitor.
In time \(em and it takes only a short time \(em the values drift.
Although the drift over 10\ msec is insignificant, it becomes very
noticeable over longer time periods.
If parameters are not updated at all, the result is a
"whooosh" sound up to maximum amplitude, in a period of a second or two.
Hence it is essential that Computalker be serviced by the computer regularly,
to update all its parameters.
The audio on-off switch is provided so that the computer can turn off
the sound directly if another program, which does not use the device,
is to be run.
.rh "Filter implementation."
It is hard to get definite information on the implementation
of Computalker.
Because it is a commercial device, circuit diagrams are not published.
It is certainly an analogue rather than a digital implementation.
The designer suggests that a configuration like that of Figure 11.2 is used
for the formant filters (Rice, 1976).
.[
Rice 1976 Byte
.]
.FC "Figure 11.2"
Control is obtained over the resonant frequency by varying the resistance
at the bottom in sympathy with the parameter value.
The middle two operational amplifiers can be modelled by a resistance
$-R/k$ in the forward path, where k is the digital control value.
This gives the circuit in Figure 11.3, which can be analysed to obtain
the transfer function
.LB
.EQ
- ~ k over {R~R sub 1 C sub 2 C sub 3} ~ . ~ {R sub 2 C sub 2 ~s ~+~1} over
{ s sup 2 ~+~~
( 1 over {R sub 3 C sub 3} ~+~ {k R sub 2} over {R~R sub 1 C sub 3})~s ~~+~
k over {R~R sub 1 C sub 2 C sub 3}} ~ .
.EN
.LE
.FC "Figure 11.3"
.pp
This expression has a DC gain of \-1, and the denominator is similar to those
of the analogue formant resonators discussed in Chapter 5.
However, unlike them the transfer function has a numerator which creates
a zero at
.LB
.EQ
s~~=~~-~ 1 over {R sub 2 C sub 2} ~ .
.EN
.LE
If  $R sub 2 C sub 2$  is sufficiently small, this zero will have
negligible effect at audio frequencies, and the filter has
the following parameters:
.LB
centre frequency:    $~ mark
1 over {2 pi}~~( k over {R~R sub 1 C sub 2 C sub 3} ~ ) sup 1/2$  Hz
.sp
bandwidth:$lineup
1 over {2 pi}~~( 1 over {R sub 3 C sub 3}~+~
{k R sub 2} over {R~R sub 1 C sub 3} ~ )$  Hz.
.LE
.pp
Note first that the centre frequency is proportional to the square root of
the control value $k$.
Hence a non-linear transformation must be implemented on the control
signal, after D/A conversion, to achieve the required logarithmic relationship
between parameter value and resonant frequency.
The formant bandwidth is not constant, as it should be (see Chapter 5),
but depends upon the control value $k$.
This dependency can be minimized by selecting component values such that
.LB
.EQ
{k R sub 2} over {R~R sub 1 C sub 3}~~<<~~1 over {R sub 3 C sub 3}
.EN
.LE
for the largest value of $k$ which can occur.
Then the bandwidth is solely determined by the time constant  $R sub 3 C sub 3$.
.pp
The existence of the zero can be exploited for the fricative resonance.
This should have zero DC gain, and so the component values for the fricative
filter should make the time-constant  $R sub 2 C sub 2$  large enough to place
the zero sufficiently near the frequency origin.
.rh "Market orientation."
As mentioned above, Computalker is designed for the computer hobbies market.
Figure 11.4 shows a photograph of the device.
.FC "Figure 11.4"
It plugs into the S\-100 bus which has been a
.ul
de facto
standard for hobbyists for several years, and has recently been adopted
as a standard by the Institute of Electrical and Electronic Engineers.
This makes it immediately accessible to many microcomputer systems.
.pp
An inexpensive synthesis-by-rule program, which runs on
the popular 8080 microprocessor, is available to drive Computalker.
The input is coded in a machine-readable version of the standard phonetic
alphabet, similar to that which was introduced in Chapter 2 (Table 2.1).
Stress digits may appear in the transcription, and the program caters for
five levels of stress.
The punctuation mark at the end of an utterance has some effect on pitch.
The program is perhaps remarkable in that it occupies only 6\ Kbyte of storage
(including phoneme tables), and runs on an 8-bit microprocessor
(but not in real time).
It is, however,
.ul
un\c
remarkable in that it produces rather poor speech.
According to a demonstration cassette,
"most people find the speech to be readily intelligible,
especially after a little practice listening to it,"
but this seems extremely optimistic.
It also cunningly insinuates that if you don't understand it, you yourself
may share the blame with the synthesizer \(em after all,
.ul
most
people do!
Nevertheless, Computalker has made synthetic speech accessible to a large
number of home computer users.
.sh "11.2  Sound-segment synthesizer"
.pp
Votrax was the first fully commercial speech synthesizer, and at the time of
writing is still the only off-the-shelf speech output
peripheral (as distinct from reading machine) which is aimed
specifically at synthesis-by-rule rather than storage of parameter tracks
extracted from natural utterances.
Figure 11.5 shows a photograph of the Votrax ML-I.
.FC "Figure 11.5"
.pp
Votrax accepts as input a string of codes representing sound segments,
each with additional bits to control the duration and pitch of the segment.
In the earlier versions (eg model VS-6) there are 63 sound segments, specified
by a 6-bit code, and two further bits accompany each segment to provide a
4-level control over pitch.
Four pitch levels are quite inadequate to generate acceptable intonation
contours for anything but isolated words spoken in citation form.
However, a later model (ML-I) uses an 8-level pitch specification,
as well as a 4-level duration qualifier,
associated with each sound segment.
It provides a vocabulary of 80 sound segments, together with an additional
code which allows local amplitude modifications and extra duration alterations
to following segments.
A further, low-cost model (VS-K) is now available which plugs in to the S\-100
bus, and
is aimed primarily at
computer hobbyists.
It provides no pitch control at all and is therefore
quite unsuited to serious voice response applications.
The device has recently been packaged as an LSI circuit (model SC\-01),
using analogue switched-capacitor filter technology.
.pp
One point where the ML-I scores favourably over other speech synthesis
peripherals is the remarkably convenient engineering of its
computer interface, which was outlined in the previous chapter.
.pp
The internal workings of Votrax are not divulged by the manufacturer.
Figure 11.6 shows a block diagram at the level of detail that they supply.
.FC "Figure 11.6"
It seems to be essentially a formant synthesizer with analogue function
generators and parameter smoothing circuits that provide transitions between
sound segments.
.rh "Sound segments."
The 80 segments of the high-range ML-I model
are summarized in Table 11.2.
.FC "Table 11.2"
They are divided into phoneme classes according to the
classification discussed in Chapter 2.
The segments break down into the following categories.
(Numbers in parentheses are the corresponding figures for VS-6.)
.LB "00 (00) "
.NI "00 (00) "
11 (11) vowel sounds which are representative of the phonological
vowel classes for English
.NI "00 (00) "
\09 \0(7) vowel allophones, with slightly different sound qualities from the
above
.NI "00 (00) "
20 (15) segments whose sound qualities are identical to the segments above, but with
different durations
.NI "00 (00) "
22 (22) consonant sounds which are representative of the phonological
consonant classes for English
.NI "00 (00) "
11 \0(6) consonant allophones
.NI "00 (00) "
\04 \0(0) segments to be used in conjunction with unvoiced plosives to increase
their aspiration
.NI "00 (00) "
\02 \0(2) silent segments, with different pause durations
.NI "00 (00) "
\01 \0(0) very short silent segment (about 5\ msec).
.LE "00 (00) "
Somewhat under half of the 80 elements
can be put into one-to-one correspondence with the phonemes of English;
the rest are either allophonic variations or additional sounds which can
sensibly be combined with certain phonemes in certain contexts.
The Votrax literature, and consequently Votrax users, persists in calling
all elements "phonemes", and this can cause considerable confusion.
I prefer to use the term "sound segment" instead, reserving "phoneme" for its
proper linguistic use.
.pp
The rules which Votrax uses for transitions between sound segments are not
made public by the manufacturer, and are embedded in encapsulated circuits
in the hardware.
They are clearly very crude.
The key to successful encoding of utterances is to use the many
non-phonemic segments in an appropriate way as transitions between the main
segments which represent phonetic classes.  This is a tricky process, and
I have heard of one commercial establishment giving up in despair at the
extreme difficulty of generating the utterances it wanted.
It probably explains the proliferation of letter-to-sound rules for
Votrax which have been developed in research laboratories
(Colby
.ul
et al,
1978; Elovitz
.ul
et al,
1976; McIlroy, 1974; Sherwood, 1978).
.[
Colby Christinaz Graham 1978
.]
.[
Elovitz 1976 IEEE Trans Acoustics Speech and Signal Processing
.]
.[
McIlroy 1974
.]
.[
Sherwood 1978
.]
Nevertheless, with luck, skill, and especially persistence,
excellent results can be
obtained.  The ML-I manual (Votrax, 1976) contains a list of about 625 words and short phrases,
and they are usually clearly recognizable.
.[
Votrax 1976
.]
.rh "Duration and pitch qualifiers."
Each sound segment has a different duration.
Table 11.2 shows the measured duration of the segments, although no
calibration data is given by Votrax.
As mentioned earlier, a 2-bit number accompanies each segment to modify
its duration, and
this was set to 3 (least duration) for the measurements.
The qualifier has a multiplicative effect, shown in Table 11.3.
.RF
.nr x1 (\w'rate qualifier'/2)
.nr x2 (\w'in Table 11.2 by'/2)
.nr x0 \n(x1+2i+\w'00'+\n(x2
.nr x3 (\n(.l-\n(x0)/2
.in \n(x3u
.ta \n(x1u +2i
\l'\n(x0u\(ul'
.sp
.nr x2 (\w'multiply duration'/2)
rate qualifier		\0\0\h'-\n(x2u'multiply duration
.nr x2 (\w'in Table 11.2 by'/2)
		\0\0\h'-\n(x2u'in Table 11.2 by
\l'\n(x0u\(ul'
.sp
	3	1.00
	2	1.11
	1	1.22
	0	1.35
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 11.3  Effect of the 2-bit per-segment rate qualifier"
.pp
As well as the 2-bit rate qualifier, each sound segment is accompanied by
a 3-bit pitch specification.  This provides a linear control over fundamental
frequency, and Table 11.4 shows the measured values.
.RF
.nr x1 (\w'pitch specifier'/2)
.nr x2 (\w'pitch (Hz)'/2)
.nr x0 \n(x1+1.5i+\n(x2
.nr x3 (\n(.l-\n(x0)/2
.in \n(x3u
.ta \n(x1u +1.5i
\l'\n(x0u\(ul'
.sp
pitch specifier	\h'-\n(x2u'pitch (Hz)
\l'\n(x0u\(ul'
.sp
	0	\057.5
	1	\064.1
	2	\069.4
	3	\075.8
	4	\080.6
	5	\087.7
	6	\094.3
	7	100.0
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 11.4  Effect of the 3-bit per-segment pitch specifier"
The quantization interval varies from
one to two semitones.
Votrax interpolates pitch from phoneme to phoneme in a highly satisfactory
manner, and this permits surprisingly sophisticated intonation contours
to be generated considering the crude 8-level quantization.
.pp
The notation in which the Votrax manual defines utterances
gives duration qualifiers and pitch specifications as digits
preceding the sound segment, and separated from it by a slash (/).
Thus, for example,
.LB
14/THV
.LE
defines the sound segment THV with duration qualifier 1 (multiplies the
70\ msec duration of Table 11.2 by 1.22 \(em from Table 11.3 \(em to give 85\ msec)
and pitch specification 4 (81 Hz).
This representation of a segment is transformed into two ASCII characters before transmission
to the synthesizer.
.rh "Converting a phonetic transcription to sound segments."
It would be useful to have a computer procedure to produce a specification for
an utterance in terms of Votrax sound segments from a standard phonetic
transcription.
This could remove much of the tedium from utterance preparation
by incorporating the contextual rules given in the Votrax manual.
Starting with a phonetic transcription, each phoneme should be converted
to its default Votrax representative.
The resulting "wide" Votrax transcription must be
transformed into a "narrow" one by application of contextual rules.
Separate rules are needed for
.LB
.NP
vowel clusters (diphthongs)
.NP
vowel transitions (ie consonant-vowel and vowel-consonant,
where the vowel segment is altered)
.NP
intervocalic consonants
.NP
consonant transitions (ie consonant-vowel and vowel-consonant,
where the consonant segment is altered)
.NP
consonant clusters
.NP
stressed-syllable effects
.NP
utterance-final effects.
.LE
Stressed-syllable effects (which include
extra aspiration for unvoiced stops beginning stressed syllables)
can be applied only if stress markers are included in the phonetic
transcription.
.pp
To specify a rule, it is necessary to give a
.ul
matching part
and a
.ul
context,
which define at what points in an utterance it is applicable, and a
.ul
replacement part
which is used to replace the matching part.
The context can be specified in mathematical set notation using curly brackets.
For example,
.LB
{G SH W K} OO		IU OO
.LE
states that the matching part OO is replaced by IU OO, after a G, SH, W, or K.
In fact, allophonic variations of each sound segment
should also be accepted as valid context, so this rule will also replace OO
after .G, CH, .W, .K, or .X1 (Table 11.2 gives allophones of each segment).
.pp
Table 11.5 gives some rules that have been used for this purpose.
.FC "Table 11.5"
They were derived from careful study of the hints given in the
ML-I manual (Votrax, 1976).
.[
Votrax 1976
.]
Classes such as "voiced" and "stop-consonant" in the context specify sets
of sound segments in the obvious way.
The beginning of a stressed syllable is marked in the input by ".syll".
Parentheses in the replacement part have a significance which is explained in
the next section.
.rh "Handling prosodic features."
We know from Chapter 8 the vital importance of prosodic features
in synthesizing lifelike speech.
To allow them to be assigned to Votrax utterances, an intermediate
output from a prosodic analysis program like ISP can be used.
For example,
.LB
1  \c
.ul
dh i s  i z  /*d zh aa k s  /h aa u s;
.LE
which specifies "this is Jack's house" in a declarative intonation with
emphasis on the "Jack's", can be intercepted in the following form:
.LB
\&.syll
.ul
dh\c
\ 50\ (0\ 110)
.ul
i\c
\ 60
.ul
s\c
\ 90\ (0\ 99)
.ul
i\c
\ 60
.ul
z\c
\ 60\ (50\ 110)
\&.syll
.ul
d\c
\ 50\ (0\ 110)
.ul
zh\c
\ 50
.ul
aa\c
\ 90
.ul
k\c
\ 120\ (10\ 90)
.ul
s\c
\ 90
\&.syll
.ul
h\c
\ 60
.ul
aa\c
\ 140
.ul
u\c
\ 60
.ul
s\c
\ 140
^\ 50\ (40\ 70) .
.LE
Syllable boundaries, pitches, and durations have been assigned by the
procedures given earlier (Chapter 8).
A number always follows each phoneme to specify its duration
(in msec).
Pairs of numbers in parentheses define a pitch specification at some
point during the preceding phoneme:  the first number of the pair defines
the time offset of the specification from the beginning
of the phoneme, while the second gives the pitch itself (in Hz).
This form of utterance specification can then be passed to a Votrax
conversion procedure.
.pp
The phonetic transcription is converted
to Votrax sound segments using the method described above.  The "wide" Votrax
transcription is
.LB
\&.syll THV I S I Z .syll D ZH AE K S .syll H AE OO S PA0 ;
.LE
which is transformed to the following "narrow" one according to the rules
of Table 11.5:
.LB
\&.syll THV I S I Z .syll D J (AE EH3) K S .syll H1 (AH1 .UH2) (O U)
S PA0 .
.LE
The duration and pitch specifications are preserved by the transformation
in their original positions in the string, although they are not shown above.
The next stage uses them to expand the transcription by adjusting
the segments to have durations as close as possible to the specifications, and
computing pitch numbers to be associated with each phoneme.
.pp
Correct duration-expansion can, in general, require a great amount of
computation.
Associated with each sound segment is a set of elements with the same sound quality
but different durations, formed by attaching each of the four duration
qualifiers of Table 11.3 to the segment and any others which are
sound-equivalents to it.  For example, the segment Z has the duration-set
.LB
{3/Z   2/Z   1/Z   0/Z}
.LE
with durations
.LB
{ 70   78   85   95}
.LE
msec respectively, where the initial numerals denote the duration qualifier.
The segment I has the much larger duration-set
.LB
{3/I2   2/I2   1/I2   0/I2   3/I1   2/I1   1/I1   0/I1   3/I   2/I   1/I   0/I}
.LE
with durations
.LB
{ 58   64   71   78   83   92   101   112   118   131   144   159},
.LE
because segments I1 and I2 are sound-equivalents to it.
Duration assignment is a matter of selecting elements from the
duration-set whose total duration is as close as possible to that desired
for the segment.
It happens that Votrax deals sensibly with concatenations of more than one
identical plosive, suppressing the stop burst on all but the last.
Although the general problem of approximating durations in
this way is computationally demanding, a simple recursive exhaustive search
works in a reasonable amount of time because the desired duration is usually
not very much greater than the longest member of the duration-set, and so
the search terminates quite quickly.
.pp
At this point, the role of the parentheses which appear on the right-hand side
of Table 11.5 becomes apparent.  Because durations are only associated with
the input phonemes, which may each be expanded into several Votrax
segments, it is necessary to keep track of the segments which have descended
from a single phoneme.
Target durations are simply spread equally across any parenthesized groups
to which they apply.
.pp
Having expanded durations, mapping pitches on to the sound segments is
a simple matter.  The ISP system for formant synthesizers (Chapters 7 and 8)
uses linear interpolation between pitch specifications, and the frequency which
results for each sound segment needs to be converted to a Votrax specification
using the information in Table 11.4.
.pp
After applying these procedures to the example utterance, it becomes
.LB
14/THV  14/I1  03/S  14/I1  04/Z  04/D  04/J  33/AE  33/EH3  \c
02/K  02/K  02/S  02/H1  01/AH2  01/.UH2  31/O2  31/U1  01/S  \c
10/S  30/PA0  30/PA0  .
.LE
In several places, shorter sound-equivalents have been substituted
(I1 for I, AH2 for AH1, O2 for O, and U1 for U), while doubling-up also occurs
(in the K, S, and PA0 segments).
.pp
The speech which results from the use of these procedures with the
Votrax synthesizer sounds remarkably similar to that generated by the
ISP system which uses
parametrically-controlled synthesizers.  Formal evaluation experiments have
not been undertaken, but it seems clear from careful listening that it would
be rather difficult, and probably pointless, to evaluate the Votrax conversion
algorithm, for the outcome would be completely dominated by the success of the
original pitch and rhythm assignment procedures.
.sh "11.3  Linear predictive synthesizer"
.pp
The first single-chip speech synthesizer was introduced by
Texas Instruments (TI) in the summer of 1978 (Wiggins and Brantingham, 1978).
.[
Wiggins Brantingham 1978
.]
It was a remarkable development, combining recent advances in signal processing
with the very latest in VLSI technology.
Packaged in the Speak 'n Spell toy (Figure 11.7), it was a striking demonstration
of imagination and prowess in integrated electronics.
.FC "Figure 11.7"
It gave TI a long lead over its competitors and surprised many experts
in the speech field.
.EQ
delim @@
.EN
Overnight, it seemed, digital speech technology had descended from
research laboratories with their expensive and specialized equipment into
a $50.00 consumer item.
.EQ
delim $$
.EN
Naturally TI did not sell the chip separately but only as part of their
mass-market product; nor would they make available information on how to
drive it directly.
Only recently when other similar devices appeared on the market did they
unbundle the package and sell the chip.
.rh "The Speak 'n Spell toy."
The TI chip (TMC0280) uses the linear predictive method of synthesis,
primarily because of the ease of the speech analysis procedure and the known
high quality at low data rates.
Speech researchers, incidentally, sometimes scoff at what they perceive to be
the poor quality of the toy's speech; but considering the data rate
used (which averages 1200 bits per second of speech) it is remarkably good.
Anyway, I have never heard a child complain! \(em although it is not uncommon
to misunderstand a word.
Two 128\ Kbit read-only memories are used in the toy to hold data for about
330 words and phrases \(em lasting between 3 and 4 minutes \(em of speech.
At the time (mid-1978) these memories were the largest that were available
in the industry.
The data flow and user dialogue are handled by a microprocessor,
which is the fourth LSI circuit in the photograph of Figure 11.8.
.FC "Figure 11.8"
.pp
A schematic diagram of the toy is given in Figure 11.9.
.FC "Figure 11.9"
It has a small display which shows upper-case letters.
(Some teachers of spelling hold that the lack of lower case destroys
any educational value that the toy may have.)  It
has a full 26-key alphanumeric keyboard with 14 additional control keys.
(This is the toy's Achilles' heel, for the keys fall out after extended use.
More recent toys from TI use an improved keyboard.)  The
keyboard is laid out alphabetically instead of in QWERTY order; possibly
missing an opportunity to teach kids to type as well as spell.
An internal connector permits vocabulary expansion with up to 14 more
read-only memory chips.
Controlling the toy is a 4-bit microprocessor (a modified TMS1000).
However, the synthesizer chip does not receive data from the processor.
During speech, it accesses the memory directly and only returns control
to the processor when an end-of-phrase marker is found in the data stream.
Meanwhile the processor is idle, and cannot even be interrupted from the
keyboard.
Moreover, in one operational mode ("say-it") the toy embarks upon a long
monologue and remains deaf to the keyboard \(em it cannot even be turned off.
Any three-year-old will quickly discover that a sharp slap solves the problem!
A useful feature is that the device switches itself off if unused for more
than a few minutes.
A fascinating account of the development of the toy from the point of view
of product design and market assessment has been published
(Frantz and Wiggins, 1981).
.[
Frantz Wiggins 1981
.]
.rh "Control parameters."
The lattice filtering method of linear predictive synthesis (see Chapter 6)
was selected because of its good stability properties and guaranteed
performance with small word sizes.
The lattice has 10 stages.
All the control parameters are represented as 10-bit fixed-point numbers,
and the lattice operates with an internal precision of 14 bits (including
sign).
.pp
There are twelve parameters for the device:  ten reflection coefficients,
energy, and pitch.
These are updated every 20\ msec.
However, if 10-bit values were stored for each, a data rate of 120 bits
every 20\ msec, or 6\ Kbit/s, would be needed.
This would reduce the capacity of the two read-only memory chips to well
under a minute of speech \(em perhaps 65 words and phrases.
But one of the desirable properties of the reflection coefficients
which drive the lattice filter is that they are amenable to quantization.
A non-linear quantization scheme is used, with the parameter data addressing
an on-chip quantization table to yield a 10-bit coefficient.
.pp
Table 11.6 shows the number of bits devoted to each parameter.
.RF
.in+0.3i
.ta \w'repeat flag00'u +1.3i +0.8i
.nr x0 \w'repeat flag00'+1.3i+\w'00'+(\w'size (10-bit words)'/2)
\l'\n(x0u\(ul'
.nr x1 (\w'bits'/2)
.nr x2 (\w'quantization table'/2)
.nr x3 0.2m
parameter	\0\h'-\n(x1u'bits	\0\0\h'-\n(x2u'quantization table
.nr x2 (\w'size (10-bit words)'/2)
		\0\0\h'-\n(x2u'size (10-bit words)
\l'\n(x0u\(ul'
.sp
energy	\04	\016	\v'\n(x3u'_\v'-\n(x3u'\z4\v'\n(x3u'_\v'-\n(x3u'  energy=0 means 4-bit frame
pitch	\05	\032
repeat flag	\01	\0\(em	\z1\v'\n(x3u'_\v'-\n(x3u'\z0\v'\n(x3u'_\v'-\n(x3u'  repeat flag =1 means 10-bit frame
k1	\05	\032
k2	\05	\032
k3	\04	\016
k4	\04	\016	\z2\v'\n(x3u'_\v'-\n(x3u'\z8\v'\n(x3u'_\v'-\n(x3u'  pitch=0 (unvoiced) means 28-bit frame
k5	\04	\016
k6	\04	\016
k7	\04	\016
k8	\03	\0\08
k9	\03	\0\08
k10	\03	\0\08	\z4\v'\n(x3u'_\v'-\n(x3u'\z9\v'\n(x3u'_\v'-\n(x3u'  otherwise 49-bit frame
	__	___
.sp
	49 bits	216 words
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in-0.3i
.FG "Table 11.6  Bit allocation for Speak 'n Spell chip"
There are 4 bits for energy, and 5 bits for pitch and the first two
reflection coefficients.
Thereafter the number of bits allocated to reflection coefficients decreases
steadily, for higher coefficients are less important for intelligibility
than lower ones.
(Note that using a 10-stage filter is tantamount to allocating
.ul
no
bits to coefficients higher than the tenth.)  With a
1-bit "repeat" flag, whose role is discussed shortly, the frame size
becomes 49 bits.
Updated every 20\ msec, this gives a data rate of just under 2.5\ Kbit/s.
.pp
The parameters are expanded into 10-bit numbers by a separate quantization
table for each one.
For example, the five pitch bits address a 32-word look-up table which
returns a 10-bit value.
The transformation is logarithmic in this case, the lowest pitch being
around 50 Hz and the highest 190 Hz.
As shown in Table 11.6, a total of 216 10-bit words suffices to hold all
twelve quantization tables; and they are implemented on the synthesizer
chip.
To provide further smoothing of the control parameters,
they are interpolated linearly from one frame to the next at eight points
within the frame.
.pp
The raw data rate of 2.5\ Kbit/s is reduced to an average of 1200\ bit/s
by further coding techniques.
Firstly, if the energy parameter is zero the frame is silent,
and no more parameters are transmitted (4-bit frame).
Secondly, if the "repeat" flag is 1 all reflection coefficients are held
over from the previous frame, giving a constant filter but with the ability
to vary amplitude and pitch (10-bit frame).
Finally, if the frame is unvoiced (signalled by the pitch value being zero)
only four reflection coefficients are transmitted, because the ear is
relatively insensitive to spectral detail in unvoiced speech (28-bit frame).
The end of the utterance is signalled by the energy bits all being 1.
.rh "Chip organization."
The configuration of the lattice filter is shown in Figure 11.10.
.FC "Figure 11.10"
The "two-multiplier" structure (Chapter 6) is used, so the 10-stage filter
requires 19 multiplications and 19 additions
per speech sample.
(The last operation in the reverse path at the bottom is not needed.)  Since
a 10\ kHz sample rate is used, just 100\ $mu$sec are available for each
speech sample.
A single 5\ $mu$sec adder and a pipelined multiplier are implemented on
the chip, and multiplexed among the 19 operations.
The latter begins a new multiplication every 5\ $mu$sec, and finishes it
40\ $mu$sec later.
These times are within the capability of p-channel MOS technology,
allowing the chip to be produced at low cost.
The time slot for the 20'th, unnecessary, filter multiplication is used
for an overall gain adjustment.
.pp
The final analogue signal is produced by an 8-bit on-chip D/A converter
which drives a 200 milliwatt speaker through an impedance-matching
transformer.
These constitute the necessary analogue low-pass desampling filter.
.pp
Figure 11.11 summarizes the organization of the synthesis chip.
.FC "Figure 11.11"
Serial data enters directly from the read-only memories, although a control
signal from the processor begins synthesis and another signal is returned
to it upon termination.
The data is decoded into individual parameters, which are used to address
the quantization tables to generate the full 10-bit parameter
values.
These are interpolated from one frame to the next.
The lower part of the Figure shows the speech generation subsystem.
An excitation waveform for voiced speech is stored in read-only
memory and read out repeatedly at a rate determined by the pitch.
The source for unvoiced sounds is hard-limited noise provided by a digital
pseudo-random bit generator.
The sound source that is used depends on whether the pitch value is zero
or not:  notice that this precludes mixed excitation for voiced fricatives
(and the sound is noticeably poor in words like "zee").
A gain multiplication is performed before the signal is passed through the
lattice synthesis filter, described earlier.
.sh "11.4  Programmable signal processors"
.pp
The TI chip has a fixed architecture, and is destined forever
to implement the same vocal tract model \(em a 10'th order lattice filter.
A more recent device, the Programmable Digital Signal Processor
(Caldwell, 1980) from Telesensory Systems allows more flexibility
in the type of model.
.[
Caldwell 1980
.]
It can serve as a digital formant synthesizer or a linear predictive
synthesizer, and the order of model (number of formants, in the former case)
can be changed.
.pp
Before describing the PDSP, it is worth looking at an earlier microprocessor
which was designed for digital signal processing.
Some industry observers have said that this processor, the Intel 2920,
is to the analogue design engineer what the first microprocessor was to
the random logic engineer way back in the mists of time (early 1970's).
.rh "The 'analogue microprocessor'."
The 2920 is a digital microprocessor.
However, it contains an on-chip D/A converter, which can be used in
successive approximation fashion for A/D conversion under program control,
and its architecture is designed to aid digital signal processing calculations.
Although the precision of conversion is 9 bits, internal arithmetic is
done with 25 bits to accomodate the accumulation of round-off errors in
arithmetic operations.
An on-chip programmable read-only memory holds a 192-instruction program,
which is executed in sequence with no program jumps allowed.
This ensures that each pass through the program takes the same time,
so that the analogue waveform is regularly sampled and processed.
.pp
The device is implemented in n-channel MOS technology, which makes it
slightly faster than the pMOS Speak 'n Spell chip.
At its fastest operating speed each instruction takes 400 nsec.
The 192-instruction program therefore executes in 78.6\ $mu$sec, corresponding
to a sampling rate of almost 13\ kHz.
Thus the processor can handle signals with a bandwidth of 6.5\ kHz \(em ample
for high-quality speech.
However, a special EOP (end of program) instruction is provided which
causes an immediate jump back to the beginning.
Hence if the program occupies less than 192 instructions, faster sampling
rates can be used.
For example, a single second-order formant resonance
requires only 14 instructions and so can
be executed at over 150\ kHz.
.pp
Despite this speed, the 2920 is only marginally capable of synthesizing
speech.
Table 11.7 gives approximate numbers of instructions needed to do some
subtasks for speech generation (Hoff and Li, 1980).
.[
Hoff Li 1980 Software makes a big talker
.]
.RF
.nr x0 \w'parameter entry and data distribution0000'+\w'00000'
.nr x1 \w'instructions'
.nr x2 (\n(.l-\n(x0)/2
.in \n(x2u
.ta \w'parameter entry and data distribution0000'u
\l'\n(x0u\(ul'
.sp
task	\0\0\0\0\0\h'-\n(x1u'instructions
\l'\n(x0u\(ul'
.sp
parameter entry and data distribution	35\-40
glottal pulse generation	\0\0\0\08
noise generation	\0\0\011
lattice section	\0\0\020
formant filter	\0\0\014
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.in 0
.FG "Table 11.7  2920 instruction counts for typical speech subsystems"
The parameter entry and data distribution procedure
collects 10 8-bit parameters from a serial input stream, at a frame rate of
100 frames/s.
The parameter data rate is 8\ Kbit/s, and the routine assumes that the
2920 performs each complete cycle in 125\ $mu$sec to generate sampled speech
at 8\ kHz.
Therefore one bit of parameter data is accepted on every cycle.
The glottal pulse program generates an asymmetrical triangular waveform
(Chapter 5), while the noise generator uses a 17-bit pseudo-random feedback
shift register.
About 30% of the 192-instruction program memory is consumed by these
essential tasks.
A two-multiplier lattice section takes 20 instructions,
and so only six sections can fit into the remaining program space.
It may be possible to use two 2920's to implement a complete 10 or 12'th
order lattice, but the results of the first stage must be passed to the
second by transmitting analogue or digital data between each of the
2920's analogue ports \(em not a terribly satisfactory method.
.pp
Since a formant filter occupies only 14 instructions, up to nine of them
would fit in the program space left after the above-mentioned essential
subsystems.
Although other necessary house-keeping tasks may reduce this number
substantially,
it does seem possible to implement a formant synthesizer on a single 2920.
.rh "The Programmable Digital Signal Processor."
Whereas the 2920 is intended for general signal-processing jobs,
Telesensory Systems' PDSP
(Programmable Digital Signal Processor) is aimed specifically at speech
synthesis.
It comprises two separate chips, a control unit and an arithmetic unit.
To build a synthesizer these must be augmented with external memory
and a D/A converter, arranged in a configuration like that of Figure 11.12.
.FC "Figure 11.12"
.pp
The control unit accepts parameter data from a host computer, one byte at a time.
The data is temporarily held in buffer memory before being serialized and passed
to the arithmetic unit.
Notice that for the 2920 we assumed that parameters were presented
to the chip already serialized and precisely timed:  the PDSP control unit
effectively releases the host from this high-speed real-time operation.
But it does more.
It generates both a voiced and an unvoiced excitation source and passes them
to the arithmetic unit, to relieve the latter of the general-purpose
programming required for both these tasks and allow its instruction set
to be highly specialized for digital filtering.
.pp
The arithmetic unit has rather a peculiar structure.
It accomodates only 16 program steps and can execute the full 16-instruction
program at a rate of 10\ kHz.
The internal word-length is 18 bits, but coefficients and the digital output
are only 10 bits.
Each instruction can accomplish quite a lot of work.
Figure 11.13 shows that there are four separate blocks of store in addition
to the program memory.
.FC "Figure 11.13"
One location of each block is automatically associated with each program step.
Thus on instruction 2, for example, two 18-bit scratchpad registers MA(2)
and MB(2), and two 10-bit coefficient registers A1(2) and A2(2), are
accessible.
In addition five general registers, curiously numbered R1, R2, R5, R6, R7,
are available to every program step.
.pp
Each instruction has five fields.
A single instruction loads all the general registers and simultaneously
performs two multiplications and up to three additions.
The fields specify exactly which operands are involved in these operations.
.pp
The instructions of the PDSP arithmetic unit are really very powerful.
For example, a second-order digital formant resonator requires only
two program steps.
A two-multiplier lattice stage needs only one step, and
a complete 12-stage lattice filter can be implemented in the 16 steps available.
An important feature of the architecture is that it
is quite easy to incorporate more than one
arithmetic unit into a system, with a single control unit.
Intermediate data can be transferred digitally between arithmetic units
since the D/A converter is off-chip.
A four-multiplier normalized lattice (Chapter 6) with 12 stages can be implemented
on two arithmetic units, as can a lattice filter which incorporates zeros
as well as poles, and a complex series/parallel formant synthesizer
with a total of 12 resonators whose centre frequencies and bandwidths
can be controlled independently (Klatt, 1980).
.[
Klatt 1980
.]
.pp
How this device will fare in actual commercial products is yet to be seen.
It is certainly much more sophisticated than the TI Speak 'n Spell chip,
and a complete system will necessitate a much higher chip count and consequently
more expense.
Telesensory Systems are committed to producing a text-to-speech
system based upon it
for use both in a reading machine for the blind and as a text-input
speech-output computer peripheral.
.sh "11.5  References"
.LB "nnnn"
.[
$LIST$
.]
.LE "nnnn"
.bp
.ev2
.ta \w'\fIsilence\fR 'u +\w'.EH100'u +\w'(used to change amplitude and duration)00'u +\w'00000000000test word'u
.nr x0 \w'\fIsilence\fR '+\w'.EH100'+\w'(used to change amplitude and duration)00'+\w'00000000000test word'
\l'\n(x0u\(ul'
.sp
.nr x1 (\w'Votrax'/2)
.nr x2 (\w'duration (msec)'/2)
.nr x3 \w'test word'
	\h'-\n(x1u'Votrax		\0\h'-\n(x2u'duration (msec)	\h'-\n(x3u'test word
\l'\n(x0u\(ul'
.sp
.nr x3 \w'hid'
\fIi\fR	I		118	\h'-\n(x3u'hid
	I1	(sound equivalent of I)	\083
	I2	(sound equivalent of I)	\058
	I3	(allophone of I)	\058
	.I3	(sound equivalent of I3)	\083
	AY	(allophone of I)	\065
.nr x3 \w'head'
\fIe\fR	EH		118	\h'-\n(x3u'head
	EH1	(sound equivalent of EH)	\070
	EH2	(sound equivalent of EH)	\060
	EH3	(allophone of EH)	\060
	.EH2	(sound equivalent of EH3)	\070
	A1	(allophone of EH)	100
	A2	(sound equivalent of A1)	\095
.nr x3 \w'had'
\fIaa\fR	AE		100	\h'-\n(x3u'had
	AE1	(sound equivalent of AE)	100
.nr x3 \w'hod'
\fIo\fR	AW		235	\h'-\n(x3u'hod
	AW2	(sound equivalent of AW)	\090
	AW1	(allophone of AW)	143
.nr x3 \w'hood'
\fIu\fR	OO		178	\h'-\n(x3u'hood
	OO1	(sound equivalent of OO)	103
	IU	(allophone of OO)	\063
.nr x3 \w'hud'
\fIa\fR	UH		103	\h'-\n(x3u'hud
	UH1	(sound equivalent of UH)	\095
	UH2	(sound equivalent of UH)	\050
	UH3	(allophone of UH)	\070
	.UH3	(sound equivalent of UH3)	103
	.UH2	(allophone of UH)	\060
.nr x3 \w'hard'
\fIar\fR	AH1		143	\h'-\n(x3u'hard
	AH2	(sound equivalent of AH1)	\070
.nr x3 \w'hawed'
\fIaw\fR	O		178	\h'-\n(x3u'hawed
	O1	(sound equivalent of O)	118
	O2	(sound equivalent of O)	\083
	.O	(allophone of O)	178
	.O1	(sound equivalent of .O)	123
	.O2	(sound equivalent of .O)	\090
.nr x3 \w'who d'
\fIuu\fR	U		178	\h'-\n(x3u'who'd
	U1	(sound equivalent of U)	\090
.nr x3 \w'heard'
\fIer\fR	ER		143	\h'-\n(x3u'heard
.nr x3 \w'heed'
\fIee\fR	E		178	\h'-\n(x3u'heed
	E1	(sound equivalent of E)	118
\fIr\fR	R		\090
	.R	(allophone of R)	\050
\fIw\fR	W		\083
	.W	(allophone of W)	\083
\l'\n(x0u\(ul'
.sp3
.ce
Table 11.2  Votrax sound segments and their durations
.bp
\l'\n(x0u\(ul'
.sp
.nr x1 (\w'Votrax'/2)
.nr x2 (\w'duration (msec)'/2)
.nr x3 \w'test word'
	\h'-\n(1u'Votrax		\0\h'-\n(x2u'duration (msec)	\h'-\n(x3u'test word
\l'\n(x0u\(ul'
.sp
\fIl\fR	L		105
	L1	(allophone of L)	105
\fIy\fR	Y		103
	Y1	(allophone of Y)	\083
\fIm\fR	M		105
\fIb\fR	B		\070
\fIp\fR	P		100
	.PH	(aspiration burst for use with P)	\088
\fIn\fR	N		\083
\fId\fR	D		\050
	.D	(allophone of D)	\053
\fIt\fR	T		\090
	DT	(allophone of T)	\050
	.S	(aspiration burst for use with T)	\070
\fIng\fR	NG		120
\fIg\fR	G		\075
	.G	(allophone of G)	\075
\fIk\fR	K		\075
	.K	(allophone of K)	\080
	.X1	(aspiration burst for use with K)	\068
\fIs\fR	S		\090
\fIz\fR	Z		\070
\fIsh\fR	SH		118
	CH	(allophone of SH)	\055
\fIzh\fR	ZH		\090
	J	(allophone of ZH)	\050
\fIf\fR	F		100
\fIv\fR	V		\070
\fIth\fR	TH		\070
\fIdh\fR	THV		\070
\fIh\fR	H		\070
	H1	(allophone of H)	\070
	.H1	(allophone of H)	\048
\fIsilence\fR	PA0		\045
	PA1		175
	.PA1		\0\05

	.PA2 (used to change amplitude and duration)	\0\0\-
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.sp3
.ce
Table 11.2  (continued)
.bp
.ta 0.8i +2.6i +\w'(AH1 .UH2)  (O U)000'u
.nr x0 0.8i+2.6i+\w'(AH1 .UH2)  (O U)000'+\w'; i uh  \- here'
\l'\n(x0u\(ul'
.sp
vowel clusters
	EH I	A1 AY	; e i  \- hey
	UH OO	O U	; uh u  \- ho
	AE I	(AH1 EH3) I	; aa i  \- hi
	AE OO	(AH1 .UH2) (O U)	; aa u  \- how
	AW I	(O UH) E	; o i  \- hoi
	I UH	E I	; i uh  \- here
	EH UH	(EH A1) EH	; e uh  \- hair
	OO UH	OO UH	; u uh  \- poor
	Y U	Y1 (IU U)
.sp
vowel transitions
	{F M B P} O	(.O1 O)
	{L R} EH	(EH3 EH)
	{B K T D R} UH	(UH3 UH)
	{T D} A1	(EH3 A1)
	{T D} AW	(AH1 AW)
	{W} I	(I3 I)
	{G SH W K} OO	(IU OO)
	AY {K G T D}	(AY Y)
	E {M T}	(E Y)
	I {M T}	(I Y)
	E {L}	(I3 UH)
	EH {R N S D T}	(EH EH3)
	I {R T}	(I I3)
	AE {S N}	(AE EH)
	AE {K}	(AE EH3)
	A1 {R}	(A1 EH1)
	AH1 {R P K}	(AH1 UH)
	AH1 {ZH}	(AH1 EH3)
.sp
intervocalics
	{voiced} T {voiced}	DT
.sp
consonant transitions
	L {EH}	L1
	H {U OO IU}	H1
\l'\n(x0u\(ul'
.sp3
.ce
Table 11.5  Contextual rules for Votrax sound segments
.bp
\l'\n(x0u\(ul'
.sp
consonant clusters
	B {stop-consonant}	(B PA0)
	P {stop-consonant}	(P PA0)
	D {stop-consonant}	(D PA0)
	T {stop-consonant}	(T PA0)
	DT {stop-consonant}	(T PA0)
	G {stop-consonant}	(G PA0)
	K {stop-consonant}	(K PA0)
	{D T} R	(.X1 R)
	K R	.K (.X1 R)
	{consonant} R	.R
	{consonant} L	L1
	K W	.K .W
	D ZH	D J
	T SH	T CH
.sp
initial effects
	{.syll} P {vowel}	(P .PH)
	{.syll} K {vowel}	(K .H1)
	{.syll} T {vowel}	(T .S)
	{.syll} L	L1
	{.syll} H {U OO O AW AH1}	H1
.sp
terminal effects
	E {PA0}	(E Y)
\l'\n(x0u\(ul'
.ta 0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i +0.8i
.sp3
.ce
Table 11.5  (continued)
.ev

<Y 1874>
<A T. HARDY>
<T Madding Crowd(Penguin 1978)>
<C i>
<P 51>
DESCRIPTION OF FARMER OAK -- AN INCIDENT
When Farmer Oak smiled, the corners of his mouth
spread till they were within an unimportant distance of
his ears, his eyes were reduced to chinks, and diverging
wrinkles appeared round them, extending upon his
countenance like the rays in a rudimentary sketch of
the rising sun.
His Christian name was Gabriel, and on working
days he was a young man of sound judgment, easy
motions, proper dress, and general good character. On
Sundays he was a man of misty views, rather given to
postponing, and hampered by his best clothes and
umbrella : upon the whole, one who felt himself to
occupy morally that vast middle space of Laodicean
neutrality which lay between the Communion people
of the parish and the drunken section, -- that is, he went
to church, but yawned privately by the time the con+
gegation reached the Nicene creed,- and thought of
what there would be for dinner when he meant to be
listening to the sermon. Or, to state his character as
it stood in the scale of public opinion, when his friends
and critics were in tantrums, he was considered rather a
bad man ; when they were pleased, he was rather a good
man ; when they were neither, he was a man whose
moral colour was a kind of pepper-and-salt mixture.
Since he lived six times as many working-days as
Sundays, Oak's appearance in his old clothes was most
peculiarly his own -- the mental picture formed by his
neighbours in imagining him being always dressed in
that way. He wore a low-crowned felt hat, spread out
at the base by tight jamming upon the head for security
in high winds, and a coat like Dr. Johnson's ; his lower
extremities being encased in ordinary leather leggings
and boots emphatically large, affording to each foot a
roomy apartment so constructed that any wearer might
stand in a river all day long and know nothing of
<P 52>
damp -- their maker being a conscientious man who
endeavoured to compensate for any weakness in his cut
by unstinted dimension and solidity.
Mr. Oak 'carried 'about him, by way of watch,+
what may be called a small silver clock; in other
words, it was a watch as to shape and intention, and
a small clock as to size. This instrument being several
years older than Oak's grandfather, had the peculiarity
of going either too fast or not at all. The smaller
of its hands, too, occasionally slipped round on the
pivot, and thus, though the minutes were told with
precision, nobody could be quite certain of the hour
they belonged to. The stopping peculiarity of his
watch Oak remedied by thumps and shakes, and he
escaped any evil consequences from the other two
defects by constant comparisons with and observations
of the sun and stars, and by pressing his face close
to the glass of his neighbours' windows, till he could
discern the hour marked by the green-faced timekeepers
within. It may be mentioned that Oak's fob being
difficult of access, by reason of its somewhat high
situation in the waistband of his trousers (which also
lay at a remote height under his waistcoat), the watch
was as a necessity pulled out by throwing the body to
one-side, compressing the- mouth and face to a mere
mass of- ruddy flesh- on account -of the exertion, and
drawing up the watch by its chain, like a bucket from a
well.
But some thoughtfull persons, who had seen him
walking across one of his fields on a certain December
morning -- sunny and exceedingly mild -- might have
regarded Gabriel Oak in other aspects than these. In
his face one might notice that many of the hues and
curves of youth had tarried on to manhood: there even
remained in his remoter crannies some relics of the boy.
His height and breadth would have been sufficient to
make his presence imposing, had they been exhibited
with due consideration. But there is a way some men
have, rural and urban alike, for which the mind is more
responsible than flesh and sinew : it is a way of curtail+
ing their dimensions by their manner of showing them.
And from a quiet modesty that would have become a
vestal which seemed continually to impress upon him
<P 53>
that he had no great claim on the world's room, Oak
walked unassumingly and with a faintly perceptible
bend, yet distinct from a bowing of the shoulders.
This may be said to be a defect in an individual if he
depends for his valuation more upon his appearance
than upon his capacity to wear well, which Oak did not.
He had just reached the time of life at which " young'
is ceasing to be the prefix of "man ' in speaking of one.
He was at the brightest period of masculine growth,
for his intellect and his emotions were clearly separated :
he had passed the time during which the influence of
youth indiscriminately mingles them in the character
of impulse, and he had not yet arrived at the stage
wherein they become united again, in the character of
prejudice, by the influence of a wife and family. In
short, he was twenty-eight, and a bachelor.
The field he was in this morning sloped to a
ridge called Norcombe Hill. Through a spur of this
hill ran the highway between Emminster and Chalk+
Newton. Casually glancing over the hedge, Oak saw
coming down the incline before him an ornamental
spring waggon, painted yellow and gaily marked,
drawn by two horses, a waggoner walking alongside
bearing a whip perpendicularly. The waggon was
laden with household goods and window plants, and
on the apex of the whole sat a woman, 'young-'and
attractive. Gabriel had not beheld the sight for more
than half a minute, when the vehicle was brought to a
standstill just beneath his eyes.
" The tailboard of the waggon is gone, Miss,' said the
waggoner.
"Then I heard it fall,' said the girl, in a soft, though
not particularly low voice. "I heard a noise I could
not account for when we were coming up the hill.'
"I'll run back.' +
" Do,' she answered. +
The sensible horses stood -- perfectly still, and the
waggoner's steps sank fainter and fainter in the distance.
The girl on the summit of the load sat motionless,
surrounded by tables and chairs with their legs upwards,
backed by an oak settle, and ornamented in front by
pots of geraniums, myrtles, and cactuses, together with
<P 54>
a caged canary -- all probably from the windows of the
house just vacated. There was also a cat in a willow
basket, from the partly-opened lid of which she gazed
with half-closed eyes, and affectionately-surveyed the
small birds around.
The handsome girl waited for some time idly in her
place, and the only sound heard in the stillness-was -the
hopping of the canary up-and down the perches of its
prison. Then she looked attentively downwards. It
was not at the bird, nor at the cat; it was at an oblong
package tied in paper, and lying between them. She
turned her head to learn if the waggoner were coming.
He was not yet in sight; and her-eyes crept back to
the package, her thoughts seeming to run 'upon what
was inside it. At length she drew the article into her
lap, and untied the paper covering; a small swing
looking-glass was disclosed, in which she proceeded to
survey herself attentively. She parted her lips and
smiled.
It was a fine morning, and the sun lighted up to a
scarlet glow the crimson jacket she wore, and painted
a soft lustre upon her bright face and dark hair. The
myrtles, geraniums, and cactuses packed around her
were fresh and green, and at such a leafless season they
invested the whole concern of horses, waggon, furniture,
and girl with a peculiar vernal charm. What possessed
her to indulge in such a performance in the sight of the
sparrows, blackbirds, and unperceived farmer who were
alone its spectators, -- whether the smile began as a
factitious one, to test her capacity in that art, -- nobody
knows ; it ended certainly in a real smile. She blushed
at herself, and seeing her reflection blush, blushed the
more.
The change from the customary spot and necessary
occasion of such an act -- from the dressing hour in a
bedroom to a time of travelling out of doors -- lent to
the idle deed a novelty it did not intrinsically possess.
The picture was a delicate one. Woman's prescriptive
infirmity had stalked into the sunlight, which had
clothed it in the freshness of an originality. A
cynical inference was irresistitle by Gabriel Oak as he
regarded the scene, generous though he fain would have
been. There was no necessity whatever for her looking
in the glass. She did not adjust her hat, or pat her
<P 55>
hair, or press a dimple into shape, or do one thing to
signify that any such intention had been her motive in
taking up the glass. She simply observed herself as a
fair product of Nature in the feminine kind, her thoughts
seeming to glide into far-off though likely dramas in
which men would play a part -- vistas of probable
triumphs -- the smiles being of a phase suggesting that
hearts were imagined as lost and won. Still, this was
but conjecture, and the whole series of actions was so
idly put forth as to make it rash to assert that intention
had any part in them at all.
The waggoner's steps were heard returning. She
put the glass in the paper, and the whole again into its
place.
When the waggon had passed on, Gabriel withdrew
from his point of espial, and descending into the road,
followed the vehicle to the turnpike-gate some way
beyond the bottom of the hill, where the object of his
contemplation now halted for the payment of toll. About
twenty steps still remained between him and the gate,
when he heard a dispute. lt was a difference con+
cerning twopence between the persons with the waggon
and the man at the toll-bar.
" Mis'ess's niece is upon the top of the things, and
she says that's enough that I've offered ye, you great
miser, and she won't pay any more.' These were the
waggoner's words.
"Very well ; then mis'ess's niece can't pass,' said the
turnpike-keeper, closing the gate.
Oak looked from one to the other of the disputants,
and fell into a reverie. There was something in the
tone of twopence remarkably insignificant. Threepence
had a definite value as money -- it was an appreciable
infringement on a day's wages, and, as such, a higgling
matter ; but twopence --  -- " Here,' he said, stepping
forward and handing twopence to the gatekeeper ; "let
the young woman pass.' He looked up at her then;
she heard his words, and looked down.
Gabriel's features adhered throughout their form so
exactly to the middle line between the beauty of St.
John and the ugliness of Judas Iscariot, as represented
in a window of the church he attended, that not a single
lineament could be selected and called worthy either of
distinction or notoriety. The redjacketed and dark+
<P 56>
haired maiden seemed to think so too, for she carelessly
glanced over him, and told her man to drive on. She
might have looked her thanks to Gabriel on a minute
scale, but she did not speak them; more probably she
felt none, for in gaining her a passage he had lost her
her point, and we know how women take a favour of
that kind.
The gatekeeper surveyed the retreating vehicle.
" That's a handsome maid ' he said to Oak
" But she has her faults,' said Gabriel.
" True, farmer. '
"And the greatest of them is -- well, what it is
always.'
" Beating people down ? ay, 'tis so.'
"O no.'
" What, then ? '
Gabriel, perhaps a little piqued by the comely
traveller's indifference, glanced back to where he had
witnessed her performance over the hedge, and said,
" Vanity.'
<C ii>
<P 57>
NIGHT -- THE FLOCK -- AN INIERIOR -- ANOTHER INTERIOR
IT was nearly midnight on the eve of St. Thomas"s, the
shortest day in the year. A desolating wind wandered
from the north over the hill whereon Oak had watched
the yellow waggon and its occupant in the sunshine of
a few days earlier.
  Norcombe Hill -- not far from lonely Toller-Down
 -- was one of the spots which suggest to a passer-by
that he is in the presence of a shape approaching the
indestructible as nearly as any to be found on earth.
It was a featureless convexity of chalk and soil -- an
ordinary specimen of those smoothly-outlined protuber+
ances of the globe which may remain undisturbed on
some great day of confusion, when far grander heights
and dizzy granite precipices topple down.
The hill was covered on its northern side by an
ancient and decaying plantation of beeches, whose
upper verge formed a line over the crest, fringing its
arched curve against the sky, like a mane. To-night
these trees sheltered the southern slope from the keenest
blasts, which smote the wood and floundered through
it with a sound as of grumbling, or gushed over its
crowning boughs in a weakened moan. The dry leaves
in the ditch simmered and boiled in the same breezes,
a tongue of air occasionally ferreting out a few, and
sending them spinning across the grass. A group or
two of the latest in date amongst the dead multitude
had remained till this very mid-winter time on the twigs
which bore them and in falling rattled against the trunks
with smart taps:
Betwenne this half-wooded, half naked hill, and the
vague still horizon that its summit indistinctly com+
manded, was a mysterious sheet of fathomless shade
 -- the sounds from which suggested that what it con+
cealed bore some reduced resemblance to features here.
<P 58>
The thin grasses, more or less coating the hill, were
touched by the wind in breezes of differing powers, and
almost of differing natures -- one rubbing the blades
heavily, another raking them piercingly, another brushing
them like a soft broom. The instinctive act of human+
kind was to stand and listen, and learn how the trees
to each other in the regular antiphonies of a cathedral
choir; how hedges and other shapes to leeward them
caught the note, lowering it to the tenderest sob; and
how the hurrying gust then plunged into the south, to
be heard no more.
The sky was clear -- remarkably clear -- and the
twinkling of all the stars seemed to be but throbs of
one body, timed by a common pulse. The North Star
was directly in the wind's eye, and since evening the
Bear had swung round it outwardly to the east, till he
was now at a right angle with the meridian. A
difference of colour in the stars -- oftener read of than
seen in England-was really perceptible here. The
sovereign brilliancy of Sirius pierced the eye with a steely
glitter, the star called Capella was yellow, Aldebaran and
Betelgueux shone with a fiery red.
To persons standing alone on a hill during a clear
midnight such as this, the roll of the world eastward is
almost a palpable movement. The sensation may be
caused by the panoramic glide of the stars past earthly
objects, which is perceptible in a few minutes of still+
ness, or by the better outlook upon space that a hill
affords, or by the wind, or by the solitude ; but whatever
be its origin, the impression of riding along is vivid and
abiding. The poetry of motion is a phrase much in
use, and to enjoy the epic form of that gratification it
is necessary to stand on a hill at a small hour of the
night, and, having first expanded with a sense of differ+
ence from the mass of civilised mankind, who are
dreamwrapt and disregardful of all such proceedings at
this time, long and quietly watch your stately progress
through the stars. After such a nocturnal reconnoitre
it is hard to get back to earth, and to believe that the
consciousness of such majestic speeding is derived from
a tiny human frame.
Suddenly an unexpected series of sounds began to
<P 59>
be heard
in this place up against the sky. They had a
clearness which was to be found nowhere in the wind,
and a sequence which was to be found nowhere in
nature. They were the notes of Farmer Oak's flute.
The tune was not floating unhindered into the open
air : it seemed muffled in some way, and was altogether
too curtailed in power to spread high or wide. It came
from the direction of a small dark object under the
plantation hedge -- a shepherd's hut -- now presenting
an outline to which an uninitiated person might have
been puzzled to attach either meaning or use.
The image as a whole was that of a small Noah's
Ark on a small Ararat, allowing the traditionary outlines
and general form of the Ark which are followed by toy+
makers -- and by these means are established in men's
imaginations among their firmest, because earliest im+
pressions -- to pass as an approximate pattern. The
hut stood on little wheels, which raised its floor about a
foot from the ground. Such shepherds' huts are dragged
into the fields when the lambing season comes on, to
shelter the shepherd in his- enforced nightly attendance.
It was only latterly that people had begun to call
Gabriel !Farmer' Oak. During the twelvemonth pre+
ceding this time he had been enabled by sustained
efforts of industry and chronic good spirits to lease the
small shepp farm of which Norcombe Hill was a portion,
and stock it with two hundred sheep. Previously he
had been a bailiff for a short time, and earlier still a
shepherd only, having from his childhood assisted his
father in tending the floeks of large proprietors, till old
Gabriel sank to rest.
This venture, unaided and alone, into the paths of
farming as master and not as man, with an advance of
sheep not yet paid for, was a critical juncture with
Gabriel Oak, and he recognised his position clearly.
The first movement in his new progress was the lambing
of his ewes, and sheep having been his speciality from
his "youth, he wisely refrained from deputing -- the task
of tending them at this season to a hireling or a novice.
The wind continued to beat-about the corners of the
hut, but the flute-playing ceased. A rectangular space
of light
<P 60>
appeared in the side of the hut, and in the
opening the outline of Farmer Oak's figure. He carried
a lantern in his hand, and closing the door behind him,
came forward and busied himself about this nook of the
field for nearly twenty minutes, the lantern light appear+
ing and disappearing here and there, and brightening
him or darkening him as he stood before or behind it.
Oak's motions, though they had a quiet-energy, were
slow, and their deliberateness accorded well with his
occupation. Fitness being the basis of beauty, nobody
could-have denied that his steady swings and turns"
in and- about the flock had elements of grace, Yet,
although if occasion demanded he could do or think a
thing with as mercurial a dash as can the men of towns
who are more to the manner born, his special power,
morally, physically, and mentally, was static, owing
little or nothing to momentum as a rule.
A close examination of the ground hereabout, even
by the wan starlight only, revealed how a portion of
what would have been casually called a wild slope had
been appropriated by Farmer Oak for his great purpose
this winter. Detached hurdles thatched with straw
were stuck into the ground at various scattered points,
amid and under which the whitish forms of his meek
ewes moved and rustled. The ring of the sheep-bell,
which had been silent during his absence, recommenced,
in tones that had more mellowness than clearness, owing
to an increasing growth of surrounding wool. This
continued till Oak withdrew again from the flock. He
 --  returned to the hut, bringing in his arms a new-born
lamb, consisting of four legs large enough for a full+
grown sheep, united by a seemingly inconsiderable mem+
brane about half the substance of the legs collectively,
which constituted the animal's entire body just at present.
The little speck of life he placed on a wisp of hay
before the small stove, where a can of milk was simmer+
ing. Oak extinguished the lantern by blowing into it
and then pinching the snuff, the cot being lighted
by a candle suspended by a twisted wire. A rather
hard couch, formed of a few corn sacks thrown carelessly
down, covered half the floor of this little
<P 61>
habitation, and
here the young man stretched himself along, loosened
his woollen cravat, and closed his eyes. In about the
time a person unaccustomed to bodily labour would have
decided upon which side to lie, Farmer Oak was asleep.
The inside of the hut, as it now presented itself, was
cosy and alluring, and the scarlet handful of fire in
addition to the candle, reflecting its own genial colour
upon whatever it could reach, flung associations of
enjoyment even over utensils and tools. In the corner
stood the sheep-crook, and along a shelf at one side
were ranged bottles and canisters of the simple prepara+
tions pertaining to ovine surgery and physic; spirits of
wine, turpentine, tar, magnesia, ginger, and castor-oil
being the chief. On a triangular shelf across the corner
stood bread, bacon, cheese, and a cup for ale or cider,
which was supplied from a flagon beneath. Beside the
provisions lay the flute whose notes had lately been
called forth by the lonely watcher to beguile a tedious
hour. The house was ventilated by two round holes,
like the lights of a ship's cabin, with wood slides+
The lamb, revived by the warmth' began to bleat'
instant meaning, as expected sounds will. Passing
from the profoundest sleep to the most alert wakefulness
with the same ease that had accompanied the reverse
operation, he looked at his watch, found that the hour+
hand had shifted again, put on his hat, took the lamb
in his arms, and carried it into the darkness. After
placing the little creature with its mother, he stood and
carefully examined the sky, to ascertain the time of
night from the altitudes of the stars.
The Dog-star and Aldebaran, pointing to the restless
Pleiades, were half-way up the Southern sky, and between
them hung Orion, which gorgeous constellation never
burnt more vividly than now, as it soared forth above
the rim of the landscape. Castor and Pollux will
the north-west; far away through the plantation Vega
and Cassiopeia's chair stood daintily poised on the
uppermost boughs.
<P 62>
"One o'clock,' said Gabriel.
Being a man not without a frequent consciousness
that there was some charm in this life he led, he stood
still after looking at the sky as a useful instrument, and
regarded it in an appreciative spirit, as a work of art
superlatively beautiful. For a moment he seemed
impressed with the speaking loneliness of the scene, or
rather with the complete abstraction from all its compass
of the sights and sounds of man. Human shapes,interferences,
troubles, and joys were all as if they were not, and there
seemed to be on the shaded hemisphere of the globe no sentient being
save himself; he could fancy them all gone round to the sunny side.
  Occupied this, with eyes stretched afar, Oak gradually per+
ceived that what he had previously taken to be a star low
down behind the outskirts of the plantation was in reality no
such thing. It was an artificial light, almost close at hand.
 To find themselves utterly alone at night where company
is desirable and expected makes some people fearful; but a
case more trying by far to the nerves is to discover some
mysterious companionship when intuition, sensation, memory,
analogy, testimony, probability, induction -- every kind of
evidence in the logician's list -- have united to persuade con+
sciousness that it is quite in isolation.
 Farmer Oak went towards the plantation and pushed
through its lower boughs to the windy side. A dim mass under
the slope reminded him that a shed occupied a place here,
the site being a cutting into the slope of the hill, so that at
its back part the roof was almost level with the ground. In
front it was formed of board nailed to posts and covered with
tar as apreservative. Through crevices in the roof and side
spread streaks and spots of light, a combination of which made
the radiance that had attracted him. Oak stepped up behind,
where,leaning down upon the roof and putting his eye close
to a hole, he could see into the interior clearly.
 The place contained two women and two cows. By the side
of the latter a steaming bran-mash stood in a bucket. One
of the women was past middle age. Her companion was ap+
parently young and graceful; he could form no decided opinion
<P 63>
upon her looks, her position being almost beneath his eye, so
that he saw her in a bird's-eye view, as Milton's Satan first saw
Paradise. She wore no bonnet or het, but had enveloped her+
self in a large cloak, which was carelessly flung over her head
as a covering.
 "There, now we'll go home," said the elder of the two, resting
 her knuckles upon her hips, and looking at their goings-on as
a whole. "I do hope Daisy will fetch round again now. I have
never been more frightened in my life, but I don't mind break+
ing my rest if she recovers."
 The young woman, whose eyelids were apparently inclined
to fall together on the smallest provocation of silence,yawned
in sympathy.
 "I wish we were rich enough to pay a man to do these
things," she said.
 "As we are not, we must do them ourselves," said the other;
"for you must help me if you stay."
"Well, my hat is gone, however," continued the younger. "It
went over the hedge, I think. The idea of such a slight wind
catching it."
 The cow standing erect was of the Devon breed, and was
encased in a tight warm hide of rich Indian red, as absolutely
uniform from eyes to tail as if the animal had been dipped in
a dye of that colour, her long back being mathematically level.
The other was spotted,grey and white. Beside her Oak now
noticed a little calf about a day old, looking idiotically at
the two women, which showed that it had not long been
accustomed to the phenomenon of eyesight, and often turn+
ing to the lantern, which it apparently mistook for the moon.
inherited instinct having as yet had little time for correction
by experience. Between the sheep and the cows Lucina had
been busy on Norcombe hill lately.
 "I think we had better send for some oatmeal," said the
"Yes, aunt; and I'll ride over for it as soon as it is
light. '
" But there's no side-saddle.'
<P 64>
"I can ride on the other : trust me.'
Oak, upon hearing these remarks, became more
curious to observe her features, but this prospect being
denied him by the hooding efect of the cloak, and by his
aerial position, he felt himself drawing upon his fancy
for their details. In making even horizontal and clear
inspections we colour and mould according to the warts
within us whatever our eyes bring in. Had Gabriel
been able from the first to get a distinct view of her +
countenance, his estimate of it as very handsome or
slightly so would have been as his soul required a
divinity at the moment or was ready supplied with one.
Having for some time known the want of a satisfactory
form to fill an increasing void within him, his position
moreover affording the widest scope for his fancy, he
painted her a beauty.
By one of those whimsical coincidences in which
Nature, like a busy mother, seems to spare a moment
from her unremitting labours to turn and make her
children smile, the girl now dropped the cloak, and
forth tumbled ropes of black hair over a red jacket.
Oak knew her instantly as the heroine of the yellow
waggon, myrtles, and looking-glass : prosily, as the
woman who owed him twopence.
They placed the calf beside its mother again, took
up the lantern, and went out, the light sinking down
the hill till it was no more than a nebula. Gabriel
Oak returned to his flock.
<C iii>
<P 65>
A GIRL ON HORSEBACK -- CONVERSATION
THE sluggish day began to break. Even its position
terrestrially is one of the elements of a new interest,
and for no particular reason save that the incident of
the night had occurred there, Oak went again into
the plantation. Lingering and musing here, he heard
the steps of a horse at the foot of the hill, and soon
there appeared in view an auburn pony with a girl on
its back, ascending by the path leading past the cattle+
shed. She was the young woman of the night before.
Gabriel instantly thought of the hat she had mentioned
as having lost in the wind; possibly she had come to
look for it. He hastily scanned the ditch and after
walking about ten yards along it, found the hat among the
leaves. Gabriel took it in his hand and returned to his
hut. Here he ensconced himself, and peeped through
the loophole in the direction of the riders approach.
She came up and looked around -- then on the other
side of the hedge. Gabriel was about to advance and
restore the missing article when an unexpected per+
formance induced him to suspend the action for the
present. The path, after passing the cowshed, bisected
the plantation. It was not a bridle-path -- merely a
pedestrian's track, and the boughs spread horizontally
at a height not greater than seven feet above the ground,
which made it impossible to ride erect beneath them.
The girl, who wore no riding-habit, looked around for
a moment, as if to assure herself that all humanity was
out of view, then dexterously dropped backwards flat
upon the pony's back, her head over its tail, her feet
against its shoulders, and her eyes to the sky. The
rapidity of her glide into this position was that of a
kingfisher -- its noiselessness that of a hawk. Gabriel's
eyes had scarcely been able to follow her. The tall lank
pony seemed used to such doings, and ambled
<P 66>
along unconcerned. Thus she passed under the level boughs.
The performer seemed quite at home anywhere
between a horse's head and its tail, and the necessity
for this abnormal attitude having ceased with the
passage of the plantation, she began to adopt another,
even more obviously convenient than the first. She had
no side-saddle, and it was very apparent that a firm
seat upon the smooth leather beneath her was un+
attainable sideways. Springing to her accustomed
perpendicular like a bowed sapling, and satisfying her,
self that nobody was in sight, she seated herself in the
manner demanded by the saddle, though hardly expected
of the woman, and trotted off in the direction of Tewnell
Mill.
Oak was amused, perhaps a little astonished, and
hanging up the hat in his hut, went again among his
ewes. An hour passed, the girl returned, properly
seated now, with a bag of bran in front of her. On
nearing the cattle-shed she was met by a boy bringing
a milking-pail, who held the reins of the pony whilst
she slid off. The boy led away the horse, leaving the
pail with the young woman.
Soon soft spirts alternating with loud spirts came
in regular succession from within the shed, the obvious
sounds of a person milking a cow. Gabriel took the
lost hat in his hand, and waited beside the path she
would follow in leaving the hill.
She came, the pail in one hand, hanging against her
knee. The left arm was extended as a balance, enough
of it being shown bare to make Oak wish that the event
ha happened in the summer, when the whole would
have been revealed. There was a bright air and manner
about her now, by which she seemed to imply that the
desirability of her existence could not be questioned;
and this rather saucy assumption failed in being offensive,
because a beholder felt it to be, upon the whole, true.
Like exceptional emphasis in the tone of a genius, that
which would have made mediocrity ridiculous was an
addition to recognised power. It was with some
surprise that she saw Gabriel's face rising like the
moon behind the hedge.
The adjustment of the farmer's hazy conceptions of
her
<P 67>
charms to the portrait of herself she now presented
him with was less a diminuition than a difference. The
starting-point selected by the judgment was. her height
She seemed tall, but the pail was a small one, and the
hedge diminutive; hence, making allowance for error
by comparison with these, she could have been not
above the height to be chosen by women as best. All
features of consequence were severe and regular. It
may have been observed by persons who go about the
shires with eyes for beauty, that in Englishwoman a
classically-formed face is seldom found to be united
with a figure of the same pattern, the highly-finished
features being generally too large for the remainder of
the frame ; that a graceful and proportionate figure of
eight heads usually goes off into random facial curves.
Without throwing a Nymphean tissue over a milkmaid,
let it be said that here criticism checked itself as out
of place, and looked at her proportions with a long
consciousness of pleasure. From the contours of her
figure in its upper part, she must have had a beautiful
neek and shoulders ; but since her infancy nobody had
ever seen them. Had she been put into a low dress
she would have run and thrust her head into a bush.
Yet she was not a shy girl by any means; it was merely
her instinct to draw the line dividing the seen from the
unseen higher than they do it in towns.
That the girl's thoughts hovered about her face
and form as soon as she caught Oak's eyes conning the
same page was natural, and almost certain. The self+
consciousness shown would have been vanity if a little
more pronounced, dignity if a little less. Rays of male
vision seem to have a tickling effect upon virgin faces
in rural districts ; she brushed hers with her hand, as if
Gabriel had been irritating its pink surface by actual
touch, and the free air of her previous movements was
reduced at the same time to a chastened phase of
itself. Yet it was the man who blushed, the maid not
at all.
" I found a hat,' said Oak.
" It is mine,' said she, and, from a sense of proportion,
kept down to a small smile an inclination to laugh dis+
tinctly : "it flew away last night.'
" One o'clock this morning ? '
<P 68>
" Well -- it was.' She was surprised. " How did you
know ? ' she said.
" I was here.'
" You are Farmer Oak, are you not ? '
" That or thereabouts. I'm lately come to this place.'
" A large farm ? ' she inquired, casting her eyes round,
and swinging back her hair, which was black in the
shaded hollows of its mass; but it being now an hour
past sunrise, the rays touched its prominent curves with
a colour of their own.
" No ; not large. About a hundred.' (In speaking
of farms the word "acres ' is omitted by the natives, by
analogy to such old expressions as "a stag of ten.')
' "I wanted my hat this morning,' she went on.
had to ride to Tewnell Mill.'
"Yes you had.'
"How do you know?'
"I saw you!
"Where?' she inquired, a misgiving bringing every
muscle of her lineaments and frame to a standstill.
"Here-going through the plantation, and all down
the hill,' said Farmer Oak, with an aspect excessively
knowing with regard to some matter in his mind, as he
gazed at a remote point in the direction named, and then
turned back to meet his colloquist's eyes.
A perception caused him to withdraw his own eyes
from hers as suddenly as if he had been caught in a
theft. Recollection of the strange antics she had
indulged in when passing through the trees, was suc+
ceeded in the girl by a nettled palpitation, and that' by
a hot face. It was a time to see a woman redden who
was not given to reddening s a rule; not a point in
the milkmaid but was of the deepest rose-colour. From
the Maiden's Blush, through all varieties of the Provence
down to the Crimson Tuscany, the countenance of Oak's
acquaintance quickly graduated ; whereupon he, in con+
siderateness, turned away his head.
The sympathetic man still looked the other way, and
wondered when she would recover coolness sufficient to
justify him in facing her again. He heard what seemed
to be the flitting of a
<P 69>
dead leaf upon the breeze, and
looked. She had gone away.
With an air between that of Tragedy and Comedy !
Gabriel returned to his work.
Five mornings and evenings passed. The young
woman came regularly to milk the healthy cow or to
attend to the sick one, but never allowed her vision to
stray in the direction of Oak's person. His want of
tact had deeply offended her -- not by seeing what he
could not help, but by letting her know that he had
seen it. For, as without law there is no sin, without
eyes there is no indecorum; and she appeared to feel
that Gabriel's espial had made her an indecorous woman
without her own connivance. It was food for great regret
with him; it was also a contretemps which touched into
life a latent heat he had experienced in that direction.
The acquaintanceship might, however, have ended in
a slow forgetting, but for an incident which occurred at
the end of the same week. One afternoon it began to
freeze, and the frost increased with evening, which drew
on like a stealthy tightening of bonds. It was a time
when in cottages the breath of the sleepers freezes to
the sheets; when round the drawing-room fire of a
thick-walled mansion the sitters' backs are cold, even
whilst their faces are all aglow. Many a small bird went
to bed supperless that night among the bare boughs.
As the milking-hour drew near, Oak kept his usual
watch upon the cowshed. At last he felt cold, and
shaking an extra quantity of bedding round the yeaning
ewes he entered the hut and heaped more fuel upon
the stove. The wind came in at the bottom of the door,
and to prevent it Oak laid a sack there and wheeled the
cot round a little more to the south. Then the wind
spouted in at a ventilating hole -- of which there was one
on each side of the hut.
Gabriel had always known that when the fire was
lighted and the door closed one of these must be kept
open -- that chosen being always on the side away from
the wind. Closing the slide to windward, he turned to
open the other; on second -- -thoughts the farmer con+
sidered that he would first sit down leaving both
closed for a minute or two, till the temperature of the
hut was a little raised. He sat down.
<P 70>
His head began to ache in an unwonted manner, and,
fancying himself weary by reason of the broken rests of
the preceding nights, Oak decided to get up, open the
slide, and then allow himself to fall asleep. He fell
asleep, however, without having performed the necessary
preliminary.
How long he remained unconseious Gabriel never
knew. During the first stages of his return to percep+
tion peculiar deeds seemed to be in course of enactment.
His dog was howling, his head was aching fearfully --
somebody was pulling him about, hands were loosening
his neckerchief.
On opening his eyes he found that evening had sunk
to dusk in a strange manner of unexpectedness. The
young girl with the remarkably pleasant lips and white
teeth was beside him. More than this -- astonishingly
more -- his head was upon her lap, his face and neck
were disagreeably wet, and her fingers were unbuttoning
his collar.
"Whatever is the matter?' said Oak, vacantly.
She seemed to experience mirth, but of too insignifi+
cant a kind to start enjoyment.
"Nothing now', she answered, "since you are not
dead It is a wonder you were not,suffocated in this
hut of yours.'
"Ah, the hut ! ' murmured Gabriel. "I gave ten
pounds for that hut. But I'll sell it, and sit under
thatched hurdles as they did in old times, curl up
to sleep in a lock of straw! It played me nearly the
same trick the other day .! ' Gabriel, by way of emphasis,
brought down his fist upon the floor.
"It was not exactly the fault of the hut,' she ob+
served in a tone which showed her to be that novelty
among women -- one who finished a thought before
beginning the sentence which was to convey it. " You
should I think, have considered, and not have been so
foolish as to leave the slides closed.'
"Yes I suppose I should,' said Oak, absently. He
was endeavouring to catch and appreciate the sensation
of being thus with her, his head upon her dress, before
the event passed on into the heap of bygone things.
He wished she knew his impressions ; but he would as
soon have thought of carrying an odour in a net as of
attempting to convey the intangibilities
<P 71>
of his feeling
in the coarse meshes of language. So he remained
silent.
She made him sit up, and then Oak began wiping
his face and shaking himself like a Samson. "How
can I thank 'ee ? ' he said at last, gratefully, some of the
natural rusty red having returned to his face.
 " Oh, never mind that,' said the girl, smiling, and
allowing her smile to hold good for Gabriel's next
remark, whatever that might prove to be.
"How did you find me?"
"I heard your dog howling and scratching at the
door of the hut when I came to the milking (it was so
lucky, Daisy's milking is almost over for the season, and
 I shall not come here after this week or the next). The
dog saw me, and jumped over to me, and laid hold of
my skirt. I came across and looked round the hut the
very first thing to see if the slides were closed. My
uncle has a hut like this one, and I have heard him tell
his shepherd not to go to sleep without leaving a slide
open. I opened the door, and there you were like
dead. I threw the milk over you, as there was no
water, forgetting it was warm, and no use.'
"I wonder if I should have died ? ' Gabriel said, in a
low voice, which was rather meant to travel back to
himself than to her.
"O no," the girl replied. She seemed to prefer a
less tragic probability ; to have saved a man from death
'involved talk that should harmonise with the dignity of
such a deed -- and she shunned it.
"I believe you saved my life, Miss --  -- I don!t know
your name. I know your aunt's, but not yours.'
" I would just as soon not tell it -- rather not. There
is no reason either why I should, as you probably will
never have much to do with me.'
 " Still, I should like to know.'
" You can inquire at my aunt's -- she will tell you.'
'My name is Gabriel Oak.'
"And mine isn't. You seem fond of yours in
speaking it so decisively, Gabriel Oak.'
<P 72>
" You see, it is the only one I shall ever have, and I
must make the most of it.'
" I always think mine sounds odd and disagreeable.'
"I should think you might soon get a new one.'
"Mercy ! -- how many opinions you keep about you
concerning other people, Gabriel Oak.
"Well Miss-excuse the words-I thought you
would like them But I can't match you I know in
napping out my mind upon my tongue. I never was
very clever in my inside. But I thank you. Come
give me your hand!'
She hesitated, somewhat disconcerted at Oak's old+
fashioned earnest conclusion. to a dialogue lightly
carried on."Very well,' she said, and gave him her
hand, compressing her lips to a demure impassivity.
He held it but an instant, and in his fear of being too
demonstrative, swerved to the opposite extreme, touching
her fingers with the lightness of a small-hearted person.
" I am sorry,' he said, the instant after.
" What for?'
"You may have it again if you like; there it is.'
She gave him her hand again.
Oak held it longer this time -- indeed, curiously long.
"How soft it is -- being winter time, too -- not chapped
or rough or anything!' he said.
"There -- that's long enough,' said she, though with+
out pulling it away "But I suppose you are thinking
you would like to kiss it? You may if you want to.'
"I wasn't thinking of any such thing,' said Gabriel,
simply ; "but I will'
"That you won't!' She snatched back her hand.
Gabriel felt himself guilty of another want of tact.
"Now find out my name,' she said, teasingly; and
withdrew.
<C iv>
<P 73>
GABRIEL'S RESOLVE -- THE VISIT -- THE MISTAKE
THE only superiority in women that is tolerable to the
rival sex is, as a rule, that of the unconscious kind ; but
a superiority which recognizes itself may sometimes
please by suggesting possibilities of capture to the
subordinated man.
This well-favoured and comely girl soon made appre+
ciable inroads upon the emotional constitution of young
Farmer Oak.
Love, being an extremely exacting usurer (a sense of
exorbitant profit, spiritually, by an exchange of hearts,
being at the bottom of pure passions, as that of exorbi+
tant profit, bodily or materially, is at the bottom of
those of lower atmosphere), every morning Oak's feelings
were as sensitive as the money-market in calculations
upon his chances. His dog waited for his meals in a
way so like that in which Oak waited for the girl's
presence, that the farmer was quite struck with the
resemblance, felt it lowering, and would not look at the
dog. However, he continued to watch through the
hedge for her regular coming, and thus his sentiments
towards her were ideepened without any corresponding
effect being produced upon herself. Oak had nothing
finished and ready to say as yet, and not being able
to frame love phrases which end where they begin ;
passionate tales -- +
     -- -Full of sound and fury
   -- -signifting nothing -- +
he said no word at all.
By making inquiries he found that the girl's name
was Bathsheba Everdene, and that the cow would go
dry in about seven days. He dreaded the eight day.
At last the eighth day came. The cow had ceased
to give milk for that year, and Bathsheba Everdene
came up the hill no more. Gabriel had reached a
pitch of existence he never
<P 74>
could have anticipated a
short time before. He liked saying 'Bathsheba' as a
private enjoyment instead of whistling; turned over his
taste to black hair, though he had sworn by brown ever
since he was a boy, isolated himself till the space he
filled in a possible strength in an actual weakness. Marriage
transforms a distraction into a support, the power of
which should be, and happily often is, in direct pro+
portion to the degree of imbecility it supplants. Oak
began now to see light in this direction, and said to
himself, "I'll make her my wife, or upon my soul I shall
be good for nothing .! '
All this while he was perplexing himself about an
errand on which he might consistently visit the cottage
of Bathsheba's aunt.
He found his opportunity in the death of a ewe,
mother of a living lamb. On a day which had a
summer face and a winter constitution-a fine January
morning, when there was just enough blue sky visible to
make cheerfully-disposed people wish for more, and an
occasional gleam of silvery sunshine, Oak put the lamb
into a respectable Sunday basket, and stalked across the
fields to the house of Mrs. Hurst, the aunt -- George,
the dog walking behind, with a countenance of great
concern at the serious turn pastoral affairs seemed to be
taking.
Gabriel had watched the blue wood-smoke curling
from the chimney with strange meditation. At evening
he had fancifully traced it down the chimney to the
spot of its origin -- seen the hearth and Bathsheba
beside it -- beside it in her out-door dress; for the
clothes she had worn on the hill were by association
equally with her person included in the compass of his
affection; they seemed at this early time of his love a
necessary ingredient of the sweet mixture called Bath+
sheba Everdene.
He had made a toilet of a nicely-adjusted kind -- of a
nature between the carefully neat and the carelessly
ornate -- of a degree between fine-market-day and wet+
Sunday selection. He thoroughly cleaned his silver
watch-chain with whiting, put new lacing straps to his
boots, looked to the brass eyelet-holes,
<P 75>
 went to the
inmost heart of the plantation for a new walking-stick,
and trimmed it vigorously on his way back; took a new
handkerchief from the bottom of his clothes-box, put
on the light waistcoat patterned all over with sprigs
of an elegant flower uniting the beauties of both rose
and lily without the defects of either, and used all the
hair-oil he possessed upon his usually dry, sandy, and
inextricably curly hair, till he had deepened it to a
splendidly novel colour, between that of guano and
Roman cement, making it stick to his head like mace
round a nutmeg, or wet seaweed round a boulder after
the ebb.
Nothing disturbed the stillness of the cottage save
 the chatter of a knot of sparrows on the eaves; one
might fancy scandal and rumour to be no less the
staple topic of these little coteries on roofs than of
those under them. It seemed that the omen was an
unpropitious one, for, as the rather untoward commence+
ment of Oak's overtures, just as he arrived by the garden
gate, he saw a cat inside, going into various arched shapes
and fiendish convulsions at the sight of his dog George.
The dog took no notice , for he had arrived at an age
at which all superfluous barking was cynically avoided
as a waste of breath -- -in fact he never barked even
at the sheep except to order, when it was done with
an absolutely neutral countenance, as a sort of Com+
mination-service, which, though offensive, had to be
gone through once now and then to frighten the flock
for their own good.
A voice came from behind some laurel-bushes into
which the cat had run:
"Poor dear! Did a nasty brute of a dog want to
kill it; -- did he poor dear !'
"I beg your pardon,' said Oak to the voice, 'but
George was walking on behind me with a temper as
mild as milk.'
Almost before he had ceased speaking, Oak was
seized with a misgiving as to whose ear was the recipient
of his answer. Nobody appeared, and he heard the
person retreat among the bushes.
Gabriel meditated, and so deeply that he brought
small furrows into his forehead by sheer force of
reverie. Where the
<P 76>
issue of an interview is as likely
to be a vast change for the worse as for the better,
any initial difference from expectation causes nipping
sensations of failure. Oak went up to the door a little
abashed : his mental rehearsal and the reality had had
no common grounds of opening.
Bathsheba's aunt was indoors. " Will you tell Miss
Everdene that somebody would be glad to speak to
her ?'said Mr. Oak. (Calling one's self merely Some+
body, without giving a name, is not to be taken as
an example of the ill-breeding of the rural world: it
springs from a refined modesty, of which townspeople,
with their cards and announcements, have no notion
whatever.)
Bathsheba was out. The voice had evidently been
hers.
" Will you come in, Mr. Oak ? '
"Oh, thank 'ee, said Gabriel, following her to the
fireplace. "I've brought a lamb for Miss Everdene.
I thought she might like one to rear; girls do.'
" She might,' said Mrs. Hurst, musingly ; " though
she's only a visitor here. If you will wait a minute,
Bathsheba will be in.'
" Yes, I will wait,' said Gabriel, sitting down. " The
lamb isn't really the business I came about, Mrs. Hurst.
In short, I was going to ask her if she'd like to be
married.'
"And were you indeed ?'
" Yes. Because if she would, I should be very glad
to marry her. D'ye know if she's got any other young
man hanging about her at all ?'
"Let me think," said Mrs. Hurst, poking the fire
superfluously.... " Yes -- bless you, ever so many young
men. You see, Farmer Oak, she's so good-looking, and
an excellent scholar besides -- she was going to be a
governess once, you know, only she was too wild. Not
that her young men ever come here -- but, Lord, in the
nature of women, she must have a dozen ! '
" That's unfortunate,' said Farmer Oak, contemplating
a crack in the stone floor with sorrow. "I'm only an
every-day sort of man, and my only chance was in being
the first comer... , Well, there's no use in my waiting,
for that was all I came about: so I'll take myself off
home-along, Mrs. Hurst.'
When Gabriel had gone about two hundred yards
along the
<P 77>
down, he heard a "hoi-hoi .! " uttered behind
him, in a piping note of more treble quality than that
in which the exclamation usually embodies itself when
shouted across a field. He looked round, and saw a girl
racing after him, waving a white handkerchief.
Oak stood still -- and the runner drew nearer. It was
Bathsheba Everdene. Gabriel's colour deepened: hers
was already deep, not, as it appeared, from emotion,
but from running.
"Farmer Oak -- I -- ' she said, pausing for want of
breath pulling up in front of him with a slanted face
and putting her hand to her side.
"I have just called to see you ' said Gabriel, pending
her further speech.
"Yes-I know that,! she said panting like a robin,
her face red and moist from her exertions, like a peony
petal before the sun dries off the dew. "I didn't know
you had come to ask to have me, or I should have come
in from the garden instantly. I ran after you to say --
that my aunt made a mistake in sending you away from
courting me --  --  -- '
Gabriel expanded."I'm sorry to have made you
run so fast, my dear,' he said, with a grateful sense of
favours to come. "Wait a bit till you've found your
breath.'
" -- It was quite a mistake-aunt's telling you I had
a young man "already,'- Bathsheba went on. " I haven't
a sweetheart at all -- and I never had one, and I thought
that, as times go with women, it was such a pity to send
you away thinking that I had several.'
"Really and truly I am glad to hear that.!' said .=
Farmer Oak, smiling one of his long special smiles, and
blushing with gladness. He held out his hand to take
hers, which, when she had eased her side by pressing
it there, was prettily extended upon her bosom to still
her loud-beating heart. Directly he seized it she put
it behind her, so that it slipped through his fingers like
an eel. "
"I have a nice snug little farm,' said Gabriel, with
half a degree less assurance than when he had seized
her hand.
"Yes ; you have.'
"A man has advanced me money to begin with, but
still, it
<P 78>
will soon be paid off and though I am only an
every-day sort of man, I have got on a little since I was
a boy.' Gabriel uttered "a little' in a tone to-show
her that it was the complacent form of "a great deal.'
He continued : " When we be married, I am quite sure
I can work twice as hard as I do now.'
 He went forward and stretched out his arm again.
Bathsheba had overtaken him at a point beside which
stood a low stunted holly bush, now laden with red
berries. Seeing his advance take the form of an attitude
threatening a possible enclosure, if not compression, of
her person, she edged off round the bush.
" Why, Farmer Oak,' she said, over the top, looking
at him with rounded eyes, "I never said I was going to
marry you.'
" Well -- that is a tale .! ' said Oak,  with dismay. " To
run after anybody like this, and then say you don"t
want him ! '
"What I meant to tell you was only this,' she said
eagerly, and yet half conscious of the absurdity of the
position she had made for herself -- "that nobody has
got me yet as a sweetheart, instead of my having a
dozen, as my aunt said; I hate to be thought men's
property in that way, though possibly I shall be had
some day. Why, if I'd wanted you I shouldn't have
run after you like this ; 'twould have'been the forwardest
thing ! But there was no harm in 'hurrying to correct
a piece of false news that had been told you.'
"Oh, no -- no harm at all." But there is such a thing
as being too generous in expressing a judgment impuls+
ively, and Oak added with a more appreciative sense
of all the circumstances -- ' Well, I am not quite certain
it was no harm.'
"Indeed, I hadn't time to think before starting
whether I wanted to marry or not, for you'd have been
gone over the hill.'
" Come,' said Gabriel, freshening again ; "think a
minute or two. I'll wait a while, Miss Everdene. Will
you marry me? Do, Bathsheba. I love you far more
than common!'
"I'll try to think,' she observed, rather more timor+
ously ; "if I can think out of doors; my mind spreads
away so.'
"But you can give a guess.'
<P 79>
"Then give me time.' Bathsheba looked thought+
fully into the distance, away from the direction in which
Gabriel stood.
"I can make you happy,' said he to the back of her
head, across the bush. "You shallo have as piano in a
year or two -- -farmers' wives are getting to have pianos
now --  and I'll practise up the flute right well to play
with you in the evenings.'
" Yes ; I should like that.'
"And have one of those little ten-pound" gigs for
market -- and nice flowers, and birds -- cocks and hens
I mean, because they be useful,' continued Gabriel,
feeling balanced between poetry and practicality.
"I should like it very much.'
"And a frame for cucumbers -- like a gentlman and
lady.'
"Yes.'
"And when the wedding was over, we'd have it put
in the newspaper list of marriages.'
" Dearly I should like that ! '
"And the babies in the births -- every man jack of
'em! And at home by the fire, whenever you look up,
there I shall be -- and whenever I look up' there will
be you.'
"Wait wait and don't be improper .!'
Her countenance fell, and she was silent awhile.
He regarded the red berries between them over and
over again, to such an extent, that holly seemed in
his after life to be a cypher signifying a proposal of
marriage. Bathsheba decisively turned to him.
"No;' 'tis no use,' she said. 'I don't want to marry
you. '
' Try.'
"I have tried hard all the time I've been thinking;
for a marriage would be very nice in one sense.
People would talk about me, and think I had won my
battle, and I should feel triumphant, and' all that,
But a husband --  -- ' - +
" Well .! '
" Why, he'd always be there, as you say; whenever
I looked up, there he'd be.'
" Of course he would -- I, that is.'
<P 80>
" Well, what I mean is that I shouldn't mind being
a bride at a wedding, if I could be one without having
a husband. But since a woman can't show off in that
way by herself, I shan't marry -- at least yet.'
' That's a terrible wooden story.'
At this criticism of her statement Bathsheba made
an addition to her dignity by a slight sweep away
from him.
"Upon my heart and soul, I don't know what a
maid can say stupider than that,' said Oak. "But
dearest,' he continued in a palliative voice, "don't be
like it !.' Oak sighed a deep honest sigh -- none the
less so in that, being like the sigh of a pine plantation,
it was rather noticeable as a disturbance of the atmo+
sphere. " Why won't you have me ? ' he appealed,
creeping round the holly to reach her side.
" I cannot,' she said, retreating.
"But why ?' he persisted, standing still at last in
despair of ever reaching her, and facing over the
bush.
' Because I don't love you.'
" Yes, but --  -- '
She contracted a yawn to an inoffensive smallness,
so that it was hardly ill-mannered at all. "I don't love
you,' she said.'
"But I love you -- and, as for myself, I am content
to be liked.'
" O Mr. Oak -- that's very fine ! You'd get to
despise me.'
"Never,' said Mr Oak, so earnestly that he seemed
to be coming, by the forceof his words, straight
through the bush and into her arms. "I shall do one
thing in this life -- one thing certain -- that is, love you,
and long for you, and keep wanting you till I die.' His
voice had a genuine pathos now, and his large brown
hands perceptibly trembled.
"It seems dreadfully wrong not to have you when
you feel so much!' she said with a little distress, and
looking hopeleely around for some means of escape
from her moral dilemma. " H(ow I wish I hadn't run
after you!' However she seemed to have a short cut
for getting back to cheerfulness, and set her face to
signify archness. "It wouldn't do, Mr Oak. I want
somebody to tame me; I am too independent ; and
you would never be able to, I know.'
<P 81>
Oak cast his eyes down the field in a way implying
that it was useless to attempt argument.
" Mr. Oak,' she said, with luminous distinctness and
common sense, " you are better off than I. I have
hardly a penny in the world -- I am staying with my
aunt for my bare sustenance. I am better educated
than you -- and I don't love you a bit: that's my side
of the case. Now yours: you are a farmer just begin+
ing; and you ought in common prudence, if you marry
at all (which you should certainly not think of doing
at present) to marry a woman with money, who would
admiration.
"That's the very thing I had been thinking myself !'
he naively said.
Farmer Oak had one-and-a-half Christian character
istics too many to succeed with Bathsheba : his humility,
and a superfluous moiety of honesty. Bathsheba was
decidedly disconcerted,
"Well, then, why did you come and disturb me?'
she said, almost angrily, if not quite, an enlarging red
spot rising in each cheek.
" I can't do what I think would be -- would be --  -- '
" Right ? '
" No : wise.'
" You have made an admission now, Mr. Oak,' she
exclaimed, with even more hauteur, and rocking her
head disdainfully. 'After that, do you think I could
marry you? Not if I know it.'
He broke in passionately ! "But don't mistake me
like that! Because I am open enough to own what
every man in my shoes would have thought of, you
make your colours come up your face, and get crabbed
with me. That about your not being good enough for
me is nonsense. You speak like a lady -- all the parish
notice it, and your uncle at Weatherbury is, I have
heerd, a large farmer -- much larger than ever I shall
be. May I call in the evening, or will you walk along
with me o' Sundays? I don't want you to make-up
your mind at once, if you'd rather not.'
<P 82>
" No -- no -- I cannot. Don't press me any more --
don't. I don't love you -- so 'twould be ridiculous,'
she said, with a laugh.
No man likes to see his emotions the sport of a
merry-go-round of skittishness. " Very well,' said Oak,
firmly, with the bearing of one who was going to give '
his days and nights to Ecclesiastes for ever. "Then
I'll ask you no more.'
<C v>
<P 83>
DEPARTURE OF BATHSHEBA -- A PASTORAL TRAGEDY
THE news which one day reached Gabriel, that Bath+
sheba Everdene had left the neighbourhood, had an
influence upon him which might have surprised any
who never suspected that the more emphatic the renun+
ciation the less absolute its character.
It may have been observed that there is no regula
path for getting out of love as there is for getting in.
Some people look upon marriage as a short cut that way,
but it has been known to fail. Separation, which was
the means that chance offered to Gabriel Oak by
Bathsheba's disappearance though effectual with people
of certain humours is apt to idealise the removcd object
with others -- notably those whose affection, placid and
regular as it may be flows deep and long. Oak belonged
to the even-tempered order of humanity, and felt the
secret fusion of himself in Bathsheba to be burning with
a finer flame now that she was gone -- that was all.
His incipient friendship with her aunt-had been
nipped by the failure of his suit, and all that Oak learnt
of Bathsheba's movements was done indirectly. It ap+
peared that she had gone to a place called Weatherbury,
more than twenty miles off, but in what capacity --
whether as a visitor, or permanently, he could not
discover.
Gabriel had two dogs. George, the elder, exhibited
an ebony-tipped nose, surrounded by a narrow margin
of pink flesh, and a coat marked in random splotches
approximating in colour to white and slaty grey ; but the
grey, after years of sun and rain, had been scorched and
washed out of the more prominent locks, leaving them
of a reddish-brown, as if the blue component of the grey
had faded, like the indigo from the same kind of colour in
Turner's pictures. In substance it had originally been
hair, but long contact with sheep seemed
<P 84>
to be turning
it by degrees into wool of a poor quality and staple.
This dog had originally belonged to a shepherd of
inferior morals and dreadful temper, and the result was
that George knew the exact degrees of condemnation
signified by cursing and swearing of all descriptions
better than the wickedest old man in the neighbourhood.
Long experience had so precisely taught the animal the
difference between such exclamations as 'Come in .! '
and 'D --  --  ye, come in !.' that he knew to a hair's
breadth the rate of trotting back from the ewes' tails
that each call involved, if a staggerer with the sheep
crook was to be escaped. Though old, he was clever
and trustworthy still.
The young dog, George's son, might possibly have
been the image of his mother, for there was not much
resemblance between him and George. He was learn+
ing the sheep-keeping business, so as to follow on at
the flock when the other should die, but had got no
further than the rudiments as yet -- still finding an
insuperable difculty in distinguishing between doing a
thing well enough and doing it too well. So earnest
and yet so wrong-headed was this young dog (he had no,
name in particular, and answered with perfect readiness
to any pleasant interjection), that if sent behind the
flock to help them on, he did it so thoroughly that he
would have chased them across the whole county with
the greatest pleasure if not called off or reminded when
to step by the example of old George.
Thus much for the dogs. On the further side of
Norcombe Hill was a chalk-pit, from which chalk had
been drawn for generations, and spread over adjacent
farms. Two hcdges converged upon it in the form of
a V, but without quite meeting. The narrow opening
left, which was immediately over the brow of the pit,
was protected by a rough railing.
One night, when Farmer Oak had returned to, his
house, believing there would be no further necessity for
his attendance on the down, he called as usual to the
dogs, previously to shutting them up in the outhouse till
next morning. Only one responded -- old George ; the
other-could not be found, either in the house, lane, or
garden. - Gabriel then remembered
<P 85>
that he had left the
two dogs on the hill eating a dead lamb (a kind of meat
he usually kept from them, except when other food-ran
finished his meal, he went indoors to the luxury of a bed,
which latterly he had only enjoyed on Sundays.
It was a still, moist night. Just before dawn he was
assisted in waking by the abnormal reverberation of
familiar music. To the shepherd, the note of the sheep'
chronic sound that only makes itself noticed by ceasing
ever distant, that all is well in the fold. In the solemn
This exceptional ringing may be caused in two ways -- +
by the rapid feeding of the sheep bearing the bell, as
when the flock breaks into new pasture, which gives it
an intermittent rapidity, or by the sheep starting off in
a run, when the sound has a regular palpitation. The
experieced ear of Oak knew the sound he now' heard
to be caused by the running of the flock with great
velocity.
He jumped out of bed, dressed, tore down the lane
through a foggy dawn, and ascended the hill. The
forward ewes were kept apart from those among which
the fall of lambs would be later, there being two hundred
of the latter class in Gabriel's flock. These two hundred
seemed to have absolutely vanished from the hill. There
were the fifty with their lambs, enclosed at the other end
as he had left them, but the rest, forming the bulk of
the flock, were nowhere. Gabriel called at the top of
his voice the shepherd's call.
" Ovey, ovey, ovey .! '
Not a single bleat. He went to the hedge -- a gap
had been broken through it, and in the gap were the
footprints of the sheep. Rather surprised to find
them break fence at this season, yet putting it down
instantly to their great fondness for ivy in winter-time,
of which a great deal grew in the plantation, he followed
through the hedge. They were not in the plantation.
He called again : the valleys and farthest hills
<P 86>
resounded
as when the sailors invoked the lost Hylas on the Mysian
shore ; but no sheep. He passed through the trees and
along the ridge of the hill. On the extreme summit,
where the ends of the two converging hedges of which
we have spoken were stopped short by meeting the brow
of the chalk-pit, he saw the younger dog standing against
the sky -- dark and motionless as Napoleon at St.
Helena.
A horrible conviction darted through Oak. With
a sensation of bodily faintness he advanced : at one
point the rails were broken through, and there he saw
the footprints of his ewes. The dog came up, licked
his hand, and made signs implying that he expected
some great reward for signal services rendered. Oak
looked over the precipice. The ewes lay dead and dying
at its foot -- a heap of two hundred mangled careases,
representing in their condition just now at least two
hundred more.
Oak was an intensely humane man: indeed, his
humanity often tore in pieces any politic intentions of
his which bordered on strategy, and carried him on as
by gravitation. A shadow in his life had always been
that his flock ended in mutton -- that a day came and
found every shepherd an arrant traitor to his defenceless
sheep. His first feeling now was one of pity for the
untimely fate of these gentle ewes and their unborn
lambs.
It was a second to remember another phase of the
matter. The sheep were not insured. All the savings
of a frugal life had been dispersed at a blow ; his hopes
of being an independent farmer were laid low -- possibly
for ever. Gabriel's energies, patience, and industry had
been so severely taxed during the years of his life between
eighteen and eight-and-twenty, to reach his present stage
of progress' that no more seemed to be left in him. He
hands.
Stupors, however, do not last for ever, and Farmer
Oak recovered from his. It was as remarkable as it was
characteristic that the one sentence he uttered was in
thankfulness : --
'Thank God I am not married : what would she have
done in the poverty now coming upon me ! '
<P 87>
Oak raised his head, and wondering what he could
do listlessly surveyed the scene. By the outer margin
of the Pit was an oval pond, and over it hung the
attenuated skeleton of a chrome-yellow moon which
had only a few days to last -- the morning star dogging
her on the left hand. The pool glittered like a dead
man's eye, and as the world awoke a breeze blew,
shaking and elongating the reflection of the moon
without breaking it, and turning the image of the star
to a phosphoric streak upon the water. All this Oak
saw and remembered.
As far as could be learnt it appeared that the poor
young dog, still under the impression that since he was
kept for running after sheep, the more he ran after
them the better, had at the end of his meal off the
dead lamb, which may have given him additional energy
and spirits, collected all the ewes into a corner, driven
the timid creatures through the hedge, across the upper
field, and by main force of worrying had given them
momentum enough to break down a portion of the
rotten railing, and so hurled them over the edge.
George's son had done his work so thoroughly that
he was considered too good a workman to live, and was,
in fact, taken and tragically shot at twelve o'clcck that
same day -- another instance of the untoward fate which
so often attends dogs and other philosophers who
follow out a train of reasoning to its logical conclusion,
and attempt perfectly consistent conduct in a world
made up so largely of compromise.
Gabriel's farm had been stocked by a dealer -- on the
strength of Oak's promising look and character -- who
was receiving a percentage from the farmer till such
time as the advance should be cleared off Oak found+
that the value of stock, plant, and implements which
were really his own would be about sufficient to pay his
debts, leaving himself a free man with the clothes he
stood up in, and nothing more.
<C vi>
<P 88>
THE FAIR -- THE JOURNEY -- THE FIRE
TWO months passed away. We are brought on to a
day in February, on which was held the yearly statute
or hiring fair in the county-town of Casterbridge.
At one end of the street stood from two to three
hundred blithe and hearty labourers waiting upon Chance
 -- all men of the stamp to whom labour suggests nothing
worse than a wrestle with gravitation, and pleasure
nothing better than a renunciation of the same among
these, carters and waggoners were distinguished by
having a piece of whip-cord twisted round their hats;
thatchers wore a fragment of woven straw; shepherds
held their sheep-crooks in their hands; and thus the
situation required was known to the hirers at a
glance.
In the crowd was an athletic young fellow of some+
what superior appearance to the rest -- in fact, his
superiority was marked enough to lead several ruddy
peasants standing by to speak to him inquiringly, as to
a farmer, and to use 'Sir' as a finishing word. His
answer always was,
'I am looking for a place myself -- a bailiff's. Do
Ye know of anybody who wants one ?'
Gabriel was paler now. His eyes were more medi+
tative, and his expression was more sad. He had
passed through an ordeal of wretchedness which had
given him more than it had taken away. He had sunk
from his modest elevation as pastoral king into the very
slime-pits of Siddim ; but there was left to him a digni+
fied calm he had never before known, and that indiffer+
ence to fate which, though it often makes a villain of
a man, is the basis of his sublimity when it does not.
And thus the abasement had been exaltation, and the
loss gain.
In the morning a regiment of cavalry had left the
town, and a sergeant and his party had been beating up
for recruits through the four streets. As the end of the
day drew on, and
<P 89>
he found himself not hired, Gabriel
almost wished that he had joined them, and gone off to
serve his country. Weary of standing in the market+
place, and not much minding the kind of work he
turned his hand to, he decided to offer himself in some
other capacity than that of bailiff.
All the farmers seemed to be wanting shepherds.
Sheep-tending was Gabriel's speciality. Turning down
an obscure street and entering an obscurer lane, he went
up to a smith's shop.
'How long would it take you to make a shepherd's
crook ? '
'Twenty minutes.'
'How much ? '
'Two shillings.'
He sat on a bench and the crook was made, a stem
being given him into the bargain.
He then went to a ready-made clothes' shop, the
owner of which had a large rural connection. As the
crook had absorbed most of Gabriel's money, he
attempted, and carried out, an exchange of his overcoat
for a shepherd's regulation smock-frock.
This transaction having been completed, he again
hurried off to the centre of the town, and stood on the
kerb of the pavement, as a shepherd, crook in hand.
Now that Oak had turned himself into a shepherd, it
seemed that bailifs were most in demand. However, two
or three farmers noticed him and drew near. Dialogues
followed, more or lessin the subjoined for: --
'Where do you come from?'
'Norcombe.'
'That's a long way.
'Fifteen miles.'
'Who's farm were you upon last?'
'My own.'
This reply invariably operated like a rumour of
cholera. The inquring farmer would edge away and
shake his head dubiously. Gabriel, like his dog, was
too good to be trustworthy,. and he never made advance
beyond this point.
It is safer to accept any chance that offers itself, and
 
 
<P 90>
extemporize a procedure to fit it, than to get a good
shepherd, but had laid himself out for anything in the
whole cycle of labour that was required in the fair. It
grew dusk. Some merry men were whistling and
singing by the corn-exchange. Gabriel's hand, which
had lain for some time idle in his smock-frock pocket,
touched his flute which he carried there. Here was
an opportunity for putting his dearly bought wisdom
into practice.
He drew out his flute and began to play  Jockey to
the Fair' in the style of a man who had never known
moment's sorrow. Oak could pipe with Arcadian
sweetness and the sound of the well-known notes
cheered his own heart as well as those of the loungers.
He played on with spirit, and in half an hour had
earned in pence what was a small fortune to a destitute
man.
By making inquiries he learnt that there was another
fair at Shottsford the next day.
'How far is Shottsford?'
'Ten miles t'other side of Weatherbury.'
Weatherbury!. It was where Bathsheba had gone
two months before. This information was like coming
from night into noon.
'How far is it to Weatherbury ?'
'Five or six miles.'
Bathsheba had probably left Weatherbury long before
this time, but the place had enough interest attaching
to it to lead Oak to choose Shottsford fair as his next
field of inquiry, because it lay in the Weatherbury
quarter. Moreover, the Weatherbury folk were by no
means uninteresting intrinsically. If report spoke truly
they were as hardy, merry, thriving, wicked a set as
any in the whole county. Oak resolved to sleep at
Weatherbury -- -that -- night on his way to Shottsford,
and struck out at once -- into the -- high road which had
been recommended as the direct route to the village in
question.
The road stretched through water-meadows traversed
by little brooks, whose quivering surfaces were braided
along their centres, and folded into creases at the sides;
or, where the flow was more rapid, the stream was pied
with spots of white froth,
<P 91>
which rode on in undisturbed
serenity. On the higher levels the dead and dry carcases
of leaves tapped the ground as they bowled along helter+
skelter upon the shoulders of the wind, and little birds
in the hedges were rustling their feathers and tucking
themselves in comfortably for the night, retaining their
places if Oak kept moving, but flying away if he
stopped to look at them. He passed by Yalbury-Wood
where the game-birds were rising to their roosts, and
heard the crack-voiced cock-pheasants' 'cu-uck, cuck,'
and the wheezy whistle of the hens.
By the time he had walked three or four miles every
shape in the-landscape had assumed a uniform hue of
blackness. He descended Yalbury Hill and could just
discern ahead of him a waggon, drawn up under a great
over-hanging tree by the roadside.
On coming close, he found there were no horses
attached to it, the spot being apparently quite deserted.
The waggon, from its position, seemed to have been left
there for the night, for beyond about half a truss  of hay
which was heaped in the bottom, it was quite empty.
Gabriel sat down on the shafts of the vehicle and con+
sidered his position. He calculated that he had walked
a very fair proportion of the journey; and having been
on foot since daybreak, he felt tempted to lie down upon
the hay in the waggon instead of pushing on to the
village of Weatherbury, and having to pay for a lodging.
Eating his las slices of bread and ham, and drinking
from the bottle of cider he had taken the precaution to
bring with him, he got into the lonely waggon. Here
he spread half of the hay as a bed, and, as well as he
could in the darkness, pulled the other half over him
by way of bed-clothes, covering himself entirely, and
feeling, physically, as comfortable as ever he had been
in his life. Inward melancholy it was impossible for
a man like Oak, introspective far beyond his neighbours,
to banish quite, whilst conning the present. untoward
page of his history. So, thinking of his misfortunes,
amorous and pastoral he fell asleep, shepherds enjoying,
in common with sailors, the privilege of being able to
summon the god instead of having to wait for him.
<P 92>
On somewhat suddenly awaking after a sleep of
whose length he had no idea, Oak found that the waggon
was in motion. He was being carried along the road
at a rate rather considerable for a vehicle without
springs, and under circumstances of physical uneadiness,
his head being dandled up and down on the bed of
the waggon like a kettledrum-stick. He then dis+
tinguished voices in conversation, comig from the
forpart of the waggon. His concern at this dilemma
(which would have been alarm, had he been a thriving
man; but -- misfortune is a fine opiate to personal terror)
led him to peer cautiously from the hay, and the first
sight he beheld was the stars above him. Charles's
Wain was getting towards a right angle with the Pole
star, and Gabriel concluded that it must be about nine
o'clock -- in other words, that he had slept two hours.
This small astronomical calculation was made without
any positive effort, and whilst he was stealthily turning
to discover, if possible, into whose hands he had fallen.
Two figures were dimly visible in front, sitting with
their legs outside the waggon, one of whom was driving.
Gabriel soon found that this was the waggoner, and it
appeared they had come from Casterbridge fair, like
himself.
A conversation was in progress, which continued
thus : --
'Be as 'twill, she's a fine handsome body as far's
looks be concerned. But that's only the skin of the
woman, and these dandy cattle be as-proud as a lucifer
in their insides.'
'Ay -- so 'a do seem, Billy Smallbury -- so 'a do seem.'
This utterance was very shaky by nature, and more so
by circumstance, the jolting of the waggon not being+
without its effect upon the speaker's larynx. It came
'from the man who held the reins.
'She's a very vain feymell -- so 'tis said here and
there.'
'Ah, now. If so be 'tis like that, I can't look her in
the face. Lord, no : not I -- heh-heh-heh .! Such a shy
man as I be.!'
'Yes -- she's very vain. 'Tis said that every night at
going to bed she looks in the glass to put on her night+
cap properly.'
'And not a married woman. Oh, the world .!
"And 'a can play the peanner, so 'tis said. Can
play so clever
<P 93>
that 'a can make a psalm tune sound as
well as the merriest loose song a man can wish for.'
'D'ye tell o't .! A happy time for us, and I feel quite
a new man! And how do she play?'
'That I dson't know, Master Poorgrass.'
On hearing these and other similar remarks, a wild
thought flashed into Gabriel's mind that they might
be speaking of Bathsheba. There were, however, no
ground for retaining such a supposition, for the waggon,
though going in the direction of Weatherbury, might be
going beyond it, and the woman alluded to seemed to be
the mistress of some estate. They were now apparently
close upon Weatherbury and not to alarm the speakers
unnecessarily, Gabriel slipped out of the waggon unseen.
He turned to an opening in the hedge, which he
found to be a gate, and mounting thereon, he sat
meditating whether to seek a cheap lodging in the
village, or to ensure a cheaper one by lying under
some hay or corn-stack. The crunching jangle of the
waggon died upon his ear. He was about to walk on,
when he noticed on his left hand an unusual light -- +
appearing about half a mile distant. Oak watched it,
and the glow increased. Something was on fire.
Gabriel again mounted the gate, and, leaping down
on the other side upon what he found to be ploughed
soil, made across the field in the exact direction of the
fire. The blaze, enlarging in a  double ratio by his
approach and its own increase, showed him as he drew
nearer the outlines of ricks beside it, lighted up to great
distinctness. A rick-yard was the source of the fire.
His weary face now began to be painted over with a
rich orange glow, and the whole front of his smock+
frock and gaiters was covered with a dancing shadow
pattern of thorn-twigs -- the light reaching him through
a leafless intervening hedge -- and the metallic curve of
his sheep-crook shone silver-bright in the same abound+
ing rays. He came up to the boundary fence, and
stood to regain breath. It seemed as if the spot was
unocupied by a living soul.
The fire was issuing from a long straw-stack, which
was so
<P 94>
far gone as to preclude a possibility of saving it.
A rick burns differently from a house. As the wind
blows the fire inwards, the portion in flames completely
disappears like melting sugar, and the outline is lost
to the eye. However, a hay or a wheat-rick, well put
together, will resist combustion for a length of time, if
it begins on the outside.
This before Gabriel's eyes was a- rick of straw, loosely
put together, and the flames darted into it with lightning
swiftness. It glowed on the windward side, rising and
falling in intensity, like the coal of a cigar. Then a
superincumbent bundle rolled down, with a whisking
noise ; flames elongated, and bent themselves about
with a quiet roar, but no crackle. Banks of smoke
went off horizontally at the back like passing clouds,
and behind these burned hidden pyres, illuminating
the semi-transparent sheet of smoke to a lustrous yellow
uniformity. Individual straws in the foreground were
consumed in a creeping movement of ruddy heat, as
if they were knots of red worms, and above shone
imaginary fiery faces, tongues hanging from lips, glaring
eyes, and other impish forms, from which at intervals
sparks flew in clusters like birds from a nest,
Oak suddenly ceased from being a mere spectator
by discovering the case to be more serious than he had
at first imagined. A scroll of smoke blew aside and
revealed to him a wheat-rick in startling juxtaposition
with the decaying one, and behind this a series of
others, composing the main corn produce of the farm;
so that instead of the straw-stack standing, as he had
imagined comparatively isolated, there was a regular
connection between it and the remaining stacks of the
group.
Gabriel leapt over the hedge, and saw that he was
not alone. The first man he came to was running
about in a great hurry, as if his thoughts were several
yards in advance of his body, which they could never
drag on fast enough.
'O, man -- fire, fire ! A good master and a. bad
servant is fire, fire .! -- I mane a bad servant and a good
master O, Mark Clark -- come !- And you, Billy
Smallbury -- and you, Maryann Money -- and you, Jan
Coggan, and Matthew there!' Other figures now
appeared behind this shouting man and among the
smoke, and
<P 95>
Gabriel found that, far from being alone
he was in a great company -- whose shadows danced
merrily up and down, timed by the jigging of the
flames, and not at all by their owners' movements.
The assemblage -- -belonging to that class of society
which casts its thoughts into the form of feeling, and
its feelings into the form of commotion -- set to work
with a remarkable confusion of purpose.
'Stop the draught under the wheat-rick!' cried
Gabriel to those nearest to him. The corn stood on
stone staddles, and between these, tongues of yellow
hue from the burning straw licked and darted playfully.
If the fire once got under this stack, all would be
lost.
'Get a tarpaulin -- quick .! ' said Gabriel.
A rick-cloth was brought, and they hung it like a
curtain across the channel. The flames immediately
ceased to go under the bottom of the corn-stack, and
stood up vertical.
'Stand here with a bucket of water and keep the
cloth wet,' said Gabriel again.
The flames, now driven upwards, began to attack
the angles of the huge roof covering the wheat-stack.
'A ladder,' cried Gabriel.
'The ladder was against the straw-rick and is burnt
to a cinder,' said a spectre-like form in the smoke.
Oak seized the cut ends of the sheaves, as if he
were going to engage in the operation of ' reed-drawing,'
and digging in his feet, and occasionally sticking in the
stem of his sheep-crook, he clambered up the beetling
face. He at once sat astride the very apex, and began
with his crook to beat off the fiery fragments which had
lodged thereon, shouting to the others to get him a
bough and a ladder, and some water.
Billy Smallbury -- one of the men who had been on
the waggon -- by this time had found a ladder, which
Mark Clark ascended, holding on beside Oak upon the
thatch. The smoke at this corner was stifling, and
Clark, a nimble fellow, having been handed a bucket
of water, bathed Oak's face and sprinkled him generally,
whilst Gabriel, now with a long beech-bough in one
hand, in addition to his crook in the other, kept
sweeping the stack and dislodging all fiery particles.
<P 96>
On the ground the groups of villagers were still
occupied in doing all they could to keep down the
conflagration, which was not much. They were all
tinged orange, and backed up by shadows of varying
pattern. Round the corner of the largest stack, out
of the direct rays of the fire, stood a pony, bearing a
young woman on its back. By her side was another
woman, on foot. These two seemed to keep at a
distance from the fire, that the horse might not beome
restive.
'He's a shepherd,' said the woman on foot. 'Yes --
he is. See how his crook shines as he beats the rick
with it. And his smock-frock is burnt in two holes, I
declare.! A fine young shepherd he is too, ma'am.'
' Whose shepherd is he?' said the equestrian in a
clear voice.
'Don't know, ma'am.'
 " Don't any of the others know ?'
 " Nobody at all -- I've asked 'em. Quite a stranger,
 they say.'
 The young woman on the pony rode out from the
shade and looked anxiously around.
"Do you think the barn is safe ?" she said.
"D'ye think the barn is safe, Jan Coggan ?' said
the second woman, passing on the question to the
nearest man in that direction.
"Safe -now -- leastwise I think so. If this rick had
gone the barn would have followed. 'Tis- that bold
shepherd up there that have done the most good -- he
sitting on the top o' rick, whizzing his great long-arms
about like a windmill.'
" He does work hard,' said the young woman on
horseback, looking up at Gabriel through her thick
woollen veil. "I wish he was shepherd here. Don't
any of you know his name.'
"Never heard the man's name in my life, or seed
his form afore.'
The fire began to get worsted, and Gabriel's elevated
position being no longer required of him, he made as
if to descend.
"Maryann,' said the girl on horseback, "go to him
as he comes down, and say that the farmer wishes to
thank him for the great service he has done.'
Maryann stalked off towards the rick and met
Oak at the foot of the ladder. She delivered ber
message.
<P 97>
" Where is your master the farmer ?' asked Gabriel,
kindling with the idea of getting employment that
seemed to strike him now.
" 'Tisn't a master ; 'tis a mistress, shepherd.'
" A woman farmer ? '
"Ay, 'a b'lieve, and a rich one too .!' said a by"
stander. " Lately 'a came here from a distance. Took
on her uncle's farm, who died suddenly. Used to
measure his money in half-pint cups. They say now
that she've business in every bank in Casterbridge, and
thinks no more of playing pitch-and-toss sovereign than
you and I, do pitch-halfpenny -- not a bit in the world,
shepherd.'
"That's she, back there upon the pony,' said Mary+
ann ;"wi'her face a-covered up in that black cloth with
holes in it.'
Oak, his features smudged, grimy, and undiscoverable
from the smoke and heat, his smock-frock burnt-into
holes and dripping with water, the ash stem of his sheep+
crook charred six inches shorter, advansed with the
humility stern adversity had thrust upon him up to
the slight female form in the saddle. He lifted his
hat with respect, and not without galantry: stepping
close to her hanging feet he said in a hesitating voice, --
" Do you happen to want a shepherd, ma'am ? '
She lifted the wool veil tied round her face, and
looked all astonishment. Gabriel and his cold-hearted
darling, Bathsheba Everdene, were face to face.
Bathsheba did not speak, and he mechanically
repeated in an abashed and sad voice, --
" Do you want a shepherd, ma'am ? '
<C vii>
<P 98>
RECOGNITION -- A TIMID GIRL
BATHSHEBA withdrew into the shade. She scarcely
knew whether most to be amused at the singularity of
the meeting, or to be concerned at its awkwardness.
There was room for a little pity, also for a very little
exultation : the former at his position, the latter at her
own. Embarrassed she was not, and she" remembered
Gabriel's declaration of love to her at Norcombe only
to think she had nearly forgotten it.
" Yes,' she murmured, putting on an air of dignity,
and turning again to him with a little warmth of cheek ;
" I do want a shepherd. But --  -- '
" He's the very man, ma'am,' said one of the villagers,
quietly.
Conviction breeds conviction. " Ay, that 'a is,' said
a second, decisively.
"The man, truly .! ' said a third, with heartiness."
" He's all there ! ' said number four, fervidly."
Then will you tell him to speak to the bailiff, said
Bathsheba.
All "was practical again now. A summer eve and
loneliness would have been necessary to give the
meeting its proper fulness of romance.
the palpitation within his breast at discovering that this
Ashtoreth of strange report was only a modification of
Venus the well-known and admired, retired with him to
talk over the necessary preliminaries of hiring.
The fire before them wasted away. "Men,' said
Bathsheba, " you shall take a little refreshment after this
extra work. Will you come to the house ?'
"We could knock in a bit and a drop a good deal
freer, Miss,
<P 99>
if so be ye'd send it to Warren's Malthouse,'
replied the spokesman.
Bathsheba then rode off into the darkness, and the
men straggled on to the village in twos and threes -- Oak
and the bailiff being left by the rick alone.
"And now,' said the bailiff, finally, "all is settled, I
think, about your coming, and I am going home-along.
Good-night to ye, shepherd.'
" Can you get me a lodging ? ' inquired Gabriel.
'That I can't, indeed," he said, moving past Oak as
a Christian edges past an offertory-plate when he does
not mean to contribute. "If you follow on the road till
you come to Warren's Malthouse, where they are all
gone to have their snap of victuals, I daresay some of
'em will tell you of a place. Good-night to ye, shepherd.'
The bailiff who showed this nervous dread of loving
his neighbour as himself, went up the hill, and Oak
walked on to the village, still astonished at the ren+
counter with Bathsheba, glad of his nearness to her, and
perplexed at the rapidity with which the unpractised girl
of Norcombe had developed into the supervising and cool
woman here. But some women only require an emerg+
ency to make them fit for one.
Obligcd, to some extent, to forgo dreaming in order
to find the way, he reachcd the churchyard, and passed
round it under the wall where several ancient trees grew.
There was a wide margin of grass along here, and
Gabriel's footsteps were deadened by its softness, even
at this indurating period of the year. When abreast of
a trunk which appeared to be the oldest of the old, he
became aware that a figure was standing behind it.
Gabriel did not pause in his walk, and in another
moment he accidentally kicked a loose stone. The noise
was enough to disturb the motionless stranger, who
started and assumed a careless position.
It was a slim girl, rather thinly clad.
" Good-night to you,' said Gabriel, heartily.
" Good-night,' said the girl to Gabriel.
The voice was unexpectedly attractive ; it was "the
low and
<P 100>
dulcet note suggestive of romance ; common in
descriptions, rare in experience.
'I'll thank you to tell me if I'm in the way for
Warren's Malthouse ? ' Gabriel resumed, primarily to gain
the information, indirectly to get more of the music.
"Quite right. It's at the bottom of the hill. And
do you know --  -- ' The girl hesitated and then went
on again. "Do you know how late they keep open
the Buck's Head Inn?' She seemed" to be won by
Gabriel's heartiness, as Gabriel had been won by her
modulations.
" I don't know where the Buck's Head is, or anything
about it. Do you think of going there to-night ?'
" Yes --  -- ' The woman again paused. There was
no necessity for any continuance of speech, and the fact
that she did add more seemed to proceed from an
unconscious desire to show unconcern by making a
remark, which is noticeable in the ingenuous when they
are acting by stealth. " You are not a Weatherbury man ? '
she said, timorously.
' I am not. I am the new shepherd -- just arrived.'
"Only a shepherd -- and you seem almost a farmer by
your ways.'
" Only a shepherd,' Gabriel repeated, in a dull cadence
of finality. " His thoughts were directed to the past, his
eyes to the feet of the girl; and for the first time he
saw lying there a bundle of some sort. She may have
perceived the direction of his face, for she said
coaxingly, --
" You won't say anything in the parish about having
seen me here, will you -- at least, not for a day or two ?'
"I won't if you wish me not to,' said Oak.
"Thank you, indeed,' the other replied.'I am
rather poor, and I don't want people to know anything
about me.'  Then she was silent and shivered.
'You ought to have a cloak on such a cold night,'
Gabriel observed. " I would advise 'ee to get indoors."
"O no! Would you mind going on and leaving
me ? I thank you much for what you have told me.'
" I will go on,' he said ; adding hesitatingly, -- ' Since
you are
<P 101>
not very well off, perhaps you would accept this
trifle from me. It is only a shilling, but'it is all I have
to spare.'
' Yes, I will take it,' said the stranger, gratefully.
She extended her hand ; Gabriel his. In feeling for
each other's palm in the gloom before the money could
be passed, a minute incident occurred which told much.
Gabriel's fingers alighted on the young woman's wrist.
It was beating with a throb of tragic intensity. He had
frequently felt the same quick, hard beat in the femoral
artery of -- his lambs when overdriven. It suggested a
consumption too great of a vitality which, to judge from
her figure and stature, was already too little.
"What is the matter ?'
" Nothing.'
'But there is?'
" No, no, no ! Let your having seen me be a.secret .! "
' Very well ; I will. Good-night, again.'
" Good-night.'
The young girl remained motionless by the tree, and
Gabriel descended into the village of Weatherbury, or
Lower Longpuddle as it was sometimes called. He
fancied that he had felt himself in the penumbra of a
very deep sadness when touching that slight and fragile
creature. But wisdom lies in moderating mere impres+
sions, and Gabriel endeavoured to think little of this.
<C viii>
<P 102>
THE MALTHOUSE -- THE CHAT -- NEWS
WARREN'S Malthouse was enclosed by an old wall
inwrapped with ivy, and though not much of the exterior
was visible at this hour, the character and purposes of
the building were clearly enough shown by its outline
upon the sky. From the walls an overhanging thatched
roof sloped up to a point in the centre, upon which rose
a small wooden lantern, fitted with louvre-boards on all
the four sides, and from these openings a mist was dimly
perceived to be escaping into the night air. There was
no window in front ; but a square hole in the door was
glazed with a single pane, through which red, comfortable
rays now stretched out upon the ivied wall in front.
Voices were to be heard inside.
Oak's hand skimmed the surface of the door with
fingers extended to an Elymas-the-Somerer pattern, till
he found a leathern strap, which he pulled. This lifted
a wooden latch, and the door swung open.
The room inside was lighted only by the, ruddy glow
from the kiln mouth, which shone over ,the floor with
the streaming, horizontality of the setting sun, and threw
upwards the shadows of all facial irregularities in those
assembled around. The stone-flag floor was worn into
a path from the doorway to the kiln, and into undula+
tions everywhere. A curved settle of unplaned oak
stretched along one side, and in a remote corner was a
small bed and bedstead, the owner and frequent occupier
of which was the maltster.
This aged man was now sitting opposite the fire, his
frosty white hair and beard overgrowing his gnarled
figure like the grey moss and lichen upon a leafless
apple-tree. He wore breeches and the laced-up shoes
called ankle-jacks; he kept his eyes fixed upon the
fire.
<P 103>
Gabriel's nose was greeted by an atmosphere laden
with the sweet smell of new malt. The conversation
(which seemed to have been concerning the origin of the
fire) immediately ceased, and every one ocularly criticised
him to the degree expressed by contracting the flesh of
their foreheads and looking at him with narrowed eye+
lids, as if he had been a light too strong for their sight.
Several exclaimed meditatively, after this operation had
been completed : --
"Oh, 'tis the new shepherd, 'a b'lieve.'
"We thought we heard a hand pawing about the
door for the bobbin, but weren't sure 'twere not a dead
leaf blowed across,' said another. " Come in, shepherd ;
sure ye be welcome, though we don't know yer name.'
" Gabriel Oak, that's my name, neighbours.'
The ancient maltster sitting in the midst turned up
this -- his turning being as the turning of a rusty
crane.
"That's never Gable Oak's grandson over at Nor+
combe -- never !. ' he said, as a formula expressive of
surprise, which nobody was supposed to take literally'.
'My father and my grandfather were old men of the
name of Gabriel,' said the shepherd, placidly.
"Thought I knowed the man's face as I seed him
on the rick ! -- thought I did.! And where be ye trading
o't to now, shepherd ? '
" I'm thinking of biding here,' said Mr. Oak.
"Knowed yer grandfather for years and years !'
continued the maltster, the words coming forth of their
own accord as if the momentum previously imparted
had been sufficient.
'Ah -- and did you! '
" Knowed yer grandmother.'
'And her too!'
"Likewise knowed yer father when he was a child.
Why, my boy Jacob there and your father were sworn
brothers -- that they were sure -- weren't ye, Jacob ? '
"Ay, sure,' said his son, a young man about sixty+
five, with a semi-bald head and one tooth in the left
centre of his upper jaw, which made much of itself by
standing prominent, like a
<P 104>
milestone in a bank. 'But
'twas Joe had most to do with him. However, my son
William must have knowed the very man afore us --
didn't ye, Billy, afore ye left Norcombe ? '
"No, 'twas Andrew,' said Jacob's son Billy, a child
of forty, or thereabouts, who manifested the peculiarity
of possessing a cheerful soul in a gloomy body, and
whose whiskers were assuming a chinchilla shade here
and there.
"I can mind Andrew,' said Oak, 'as being a man in
the place when I was quite a child.'
"Ay -- the other day I and my youngest daughter,
Liddy, were over at my grandson's christening,' continued
Billy. ' We were talking about this very family, and
'twas only last Purification Day in this very world, when
the use-money is gied away to the second-best poor
folk, you know, shepherd, and I can mind the day
because they all had to traypse up to the vestry -- yes,
this very man's family.'
' Come, shepherd, and drink. 'Tis gape and
swaller with us -- a drap of sommit, but not of much
account,' said the maltster, removing from the fire his
eyes, which were vermilion-red and bleared by gazing
into it for so many years. "Take up the God-forgive"
me, Jacob. See if 'tis warm, Jacoh.'
Jacob stooped to the God-forgive-me, which was a
two-handled tall mug standing in the ashes, cracked
and charred with heat : it was rather furred with ex"
traneous matter about the outside, especially in the
crevices of the handles, the innermost curves of which
may not have seen daylight for several years by reason
of this encrustation thereon -- formed of ashes accident+
ally wetted with cider and baked hard; but to the mind
of any sensible drinker the cup was no worse for that,
being incontestably clean on the inside and about the
rim. It may be observed that such a class of mug is
called a God-forgive-me in Weatherbury and its vicinity
for uncertain reasons ; probably because its size makes
any given toper feel ashamed of himself when he sees
its bottom in drinking it empty.
Jacob, on receiving the order to see if the liquor was
warm enough, placidly dipped his forefinger into it by
way of thermometer, and having pronounced it nearly
of the proper degree, raised the cup and very civilly
attempted to dust some of the
<P 105>
ashes from the bottom
with the skirt of his smock-frock, because Shepherd Oak
was a stranger.
"A clane cup for the shepherd,' said the maltster
commandingly.
"No -- not at all," said Gabriel, in a reproving tone
of considerateness. "I never fuss about dirt in its pure
state, and when I know what sort it is.' Taking the
mug he drank an inch or more from the depth of its
contents, and duly passed it to the next man.
wouldn't think of giving such trouble to neighbours in
washing up when there's so much work to be done in
the world already,' continued Oak in a moister tone,
after recovering from the stoppage of breath which is
occasioned by pulls at large mugs.
' A right sensible man,' said Jacob.
" True, true ; it can't be gainsaid!.' observed a brisk
young man -- Mark Clark by name, a genial and pleasant
gentleman, whom to meet anywhcre in your travels was
to know, to know was to drink with, and to drink with
was, unfortunately, to pay for.
"And here's a mouthful of bread and bacon that
mis'ess have sent, shepherd. The cider will go down
better with a bit of victuals. Don't ye chaw quite close,
shepherd, for I let the bacon fall in the road outside as
I was bringing it along, and may be 'tis rather gritty.
There, 'tis clane dirt; and we all know what that is,
as you say, and you bain't a particular man we see,
shepherd.'
" True, true -- not at all,' said the friendly Oak.
'Don't let your teeth quite meet, and you won't feel
the sandiness at all. Ah !. 'tis wonderful what can be
done by contrivance .! '
" My own mind exactly, neighbour.'
" Ah, he's his grandfer's own grandson .! -- his grandfer
were just such a nice unparticular man !.' said the maltster.
" Drink, Henry Fray -- drink,' magnanimously said
Jan Coggan, a person who held Saint-Simonian notions
of share and share alike where liquor was concerned, as
the vessel showed signs of approaching him in its gradual
revolution among them.
Having at this moment reached the end of a wistful
gaze
<P 106>
into mid-air, Henry did not refuse. He was a man
of more than middle age, with eyebrows high up in his
forehead, who laid it down that the law of the world
was bad, with a long-suffering look through his listeners
at the world alluded to, as it presented itself to his
imagination. He always signed his name 'Henery' --
strenuously insisting upon that spelling, and if any
passing schoolmaster ventured to remark that the second
'e' was superfluous and old-fashioned, he received the
reply that ' H-e-n-e-r-y' was the name he was christened
and the name he 'would stick to -- in the tone of one
to whom orthographical differences were matters which
had a great deal to do with personal character.
Mr. Jan Coggan, who had passed the cup to Henery,
was a crimson man with a spacious countenance, and
private glimmer in his eye, whose name had appeared
on the marriage register of Weatherbury and neighbour+
ing parishes as best man and chief witness in countless
unions of the previous twenty years; he also very
frequently filled the post of head godfather in baptisms
of the subtly-jovial kind.
" Come, Mark Clark -- come. Ther's plenty more
in the barrel,' said Jan.
"Ay -- that I will; 'tis my only doctor,' replied Mr.
Clark, who, twenty years younger than Jan Coggan,
revolved in the same orbit. He secreted mirth on all
occasions for special discharge at popular parties.
" Why, Joseph Poorgrass, ye han't had a drop! ' said
Mr. Coggan to a self-conscious man in the background,
thrusting the cup towards him.
" Such a modest man as he is !. ' said Jacob Smallbury.
" Why, ye've hardly had strength of eye enough to look
in our young mis'ess's face, so I hear, Joseph ?'
All looked at Joseph Poorgrass with pitying reproach.
" No -- I've hardly looked at her at all,' simpered
Joseph, reducing his body smaller whilst talking,
apparently from a meek sense of undue prominence.
"And when I seed her, 'twas nothing but blushes with
me!'
' Poor feller,' said Mr. Clark.
"'Tis a curious nature for a man,' said Jan Coggan.
<P 107>
" Yes,' continued Jdseph Poorgrass -- his shyness,
which was so painful as a defect, filling him with a
mild complacency now that it was regarded as an
interesting study. " 'Twere blush, blush, blush with
me every minute of the time, when she was speaking
to me.'
"I believe ye, Joseph Poorgrass, for we all know ye
to be a very bashful man.'
"'Tis a' awkward gift for a man, poor soul,' said the
maltster. "And ye have suffered from it a long time,
we know.'
"Ay ever since I was a boy. Yes -- mother was
concerned to her heart about it -- yes. But twas all
nought.'
"Did ye ever go into the world to try and stop it,
Joseph Poorgrass ? '
"Oh ay, tried all sorts o' company. They took me
to Greenhill Fair, and into a great gay jerry-go-nimble
show, where there were women-folk riding round --
standing upon horses, with hardly anything on but their
smocks; but it didn't cure me a morsel. And then I
was put errand-man at the Women's Skittle Alley at the
back of the Tailor's Arms in Casterbridge. 'Twas a
horrible sinful situation, and a very curious place for a
good man. I had to stand and look ba'dy people in
the face from morning till night; but 'twas no use -- I
was just as-bad as ever after all. Blushes hev been
in the family for generations. There, 'tis a happy pro+
vidence that I be no worse.'
" True,' said Jacob Smallbury, deepening his thoughts
to a profounder view of the subject. "'Tis a thought
to look at, that ye might have been worse; but even
as you be, 'tis a very bad affliction for 'ee, Joseph. For
ye see, shepherd, though 'tis very well for a woman,
dang it all, 'tis awkward for a man like him, poor
feller ? '
" 'Tis -- 'tis,' said Gabriel, recovering from a medita+
tion. " Yes, very awkward for the man.'
" Ay, and he's very timid, too,' observed Jan Coggan.
"Once he had been working late at Yalbury Bottom,
and had had a drap of drink, and lost his way as he was
coming home-along through Yalbury Wood, didn't ye,
Master Poorgrass ? '
" No, no, no ; not that story !' expostulated the
modest man, forcing a laugh to bury his concern.
<P 108>
" --  --  And so 'a lost himself quite,' continued Mr
Coggan, with an impassive face, implying that a true
narrative, like time and tide, must run its course and
would respect no man. "And as he was coming along
in the middle of the night, much afeared, and not able
to find his way out of the trees nohow, 'a cried out,
" Man-a-lost!. man-a-lost !." A owl in a tree happened
to be crying "Whoo-whoo-whoo !" as owls do, you
know, shepherd ' (Gabriel nodded), " and Joseph, all
in a tremble, said, " Joseph Poorgrass, of Weatherbury,
sir.!"
"No, no, now -- that's too much! ' said the timid
man, becoming a man of brazen courage all of a sudden.
"I didn't say sir. I'll tike my oath I didn't say " Joseph
Poorgrass o' Weatherbury, sir." No, no ; what's right
is right, and I never said sir to the bird, knowing very
well that no man of a gentleman's rank would be
hollering there at that time o' night. " Joseph Poor+
grass of Weatherbury,"  -- that's every word I said, and
I shouldn't ha' said that if 't hadn't been for Keeper
Day's metheglin.... There, 'twas a merciful thing it
ended where it did.'
The question of which was right being tacitly waived
by the company, Jan went on meditatively : --
"And he's the fearfullest man, bain't ye, Joseph?
Ay, another time ye were lost by Lambing-Down Gate,
weren't ye, Joseph ? '
"I was,' replied Poorgrass, as if there were some
conditions too serious even for modesty to remember
itself under, this being one.
' Yes ; that were the middle of the night, too. The
gate would not open, try how he would, and knowing
there was the Devil's hand in it, he kneeled down.'
'Ay,' said Joseph, acquiring confidence from the
warmth of the fire, the cider, and a perception of the
narrative capabilities of the experience alluded to.
" My heart died within me, that time; but I kneeled
down and said the Lord's Prayer, and then the Belie
THE CHAT
right through, and then the Ten Commandments, in
earnest prayer. But no, the gate wouldn't open; and
then I went on with Dearly Beloved Brethren, and,
thinks I, this makes four, and 'tis all I know out of
book, and if this don't do it nothing will, and I'm a
lost man. Well, when I got to
<P 109>
Saying After Me, I
rose from my knees and found the gate would open
 -- yes, neighbours, the gate opened the same as ever.'
  A meditation on the obvious inference wsas indulged
in by all, and during its continuance each directed his
vision into the ashpit, which glowed like a desert in
the tropics under a vertical sun, shaping their eyes long
and liny, partly because of the light, partly from the
depth of the subject discussed.
  Gabriel broke the silence. "What sort of a place
is this to live at, and what sort of a mis'ess is she to
work under?' Gabriel's bosom thrilled gently as he
thus slipped under the notice of the assembly the inner+
most subject of his heart.
  "We d' know little of her -- nothing. She only
showed herself a few days ago. Her uncle was took
bad, and the doctor was called with his world-wide
skill; but he couldn't save the man. As I take it,
she's going to keep on the farm.
  "That's abouyt the shape o't, 'a b'lieve,' said Jan
uncle was a very fair sort of man. Did ye know en,
be under 'em as under one here and there. Her
uncle was a very fair sort of man. Did ye know 'en,
shepherd -- a bachelor-man ? '
  "Not at all.'
  "I used to go to his house a-courting my first wife,
Charlotte, who was his dairymaid. Well, a very good+
hearted man were Farmer Everdene, and I being a
respectable young fellow was allowed to call and see
her and drink as much ale as I liked, but not to carry
away any -- outside my skin I mane of course.'
  "Ay, ay, Jan Coggan; we know yer maning.'
  "And so you see 'twas beautiful ale, and I wished
to value his kindness as much as I could, and not to
be so ill-mannered as to drink only a thimbleful, which
would have been insulting the man's generosity  --  -- '
  "True, Master Coggan, 'twould so,' corroborated
Mark Clark.
  " --  -- And so I used to eat a lot of salt fish afore
going, and then by the time I got there I were as dry
as a lime-basket -- so thorough dry that that ale would
slip down  -- ah, 'twould slip down sweet! Happy
times! heavenly times! Such lovely drunks as I
used to have at that house! You can mind, Jacob?
You used to go wi' me sometimes.'
<P 110>
  "I can -- I can,' said Jacob. "That one, too, that
we had at Buck's Head on a White Monday was a
pretty tipple.'
  "'Twas. But for a wet of the better class, that
brought you no nearer to the horned man than you were
afore you begun, there was none like those in Farmer
Everdene's kitchen. Not a single damn allowed; no,
not a bare poor one, even at the most cheerful moment
when all were blindest, though the good old word of
sin thrown in here and there at such times is a great
relief to a merry soul.'
  "True,' said the maltster. "Nater requires her
swearing at the regular times, or she's not herself; and
unholy exclamations is a necessity of life.'
  "But Charlotte,' continued Coggan -- "not a word of
the sort would Charlotte allow, nor the smallest item of
taking in vain.... Ay, poor Charlotte, I wonder if she
had the good fortune to get into Heaven when 'a died!.
But 'a was never much in luck's way, and perhaps 'a
went downwards after all, poor soul.'
  "And did any of you know Miss Everdene's-father
and mother?' inquired the shepherd, who found some
difficulty in keeping the conversation in the desired
channel.
THE CHAT
  "I knew them a little,' said Jacob Smallbury; "but
they were townsfolk, and didn't live here. They've
been dead for years. Father, what sort of people were
mis'ess' father and mother?'
  "Well,' said the maltster, "he wasn't much to look
at; but she was a lovely woman. He was fond enough
of her as his sweetheart.'
  "Used to kiss her scores and long-hundreds o times,
so 'twas said,' observed Coggan.
  "He was very proud of her, too, when they were
married, as I've been told,' said the maltster.
  "Ay,' said Coggan. "He admired her so much that
he used to light the candle three time a night to look
at her.'
  "Boundless love; I shouldn't have supposed it in the
universe!' murmered Joseph Poorgrass, who habitually
spoke on a large scale in his moral reflections.
  "Well, to be sure,' said Gabriel.
  "Oh, 'tis true enough. I knowed the man and
woman both well. Levi Everdene -- that was the man's
name, sure. ""Man,''
<P 111>
saith I in my hurry, but he were
of a higher circle of life than that -- 'a was a gentleman+
tailor really, worth scores of pounds. And he became
a very celebrated bankrupt two or three times.'
  "Oh, I thought he was quite a common man!.' said
Joseph.
  "O no, no! That man failed for heaps of money;
hundreds in gold and silver.'
  The maltster being rather short of breath, Mr. Coggan,
after absently scrutinising a coal which had fallen among
the ashes, took up the narrative, with a private twirl of
his eye: --
  "Well, now, you'd hardly believe it, but that man --
husbands alive, after a while. Understand' 'a didn't
want to be fickle, but he couldn't help it. The poor
feller were faithful and true enough to her in his wish,
but his heart would rove, do what he would. He spoke
to me in real tribulation about it once. ""Coggan,''
he said, ""I could never wish for a handsomer woman
than I've got, but feeling she's ticketed as my lawful
wife, I can't help my wicked heart wandering, do what
I will.'' But at last I believe he cured it by making her
take off her wedding-ring and calling her by her maiden
name as they sat together after the shop was shut, and
so 'a would get to fancy she was only his sweetheart, and
not married to him at all. And as soon as he could
thoroughly fancy he was doing wrong and committing
the seventh, 'a got to like her as well as ever, and they
lived on a perfect picture of mutel love.'
  "Well, 'twas a most ungodly remedy,' murmured
Joseph Poorgrass; "but we ought to feel deep cheerful+
ness that a 'happy Providence kept it from being any
worse. You see, he might have gone the bad road and
given his eyes to unlawfulness entirely -- yes, gross un+
lawfulness, so to say it.'
  "You see,' said Billy Smallbury, "The man's will was
to do right, sure enough, but his heart didn't chime in.'
  "He got so much better, that he was quite godly
in his later years, wasn't he, Jan ?' said Joseph Poor+
grass. "He got himself confirmed over again in a more
serious way, and took to saying ""Amen'' almost as loud
as the clerk, and he liked to copy comforting verses
from the tombstones. He used, too, to hold the money+
plate at Let Your Light so Shine, and stand
<P 112>
godfather
to poor little come-by-chance children; and he kept a
missionary' box upon his table to nab folks unawares
when they called; yes, and he would-box the charity+
boys' ears, if they laughed in church, till they could
hardly stand upright, and do other deeds of piety
natural to the saintly inclined.'
  "Ay, at that time he thought of nothing but high
things,' added Billy Smallbury. "One day Parson Thirdly
met him and said, ""Good-Morning, Mister Everdene; 'tis
THE CHAT
a fine day!'' ""Amen'' said Everdene, quite absent+
like, thinking only of religion when he seed a parson+
  "Their daughter was not at all a pretty chiel at that
time,' said Henery Fray. "Never should have. thought
she'd have growed up such a handsome body as she is.'
  "'Tis to be hoped her temper is as good as her face.'
  "Well, yes; but the baily will have most to do with
the business and ourselves. Ah!' Henery gazed into
the ashpit, and smiled volumes of ironical knowledge.
  "A queer Christian, like the Devil's head in a cowl,
  "He is,' said Henery, implying that irony must cease
at a certain point. "Between we two, man and man, I
believe that man would as soon tell a lie Sundays as
working-days -- that I do so.'
  "Good faith, you do talk!' said Gabriel.
  "True enough,' said the man of bitter moods, looking
round upon the company with the antithetic laughter
that comes from a keener appreciation of the miseries
of life than ordinary men are capable of. 'Ah, there's
people of one sort, and people of another, but that man
 -- bless your souls!'
  Gabriel thought fit to change the subject. "You
must be a very aged man, malter, to have sons growed
mild and ancient' he remarked.
  "Father's so old that 'a can't mind his age, can ye,
father?' interposed Jacob. "And he growled terrible
crooked too, lately' Jacob continued, surveying his
father's figure, which
<P 113>
was rather more bowed than his own.
"Really one may say that father there is three-double.'
  "Crooked folk will last a long while,' said the maltster,
grimly, and not in the best humour.
  "Shepherd would like to hear the pedigree of yer
life, father -- wouldn't ye, shepherd ?
  "Ay that I should,' said Gabriel with the heartiness
of a man who had longed to hear it for several months.
"What may your age be, malter?'
  The maltster cleared his throat in an exaggerated
form for emphasis, and elongating his gaze to the
remotest point of the ashpit! said, in the slow speech
justifiable when the importance of a subject is so
generally felt that any mannerism must be tolerated
in getting at it, "Well, I don't mind the year I were
born in, but perhaps I can reckon up the places I've
lived at, and so get it that way. I bode at Upper Long+
puddle across there' (nodding to the north) "till I were
eleven. I bode seven at Kingsbere' (nodding to the
east) "where I took to malting. I went therefrom to
Norcombe, and malted there two-and-twenty years, and+
two-and-twenty years I was there turnip-hoeing and
harvesting. Ah, I knowed that old place, Norcombe,
years afore you were thought of, Master Oak' (Oak smiled
sincere belief in the fact). "Then I malted at Dur+
nover four year, and four year turnip-hoeing; and
I was fourteen times eleven months at Millpond St.
Jude's ' (nodding north-west-by-north). "Old Twills
wouldn't hire me for more than eleven months at a
time, to keep me from being chargeable to the parish
if so be I was disabled. Then I was three year at
Mellstock, and I've been here one-and-thirty year come
Candlemas. How much is that?"
  "Hundred and seventeen,' chuckled another old
gentleman, given to mental arithmetic and little con+
versation, who had hitherto sat unobserved in a corner.
  "Well, then, that's my age,' said the maltster, em+
phatically.
  "O no, father!' said Jacob. "Your turnip-hoeing
were in the summer and your malting in the winter of
the same years, and ye don't ought to count-both halves
father.'
<P 114>
  "Chok' it all! I lived through the summers, didn't
I? That's my question. I suppose ye'll say next I be
no age at all to speak of?'
  "Sure we shan't,' said Gabriel, soothingly.
  "Ye be a very old aged person, malter,' attested Jan
must have a wonderful talented constitution to be able
to live so long, mustn't he, neighbours?'
  "True, true; ye must, malter, wonderful;' said the
meeting unanimously.
  The maltster, being know pacified, was even generous
enough to voluntarily disparage in a slight degree the
virtue of having lived a great many years, by mentioning
that the cup they were drinking out of was three years
older than he.
  While the cup was being examined, the end of
Gabriel Oak's flute became visible over his smock-frock
I seed you blowing into a great flute by now at Caster+
bridge?'
  "You did,' said Gabriel, blushingh faintly. "I've been
in great trouble, neighbours, and was driven to it.
take it careless-like, shepherd and your time will come
tired?'
  "Neither drum nor trumpet have I heard since
Christmas,' said Jan Coggan. "Come, raise a tune,
Master Oak!'
  "That I will,' said Gabriel, pulling out his flute and
putting it together. "A poor tool, neighbours; but
such as I can do ye shall have and welcome.'
  Oak then struck up "Jockey to the Fair,' and played
that sparkling melody three times through accenting the
notes in the third round in a most artistic and lively
manner by bending his body in small jerks and tapping
with his foot to beat time.
  "He can blow the flute very well -- that 'a can,' said
a young married man, who having no individuality worth
mentioning was known as "Susan Tall's husband.' He
continued, "I'd as lief as not be able to blow into a
flute as well-as that.'
<P 115>
  "He's a clever man, and 'tis a true comfort for us to
have such a shepherd,' murmured Joseph Poorgrass, in
a soft cadence. "We ought to feel full o' thanksgiving
that he's not a player of ba'dy songs 'instead of these
merry tunes; for 'twould have been just as easy for God
to have made the shepherd a loose low man -- a man of
iniquity, so to speak it -- as what he is. Yes, for our wives'
and daughters' sakes we should feel real thanks giving.'
  "True, true, -- real thanksgiving!' dashed in Mark
Clark conclusively, not feeling it to be of any conse+
quence to his opinion that he had only heard about a
word and three-quarters of what Joseph had said.
  "Yes,' added Joseph, beginning to feel like a man in
the Bible; "for evil do thrive so in these times that ye
may be as much deceived in the clanest shaved and
whitest shirted man as in the raggedest tramp upon the
turnpike, if I may term it so.'
  "Ay, I can mind yer face now, shepherd,' said
Henery Fray, criticising Gabriel with misty eyes as he
entered upon his second tune. "Yes -- now I see 'ee
blowing into the flute I know 'ee to be the same man
I see play at Casterbridge, for yer mouth were scrimped
up and yer eyes a-staring out like a strangled man's --
just as they be now.'
  "'Tis a pity that playing the flute should make a man
look such a scarecrow,' observed Mr. Mark Clark, with
additional criticism of Gabriel's countenance, the latter
person jerking out, with the ghastly grimace required by
the instrument, the chorus of "Dame Durden!
  "I hope you don't mind that young man's bad
manners in naming your features?' whispered Joseph to
Gabriel.
  "Not at all,' said Mr. Oak.
  "For by nature ye be a very handsome man,
shepherd,' continued Joseph Poorgrass, with winning
sauvity.
  "Ay, that ye be, shepard,' said the company.
  "Thank you very much,' said Oak, in the modest
tone good
<P 116>
manners demanded, thinking, however, that
he would never let Bathsheba see him playing the
flute; in this severe showing s discretion equal to that
related to its sagacious inventress, the divine Minerva
herself.
  "Ah, when I and my wife were married at Norcombe
Church,' said the old maltster, not pleased at finding
himself left out of the subject "we were called the
handsomest couple in the neighbourhood -- everybody
said so.'
  "Danged if ye bain't altered now, malter,' said a voice
with the vigour natural to the enunciation of a remark+
ably evident truism. It came from the old man in the
background, whose offensiveness and spiteful ways were
barely atoned for by the occasional chuckle he con+
tributed to general laughs.
  "O no, no,' said Gabriel.
  "Don't ye play no more shepherd ' said Susan Tall's
husband, the young married man who had spoken once
before. "I must be moving and when there's tunes
going on I seem as if hung in wires. If I thought after
I'd left that music was still playing, and I not there, I
should be quite melancholy-like.'
  "What's yer hurry then, Laban?' inquired Coggan+
"You used to bide as late as the latest.'
  "Well, ye see, neighbours, I was lately married to a
woman, and she's my vocation now, and so ye see --  -- '
The young man hated lamely.
  "New Lords new laws, as the saying is, I suppose,'
remarked Coggan.
  "Ay, 'a b'lieve -- ha, ha!' said Susan Tall's husband,
in a tone intended to imply his habitual reception of
jokes without minding them at all.   The young man
then wished them good-night and withdrew.
  Henery Fray was the first to follow. Then Gabriel
arose and went off with Jan Coggan, who had offered
him a lodging. A few minutes later, when the remaining
ones were on their legs and about to depart, Fray came
back again in a hurry. Flourishing his finger ominously
he threw a gaze teeming with tidings just -- where his eye
alighted by accident, which happened to be in Joseph
Poorgrass's face.
<P 117>
  "O -- what's the matter, what's the matter, Henery?'
said Joseph, starting back.
  "What's a-brewing, Henrey?' asked Jacob and Mark
Clark.
  "Baily Pennyways -- Baily Pennyways -- I said so; yes,
I said so!'
  "What, found out stealing anything?'
  "Stealing it is. The news is, that after Miss
Everdene got home she went out again to see all was
safe, as she usually do, and coming in found Baily
Pennyways creeping down the granary steps with half a
a bushel of barley. She fleed at him  like a cat -- never
such a tomboy as she is -- of course I speak with closed
doors?'
  "You do -- you do, Henery.'
  "She fleed at him, and, to cut a long story short,
he owned to having carried off five sack altogether, upon
her promising not to persecute him. Well, he's turned
out neck and crop, and my question is, who's going to
be baily now?'
  The question was such a profound one that Henery
was obliged to drink there and then from the large
cup till the bottom was distinctly visible inside. Before
he had replaced it on the table, in came the young man,
Susan Tall's husband, in a still greater hurry.
  "Have ye heard the news that's all over parish?'
  "About Baily Pennyways?'
  "But besides that?'
  "No -- not a morsel of it!' they replied, looking into
the very midst of Laban Tall as if to meet his words
half-way down his throat.
  "What a night of horrors!' murmured Joseph Poor+
grass, waving his hands spasmodically. "I've had the
news-bell ringing in my left ear quite bad enough for a
murder, and I've seen a magpie all alone!'
  "Fanny Robin -- Miss everdene's youngest servant --
can't be found. They've been wanting to lock up the
door these two hours, but she isn't come in. And they
don't know what to do about going to hed for fear of
locking her out. They wouldn't be so concerned if she
hadn't been noticed in such low spirits
<P 118>
these last few
days, and Maryann d'think the beginning of a crowner's
inquest has happened to the poor girl.'
  "O -- 'tis burned -- 'tis burned!' came from Joseph
Poorgrass's dry lips.
  "No -- 'tis drowned!' said 'Tall.
  "Or 'tis her father's razor!' suggested Billy Smallbury,
with a vivid sense of detail.
  "Well -- Miss Everdene wants to speak to one or two
of us before we go to bed. What with this trouble about
the baily, and now about the girl, mis'ess is almost wild.'
  They all hastened up the lane to the farmhouse,
excepting the old maltster, whom neither news, fire,
rain, nor thunder could draw from his hole. There, as
the others' footsteps died away he sat down again and
continued gazing as usual into the furnace with his red,
bleared eyes.
  From the bedroom window above their heads Bath+
sheba's head and shoulders, robed in mystic white, were
dimly seen extended into the air.
  "Are any of my men among you?' she said anxiously.
  "Yes, ma'am, several,' said Susan Tall's husband.
  "Tomorrow morning I wish two or three of you to
make inquiries in the villages round if they have seen
such a person as Fanny Robin. Do it quietly; there is
no reason for alarm as yet. She must have left whilst
we were all at the fire.'
  "I beg yer pardon, but had she any young man court+
ing her in the parish, ma'am?" asked Jacob Smallbury.
  "I don't know,' said Bathsheba.
  "I've never heard of any such thing, ma'am,' said
two or three.
  "It is hardly likely, either,' continued Bathsheba.
"For any lover of hers might have come to the house if
he had been a respectable lad. The most mysterious
matter connected with her absence -- indeed, the only
thing which gives me serious alarm -- is that she was
seen to go out of the house by Maryann with only her
indoor working gown on -- not even a bonnet.'
  "And you mean, ma'am, excusing my words, that a
young
<P 119>
woman would hardly go to see her young man
without dressing up,' said Jacob, turning his mental
vision upon past experiences. "That's true -- she would
not, ma'am.'
  "She had, I think, a bundle, though I couldn't see
very well,' said a female voice from another window,
which seemed that of Maryann. "But she had no
young man about here. Hers lives in Casterbridge, and
I believe he's a soldier.'
  "Do you know his name?' Bathsheba said.
  "No, mistress; she was very close about it.'
  "Perhaps I might be able to find out if I went to
Casterbridge barracks,' said William Smallbury.
  "Very well; if she doesn't return tomorrow, mind
you go there and try to discover which man it is, and
see him. I feel more responsible than I should if she
had had any friends or relations alive. I do hope she
has come to no harm through a man of that kind....
And then there's this disgraceful affair of the bailiff --
but I can't speak of him now.'
  Bathsheba had so many reasons for uneasiness that
it seemed she did not think it worth while to dwell
upon any particular one. "Do as I told you, then'
she said in conclusion, closing the casement.
  "Ay, ay, mistress; we will,' they replied, and moved
away.
  That night at Coggan's, Gabriel Oak, beneath the
screen of closed eyelids, was busy with fancies, and full
of movement, like a river flowing rapidly under its ice.
Night had always been the time at which he saw Bath+
sheba most vividly, and through the slow hours of
shadow he tenderly regarded her image now. It is
rarely that the pleasures of the imagination will compen+
sate for the pain of sleeplessness, but they possibly did
with Oak to-night, for the delight of merely seeing her
effaced for the time his perception of the great differ+
ence between seeing and possessing.
  He also thought of Plans for fetching his few utensils
and books from Norcombe. The Young Man's Best
Companion, The Farrier's Sure Guide, The Veterinary
Surgeon, Paradise Lost, The Pilgrim's Progress, Robinson
Crusoe, Ash's Dictionary, the Walkingame's Arithmetic,
constituted his library;
<P 120>
and though a limited series, it was
one from which he had acquired more sound informa+
tion by diligent perusal than many a man of opportunities
has done from a furlong of laden shelves.
<C ix>
<P 121>
THE HOMESTEAD -- A VISITOR -- HALF-CONFIDENCES
By daylight, the Bower of Oak's new-found mistress,
Bathsheba Everdene, presented itself as a hoary build+
ing, of the early stage of Classic Renaissance as regards
its architecture, and of 'a proportion which told at a
glance that, as is so frequently the case, it had once
been the memorial hall upon a small estate around it,
now altogether effaced as a distinct property, and merged
in the vast tract of a non-resident landlord, which com+
prised several such modest demesnes.
  Fluted pilasters, worked from the solid stone,
decorated its front, and above the roof the chimneys
were panelled or columnar, some coped gables with
finials and like features still retaining traces of their
Gothic extraction. Soft Brown mosses, like faded
velveteen, formed cushions upon the stone tiling, and
tufts of the houseleek or sengreen sprouted from the
eaves of the low surrounding buildings. A gravel walk
leading from the door to the road in front was encrusted
at the sides with more moss -- here it was a silver-green
variety, the nut-brown of the gravel being visible to the
width of only a foot or two in the centre. This circum+
stance, and the generally sleepy air of the whole prospect
here, together with the animated and contrasting state
of the reverse facade, suggested to the imagination that
on the adaptation of the building for farming purposes
the vital principle' of the house had turned round inside
its body to face the other way. Reversals of this kind,
strange deformities, tremendous paralyses, are often seen
to be inflicted by trade upon edifices -- either individual
or in the aggregate as streets and towns -- which were
originally planned for pleasure alone.
  Lively voices were heard this morning in the upper
rooms, the main staircase to which was of hard oak, the
balusters, heavy as bed-posts, being turned and moulded
in the quaint
<P 122>
fashion of their century, the handrail as
stout as a parapet-top, and the stairs themselves con+
tinually twisting round like a person trying to look over
his shoulder. Going up, the floors above were found
to have a very irregular surface, rising to ridges, sinking
into valley; and being just then uncarpeted, the face
of the boards was seen to be eaten into innumerable
the opening and shutting of every door a tremble
followed every bustling movement, and a creak accom+
panied a walker about the house like a spirit, wherever+
he went.
  In the room from which the conversation proceeded,
Bathsheba and her servant-companion, Liddy Small+
bury were to be discovered sitting upon the floor, and
sorting a complication of papers, books, bottles, and
rubbish spread out thereon -- remnants from the house+
hold stores of the late occupier. Liddy, the maltster's
great-granddaughter, was about Bathsheba's equal in
age, and her face was a prominent advertisement of the
features' might have lacked in form was amply made up
for by perfection  of hue, which at this winter-time was
the softened ruddiness on a surface of high rotundity
and, like the presentations of those great colourists, it
was a face which kept well back from the boundary
between comeliness and the ideal. Though elastic in
nature she was less daring than Bathsheba, and occa+
sionally showed some earnestness, which consisted half
of genuine feeling, and half of mannerliness superadded
by way of duty.
  Through a partly-opened door the noise of a scrubbing+
brush led up to the charwoman, Maryann Money, a person
who for a face had a circular disc, furrowed less by age
than by long gazes of perplexity at distant objects. To
think of her was to get good-humoured; to speak of
her was to raise the image of a dried Normandy
pippin.
  "Stop your scrubbing a moment,' said Bathsheba
through the door to her. "I hear something.'
  Maryann suspended the brush.
<P 123>
  The tramp of a horse was apparent, approaching the
front of the building. The paces slackened, turned in
at the wicket, and, what was most unusual, came up
the mossy path close to the door. The door was
tapped with the end of a crop or stick.
  "What impertinence!' said Liddy, in a low voice.
"To ride up the footpath like that! Why didn't he
stop at the gate? Lord! "tis a gentleman! I see the
top of his hat.'
  "Be quiet!' said Bathsheba.
  The further expression of Liddy's concern was con+
tinued by aspect instead of narrative.
  "Why doesn't Mrs. Coggan go to the door?' Bath+
sheba continued.
  Rat-tat-tat-tat, resounded more decisively from Bath+
sheba's oak.
  "Maryann, you go!' said she, fluttering under the
onset ot a crowd of romantic possibilities.
  "O ma'am -- see, here's a mess!'
  The argument was unanswerable after a glance at
Maryann.
  "Liddy -- you must,' said Bathsheba.
  Liddy held up her hands and arms, coated with dust
from the rubbish they were sorting, and looked implor+
ingly at her mistress.
  "There -- -Mrs. Coggan is going!' said Bathsheba,
exhaling her relief in the form of a long breath which
had lain in her bosom a minute or more.
  The door opened, and a deep voice said --
  "Is Miss Everdene at home?'
  "I'll see, sir,' said Mrs. Coggan, and in a minute
appeared in the room.
  "Dear, what a thirtover place this world is!' con+
tinued Mrs. Coggan (a wholesome-looking lady who
had a voice for each class of remark according to the
emotion involved; who could toss a pancake or twirl
a mop with the accuracy of pure mathematics, and
who at this moment showed hands shaggy with frag+
ments of dough and arms encrusted with flour). "I
am never up to my elbows, Miss, in making a pudding
but one of two things do happen -- either my nose must
needs begin
<P 124>
tickling, and I can't live without scratching
  A woman's dress being a part of her countenance,
and any disorder in the one being of the same nature
with a malformation or wound in the other, Bathsheba
said at once --
  "I can't see him in this state. Whatever shall I do?'
  Not-at-homes were hardly naturalized in Weatherbury
farmhouses, so Liddy suggested -- "Say you're a fright
with dust, and can't come down.'
  "Yes -- that sounds very well,' said Mrs. Coggan,
critically.
  "Say I can't see him -- that will do.'
  Mrs. Coggan went downstairs, and returned the
answer as requested, adding, however, on her own
responsibility, "Miss is dusting bottles, sir, and is quite
a object -- that's why 'tis.'
  "Oh, very well,' said the deep voice,' indifferently.
"All I wanted to ask was, if anything had been heard
of Fanny Robin?'
  "Nothing, sir -- but we may know to-night. William
Smallbury is gone to Casterbridge, where her young
man lives, as is supposed, and the other men be inquir+
ing about everywhere.'
  The horse's tramp then recommenced and -retreated,
and the door closed.
  "Who is Mr. Boldwood?' said Bathsheba.
  "A gentleman-farmer at Little Weatherbury.'
  "Married?'
  "No, miss.'
  "How old is he?'
  "Forty, I should say -- very handsome -- rather stern+
looking -- and rich.'
  "What a bother this dusting is!  I am always in
some unfortunate plight or other;' Bathsheba said,
complainingly. "Why should he inquire aboat Fanny?'
  "Oh, because, as she had no friends in her childhood,
he took her and put her to school, and got her her
place here under your uncle. He's a very kind man
that way, but Lord -- there!'
  "What?'
  "Never was such a hopeless man for a woman!
He's been
<P 125>
courted by sixes and sevens -- all the girls,
gentle and simple, for miles round, have tried him. Jane
Perkins worked at him for two months like a slave,
and the two Miss Taylors spent a year upon him,
and he cost Farmer Ives's daughter nights of tears
and twenty pounds' worth of new clothes; but Lord --
the money might as well have been thrown out of the
window.'
  A little boy came up at this moment and looked in
upon them. This child was one of the Coggans who,
with the Smallburys, were as common among the
families of this district as the Avons and Derwents
among our rivers. He always had a loosened tooth or
a cut finger to show to particular friends, which he did
with an air of being thereby elevated above the common
herd of afflictionless humanity -- to which exhibition
of congratulation as well as pity.
  "I've got a pen-nee!' said Master Coggan in a
scanning measure.
  "Well -- who gave it you, Teddy?' said Liddy.
  "Mis-terr Bold-wood! He gave it to me for opening
the gate.'
  "What did he say?'
  "He said "Where are you going, my little man?''
and I said, "To Miss Everdene's please;'' and he said,
"She is a staid woman, isn't she, my little man?' and
I said, ""Yes.'''
  "You naughty child! What did you say that for?'
  "Cause he gave me the penny!'
  "What a pucker evrything is in!' said Bathsheba,
discontentedly when the child had gone. 'Get away,
thing! You ought to be married by this time, and not
here troubling me!'
  "Ay, mistress -- so I did. But what between the poor
men I won't have, and the rich men who won't have me,
I stand as a pelicon in the wilderness!'
  "Did anybody ever want to marry you miss?' Liddy
ventured to ask when they were again alone. "Lots of
'em, i daresay.?'
  Bathsheba paused, as if about to refuse a reply, but
the temptation to say yes, since it was really in her
power was irresistible by aspiring virginity, in spite of
her spleen at having been published as old.
<P 126>
  "A man wanted to once,' she said, in a highly experi+
enced tone and the image of Gabriel Oak, as the farmer,
rose before her.
  "How nice it must seem!' said Liddy, with the fixed
features of mental realization. "And you wouldn't have
him?'
  "He wasn't quite good enough for me.'
  "How sweet to be able to disdain, when most of us
are glad to say, ""Thank you!'' I seem I hear it.
""No, sir -- I'm your better,'' or ""Kiss my foot, sir; my
face is for mouths of consequence.'' And did you love
him, miss?'
  "Oh, no. But I rather liked him.'
  "Do you now?'
  "Of course not -- what footsteps are those I hear?'
  Liddy looked from a back window into the courtyard
behind, which was now getting low-toned and dim with
the earliest films of night. A crooked file of men was
approaching the back door. The whole string of trailing
individuals advanced in the completest balance of inten+
tion, like the remarkable creatures known as Chain
Salpae, which, distinctly organized in other respects, have
one will common to a whole family. Some were, as
usual, in snow-white smock-frocks of Russia duck, and
some in whitey-brown ones of drabbet -- marked on the
wrists, breasts, backs, and sleeves with honeycomb-work.
Two or three womcn in pattens brought up the rear.
  "The Philistines be upon us,' said Liddy, making her
nose white against the glass.
  "Oh, very well. Maryann, go down and keep them
in the kitchen till I am dressed, and then show them in
to me in the hall.'
<C x>
<P 127>
HALF-AN-HOUR later Bathsheba, in finished dress,
and followed by Liddy, entered the upper end of the old
hall to find that her men had all deposited themselves on
a long form and a settle at the lower extremity. She sat
down at a table and opened th e time-book, pen in her
hand, with a canvas money-bag beside her. From this
she poured a small heap of coin. Liddy chose a
position at her elbow and began to sew, sometimes
pausing and looking round, or with the air of a privileged
person, taking up one of the half-sovereigns lying before
her and surveying it merely as a work of art, while
strictly preventing her countenance from expressing any
wish to possess it as money.
  "Now before I begin, men,' said Bathsheba, "I have
two matters to speak of. The first is that the bailiff is
dismissed for thieving, and that I have formed a resolu+
tion to have no bailiff at all, but to manage everything
with my own head and hands.'
  The men breathed an audible breath of amazement.
  "The next matter is, have you heard anything of
Fanny?'
  "Nothing, ma'am.
  "Have you done anything?'
  "I met Farmer Boldwood,' said Jacob Smallbury, 'and
I went with him and two of his men, and dragged New+
mill Pond, but we found nothing.'
  "And the new shepherd have been to Buck's Head,
by Yalbury, thinking she had gone there, but nobody
had seed her,' said Laban Tall.
  "Hasn't William Smallbury been to Casterbridge?'
  "Yes, ma'am, but he's not yet come home. He
promised to be back by six.'
  "It wants a quarter to six at present,' said Bathsheba,
 
<P 128>
looking at her watch. "I daresay he'll be in directly.
Well, now then' -- she looked into the book -- "Joseph
Poorgrass, are you there?'
  "Yes, sir -- ma'am I mane,' said the person addressed.
"I be the personal name of Poorgrass.'
  "And what are you?'
  "Nothing in my own eye. In the eye of other people
 -- well, I don't say it; though public thought will out.'
  "What do you do on the farm?'
  "I do do carting things all the year, and in seed time I
shoots the rooks and sparrows, and helps at pig-killing, sir.'
  "How much to you ?'
  "Please nine and ninepence and a good halfpenny
where 'twas a bad one, sir -- ma'am I mane.'
  "Quite correct. Now here are ten shillings in addi+
tion as a small present, as I am a new comer.'
  Bathsheba blushed slightly at the sense of being
generous in public, and Henery Fray, who had drawn
up towards her chair, lifted his eyebrows and fingers to
express amazement on a small scale.
  "How much do I owe you -- that man in the corner --
what's your name?' continued Bathsheba.
  "Matthew Moon, ma'am,' said a singular framework of
clothes with nothing of any consequence inside them,
which advanced with the toes in no definite direction
forwards, but turned in or out as they chanced to swing.
  "Matthew Mark, did you say? -- speak out -- I shall
not hurt you,' inquired the young farmer, kindly.
  "Matthew Moon mem' said Henery Fray, correct+
ingly, from behind her chair, to which point he had
edged himself.
  "Matthew Moon,' murmured Bathsheba, turning her
bright eyes to the book. "Ten and twopence halfpenny
is the sum put down to you, I see?'
  "Yes, mis'ess,' said Matthew, as the rustle of wind
among dead leaves.
  "Here it is and ten shillings. Now -the next -- Andrew
Randle, you are a new man, I hear. How come you to
leave your last farm?'
<P 129>
  "P-p-p-p-p-pl-pl-pl-pl-l-l-l-l-ease, ma'am, p-p-p-p-pl-pl+
pl-pl-please, ma'am-please'm-please'm --  --  '
  "'A's a stammering man, mem,' said Henery Fray in
an undertone, "and they turned him away because the
only time he ever did speak plain he said his soul was
his own, and other iniquities, to the squire. "A can cuss,
mem, as well as you or I, but 'a can't speak a common
speech to save his life.'
  "Andrew Randle, here's yours -- finish thanking me
in a day or two. Temperance Miller -- oh, here's another,
Soberness -- both women I suppose?'
  "Yes'm. Here we be, 'a b'lieve,' was echoed in shrill
unison.
  "What have you been doing?'
  "Tending thrashing-machine and wimbling haybonds,
and saying ""Hoosh!'' to the cocks and hens when they
go upon your seeds and planting Early Flourballs and
Thompson's Wonderfuls with a dibble.'
  "Yes -- I see. Are they satisfactory women?' she
inquired softly of Henery Fray.
  "O mem -- don't ask me! Yeilding women?' as
scarlet a pair as ever was!' groaned Henery under his
breath.
  "Sit down.
  "Who, mem?'
  "Sit down,'
  Joseph Poorgrass, in the background twitched, and
his lips became dry with fear of some terrible conse+
quences, as he saw Bathsheba summarily speaking, and
Henery slinking off to a corner.
  "Now the next. Laban Tall, you'll stay on working
for me?'
  "For you or anybody that pays me well, ma'am,'
replied the young married man.
  "True -- the man must live!' said a woman in the
back quarter, who had just entered with clicking pattens.
  "What woman is that?" Bathsheba asked.
  "I be his lawful wife!' continued the voice with
greater prominence of manner and tone. This lady
called herself five-and-twenty, looked thirty, passed as
thirty-five, and was forty. She was a woman who never,
like some newly married, showed
<P 130>
conjugal tenderness in
public, perhaps because she had none to show.
  "Oh, you are,' said Bathsheba. "Well, Laban, will
you stay on ?'
  "Yes, he'll stay, ma'am!' said again the shrill tongue
of Laban's lawful wife.
  "Well, he can speak for himself, I suppose.'
  "O Lord, not he, ma'am! A simple tool. Well
enough, but a poor gawkhammer mortal,' the wife replied
  "Heh-heh-heh!' laughed the married man with a
hideous effort of appreciation, for he was as irrepressibly
good-humoured under ghastly snubs as a parliamentary
candidate on the hustings.
  The names remaining were called in the same
manner.
  "Now I think I have done with you,' said Bathsheba,
closing the book and shaking back a stray twine of hair.
"Has William Smallbury returned?'
  "No, ma'am.'
  "The new shepherd will want a man under him,'
suggested Henery Fray, trying to make himself official
again by a sideway approach towards her chair.
  "Oh -- he will. Who can he have?'
  "Young Cain Ball is a very good lad,' Henery said,
"and Shepherd Oak don't mind his youth?' he added,
turning with an apologetic smile to the shepherd, who
had just appeared on the scene, and was now leaning
against the doorpost with his arms folded.
  "No, I don't mind that,' said Gabriel.
  "How did Cain come by such a name?' asked
Bathsheba.
  "Oh you see, mem, his pore mother, not being a
Scripture-read woman made a mistake at his christening,
thinking 'twas Abel killed Cain, and called en Cain,
but 'twas too late, for the name could never be got rid
of in the parish. "Tis very unfortunate for the boy.'
  "It is rather unfortunate.'
  "Yes. However, we soften it down as much as we
can, and call him Cainey. Ah, pore widow-woman!
she cried her heart
<P 131>
out about it almost. She was
brought up by a very heathen father and mother, who
never sent her to church or school, and it shows how
the sins of the parents are visited upon the children,
mem.'
  Mr. Fray here drew up his features to the mild degree
of melancholy required when the persons involved in
the given misfortune do not belong to your own family.
  "Very well then, Cainey Ball to be under-shepherd
And you quite understand your duties? -- you I mean,
Gabriel Oak?'
  "Quite well, I thank you Miss Everdene,' said
Shepard Oak from the doorpost. "If I don't, I'll
inquire.' Gabriel was rather staggered by the remark+
able coolness of her manner. Certainly nobody without
previous information would have dreamt that Oak and
the handsome woman before whom he stood had ever
been other than strangers. But perhaps her air was
the inevitable result of the social rise which had advanced
her from a cottage to a large house and fields. The
case is not unexampled in high places. When, in the
writings of the later poets, Jove and his family are found
to have moved from their cramped quarters on the peak
of Olympus into the wide sky above it, their words show
a proportionate increase of arrogance and reserve.
Footsteps were heard in the passage, combining in
their character the qualities both of weight and measure,
rather at the expense of velocity.
(All.) 'Here's Billy Smallbury come from Caster+
bridge.'
' And what's the news ? ' said Bathsheba, as William,
after marching to the middle of the hall, took a hand+
kerchief from his hat and wiped his forehead from its
centre to its remoter boundaries.
'I should have been sooner, miss,' he said, 'if it
hadn't been for the weather.' He then stamped with
each foot severely, and on looking down his boots were
perceived to be clogged with snow.
'Come at last, is it ?' said Henery.
" Well, what about Fanny ? ' said Bathsheba.
"Well, ma'am, in round numbers, she's run away with
the soldiers,' said William.
<P 132>
" No; not a steady girl like Fanny ! '
"I'll tell ye all particulars. When I got to Caster,
bridge Barracks, they said, " The Eleventh Dragoon+
Guards be gone away, and new troops have come."
The Eleventh left last week for Melchester and onwards.
The Route came from Government like a thief in the
night, as is his nature to, and afore the Eleventh knew
it almost, they wem on the march. They passed near
here.'
Gabriel had listened with interest. 'I saw them go,'
he said.
' Yes,' continued William, ' they pranced down the
street playing "The Girl I Left Behind Me,' so 'tis
said, in glorious notes of triumph. Every looker-on's
inside shook with the blows of the great drum to his
deepest vitals, and there was not a dry eye throughout
the town among the public-house people and the name+
less women !.'
'But they're not gone to any war?'
'No, ma'am; but they be gone to take the places
of them who may, which is very close connected. And
so I said to myself, Fanny's young man was one of the
regiment, and she's gone after him. There, ma'am,
that's it in black and white.'
Gabriel remained musing and said nothing, for he
was in doubt.
'Well, we are not likely to know more to-night, at
any rate,' said Bathsheba. 'But one of you had better
run across to Farmer Boldwood's and tell him that
much.'
She then rose; but before retiring, addressed a few
words to them with a pretty dignity, to which her
mourning dress added a soberness that was hardly to
be found in the words themselves.
'Now mind, you have a mistress instead of a master
I don't yet know my powers or my talents in farming;
but I shall do my best, and if you serve me well, so
shall I serve you. Don't any unfair ones among you
(if there are any such, but I hope not) suppose that
because I'm a woman I don't understand the difference
between bad goings-on and good.'
<P 133>
(All.) 'Nom!.
(Liddy.) 'Excellent well said.'
'I shall be up before you are awake; I shall be
afield before you are up ; and I shall have breakfasted
before you are afield. In short, I shall astonish you all.
(All.) 'Yes'm!'
'And so good-night.'
(All.) 'Good-night, ma'am.'
Then this small-thesmothete stepped from the table,
and surged out of the hall, her black silk dress licking
up a few straws and dragging them along with a scratch+
ing noise upon the floor. biddy, elevating her feelings
to the occasion from a sense of grandeur, floated off
behind Bathsheba with a milder dignity not entirely
free from travesty, and the door was closed.
<C xi>
<P 134>
OUTSIDE THE BARRACKS -- SNOW -- A MEETING
FOR dreariness nothing could surpass a prospect in the
outskirts of a certain town and military station, many
miles north of Weatherbury, at a later hour on this
same snowy evening -- if that may be called a prospect
of which the chief constituent was darkness.
It was a night when sorrow may come to the
brightest without causing any great sense of incongruity :
when, with impressible persons, love becomes solicitous+
ness, hope sinks to misgiving, and faith to hope : when
the exercise of memory does not stir feelings of regret
at opportunities for ambition that have been passed by,
and anticipation does not prompt to enterprise.
The scene was a public path, bordered on the left
hand by a river, behind which rose a high wall. On
the right was a tract of land, partly meadow'and partly
moor, reaching, at its remote verge, to a wide undulating
uplan.
The changes of the seasons are less obtrusive on
spots of this kind than amid woodland scenery. Still,
to a close observer, they are just as perceptible ; the
difference is that their media of manifestation are less
trite and familiar than such well-known ones as the
bursting of the buds or the fall of the leaf. Many are
not so stealthy and gradual as we may be apt to
imagine in considering the general torpidity of a moor
or waste. Winter, in coming to the country hereabout,
advanced in well-marked stages, wherein might have
been successively observed the retreat of the snakes,
the transformation of the ferns, the filling of the pools,
a rising of fogs, the embrowning by frost, the collapse
of the fungi, and an obliteration by snow.
This climax of the series had been reached to-night on
the aforesaid moor, and for the first time in the season
its
<P 135>
irregularities were forms without features ; suggestive
of anything, proclaiming nothing, and without more
character than that of being the limit of something
else -- the lowest layer of a firmament of snow. From
this chaotic skyful of crowding flakes the mead and
moor momentarily received additional clothing, only
to appear momentarily more naked thereby. The vast
arch of cloud above was strangely low, and formed as
it were the roof of a large dark cavern, gradually sinking
in upon its floor; for the instinctive thought was that
the snow lining the heavens and that encrusting the
earth would soon unite into one mass without any
intervening stratum of air at all.
We turn our attention to the left-hand characteristics ;
which were flatness in respect of the river, verticality
in respect of the wall behind it, and darkness as to
both. These features made up the mass. If anything
could be darker than the sky, it was the wall, and if any
thing could be gloomier than the wall it was the river
beneath. The indistinct summit of the facade was
notched and pronged by chimneys here and there, and
upon its face were faintly signified the oblong shapes
of windows, though only in the upper part. Below,
down to the water's edge, the flat was unbroken by
hole or projection.
An indescribable succession of dull blows, perplexing
in their regularity, sent their sound- with difficulty
through the fluffy atmosphere. It was a neighbouring
clock striking ten The bell was in the open air, and
being overlaid with several inches of muffling snow, had
lost its voiee for the time.
About this hour the snow abated : ten flakes fell
where twenty had fallen, then one had the room of
ten. Not long after a form moved by the brink of
the river.
By its outline upon the colourless background, a close
observer might have seen 'that it was small. This was
all that was positively discoverable, though it seemed
human.
The shape went slowly along, but without much
exertion, for the snow, though sudden, was not as yet
more than two inches deep. At this time some words
were spoken aloud : --
' One. Two. 'Three. Four. Five.'
 Between each utterance the little shape advanced
about half a dozen yards. It was evident now that
the windows high
<P 136>
in the wall were being counted.
The word 'Five' represented the fifth window from
the end of the wall.
Here the spot stopped, and dwindled smaller. The
figure was stooping. Then a morsel of snow flew
across the river towards the fifth window. It smacked
against the wall at a point several yards from its mark.
The throw was the idea of a man conjoined with the
execution of a woman. No man who had ever seen bird,
rabbit, or squirrel in his childhood, could possibly have
thrown with such utter imbecility as was shown here.
Another attempt, and another ; till by degrees the
wall must have become pimpled with the adhering
lumps of snow  At last one fragment struck the fifth
window.
The river would have been; seen by day to be of
that deep smooth sort which races middle and' sides
with the same gliding precision, any irregularities of
speed being immediately corrected by a small whirl+
pool. Nothing was heard in reply to the signal but
the gurgle and cluck of one of these invisible wheels --
together with a few small sounds which a sad man
would have called moans, and a happy man laughter --
caused by the flapping of the waters against trifling
objects in other parts of the stream.
The window was struck again in the same manner.
Then a noise was heard, apparently produced by
the opening of the window. This was followed by a
voice from the same quarter.
'Who's there ? '
The tones were masculine, and not those of surprise.
The high wall being that of a barrack, and marriage
being looked upon with disfavour in the army, assigna+
tions and communications had probably been made
across the river before tonight.
"Is it Sergeant Troy?' said the blurred spot in the
snow, tremulously.
This person was so much like a mere shade upon
the earth, and the other speaker so much a part of
the building, that one would have said the wall was
holding a conversation with the snow.
<P 137>
'Yes,' came suspiciously from the shadow. ' What
girl are you ? '
'O, Frank -- don't you know me ?' said the spot.
'Your wife, Fanny Robin.'
' Fanny !.' said the wall, in utter astonishment.
'Yes,' said the girl, with a half-suppressed gasp of
emotion.
There was something in the woman's tone which is
not that of the wife, and there was a mannerin the man
which is rarely a husband's. The dialogue went on:
'How did you come here ?'
'I asked which was your window. Forgive me !. '
"I did not expect you to-night. Indeed, I did not
think you would come at all. It was a wonder you
found me here. I am orderly to-morrow.'
'You said I was to come.'
' Well -- I said that you might.'
'Yes, I mean that I might. You are glad to see me,
Frank ? '
' O yes -- of course.'
' Can you -- come to me !.'
'My dear Fan, no .! The bugle has sounded, the
barrack gates are closed, and I have no leave. We are
all of us as good as in the county gaol till to-morrow
morning.'
' Then I shan't see you till then .! ' The words- were
in a faltering tone of disappointment.
' How did you get here from Weatherbury ? '
'I walked -- some part of the way -- the rest by the
carriers.'
' I am surprised.'
' Yes -- so am I. And Frank, when will it 'be ? '
' What ? '
' That you promised.'
" I don't quite recollect.'
'0 You do! Don't speak like that. It weighs me
to the earth. It makes me say what ought to be said
first by you.'
' Never mind -- say it.'
'0, must I? -- it is, when shall we be married,
Frank ? '
" Oh, I " see. Well --  you have to get proper
clothes.'
"I have money. Will it be by banns or license ?'
<P 138>
" Banns, I should think.'
" And we live in two parishes.'
"Do we ? What then?'
"My lodgings are in St. Mary's, and this is not. So
they will have to be published in both.'
"Is that the law?'
" Yes. O Frank -- you think me forward, I am
afraid .! Don't, dear Frank -- will you -- for I love you so.
And you said lots of times you would marry me, and
and -- I -- I -- I --  -- '
  "Don't cry, now! It is foolish. If i said so, of
course I will.'
'And shall I put up the banns in my parish, and will
you in yours?'
"Yes'
"To-morrow?'
"Not tomorrow. We'll settle in a few days.'
"You have the permission of the officers?'
"No, not yet.'
"O -- how is it? You said you almost had before
you left Casterbridge.'
"The fact is, I forgot to ask. Your coming like this
I'll go away now. Will you qoDe,and seq be to-morroy
is so sudden and unexpected.'
"Yes -- yes -- it is. It was wrong of me to worry you.
I'll go away now. Will you come and see me to-morrow,
at Mrs. Twills's, in North Street? I don't like to come
to the Barracks. There are bad women about, and they
think me one.'
"Quite,so. I'll come to you, my dean Good-night.'
"Good-night, Frank -- good-night!'
And the noise was again heard of a window closing
The little spot moved away. When she passed the
corner a subdued exclamation was heard inside the
wall.
"Ho -- ho -- Sergeant -- ho -- ho!' An expostulation
followed, but it was indistinct; and it became lost amid
a low peal of laughter, which was hardly distinguishable
from the gurgle of the tiny whirlpools outside.
<C xii>
<P 139>
FARMERS -- A RULE -- IN EXCEPTION
THE first public evidence of Bathsheba's decision to
be a farmer in her own person and by proxy no more
was her appearance the following market-day in. the
cornmarket at Casterbridge.
The low though extensive hall, supported by beams
and pillars, and latterly dignified by-the name of Corn Ex+
change, was thronged with hot men who talked among
each other in twos and threes, the speaker of the minute
looking sideways into his auditor's face and concentrating
his argument by a contraction of one eyelid during de+
livery. The greater number carried in their hands
ground-ash saplings, using them partly as walking-sticks
and partly for poking up pigs, sheep, neighbours with
their backs turned, and restful things in general, which
seemed to require such treatment in the course of their
peregrinations. During conversations each subjected
his sapling to great varieties of usage -- bending it round
his back, forming an"arch of it between his two hands,
overweighting it on the ground till it reached nearly a
semicircle; or perhaps it was hastily tucked under the
arm whilst the sample-bag was pulled forth and a hand+
ful of corn poured into the palm, which, after criticism,
was flung upon the floor, an issue of events perfectly
well known to half-a-dozen acute town-bred fowls which
had as usual crept into the building unobserved, and
waited the fulfilment of their anticipations with a high+
stretched neck and oblique eye.
Among these heavy yeomen a feminine figure glided,
the single one of her sex that the room contained. She
was prettily and even daintily dressed. She moved
between them as a chaise between carts, was heard after
them as a romance after sermons, was felt among them
like a breeze among furnaces. It had required a little
determination -- far more than she had at
<P 140>
first imagined
 -- to take up a position here, for at her first entry the
lumbering dialogues had ceased, nearly every face had
been turned towards her, and those that were already
turned rigidly fixed there.
Two or three only of the farmers were personally
known to Bathsheba, and to these she had made her
way. But if she was to be the practical woman she had
intended to show herself, business must be carried on,
introductions or none, and she ultimately acquired con+
fidence enough to speak and reply boldly to men merely
known to her by hearsay. Bathsheba too had her
sample-bags, and by degrees adopted the professional
pour into the hand -- holding up the grains in her narrow
palm for inspection, in perfect Casterbridge manner.
Something in the exact arch of her upper unbroken
row of teeth, and in the keenly pointed corners of her
red mouth when, with parted lips, she somewhat
defiantly turned up her face to argue a point with a
tall man, suggested that there was potentiality enough
in that lithe slip of humanity for alarming exploits of
sex, and daring enough to carry them out. But her eyes
had a softness -- invariably a softness -- which, had they
not been dark, would have seemed mistiness; as they
were, it lowered an expression that might have been
piercing to simple clearness,
Strange to say of a woman in full bloom and vigor,
she always allowed her interlocutors to finish their state+
ments before rejoining with hers. In arguing on prices,
he held to her own firmly, as was natural in a dealer,
and reduced theirs persistently, as was inevitable in a
oman. But there was an elasticity in her firmness
which removed it from obstinacy, as there was a naivete
in her cheapening which saved it from meanness.
Those of the farmers with whom she had no dealings
by far the greater part) were continually asking each
other, "Who is she?' The reply would be --
"Farmer Everdene's niece; took on Weatherbury
Upper Farm; turned away the baily, and swears she'll do
verything herself.'
The other man would then shake his head.
<P 141>
"Yes, 'tis a pity she's so headstrong,' the first would
say. "But we ought to be proud of her here -- she
lightens up the old place. 'Tis such a shapely maid,
however, that she'll soon get picked up.'
It would be ungallant to suggest that the novelty of
her engagement in such an occupation had almost as
much to do with the magnetism as had the beauty of
her face and movements. However, te interest was
eneral, and this Saturday's debut in the forum, whatever
it may have been to Bathsheba as the buying and selling
farmer, was unquestionably a triumph to her as the
maiden. Indeed, the sensation was so pronounced that
her instinct on two or three occasions was merely to
valk as a queen among these gods of the fallow, like a
little sister of a little Jove, and"to neglect closing prices
altogether.
The numerous evidences of-her power to attract were
only thrown into greater relief by a marked exception.
Women seem to have eyes in their ribbons for such
matters as these. Bathsheba, without looking within
a right angle of him, was conscious of a black sheep
among the flock.
It perplexed her first. If there had been a respect+
able minority on either side, the case would have been
most natural. If nobody had regarded her, she would
have -- -taken the matter indifferently -- such cases had
occurred. If eveybody, this man included, she would
have taken it as a matter of course -- people had done
so before. But the smallness of the exception made the
mystery.
She soon knew thus much of the recusant's appear+
ance. He was a gentlemanly man, with full and
distinctly outlined Roman features, the prominences
of which glowed in the sun with a bronze-like richness
of tone. He was erect in attitude, and quiet in
demeanour. One characteristic pre-eminently marked
him -- dignity.
Apparently he had some time ago reached that
entrance to middle age at which a man's aspect naturally
ceases to alter for the term of a dozen years or so; and,
artificially, a woman't does likewise.   Thirty-five and
fifiy were his limits of variation -- he might have been
either, or anywhere between the two.
It may be said that married men of forty are usually
ready
<P 142>
and generous enough to fling passing glances at
any specimen of moderate beauty they may discern by
the way. Probably, as with persons playing whist for
love, the consciousness of a certain immunity under
any circumstances from that worst possible ultimate,
the having to pay, makes them unduly speculative.
Bathsheba was convinced that this unmoved person
was not a married man.
When marketing was over, she rushed off to Liddy,
who was waiting for her -- beside the yellowing in which
they had driven to town. The horse was put in, and
on they trotted Bathsheba's sugar, tea, and drapery
parcels being packed behind, and expeessing in some
indescribable manner, by their colour, shape, and
general lineaments, that they were that youmg lady+
farmer's property, and the grocer's and drapers no
more.
" I've been through it, Liddy, and it is over. I shan't
mind it again, for they will all have grown accustomed
to seeing me there; but this morning it was as bad as
being married -- eyes everywhere!'
"I knowed it would. be,' Liddy said "Men be such
a terrible class of society to look at a body.'
"But there was one man who had more sense than
to waste his time upon me.' The information was put
in this form that Liddy might not for a moment suppose
her mistress was at all piqued. "A very good-looking
man,' she continued, "upright; about forty, I should
think. Do you know at all who he could be?'
Liddy couldn't think.
"Can't you guess at all?' said Bathsheba with some
disappointment.
"I haven't a notion; besides, 'tis no difference, since
he took less notice of you than any of the rest. Now,
if he'd taken more, it would have mattered a great deal.'
Bathsheba was suffering from the reverse feeling just
then, and they bowled along in silence. A low carriage,
bowling along still more rapidly behind a horse of un+
impeachable breed, overtook and passed them.
"Why, there he is!' she said.
Liddy looked. "That! That's Farmer Boldwood --
of course
<P 143>
'tis -- the man you couldn't see the other day
when he called.'
"Oh, Farmer Boldwood,' murmured Bathsheba, and
looked at him as he outstripped them. The farmer had
never turned his head once, but with eyes fixed on the
most advanced point along the road, passed as uncon+
sciously and abstractedly as if Bathshea and her charms
were thin air.
"He's an interesting man -- don't you think so?' she
remarked.
"O yes, very. Everybody owns it,' replied Liddy.
"I wonder why he is so wrapt up and indifferent, and
seemingly so far away from all he sees around him,'
"It is said -- but not known for certain -- that he met
with some bitter disappointment when he was a young
man and merry. A woman jilted him, they say.'
"People always say that -- and we know very well
women scarcely ever jilt men; 'tis the men who jilt us.
I expect it is simply his nature to be so reserved.'
"Simply his nature -- I expect so, miss -- nothing else
in the world.'
"Still, 'tis more romantic to think he has been served
cruelly, poor thing'! Perhaps, after all, he has! I
"Depend upon it he has. O yes, miss, he has!
feel he must have.'
"However, we are very apt to think extremes of
people. I --  shouldn't wonder after all if it wasn't a
little of both -- just between the two -- rather cruelly
used and rather reserved.'
"O dear no, miss -- I can't think it between the
two!'
"That's most likely.'
"Well, yes, so it is. I am convinced it is most likely.
You may --  take my word, miss, that that's what's the
matter with him.'
<C xiii>
<P 144>
SORTES SANCTORUM -- THE VALENTINE
IT was Sunday afternoon in the farmhouse, on the
thirteenth of February. Dinner being over, Bathsheba,
for want of a better companion, had asked Liddy to
come and sit with her. The mouldy pile was dreary
in winter-time before the candles were lighted and the
shutters closed ; the atmosphere of the place seemed
as old as the walls; every nook behind the furniture
had a temperature of its own, for the fire was not
kindled in this part of the house early in the day;
and Bathsheba's new piano, which was an old one
in other annals, looked particularly sloping and out
of level on the warped floor before night threw a
shade over its less prominent angles and hid the
unpleasantness. Liddy, like a little brook, though
shallow, was always rippling; her presence had not so
much weight as to task thought, and yet enough to
exercise it.
On the table lay an old quarto Bible, bound in
leather. Liddy looking at it said, --
"Did you ever find out, miss, who you are going to
marry by means of the Bible and key ?,
"Don't be so foolish, Liddy. As if such things
could be.'
" Well, there's a good deal in it, all the same.'
' Nonsense, child.'
" And it makes your heart beat fearful. Some believe
in it; some don't; I do.'
"Very well, let's try it,' said Bathsheba, bounding
from her seat with that total disregard of consistency
which can be indulged in towards a dependent, and
entering into the spirit of divination at once. 'Go and
get the front door key.'
Liddy fetched it. 'I wish it wasn't Sunday,' she
said, on returning. ' Perhaps 'tis wrong.'
' What's right week days is right Sundays,' replied her
mistress in a tone which was a proof in itself.
<P 145>
The book was opened -- the leaves, drab with age,
being quite worn away at much-read verses by the fore'
fingers "of unpractised readers in former days, where they
were moved along under the line as an aid to the vision.
The special verse in the Book of Ruth was sought out
by Bathsheba, and the sublime words met her eye. They
slightly thrilled and abashed her. It was Wisdom in
the abstract facing Folly in the concrete. Folly in the
concrete blushed, persisted in her intention, and placed
the key on -the book. A rusty patch immediately upon
the verse, caused by previous pressure of an iron
substance thereon, told that this was not the first time
the old volume had been used for the purpose.
'Now keep steady, and be silent,' said Bathsheba.
The 'verse was repeated; the book turned round ;
Bathsheba blushed guiltily.
'Who did you try ?' said Liddy curiously.
'I shall not tell you.'
'Did you notice Mr. Boldwood's doings in church
this morning, miss ? 'Liddy continued, adumbrating by
the remark the track her thoughts had taken.
'No, indeed,' said Bathsheba, with serene indifference
" His pew is exactly opposite yours, miss.'
"I know it.'
"And you did not see his goings on !,'
Certainly I did not, I tell you.'
Liddy assumed a smaller physiognomy, and shut
her lips decisively.
This move was unexpected, and proportionately dis
concerting. " What did he do?' Bathsheba said perforce.
"Didn't turn his head to look at you once all the
service.
"Why should he?' again demanded her mistress,
wearing a nettled look. "I didn't ask him to.
'Oh no. But everybody else was noticing you ; and
it was odd he didn't. There, 'tis like him. Rich and
gentlemanly, what does he care ? '
Bathsheba dropped into a silence intended to ex+
press that she had opinions on the matter too abstruse
for Liddy's comprehension, rather than that she had
nothing to say.
"
<P 146>
Dear me -- I had nearly forgotten the valentine
I bought yesterday,' she exclaimed at length.
"Valentine ! who for, miss ? ' said Liddy. " Farmer
Boldwood ?'
It was the single name among all possible wrong
ones that just at this moment seemed to Bathsheba
more pertinent than the right.
"Well, no. It is only for little Teddy Coggan.
have promised him something, and this will be a pretty
surprise for him. Liddy, you may as well bring me
my desk and I'll direct it at once.'
Bathsheba took from her desk a gorgeously illumin+
ated and embossed design in post-octavo, which had
been "bought on the previous market-day at the chief
stationer's in Casterbridge. In the eentre was a small
oval enclosure ; this was left blank, that the sender
might insert tender words more appropriate to the
special occasion than any generalities by a printer
could possibly be.
" Here's a place for writing,' said Bathsheba. 'What
shall I put ?'
" Something of this sort, I should think', returned
Liddy promptly : --
" The rose is red,
 The violet blue,
 Camation's sweet,
 And so are you.'
" Yes, that shall be it. It just suits itself to a chubby+
faced child like him,' said Bathsheba. She ins.erted the
words in a small though legible handwriting; enelosed
the sheet in an envelope, and dipped her pen for the
direction.
"What fun it would be to send it to the stupid old
Boldwood, and how he would wonder.! ' said the
irrepressible Liddy, lifting her eyebrows, and indulging
in an awful mirth on the verge of fear as she thought
of the moral and social magnitude of the man contem+
plated.
Bathsheba paused to regard the idea at full length.
Boldwood's had begun to be a troublesome image -- a
species of Daniel in her kingdom who persisted in
kneeling eastward
<P 147>
when reason and common sense
said that he might just as well follow suit with the
rest, and afford her the official glance of admiration
which cost nothing at all. She was far from being
seriously concerned about his nonconformity. Still,
it was faintly depressing that the most dignified and
valuable man in the parish should withhold his eyes,
and that a girl like Liddy should talk about it. So
Liddy's idea was at first rather harassing than piquant.
" No, I won't do that. He wouldn't see any humour
in it.'
" He'd worry to death,' said the persistent Liddy.
" Really, I don't care particularly to send it to
Teddy,' remarked her mistress. " He's rather a naughty
child sometimes.'
" Yes -- that he is.'
" Let's toss as men do,' said Bathsheba, idly. 'Now
then, head, Boldwood ; tail, Teddy. No, we won't toss
money on a Sunday that would be tempting the devil
indeed.'
"Toss this hymn-book; there can't be no sinfulness
in that, miss.'
'Very well. Open, Boldwood -- shut, Teddy. No;
it's more likely to fall open. Open, Teddy -- shut,
Boldwood.'
The book went fluttering in the air and came down shut.
Bathsheba, a small yawn upon her mouth, took the
pen, and with off-hand serenity directed the missive to
Boldwood.
'Now light a candle, Liddy. Which seal shall we
use? Here's a unicorn's head --  there's nothing in
that. What's this ? -- two doves -- no. It ought to be
something extraodinary, ought it not, Lidd? Here's
one with a motto -- I remember it is some funny one,
but I can't read it. We'll try this, and if it doen't
do we'll have another.'
A large red seal was duly affixed. Bathsheba looked
closely at the hot wax to discover the words.
'Capital!' she exclaimed, throwing down the letter
frolicsomely. " 'Twould upset the solemnity of a parson
 
<P 148>
The same evening the letter was sent, and was duly
returned to Weatherbury again in the morning.
Of love as a spectacle Bathsheba had a fair knowledge;
but of love subjectively she knew nothing.
<C xiv>
<P 149>
EFFECT OF THE LETTER -- SUNRISE
AT dusk, on the evening of St. Valentine's Day, Bold+
wood sat down to supper as usual, by a beaming fire
of aged logs. Upon the matel-shelf before him was
a time-piece, surmounted by a spread eagle, and upon
the eagle's wings was the letter Bathsheba had sent.
Here the bachelor's gaze was continually fastening
itself, till the large red seal became as a blot of blood
on the retina of his eye; and as he ate and drank he
still read in fancy the words thereon, although they
were too remote for his sight --
" MARRY ME.'
The pert injunction was like those crystal substances
which, colourless themselves, assume the tone of objects
about them. Here, in the quiet of Boldwood's parlour,
where everything that ,was not grave was extraneous,
and where the atmosphere was that of a Puritan Sunday
lasting all the week, the letter and its dictum changed'
their tenor from the thoughtlessness of their origin to
a deep solemnity, imbibed from their accessories
now.
Since the receipt of the missive in the morning,
Boldwood had felt the symmetry of his existence to
be slowly getting distorted in the direction of an ideal
passion. The disturbance was as the first floating
weed to Columbus -- the eontemptibly little suggesting
possibilities of the infinitely great.
The letter must have had an origin and a motive.
That the latter was of the smallest magnitude com+
patible with its existence at all, Boldwood, of course,
did not know. And such an explanation did not
strike him as a possibility even. It is foreign to a
mystified condition of mind to realize of the mystifier
that the processes of approving a course suggested by
circumstance, and of striking out a course from inner
impulse, would look the same in the result. The vast
difference between
<P 150>
starting a train of events, and direct+
ing into a particular groove a series already started, is
rarely apparent to the person confounded by the
issue.
When Boldwood went to bed he placed the valen+
tine in the corner of the looking-glass. He was
conscious of its presence, even when his back was
turned upon it. It was the first time in Boldwood's
life that such an event had occurred. The same
fascination that caused him to think it an act which had
a deliberate motive prevented him from regarding it as
an impertinence. He looked again at the direction.
The mysterious influences of night invested the writing
with the presence of the unknown writer. Somebody's
some woman's -- hand had travelled softly over the
paper bearing his name ; her unrevealed eyes had
watched every curve as she formed it ; her brain had
seen him in imagination the while. Why should
she have imagined him ? Her mouth -- were the lips
red or pale, plump or creased? -- had curved itself to a
certain expression as the pen went on -- the corners had
moved with all their natural tremulousness : what had
been the expression ?
The vision of the woman writing, as a supplement to
the words written, had no individuality. She was a
misty shape, and well she might be, considering that
her original was at that moment sound asleep and
oblivious of all love and letter-writing under the sky.
Whenever Boldwood dozed she took a form, and com+
paratively ceased to be a vision : when he awoke there
was the letter justifying the dream.
The moon shone to-night, and its light was not of
a customary kind. His window admitted only a
reflection of its rays, and the pale sheen had that
reversed direction which snow gives, coming upward
and lighting up his ceiling in an unnatural way, casting
shadows in strange places, and putting lights where
shadows had used to be.
The substance of the epistle had occupied him but
little in comparison with the fact of its arrival. He
suddenly wondered if anything more might be found in
the envelope than what he had withdrawn. He jumped
out of bed in the weird light, took the letter, pulled out
the flimsy sheet, shook the envelope -- searched it.
Nothing more was there. Boldwood looked, as he
<P 151>
had a hundred times the preceding day, at the insistent red
seal : " Marry me,' he said aloud.
The solemn and reserved yeoman again closed the
letter, and stuck it in the frame of the glass. In doing
so he caught sight of his reflected features, wan in
expression, and insubstantial in form. He saw how
closely compressed was his mouth, and that his eyes
were wide-spread and vacant. Feeling uneasy and dis+
satisfied with himself for this nervous excitability, he
returned to bed.
Then the dawn drew on. The full power of the
clear heaven was not equal to that of a cloudy sky at
noon, when Boldwood arose and dressed himself. He
descended the stairs and went out towards the gate of
a field to the east, leaning over which he paused and
looked around.
It was one of the usual slow sunrises of this time of
the year, and the sky, pure violet in the zenith, was
leaden to the northward, and murky to the east, where,
over the snowy down or ewe-lease on Weatherbury
Upper Farm, and apparently resting upon the ridge, the
only half of the sun yet visible burnt rayless, like a red
and flameless fire shining over a white hearthstone.
The whole effect resembled a sunset as childhood
resembles age.
In other directions, the fields and sky were so much
of one colour by the snow, that it was difficult in a
hasty glance to tell whereabouts the horizon occurred ;
and in general there was here, too, that before-mentioned
preternatural inversion of light and shade which attends
the prospect when the garish brightness commonly in
the sky is found on the earth, and the shades of earth
are in the sky. Over the west hung the wasting moon,
now dull and greenish-yellow, like tarnished brass.
Boldwood was listlessly noting how the frost had
hardened and glazed the surface of the snow, till it
shone in the red eastern light wit-h the polish of marble;
how, in some portions of the slope, withered grass-bents,
encased in icicles, bristled through the smooth wan
coverlet in the twisted and curved shapes of old
Venetian glass; and how the footprints of a few birds,
which had hopped over the snow whilst it lay in the
state of a soft fleece, were now frozen to a short perma+
<P 152>
nency. A half-muffled noise of light wheels interrupted
him. Boldwood turned back into the road. It was
the mail-cart -- a crazy, two-wheeled vehicle, hardly
heavy enough to resist a puff of wind. The driver held
out a letter. Boldwood seized it and opened it, ex+
pecting another anonymous one -- so greatly are people's
ideas of probability a mere sense that precedent will
repeat itself.
"I don't think it is for you, sir,' said the man, when
he saw Boldwood's action. "Though there is no name
I think it is for your shepherd.'
Boldwood looked then at the address --
To the New Shepherd,
Weatherbury Farm,
Near Casterbridge.
"Oh -- what a mistake !. -- it is not mine. Nor is it
for my shepherd. It is for Miss Everdene's.' You had
better take it on to him -- Gabriel Oak -- and say I opencd
it in mistake."
At this moment, on the ridge, up against the blazing
sky, a figure was visible, like the black snuff in the
midst of a candle-flame. Then it moved and began to
bustle about vigorously from place to place, carrying
square skeleton masses, which were riddled by the same
rays. A small figure on all fours followed behind. The
tall form was that of Gabriel Oak ; the small one that
of George ; the articles in course of transit were hurdles.
'Wait, 'said Boldwood. " That's the man on the hill.
I'll take the letter to him myself."
To Boldwood it was now no longer merely a letter to
I another man. It was an opportunity. Exhibiting a
face pregnant with intention, he entered the snowy field.
Gabriel, at that minute, descended the hill towards
the right. The glow stretched down in this direction
now, and touched the distant roof of Warren's Malthouse
whither the shepherd was apparently bent :  Boldwood
followed at a distance.
<C xv>
<P 153>
THE scarlet and orange light outside the malthouse did
not penetrate to its interior, which was, as usual, lighted
by a rival glow of similar hue, radiating from the hearth.
The maltster, after having lain down in his clothes
for a few hours, was now sitting beside a three-leggcd
table, breakfasting of bread and bacon. This was
eaten on the plateless system, which is performed by
placing a slice of bread upon the table, the meat flat
upon the bread, a mustard plaster upon the meat, and
a pinch of salt upon the whole, then cutting them
vertically downwards with a large pocket-knife till wood
is reached, when the severed lamp is impaled on the
knife, elevated, and sent the proper way of food.
The maltster's lack of teeth appeared not to sensibly
diminish his powers as a mill. He had been without
them for so many years that toothlessness was felt less
to be a defect than hard gums an acquisition. Indeed,
he seemed to approach the grave as a hyperbolic curve
approaches a stmight line -- less directly as he got nearer,
till it was doubtful if he would ever reach it at all.
In the ashpit was a heap of potatoes roasting, and a
boiling pipkin of charred bread, callcd 'coffee,' for the
benefit of whomsoever should call, for Warren's was a
sort of clubhouse. used as an alternative to the in!.
"I say, says I, we get a fine day, and then down
comes a snapper at night,' was a remark now suddenly
heard spreading into the malthouse from the door, which
had been opened the previous moment. The form of
Henery Fray advanced to the fire, stamping the snow
from his boots when about half-way there. The speech
and entry had not seemed to be at all an abrupt begin+
ning to the maltster, introductoy matter being often
omitted in this neighbourhood, both from word and
<P 154>
deed, and the maltster having the same latitude allowed
him, did not hurry to reply. He picked up a fragment
of cheese, by pecking upon it with his knife, as a butcher
picks up skewers.
Henery appeared in a drab kerseymere great-coat,
buttoned over his smock-frock, the white skirts of the
latter being visible to the distance of about a foot below
the coat-tails, which, when you got used to the style of
dress, looked natural enough, and even ornamental -- it
certainly was comfortable.
Matthew Moon, Joseph Poorgrass, and other carters
and waggoners followed at his heels, with great lanterns
dangling from their hands, which showed that they had
just come from the cart-horse stables, where they had
been busily engaged since four o'clock that morning.
"And how is she getting on without a baily?' the
maltster inquired.
Henery shook his head, and smiled one of the bitter
smiles, dragging all the flesh of his forehead into a
corrugated heap in the centre.
" She'll rue it -- surely, surely ! ' he said " Benjy
Pennyways were not a true man or an honest baily --
as big a betrayer as Joey Iscariot himself. But to think
she can carr' on alone! ' He allowed his head to swing
laterally three or four times in silence. " Never in all my
creeping up -- never! '
This was recognized by all as the conclusion of some
gloomy speech which had been expressed in thought
alone during the shake of the head; Henery meanwhile
retained several marks of despair upon his face, to
imply that they would be required for use again directly
he should go on speaking.
'All will be ruined, and ourselves too, or there's no
meat in gentlemen's houses!' said Mark Clark.
'A headstrong maid, that's what she is -- and won't
listen to no advice at all. Pride and vanity have ruined
many a cobbler's dog. Dear, dear, when I think o' it,
I sorrows like a man in travel ! '
'True, Henery, you do, I've heard ye,' said Joseph
Poorgrass in a voice of thorough attestation, and with
a wire-drawn smile of misery.
"'Twould do a martel man no harm to have what's
under
<P 155>
her bonnet,' said Billy Smallbury, who had just
entered, bearing his one tooth before him. "She can
spaik real language, and must have some sense some+
where. Do ye foller me ?'
"I do: but no baily -- I deserved that place,' wailed
Henery, signifying wasted genius by gazing blankly at
visions of a high destiny apparently visible to him on
Billy Smallbury's smock-frock. " There, 'twas to be, I
suppose. Your lot is your lot, and Scripture is nothing;
for if you do good you don't get rewarded according to
your works, but be cheated in some mean way out of
your recompense.'
"No, no; I don't agree with'ee there,' said Mark
Clark. God's a perfect gentleman in that respect.'
"Good works good pay, so to speak it,' attested
Joseph Poorgrass.
A short pause ensued, and as a sort of entr'acte
Henery turned and blew out the lanterns, which the
increase of daylight rendered no longer necessary even
in the malthouse, with its one pane of glass.
"I wonder what a farmer-woman can want with a
harpsichord, dulcimer, pianner, or whatever 'tis they d'call
it?' said the maltster. 'Liddy saith she've a new one.'
"Got a pianner?'
"Ay. Seems her old uncle's things were not good
enough for her. She've bought all but everything new.
There's heavy chairs for the stout, weak and wiry ones
for the slender; great watches, getting on to the size
of clocks, to stand upon the chimbley-piece.'
Pictures, for the most part wonderful frames.'
" And long horse-hair settles for the drunk, with horse+
hair pillows at each end,' said Mr. Clark. " Likewise
looking-glasses for the pretty, and lying books for the
wicked.'
A firm loud tread was now heard stamping outside;
the door was opened about six inches, and somebody on
the other side exclaimed --
"Neighbours, have ye got room for a few new-born
lambs?'
" Ay, sure, shepherd,' said the conclave.
The door was flung back till it kicked the wall and
trembled from top to bottom with the blow. Mr.
Oak appeared in the
<P 156>
entry with a steaming face, hay+
bands wound about his ankles to keep out the snow, a
leather strap round his waist outside the smock-frock,
and looking altogether an epitome of the world's health
and vigour. Four lambs hung in various embarrassing
attitudes over his shoulders, and the dog George, whom
Gabriel had contrived to fetch from Norcombe, stalked
solemnly behind.
" Well, Shepherd Oak, and how's lambing this year,
if I mid say it?' inquired Joseph Poorgrass.
"Terrible trying," said Oak. "I've been wet through
twice a-day, either in snow or rain, this last fortnight.
Cainy and I haven't tined our eyes to-night.'
"A good few twins, too, I hear ?'
"Too many by half. Yes ; 'tis a very queer lambing
this year. We shan't have done by Lady Day.'
"And last year 'twer all over by Sexajessamine
Sunday,' Joseph remarked.
"Bring on the rest Cain,' said Gabriel, " and then run
back to the ewes. I'll follow you soon.'
Cainy Ball -- a cheery-faced young lad, with a small
circular orifice by way of mouth, advanced and deposited
two others, and retired as he was bidden. Oak lowered
the lambs from their unnatural elevation, wrapped them
in hay, and placed them round the fire.
" We've no lambing-hut here, as I used to have at
Norcombe,' said Gabriel, " and 'tis such a plague to bring
the weakly ones to a house. If 'twasn't for your place
here, malter, I don't know what I should do! this keen
weather. And how is it with you to-day, malter? '
" Oh, neither sick nor sorry, shepherd ; 'but no
younger.'
" Ay -- I understand.
"Sit down, Shepherd Oak', continued the ancient man
of malt. " And how was the old place at Norcombe,
when ye went for your dog? I should like to see the
old familiar spot ; but faith, I shouldn't" know a soul
there now.'
" I suppose you wouldn't. 'Tis' altered very much.'
"Is it true that Dicky Hill's wooden cider-house is
pulled down?'
<P 157>
" O yes -- years ago, and Dicky's cottage just above it.'
"Well, to be sure!,
" Yes ; and Tompkins's old apple-tree is rooted that
used to bear two hogsheads of cider; and no help from
other trees.'
'Rooted? -- you don't say it! Ah! stirring times we
live in -- stirring times.'
"And you can mind the old well that used to be in
the middle of the place? That's turned into a solid
iron pump with a large stone trough, and all complete.'
"Dear, dear -- how the face of nations alter, and
what we live to see nowadays! Yes -- and 'tis the same
here. They've been talking but now of the mis'ess's
strange doings.'
" What have you been saying about her?' inquired
Oak, sharply turning to the rest, and getting very
warm.
" These middle-aged men have been pulling her over
the coals for pride and vanity,' said Mark Clark; "but
I say, let her have rope enough. Bless her pretty face
shouldn't I like to do so -- upon her cherry lips!'
The gallant Mark Clark here made a peculiar and well
known sound with his own.
" Mark,' said Gabriel, sternly, 'now you mind this !
none of that dalliance-talk -- that smack-and-coddle style
of yours -- about Miss Everdene. I don't allow it. Do
you hear? '
" With all my heart, as I've got no chance,' replied
Mr. Clark, cordially.
' I suppose you've been speaking against her? ' said
Oak, turning to Joseph Poorgrass with a very grim
look.
"No, no -- not a word I -- 'tis a real joyful thing that
she's no worse, that's what I say,' said Joseph, trembling
and blushing with terror. " Matthew just said --  -- '
" Matthew Moon, what have you been saying ? ' asked
Oak.
'I? Why ye know I wouldn't harm a worm -- no,
not one underground worm ?' said Matthew Moon,
looking very uneasy.
"Well, somebody has -- and look here, neighbours.'
Gabriel, though one of the quietest and most gentle
men on earth, rose to the occasion, with martial
promptness and vigour. "That's my fist.' Here he
placed his fist, rather smaller in size than a common
loaf, in the mathemarical centre of the maltster's little
table, and with it gave a bump or two thereon, as if
<P 158>
to ensure that their eyes all thoroughly took in the
idea of fistiness before he went further. "Now -- the
first man in the parish that I hear prophesying bad of
our mistress, why' (here the fist was raised and let fall
as T'hor might have done with his hammer in assaying
it) -- "he'll smell and taste that -- or I'm a Dutchman.'
All earnestly expressed by their features that their
minds did not wander to Holland for a moment on
account of this statement, but were deploring the
difference which gave rise to the figure ; and Mark
Clark cried "Hear, hear; just what I should ha' said.'
The dog George looked up at the same time after the
shepherd's menace, and though he understood English
but imperfectly, began to growl.
" Now, don't ye take on so, shepherd, and sit down!'
said Henery, with a deprecating peacefulness equal to
anything of the kind in Christianity.
"We hear that ye bc a extraordinary good and
clever man, shepherd,' said Joseph Poorgrass with
considerable anxiety from behind the maltster's bed+
stead whither he had retired for safety. "'Tis a great
thing to be clever, I'm sure,' he added, making move+
ments associated with states of mind rather than body ;
" we wish we were, don't we, neighbours ? '
"Ay, that we do, sure,' said Matthew Moon, with
a small anxious laugh towards Oak, to show how very
friendly disposed he was likewise.
" Who's been telling you I'm clever?' said Oak.
"'Tis blowed about from pillar to post quite common,'
said Matthew. " We hear that ye can tell the t1me as
well by the stars as we can by the sun and moon,
shepherd.'
" Yes, I can do a little that way,' said Gabriel, as a
man of medium sentiments on the subject.
names upon their waggons almost like copper-plate,
with beautiful flourishes, and great long tails. A
excellent fine thing for ye to be such a clever man,
shepherd. Joseph Poorgrass used to prent to Farmer
James Everdene's waggons before you came, and 'a
could never mind which way to turn the J's and E's
 -- could ye, Joseph?' Joseph shook his head to express
how absolute was
<P 159>
the fact that he couldn't. "And so
you used to do 'em the wrong way, like this, didn't ye,
Joseph ?' Matthew marked on the dusty floor with his
whip-handle
LAMES
"And how Farmer James would cuss, and call thee a
fool, wouldn't he, Joseph, when 'a seed his name
looking so inside-out-like ?' continued Matthew Moon
with feeling.
'Ay -- 'a would,' said Joseph, meekly. " But, you see,
I wasn't so much to blame, for them J's and E's be
such trying sons o' witches for the memory to mind
whether they face backward or forward ; and I always
had such a forgetful memory, too.'
"'Tis a bad afiction for ye, being such a man of
calamities in other ways.'
" Well, 'tis ; but a happy Providence ordered that it
should be no worse, and I feel my thanks. As to
shepherd, there, I'm sure mis'ess ought to have made
ye her baily -- such a fitting man for't as you be.'
"I don't mind owning that I expected it,' said Oak,
frankly. ' Indeed, I hoped for the place. At the same
time, Miss Everdene has a right to be own baily if
she choose -- and to keep me down to be a common
shepherd only.' Oak drew a slow breath, looked sadly
into the bright ashpit, and seemed lost in thoughts not
of the most hopeful hue.
The genial warmth of the fire now began to stimulate
the nearly lifeless lambs to bleat and move their limbs
briskly upon the hay, and to recognize for the first time
the fact that they were born. Their noise increased to a
chorus of baas, upon which Oak pulled the milk-can from
before the fire, and taking a small tea-pot from the pocket
of his smock-frock, filled it with milk, and taught those of
the helpless creatures which were not to be restored to
their dams how to drink from the spout -- a trick they
acquired with astonishing aptitude.
"And she don't even let ye have the skins of the
dead lambs, I hear?' resumed Joseph Poorgrass, his
eyes lingering on the operations of Oak with the neces+
sary melancholy.
"I don't have them,' said Gabriel.
"Ye be very badly used, shepherd,' hazardcd Joseph
again, in
<P 160>
the hope of getting Oak as an ally in lamenta+
tion after all. "I think she's took against ye -- that
I do.'
'O no -- not at all,' replied Gabriel, hastily, and a
sigh escaped him, which the deprivation of lamb skins
could hardly have caused.
Before any further remark had been added a shade
darkened the door, and Boldwood entered the malthouse,
bestowing upon each a nod of a quality between friendli+
ness and condescension.
"Ah! Oak, I thought you were here,' he said. 'I
met the mail-cart ten minutes ago, and a letter was put
into my hand, which I opened without reading the
address. I believe it is yours. You must excuse the
accident please.'
"O yes -- not a bit of difference, Mr. Boldwood --
not a bit,' said Gabriel, readily. He had not a corre+
spondent on earth, nor was there a possible letter coming
to him whose contents the whole parish would not have
been welcome to persue.
Oak stepped aside, and read the following in an
unknown hand: --
" DEAR FRIEND, -- I do not know your name, but l think
these few lines will reach you, which I wrote to thank you
for your kindness to me the night I left Weatherbury in a
reckless way. I also return the money I owe you, which
you will excuse my not keeping as a gift. All has ended
well, and I am happy to say I am going to be married to
the young man who has courted me for some time -- Sergeant
Troy, of the 11th Dragoon Guards, now quartered in this
town. He would, I know, object to my having received
anything except as a loan, being a man of great respecta+
bility and high honour -- indeed, a nobleman by blood.
 "I should be much obliged to you if you would keep the
contents of this letter a secret for the present, dear friend.
We mean to surprise Weatherbury by coming there soon
as husband and wife, though l blush to state it to one nearly
a strangen The sergeant grew up in Weatherbury. Thank+
ing you again for your kindness,
"I am, your sincere well-wisher,
" FANNV ROBIN.'
' Have you read it, Mr. Boldwood?' said Gabriel;
"if not, you had better do so. I know you are interested
in Fanny Robin.'
<P 161>
Boldwood read the letter and looked grieved.
"Fanny -- poor Fanny! the end she is so confident
of has not yet come, she should remember -- and may
never come. I see she gives no address.'
"What sort of a man is this Sergeant Troy?' said
Gabriel.
"H'm -- I'm afraid not one to build much hope upon
in such a case as this,' the farmer murmured, "though
he's a clever fellow, and up to everything. A slight
romance attaches to him, too. His mother was a French
governess, and it seems that a secret attachment existed
between her and the late Lord Severn. She was married
to a poor medical man, and soon after an infant was
horn; and while money was forthcoming all went on
well. Unfortunately for her boy, his best friends died;
and he got then a situation as second clerk at a lawyer's
in Casterbridge. He stayed there for some time, and
might have worked himself into a dignified position of
some sort had he not indulged in the wild freak of
enlisting. I have much doubt if ever little Fanny will
surprise us in the way she mentions -- very much doubt
A silly girl! -- silly girl!'
The door was hurriedly burst open again, and in
came running Cainy Ball out of breath, his mouth red
and open, like the bell of a penny trumpet, from which
he coughed with noisy vigour and great distension of face.
"Now, Cain Ball,' said Oak, sternly, "why will you
run so fast and lose your breath so? I'm always telling
you of it.'
'Oh -- I -- a puff of mee breath -- went -- the -- wrong
way, please, Mister Oak, and made me cough -- hok --
hok!'
"Well --  what have you come for?'
"I've run to tell ye,' said the junior shepherd,
supporting his exhausted youthful frame against the
doorpost, ' that you must come directly'. Two more ewes
have twinned -- that's what's the matter, Shepherd Oak.'
" Oh, that's it,' said Oak, jumping up, and dimissing
for the present his thoughts on poor Fanny. " You are
a good boy to run and tell me, Cain, and you shall
smell a large plum pudding some day as a treat. But,
before we go, Cainy, bring the tarpot, and we'll mark
this lot and have done with 'em.'
<P 162>
Oak took from his illimitable pockets a marking iron,
dipped it into the pot, and imprintcd on the buttocks
of the infant sheep the initials of her he delighted to
muse on -- "B. E.,' which signified to all the region
round that henceforth the lambs belonged to Farmer
Bathsheba Everdene, and to no one else.
" Now, Cainy, shoulder your two, and off Good
morning, Mr. Boldwood.' The shepherd lifted the
sixteen large legs and four small bodies he had himself
brought, and vanished with them in the direction of
the lambing field hard by -- their frames being now in a
sleek and hopeful state, pleasantly contrasting with their
death's-door plight of hialf an hour before.
Boldwood followed him a little way up the field,
hesitated, and turned back. He followed him again
with a last resolve, annihilating return. On approaching
the nook in which the fold was constructed, the farmer
drew out-his pocket-book, unfastened-it, and allowed it
to lie open on his hand. A letter was revealed -- Bath+
sheba's.
"I was going to ask you, Oak,' he said, with unreal
carelessness, "if you know whose writing this is? '
Oak glanced into the book, and replied instantly,
with a flushed face, " Miss Everdene's.'
Oak had coloured simply at the consciousness of
sounding her name. He now felt a strangely distressing
qualm from a new thought. ' The letter could of course
be no other than anonymous, or the inquiry would not
have been necessary.
Boldwood mistook his confusion : sensitive persons
are always ready with their "Is it I ? ' in prefercnce to
objective reasoning.
" The question was perfectly fair,' he returned -- and
there was something incongruous in the serious eamest+
ness with which he applied himself to an argument on
a valentine. " You know it is always expected that
privy inquiries will be made : that's where the -- fun
lies.' If the word "fun' had been "torture,' it could
not have been uttered with a more constrained and
restless countenance than was Boldwood's then.'
Soon parting from Gabriel, the lonely and reserved
man returned to his house to breakfast -- feeling twinges
of shame and regret at having so far exposed his mood
by those fevered
<P 163>
questions to a stranger. He again
placed the letter on the mantelpiece, and sat down to
think of the circumstances attending it by the light of
Gabriel's information.
ALL SAINTS' AND ALL SOULS"
<C xvi>
<P 164>
ALL SAINTS' AND ALL SOULS'
ON a week-day morning a small congregation, con+
sisting mainly of women and girls, rose from its knees
in the mouldy nave of a church called All Saints', in
the distant barrack-town before mentioned, at the end
of a service without a sermon. They were about to
disperse, when a smart footstep, entering the porch and
coming up the central passage, arrested their attention.
The step echoed with a ring unusual in a church; it
was the clink of spurs. Everybody looked. A young
cavalry soldier in a red uniform, with the three chevrons
of a sergeant upon his sleeve, strode up the aisle, with
an embarrassment which was only the more marked
by the intense vigour of his step, and by the deter+
mination upon his face to show none. A slight flush
had mounted his cheek by the time he had run the
gauntlet between these women ; but, passing on through
the chancel arch, he never paused till he came close
to the altar railing. Here for a moment he stood
alone.
The officiating curate, who had not yet doffed his
surplice, perceived the new-comer, and followed him
to the communion-space. He whispered to the soldier,
and then beckoned to the clerk, who in his turn
whispered to an elderly woman, apparently his wife, and
they also went up the chancel steps.
"'Tis a wedding!' murmured some of the women,
brightening. " Let's wait!'
The majority again sat down.
There was a creaking of machinery behind, and
some of the young ones turned their heads. From the
interior face of the west wall of the tower projected a
little canopy with a quarter-jack and small bcll beneath
it, the automaton being driven by the same clock
machinery that struck the large bell in the tower. Be+
tween the tower and the church was a close sereen, the
door of which was kept shut during services, hiding
this
<P 165>
grotesque clockwork from sight. At present, how+
ever, the door was open, and the egress of the jack, the
blows on the bell, and the mannikin's retreat intc.the
nook again, were visible to many, and audible through+
out the church.
The jack had struck half-past eleven.
" Where's the woman ?" whispered some of the
spectators.
The young sergeant stood still with the abnormal
rigidity of the old pillars around. He faced the south+
east, and was as silent as he was still.
The silence grew to be a noticeable thing as the
minutes went on, and nobody else appeared, and not a
soul moved. The rattle of the quarter-jack again from
its niche, its blows for three-quarters, its fussy retreat,
were almost painfully abrupt, and caused many of the
congregation to start palpably.
"I wonder where the woman is!' a voice whispered
again.
There began now that slight shifting of feet, that
artificial coughing among several, which betrays a
nervous suspense. At length there was a titter. But
the soldier never moved. There he stood, his face to
the south-east, upright as a column, his cap in his hand.
The clock ticked on. The women threw off their
nervousness, and titters and giggling became more
frequent. Then came a dead silence. Every one was
waiting for the end. Some persons may have noticed
how extraordinarily the striking of quarters. seems to
quicken the flight of time. It was hardly credible that
the jack had not got wrong with the minutes when the
rattle began again, the puppet emerged, and the four
quarters were struck fitfully as before: One could al+
most be positive that there was a malicious leer upon
the hideous creature's face, and a mischievous delight
in its twitchings. Then, followed the dull and remote
resonance of the twelve heavy strokes in the tower
above. The women were impressed, and there was no
giggle this time.
The clergyman glided into the vestry, and the clerk
vanished. The sergeant had not yet turned ; every
woman in the church was waiting to see his face, and
he appeared to know it. At last he did turn, and
stalked resolutely down the nave, braving them all,
with a compressed lip. Two bowed and toothless old
<P 166>
almsmen then looked at each other and chuckled,
innocently enough ; but the sound had a strange weird
effect in that place.
Opposite to the church was a paved square, around
which several overhanging wood buildings of old time
cast a picturesque shade. The young man on leaving
the door went to cross the square, when, in the middle,
he met a little woman. The expression of her face,
which had been one of intense anxiety, sank at the
sight of his nearly to terror.
" Well ? ' he said, in a suppressed passion, fixedly
looking at her.
" O, Frank -- I made a mistake! -- I thought that
church with the spire was All Saints', and I was at the
door at half-past eleven to a minute as you said.
waited till a quarter to twelve, and found then that I
was in All Souls'. But I wasn't much frightened, for
I thought it could be to-morrow as well.'
"You fool, for so fooling me! But say no more.'
" Shall it be to-monow, Frank ? ' she asked blankly.
"To-morrow !' and he gave vent to a hoarse laugh.
"I don't go through that experience again for some
time, I warrant you ! '
" But after all,' she expostulated in a trembling voice,
"the mistake was not such a terrible thing! Now, dear
Frank, when shall it be?'
"Ah, when ? God knows !' he said, with a light
irony, and turning from her walked rapidly away.
<C xvii>
<P 167>
IN THE MARKET-PLACE
ON Saturday Boldwood was in Casterbridge market
house as usual, when the disturber of his dreams entered
and became visible to him. Adam had awakened from
his deep sleep, and behold! there was Eve. The
farmer took courage, and for the first time really looked
at her.
Material causes and emotional effects are not to be
arranged in regular equation. The result from capital
employed in the production of any movement of a
mental nature is sometimes as tremendous as the cause
itself is absurdly minute. When women are in a freakish
mood, their usual intuition, either from carelessness or
inherent defect, seemingly fails to teaeh them this, and
hence it was that Bathsheba was fated to be astonished
today.
Boldwood looked at her -- not slily, critically, or
understandingly, but blankly at gaze, in the way a
reaper looks up at a passing train -- as something foreign
to his element, and but dimly understood. To Bold+
wood women had been remote phenomena rather than
necessary complements -- comets of such uncertain
aspeet, movement, and permanence, that whether
their orbits were as geometrical, unchangeable, and
as subject to laws as his own, or as absolutely erratic
as they superficially appeared, he had not deemed it
his duty to consider.
He saw her black hair, her correct facial curves
and profile, and the roundness of her chin and throat.
He saw then the side of her eyelids, eyes, and lashes,
and the shape of her ear. Next he noticed her figure,
her skirt, and the very soles of her shoes.
Boldwood thought her beautiful, but wondered
whether he was right in his thought, for it seemed
impossible that this romance in the flesh, if so sweet
as he imagined, could have
<P 168>
been going on long without
creating a commotion of delight among men, and pro+
voking more inquiry than Bathsheba had done, even
though that was not a little. To the best of his judg+
ment neither nature nor art could improve this perfect
one of an imperfect many. His heart began to move
within him. Boldwood, it must be remembered, though
forty years of age, had never before inspected a woman
with the very centre and force of his glance; they had
struck upon all his senses at wide angles.
Was she really beautiful? He could not assure
himself that his opinion was true even now. He fur+
tively said to a neighbour, 'Is Miss Everdene considered
handsome?'
"0 yes; she was a good deal 'notied the first
time she came, if you remember. A very handsome
girl indeed.'
A man is never more credulous than in receiving
favourable opinions on the beauty of a woman he is
half, or quite, in love with; a mere child's word on the
point has the weight of an R.A.'s. Boldwood was
satisfied now.
And this charming woman had in effect said to
him, "Marry me.' Why should she have done that
strange thing ? Boldwood's blindness to the difference
between approving of what circumstances suggest, and
originating what they do not suggest, was well matched
by Bathsheba's insensibility to the possibly great issues
of little beginnings.
She was at this moment coolly dealing with a dashing
young farmer, adding up accounts with him as indiffer+
ently as if his face had been the pages of a ledger. It
was evident that such a nature as his had no attraction
for a woman of Bathsheba's taste. But Boldwood grew
hot down to his hands with an incipient jealousy; he
trod for the first time the threshold of "the injured
lover's hell.' His first impulse was to go and thrust
himself between them. This could be done, but only
in one way -- by asking to see a sample of her corn.
Boldwood renounced the idea. He could not make
the request; it was debasing loveliness to ask it to
buy and sell, and jarred with his conceptions of her.
All this time Bathsheba was conscious of having
broken into that dignified stronghold at last. His
eyes, she knew, were
<P 169>
following her everywhere. This
was a triumph; and had it come naturally, such a
triumph would have been the sweeter to her for this
piquing delay. But it had been brought about by
misdirected ingenuity, and she valued it only as she
valued an artificial flower or a wax fruit.
Being a woman with some good sense in reasoning
on subjects wherein her heart was not involved, Bath+
sheba genuinely repented that a freak which had owed
its existence as much to Liddy as to herself, should
ever have been undertaken, to disturb the placidity of
a man she respected too highly to deliberately tease.
She that day nearly formed the intention of begging
his pardon on the very next occasion of their meeting.
The worst features of this arrangement were that, if
he thought she ridiculed him, an apology would in+
crease the offence by being disbelieved; and if he
thought she wanted him to woo her, it would read
like additional evidence of her forwardness.
<C xviii>
<P 170>
BOLDWOOD IN MEDITATION -- REGRET
BOLDWOOD was tenant of what was called Little
Weatherbury Farm, and his person was the nearest ap+
proach to aristocracy that this remoter quarter of the
parish could boast of. Genteel strangers, whose god
was their town, who might happen to be compelled to
linger about this nook for a day, heard the sound of
light wheels, and prayed to see good society, to the
degree of a solitary lord, or squire at the very least,
but it was only Mr. Boldwood going out for the day.
They heard the sound of wheels yet once more, and
were re-animated to expectancy : it was only Mr. Bold+
wood coming home again.
His house stood recessed from the road, and the
stables, which are to a farm what a fireplace is to a
room, were behind, their lower portions being lost
amid bushes of laurel. Inside the blue door, open
half-way down, were to be seen at this time the backs
and tails of half-a-dozen warm and contented horses
standing in their stalls; and as thus viewed, they pre+
sented alternations of roan and bay, in shapes like a
Moorish arch, the tail being a streak down the midst
of each. Over these, and lost to the eye gazing in
from the outer light, the mouths of the same animals
could be heard busily sustaining the above-named
warmth and plumpness by quantities of oats and hay.
The restless and shadowy figure of a colt wandered
about a loose-box at the end, whilst the steady grind
of all the eaters was occasionally diversified by the
rattle of a rope or the stamp of a foot.
Pacing up and down at the heels of the animals was
Farmer Boldwood himself. This place was his almonry
and cloister in one : here, after looking to the feeding
of his four-footed dependants, the celibate would walk
and meditate of an evening till the moon's rays streamed
in through the cobwebbed windows, or total darkness
enveloped the scene.
<P 171>
His square-framed perpendicularity showed more fully
now than in the crowd and bustle of the market-house.
In this meditative walk his foot met the floor with heel
and toe simultaneously, and his fine reddish-fleshed face
was bent downwards just enough to render obscure the
still mouth and the well-rounded though rather prominent
and broad chin. A few clear and thread-like horizontal
lines were the only interruption to the otherwise smooth
surface of his large forehead.
The phases of Boldwood's life were ordinary enough,
but his was not an ordinary nature. That stillness,
which struck casual observers more than anything else
in his character and habit, and seemed so precisely
like the rest of inanition, may have been the perfect
balance of enormous antagonistic forces -- positives and
negatives in fine adjustment. His equilibrium disturbed,
he was in extremity at once. If an emotion possessed
him at all, it ruled him; a feeling not mastering him
was entirely latent. Stagnant or rapid, it was never
slow. He was always hit mortally, or he was missed.
He had no light and careless touches in his constitu+
tion, either for good or for evil. Stern in the outlines of
action, mild in the details, he was serious throughout all.
He saw no absurd sides to the follies of life, and thus,
though not quite companionable in the eyes of merry
men and scoffers, and those to whom all things show
life as a jest, he was not intolerable to the earnest and
those acquainted with grief. Being a man -who read
all the dramas of life seriously, if he failed to please
when they were comedies, there was no frivolous treat+
ment to reproach him for when they chanced to end
tragically.
Bathsheba was far from dreaming that the dark and
silent shape upon which she had so carelessly thrown a
seed was a hotbed of tropic intensity. Had she known
Boldwood's moods, her blame would have been fearful,
and the stain upon her heart ineradicable. Moreover,
had she known her present power for good or evil over
this man, she would have trembled at her responsibility.
Luckily for her present, unluckily for her future tran+
quillity, her understanding had not yet told her what
Boldwood was. Nobody knew entirely ; for though it
was possible to form guesses concerning his wild 'capa+
<P 172>
bilities from old floodmarks faintly visible, he had never
been seen at the high tides which caused them.
Farmer Boldwood came to the stable-door and looked
forth across the level fields. Beyond the first enclosure
was a hedge, and on the other side of this a meadow
belonging to Bathsheba's farm.
It was now early spring -- the time of going to grass
with the sheep, when they have the first feed of the
meadows, before these are laid up for mowing. The
wind, which had been blowing east for several weeks,
had veered to the southward, and the middle of spring
had come abruptly -- almost without a beginning. It
was that period in the vernal quarter when we map
suppose the Dryads to be waking for the season. The
vegetable world begins to move and swell and the saps
to rise, till in the completest silence of lone gardens
and trackless plantations, where- everything seems -help+
less and still after the bond and slavery of frost, there
are bustlings, strainings, united thrusts, and pulls-all+
together, in comparison with which the powerful tugs of
cranes and pulleys in a noisy city are but.  pigmy efforts.
"Boldwood, looking into the distant meadows, saw
there three figures. They were those of Miss' Everdene,
Shepherd Oak, and Cainy Ball.
When Bathsheba's figure shone upon the farmer's
eyes it lighted him up as the moon lights up a great
tower. A man's body is as the shell; or the tablet, of
his soul, as he is reserved or ingenuous, overflowing or
self-contained. There was a  change in Boldwood's
exterior from its former impassibleness ; and his face
showed that he was now living outside his defences
for the first time, and with a fearful sense of exposure.
It is the usual experience of strong natures when they
love.
At last he arrived at a conclusion. It was to go
across and inquire boldly of her.
The insulation of his heart by reserve during these
many years, without a channel of any kind for disposable
emotion, had worked its effect. It has been observed
more than once that the causes of love are chiefly
<P 173>
subjective, and Boldwood was a living testimony to
the truth of the proposition. No mother existed to
absorb his devotion, no sister for his tenderness, no
idle ties for sense. He became surcharged with the
compound, which was genuine lover's love.
He approached the gate of the meadow. Beyond
it the ground was melodious with ripples, and the sky
with larks; the low bleating of the flock mingling with
both. Mistress and man were engaged in the operation
of making a lamb "take,' which is performed whenever
an ewe has lost her own offspring, one of the twins of
another ewe being given her as a substitute. Gabriel
had skinned the dead lamb, and was tying the skin
over the body of the live lamb, in the customary manner,
whilst Bathsheba was holding open a little pen of four
hurdles, into which the Mother and foisted lamb were
driven, where they would remain till the old sheep
conceived an affection for the young one.
Bathsheba looked up at the completion of the
manouvre, and saw the farmer by the gate, where he
was overhung by a willow tree in full bloom. Gabriel,
to whom her face was as the uncertain glory of an April
day, was ever regardful of its faintest changes, and
instantly discerned thereon the mark of some influence
from without, in the form of a keenly self-conscious
reddening. He also turned and beheld Boldwood.
At onee connecting these signs with the letter Bold+
wood had shown him, Gabriel suspected her of some
coquettish procedure begun by that means, and carried
on since, he knew not how.
Farmer Boldwood had read the pantomime denoting
that they were aware of his presence, and the perception
was as too much light turned upon his new sensibility.
He was still in the road, and by moving on he hoped
that neither would recognize that he had originally
intended to enter the field. He passed by with an
utter and overwhelming sensation of ignorance, shyness,
and doubt. Perhaps in her manner there were signs
that she wished to see him -- perhaps not -- he could not
read a woman. The cabala of this erotic philosophy
seemed to consist of the subtlest meanings expressed in
misleading ways.
<P 174>
Every turn, look, word, and accent
contained a mystery quite distinct from its obvious
import, and not one had ever been pondered by him
until now.
As for Bathsheba, she was not deceived into the
belief that Farmer Boldwood had walked by on business
or in idleness. She collected the probabilities of the
case, and concluded that she was herself responsible for
Boldwood's appearance there. It troubled her much
to see what a great flame a little Wildfire was likely to
kindle. Bathsheba was no schemer for marriage, nor
was she deliberately a trifler with the affections of men,
and a censor's experience on seeing an actual flirt after
observing her would have been a feeling of surprise
that Bathsheba could be so different from such a one,
and yet so like what a flirt is supposed to be.
She resolved never again, by look or by sign, to
interrupt the steady flow of this man's life. But a
resolution to avoid an evil is seldom framed till the evil
is so far advanced as to make avoidance impossible.
<C xix>
<P 175>
THE SHEEP-WASHING -- THE OFFER
BOLDWOOD did eventually call upon her. She was
not at home. " Of course not,' he murmured. In con+
templating Bathsheba as a woman, he had forgotten the
accidents of her position as an agriculturist -- that being
as much of a farmer, and as extensive a farmer, as
himself, her probable whereabouts was out-of-dooTs at
this time of the year. This, and the other oversights
Boldwood was guilty of, were natural to the mood, and
still more natural to the circumstances. The great aids
to idealization in love were present here : occasional
observation of her from a distance, and the absence of
social intercourse with her -- visual familiarity, oral
strangeness. The smaller human elements were kept
out of sight ; the pettinesses that enter so largely into
all earthly living and doing were disguised by the
accident of lover and loved-one not being on visiting
terms ; and there was hardly awakened a thought in
Boldwood that sorry household realities appertained to
her, or that she, like all others, had moments of
commonplace, when to be least plainly seen was to be
most prettily remembered. Thus a mild sort of
apotheosis took place in his fancy, whilst she still lived
and breathed within his own horizon, a troubled creature
like himself.
It was the end of May when the farmer determined
to be no longer repulsed by trivialities or distracted by
suspense. He had by this time grown used to being in
love; the passion now startled him less even when it
tortured him more, and he felt himself adequate to the
situation. On inquiring for her at her house they had
told him she was at the sheepwashing, and he went off
to seek her there.
The sheep-washing pool was a perfectly circular basin
of brickwork in the meadows, full of the clearest water.
To birds on the wing its glassy surface, reflecting the
light sky, must have been
<P 176>
visible for miles around as a
glistening Cyclops' eye in a green face. The grass
about the margin at this season was a sight to remember
long -- in a minor sort of way. Its activity in sucking
the moisture from the rich damp sod. was almost a pro+
cess observable by the eye. The outskirts of this level
water-meadow were diversified by rounded and hollow
pastures, where just now every flower that was not a
buttercup was a daisy. The river slid along noiselessly
as a shade, the swelling reeds and sedge forming a
flexible palisade upon its moist brink. To the north
of the mead were trees, the leaves of which were new,
soft, and moist, not yet having stiffened and darkened
under summer sun and drought, their colour being
yellow beside a green -- green beside a yellow.
From the recesses of this knot of foliage the loud
notes of three cuckoos were resounding through the
still air.
Boldwood went meditating down the slopes with his
eyes on his boots, which the yellow pollen from the
buttercups had bronzed in artistic gradations. A tribu+
tary of the main stream flowed through the basin of the
pool by an inlet and outlet at opposite points of its
diameter. Shepherd Oak, Jan Coggan, Moon, Poor+
grass, Cain Ball, and several others were assembled
here, all dripping wet to the very roots of their hair,
and Bathsheba was standing by in a new riding-habit --
the most elegant she had ever worn -- the reins of her
horse being looped over her arm. Flagons of cider
were rolling about upon the green. The meek sheep
were pushed into the pool by Coggan and Matthew
Moon, who stood by the lower hatch, immersed to their
waists; then Gabriel, who stood on the brink, thrust
them under as they swam along, with an instrument
like a crutch, formed for the purpose, and also for
assisting the exhausted animals when the wool became
saturated and they began to sink. They were let out
against the stream, and through the upper opening, all
impurities flowing away below. Cainy Ball and Joseph,
who performed this latter operation, were if possible
wetter than the rest ; they resembled dolphins under a
fountain, every protuberance and angle of their clothes
dribbling forth a small rill.
<P 177>
Boldwood came close and bade her good-morning, with
such constraint that she could not but think he had
stepped across to the washing for its own sake, hoping
not to find her there ; more, she fancied his brow severe
and his eye slighting. Bathsheba immediately contrived
to withdraw, and glided along by the river till she was
a stone's throw off. She heard footsteps brushing the
grass, and had a consciousness that love was encircling
her like a perfume. Instead of turning or waiting,
Bathsheba went further among the high sedges, but
Boldwood seemed determined, and pressed on till they
were completely past the bend of the river. Here,
without being seen, they could hear the splashing and
shouts of the washers above.
"Miss Everdene!' said the farmer.
She trembled, turned, and said 'Good morning.'
His tone was so utterly removed from all she had
expected as a beginning. It was lowness and quiet
accentuated : an emphasis of deep meanings, their form,
at the same time, being scarcely expressed. Silence
has sometimes a remarkable power of showing itself as
the disembodied soul of feeling wandering without its
carcase, and it is then more impressive than speech.
In the same way, to say a little is often to tell more
than to say a great deal. Boldwood told everything in
that word.
As the conseiousness expands on learning that what
was fancied to be the rumble of wheels is the reverbera+
tion of thunder, so did Bathsheba's at her intuitive
conviction.
'I feel -- almost too much -- to think,' he said, with a
solemn simplicity. "I have come to speak to you with+
out preface. My life is not my own since I have beheld
you clearly, Miss Everdene -- I come to make you an
offer of marriage.'
Bathsheba tried to preserve an absolutely neutral
countenance, and all the motion she made was that of
closing lips which had previously been a little parted.
"I am now forty-one years old,' he went on. "I may
have been called a confirmed bachelor, and I was a
confirmed bachelor. I had never any views of myself
as a husband in my earlier days, nor have I made any
calculation on the subject since I have been older.
But we all change, and my change, in this matter,
<P 178>
came
with seeing you. I have felt lately, more and more,
that my present way of living is bad in every respect.
Beyond all things, I want you as my wife.'
"I feel, Mr. Boldwood, that though I respect you
much, I do not feel -- what would justify me to -- in
accepting your offer,' she stammered.
This giving back of dignity for dignity seemed to
open the sluices of feeling that Boldwood had as yet
kept closed.
" My life is a burden without you,' he exclaimed, in
a low voice. "I want you -- I want you to let me say
I love you again and again!'
Bathsheba answered nothing, and the mare upon
her arm seemed so impressed that instead of cropping
the herbage she looked up.
"I think and hope you care enough for me to listen
to what I have to tell!"
   Bathsheba's momentary impulse at hearing this was
to ask why he thought that, till she remembered that,
far from being a conceited assumption on Boldwood's
part, it was but the natural conclusion of serious reflec+
tion based on deceptive premises of her own offering.
"I wish I could say courteous flatteries to you,' the
farmer continued in an easier tone, " and put my rugged
feeling into a graceful shape: but I have neither power
nor patience to learn such things. I want you for my
wife -- so wildly that no other feeling can abide in me;
but I should not have spoken out had I not been led
to hope.'
"The valentine again! O that valentine!' she
said to herself, but not a word to him.
  "If you can love me say so, Miss Everdene. If not
 -- don't say no!'
  "Mr. Boldwood, it is painful to have to say I am
surprised, so that I don't know how to answer you with
propriety and respect -- but am only just able to speak
out my feeling -- I mean my meaning; that I am afraid
I can't marry you, much as I respect you. You are too
dignified for me to suit you, sir.'
  "But, Miss Everdene!'
"I -- I didn't -- I know I ought never to have dreamt
of sending
<P 179>
that valentine -- forgive me, sir -- it was a
wanton thing which no woman with any self-respect
should have done. If you will only pardon my thought+
lessness, I promise never to --  -- '
" No, no, no. Don't say thoughtlessness! Make me
think it was something more -- that it was a sort of
prophetic instinct -- the beginning of a feeling that you
would like me. You torture me to say it was done in
thoughtlessness -- I never thought of it in that light, and
I can't endure it. Ah ! I wish I knew how to win you!
but that I can't do -- I can only ask if I have already got
you. If I have not, and it is not true that you have
come unwittingly to me as I have to you, I can say no
more.'
  "I have not fallen in love with you, Mr. Boldwood --
certainly I must say that.' She allowed a very small
smile to creep for the first time over her serious face in
saying this, and the white row of upper teeth, and keenly+
cut lips already noticed, suggested an idea of heartless+
ness, which was immediately contradicted by the pleasant
eyes.
"But you will just think -- in kindness and conde+
scension think -- if you cannot bear with me as a husband!
I fear I am too old for you, but believe me I will take
more care of you than would many a man of your own
age. I will protect and cherish you with all my strength
 -- I will indeed! You shall have no cares -- be worried
by no household affairs, and live quite at ease, Miss
Everdene. The dairy superintendence shall be done by
a man -- I can afford it will -- you shall never have so
much as to look out of doors at haymaking time, or to
think of weather in the harvest. I rather cling; to the
chaise, because it is he same my poor father and mother
drove, but if you don't like it I will sell it, and you shall
have a pony-carriage of your own. I cannot say how
far above every other idea and object on earth you seem
to me -- nobody knows -- God only knows -- how much
you are to me!'
Bathsheba's heart was young, and it swelled with
sympathy for the deep-natured man who spoke so
simply.
  "Don't say it! don't! I cannot bear you to feel so
much, and me to feel nothing. And I am afraid they
will notice us, Mr. Boldwood. Will you let the matter
rest now? I cannot think
<P 180>
collectedly. I did not know
you were going to say this to me. 0, I am wicked to
have made you suffer so!' She was frightened as well
as agitated at his vehemence.
  "Say then, that you don't absolutely refuse. Do not
quite refuse?'
"I can do nothing. I cannot answer.'
"I may speak to you again on the subject?'
"Yes.'
"I may think of you?'
"Yes, I suppose you may think of me.'
"And hope to obtain you?'
"No -- do not hope! Let us go on.'
"I will call upon you again to-morrow.'
"No -- please not. Give me time.'
"Yes -- I will give you any time,' he said earnestly and
gratefully. "I am happier now.'
"No -- I beg you! Don't be happier if happiness
only comes from my agreeing. Be neutral, Mr. Bold+
wood! I must think.'
"I will wait,' he said.
And then she turned away. Boldwood dropped his
gaze to the ground, and stood long like a man who did not
know where he was. Realities then returned upon him
like the pain of a wound received in an excitement
which eclipses it, and he, too, then went on.
<C xx>
<P 181>
PERPLEXITy -- GRINDING THE SHEARS -- A QUARREL
"HE is so disinterested and kind to offer me all that I
can desire,' Bathsheba mused.
Yet Farmer Boldwood, whether by nature kind or
the reverse to kind, did not exercise kindness, here.
The rarest offerings of the purest loves are but a self+
indulgence, and no generosity at all.
Bathsheba, not being the least in love with him, was
eventually able to look calmly at his offer. It was one
which many women of her own station in the neighbour+
hood, and not a few of higher rank, would have been
wild to accept and proud to publish. In every point of
view, ranging from politic to passionate, it was desirable
that she, a lonely girl, should marry, and marry this
earnest, well-to-do, and respected man. He was close
to her doors: his standing was sufficient: his qualities
were even supererogatory. Had she felt, which she did
not, any wish whatever for the married state in the
abstract, she could not reasonably have rejected him,
being a woman who frequently appealed to her under,
standing for deliverance from her whims. Boldwood as
a means to marriage was unexceptionable: she esteemed
and liked him, yet she did not want him. It appears
that ordinary men take wives because possession is not
possible without marriage, and that ordinary women
accept husbands because marriage is not possible with,
out possession; with totally differing aims the method is
the same on both sides. But the understood incentive
on the woman's part was wanting here. Besides, Bath+
sheba's position as absolute mistress of a farm and house
was a novel one, and the novelty had not yet begun to
wear off.
But a disquiet filled her which was somewhat to her
credit, for it would have affected few. Beyond the men+
tioned reasons with which she combated her objections,
she had a strong
<P 182>
feeling that, having been the one who
began the game, she ought in honesty to accept the conse,
quences. Still the reluctance remained. She said in the
same breath that it would be ungenerous not to marry
Boldwood, and that she couldn't do it to save her life.
Bathsheba's was an impulsive nature under a delibera,
tive aspect.  An Elizabeth in brain and a Mary Stuart
in spirit, she often performed actions of the greatest
temerity with a manner of extreme discretion. Many of
her thoughts were perfect syllogisms; unluckily they
always remained thoughts. Only a few were irrational
assumptions; but, unfortunately, they were the ones
which most frequently grew into deeds.
  The next day to that of the declaration she found
Gabriel Oak at the bottom of her garden, grinding his
shears for the sheep-shearing. All the surrounding
cottages were more or less scenes of the same operation;
the scurr of whetting spread into the sky from all parts
of the village as from an armury previous to a campaign.
Peace and war kiss each other at their hours of prepara+
tion -- sickles, scythes, shears, and pruning-hooks, ranking
with swords, bayonets, and lances, in their common
necessity for point and edge.
Cainy Ball turned the handle of Gabriel's grinstone,
his head performing a melancoly see-saw up and down
with each turn of the wheel. Oak stood somewhat as
Eros is represented when in the act of sharpening his
arrows: his figure slightly bent, the weight of his body
thrown over on the shears, and his head balanced side+
ways, with a critical compression of the lips and contrac+
tion of the eyelids to crown the attitude.
His mistress came up and looked upon them in
silence for a minute or two; then she said --
"Cain, go to the lower mead and catch the bay mare.
I'll turn the winch of the grindstone. I want to speak
to you, Gabriel.
Cain departed, and Bathsheba took the handle.
Gabriel had glanced up in intense surprise, quelled its
expression, and looked down again. Bathsheba turned
the winch, and Gabriel applied the shears.
The peculiar motion involved in turning a wheel
has a wonderful tendency to benumb the mind. It
is a sort of
<P 183>
attenuated variety of Ixion's punishment,
and contributes a dismal chapter to the history of
heavy, and the body's centre of gravity seems to
settle by degrees in a leaden lump somewhere be+
tween the eyebrows and the crown. Bathsheba felt
the unpleasant symptoms after two or three dozen
turns.
  "Will you turn, Gabriel, and let me hold the shears?"
she said. "My head is in a'whirl, and I can't talk.
Gabriel turned. Bathsheba then began, with some
awkwardness, allowing her thoughts to stray occasion+
ally from her story to attend to the shears, which
required a little nicety in sharpening.
  "I wanted to ask you if the men made any observa+
tions on my going behind the sedge with Mr. Boldwood
yesterday?'
  "Yes, they did,' said Gabriel. "You don't hold
the shears right, miss -- I knew you wouldn't know the
way -- hold like this.'
He relinquished the winch, and inclosing her two
hands completely i his own (taking each as we some+
times slasp a child's hand in teaching him to write),
grasped the shears with her. "Incline the edge so,'
he said.
  Hands and shears were inclined to suit the words,
and held thus for a peculiarly long time by the in+
structor as he spoke.
  "That will do,' exclaimed Bathsheba. "Loose my
hands. I won't have them held! Turn the winch.'
Gabriel freed her hands quietly, retired to his
handle, and the grinding went on.
  "Did the men think it odd?' she said again.
"Odd was not the idea, miss.'
"What did they say?'
"That Farmer Boldwood's name and your own
were likely to be flung over pulpit together before the
year was out.'
"I thought so by the look of them! Why, there's
nothing in it. A more foolish remark was never made,
and I want you to contradict it! that's what I came for.'
  Gabriel looked incredulous and sad, but between
his moments of incredulity, relieved.
"They must have heard our conversation,' she
continued.
<P 184>
"Well, then, Bathsheba!' said Oak, stopping the
handle, and gazing into her face with astonishment.
  "Miss Everdene, you mean," she said, with dignity.
  "I mean this, that if Mr. Boldwood really spoke of
marriage, I bain't going to tell a story and say he
didn't to please you. I have already tried to please
you too much for my own good!'
Hathsheba regarded him with round-eyed perplexity.
She did not know whether to pity him for disappointed
love of her, or to be angry with him for having got
over it -- his tone being ambiguous.
  "I said I wanted you just to mention that it was
not true I was going to be married to him,' she mur+
mured, with a slight decline in her assurance.
"I can say that to them if you wish, Miss Everdene.
And I could likewise give an opinion to 'ee on what
you have done.'
"I daresay. But I don't want your opinion.'
"I suppose not,' said Gabriel bitterly, and going on
with his turning, his words rising and falling in a
regular swell and cadence as he stooped or rose with
the winch, which directed them, according to his
position, perpendiculary into the earth, or horizontally
along the garden, his eyes being fixed on a leaf upon
the ground.
  With Bathsheba a hastened act was a rash act;
but, as does not always happen, time gained was
prudence insured. It must be added, however, that
time was very seldom gained. At this period the
single opinion in the parish on herself and her doings
that she valued as sounder than her own was Gabriel
Oak's. And the outspoken honesty of his character
was such- that on any subject even that of her love
for, or marriage with, another man, the same disinter+
estedness of opinion might be calculated on, and be
had for the asking. Thoroughly convinced of the
impossibility of his own suit, a high resolve constrained
him not to injure that of another. This is a lover's
most stoical virtue, as the lack of it is a lover's most
venial sin. Hnowing he would reply truly, she asked
the question, painful as she must have known the sub+
ject would be. Such is the selfishness of some charm+
ing women. Perhaps it was some excuse for her thus
torturing honesty to her own advantage, that she had
<P 185>
absolutely no other sound judgment within easy reach.
"Well, what is your opinion of my conduct,' she
said, quietly.
"That it is unworthy of any thoughtful, and meek,
and comely woman.'
In an instant Bathsheba's face coloured with the
angry crimson of a danby sunset. But she forbore
to utter this feeling, and the reticence of her tongue
only made the loquacity of her face the more notice+
able.
The next thing Gabriel did was to make a mistake.
"Perhaps you don't like the rudeness of my repri+
manding you, for I know it is rudeness; but I thought
it would do good.'
She instantly replied sarcastically --
"On the contrary, my opinion of you is so low, that
I see in your abuse the praise of discerning people!'
"I am glad you don't mind it, for I said it honestly
and with every serious meaning.'
  "I see. But, unfortunately, when you try not to
speak in jest you are amusing -- just as when you wish
to avoid seriousness you sometimes say a sensible word
It was a hard hit, but Bathsheba had unmistakably
lost her temper, and on that account Gabriel had
never in his life kept his own better. He said nothing.
She then broke out --
  "I may ask, I suppose, where in particular my
unworthiness lies? In my not marrying you, perhaps!
"Not by any means,' said Gabriel quietly. "I have
long given up thinking of that matter.'
"Or wishing it, I suppose,' she said; and it was
apparent that she expected an unhesitating denial of
this supposition.
Whatever Gabriel felt, he coolly echoed her words --
"Or wishing it either.'
  A woman may be treated with a bitterness which
is sweet to her, and with a rudeness which is not
offensive. Bathsheba would have submitted to an
indignant chastisement for her levity had Gabriel pro+
tested that he was loving her at the same time; the
impetuosity of passion unrequited is bearable, even if
it stings and anathematizes there is a triumph in the
humiliation, and a tenderness in the strife. This was
what she had been expecting, and what she had not
got. To be lectured
<P 186>
because the lecturer saw her in
the cold morning light of open-shuttered disillusion
was exasperating. He had not finished, either. He
continued in a more agitated voice: --
"My opinion is (since you ask it) that you are
greatly to blame for playing pranks upon a man like
Mr. Boldwood, merely as a pastime. Leading on a
man you don't care for is not a praiseworthy action.
And even, Miss Everdene, if you seriously inclined
towards him, you might have let him find it out in
some way of true loving-kindness, and not by sending
him a valentine's letter.'
Bathsheba laid down the shears.
 "I cannot allow any man to -- to criticise my private
Conduct!' she exclaimed. "Nor will I for a minute.
So you'll please leave the farm at the end of the week!'
It may have been a peculiarity -- at any rate it was
a fact -- that when Bathsheba was swayed by an emotion
of an earthly sort her lower lip trembled: when by a
refined emotion, her upper or heavenward one. Her
nether lip quivered now.
"Very well, so I will,' said Gabriel calmly. He had
been held to her by a beautiful thread which it pained
him to spoil by breaking, rather than by a chain he
could not break. "I should be even better pleased to
go at once,' he added.
"Go at once then, in Heaven's name!' said she,her
eyes flashing at his, though never meeting them.
"Don't let me see your face any more.'
"Very well, Miss Everdene -- so it shall be.'
And he took his shears and went away from her in
placid dignity, as Moses left the presence of Pharaoh.
<C xxi>
<P 187>
TROUBLES IN THE FOLD -- A MESSAGE
GABRIEL OAK had ceased to feed the Weatherbury
flock for about four-and-twenty hours, when on Sunday
afternoon the elderly gentlemen Joseph Poorgrass,
Matthew Moon, Fray, and half-a-dozen others, came
running up to the house of the mistress of the Upper
Farm.
 "Whatever is the matter, men?' she said, meeting
them at the door just as she was coming out on her
way to church, and ceasing in a moment from the close
compression of her two red lips, with which she had
accompanied the exertion of pelling on a tight glove.
"Sixty!' said Joseph Poorgrass.
"Seventy!' said Moon.
"Fifty-nine!' said Susan Tall's husband.
" -- Sheep have broke fence,' said Fray.
" -- And got into a field of young clover,' said Tall.
" -- Young clover!' said Moon.
" -- Clover!' said Joseph Poorgrass.
"And they be getting blasted,' said Henery Fray.
"That they be,' said Joseph.
"And will all die as dead as nits, if they bain't got
out and cured!'said Tall.
Joseph's countenance was drawn into lines and
puckers by his concern. Fray's forehead was wrinkled
both perpendicularly and crosswise, after the pattern of
a portcullis, expressive of a double despair. Laban
Tall's lips were thin, and his face were rigid. Matthew's
jaws sank, and his eyes turned whichever way the
strongest muscle happened to pull them.
  "Yes,' said Joseph, "and I was sitting at home,
looking for Ephesians, and says I to myself, "'Tis
nothing but Corinthians and Thessalonians in this
danged Testament,'' when
<P 188>
who should come in but
Henery there: ""Joseph,'' he said, ""the sheep have
With Bathsheba it was a moment when thought was
blasted theirselves -- -'''
  With Bathsheba it was a moment when thought was
speech and speech exclamation. Moreover, she had
hardly recovered her equanimity since the disturbance
which she had suffered from Oak's remarks.
'Thats enought -- that's enough! -- oh, you fools!'
she cried, throwing the parasol and Prayer-book into
the passage, and running out of doors in the direction
signified. "To come to me, and not go and get them
out directly! Oh, the stupid numskulls!'
Her eyes were at their darkest and brightest now.
Bathsheba's beauty belonged rather to the demonian
than to the angelic school, she never looked so well as
when she was angry -- and particularly when the effect
was heightened by a rather dashing velvet dress, care+
fully put on before a glass.
All the ancient men ran in a jumbled throng after
her to the clover-field, Joseph sinking down in the
midst when about half-way, like an individual withering
in a world which was more and more insupportable.
Having once received the stimulus that her presence
always gave them they went round among the sheep
with a will. The majority of the afflicted animals were
lying down, and could not be stirred. These were
bodily lifted out, and the others driven into the adjoining
field. Here, after the lapse of a few minutes, several
more fell down, and lay helpless and livid as the rest.
Bathsheba, with a sad, bursting heart, looked at these
primest specimens of her prime flock as they rolled
there --
Swoln with wind and the rank mist they drew.
Many of them foamed at the mouth, their breathing
being quick and short, whilst the bodies of all were
fearfully distended.
"O, what can I do, what can I do!' said Bathsheba,
helplessly. "Sheep are such unfortunate animals! --
there's always something happening to them! I never
knew a flock pass a year without getting into some scrape
or other.'
"There's only one way of saving them,' said Tall.
<P 189>
"What way? Tell me quick!'
"They must be pierced in the side with a thing made
on purpose.'
"Can you do it? Can I?'
"No, ma'am. We can't, nor you neither. It must
be done in a particular spot. If ye go to the right or
left but an inch you stab the ewe and kill her. Not
even a shepherd can do it, as a rule.'
"Then they must die,' she said, in a resigned tone.
"Only one man in the neighbourhood knows the way,'
said Joseph, now just come up. "He could cure 'em
all if he were here.'
"Who is he? Let's get him!'
"Shepherd Oak," said Matthew. "Ah, he's a clever
man in talents!'
"Ah, that he is so!' said Joseph Poorgrass.
"True -- he's the man,' said Laban Tall.
"How dare you name that man in my presence!' she
said excitedly. "I told you never to allude to him, nor
shall you if you stay with me. Ah!' she added, brighten+
ing, "Farmer Boldwood knows!'
  "0 no, ma'am' said Matthew. "Two of his store
ewes got into some vetches t'other day, and were just
like these. He sent a man on horseback here post-haste
for Gable, and Gable went and saved 'em, Farmer
Boldwood hev got the thing they do it with. 'Tis a
holler pipe, with a sharp pricker inside. Isn't it,
Joseph?'
  "Ay -- a holler pipe,' echoed Joseph. "That's what
'tis.'
"Ay, sure -- that's the machine,' chimed in Henery
Fray, reflectively, with an Oriental indifference to the
flight of time.
"Well," burst out Bathsheba, "don't stand there with
your ""ayes'' and your ""sures,'' talking at me! Get
somebody to cure the sheep instantly!'
  All then stalked or in eonsternation, to get some+
body as directed, without any idea of who it was to be.
In a minute they had vanished through the gate,.and
she stood alone with the dying flock.
"Never will I send for him never!' she said firmly.
<P 190>
One of the ewes here contracted its muscles horribly,
extended itself, and jumped high into the air. The
leap was an astonishing one. The ewe fell heavily, and
lay still.
Bathsheba went up to it. The sheep was dead.
"O, what shall I do -- what shall I do!' she again
exclaimed, wringing her hands. "I won't send for him.
No, I won't!'
The most vigorous expression of a resolution does
not always coinicide with the greatest vigour of the
resolution itself. It is often flung out as a sort of prop
to support a decaying conviction which, whilst strong,
required no enunciation to prove it so. The "No, I
won't' of Bathsheba meant virtually, "I think I must.'
She followed her assistants through the gate, and
lifted her hand to one of them. Laban answered to her
signal.
"Where is Oak staying?'
"Across the valley at Nest Cottage!'
"Jump on the bay mare, and ride across, and say he
must return instantly -- that I say so.'
Tall scrambled off to the field, and in two minutes
was on Poll, the bay, bare-backed, and with only a
halter by way of rein. He diminished down the
hill.
Bathsheba watched. So did all the rest. Tall
cantered along the bridle-path through Sixteen Acres,
Sheeplands, Middle Field The Flats, Cappel's Piece,
shrank almost to a point, crossed the bridge, and
ascended from the valley through Springmead and
Whitepits on the other side. The cottage to which
Gabriel had retired before taking his final departure
from the locality was visible as a white spot on the
opposite hill, backed by blue firs. Bathsheba walked
up and down. The men entered the field and
endeavoured to ease the anguish of the dumb creatures
by rubbing them. Nothing availed.
Bathsheba continued walking. The horse was seen
descending the hill, and the wearisome series had to be
repeated in reverse order: Whitepits, Springmead,
Cappel's Piece, The Flats, Middle Field, Sheeplands,
Sixteen Acres. She hoped Tall had had presence of
mind enough to give the mare up to Gabriel, and return
himself on foot. The rider neared them. It was Tall.
<P 191>
"O, what folly!' said Bathsheba.
Gabriel was not visible anywhere.
"Perhaps he is already gone!' she said.
Tall came into the inclosure, and leapt off, his face
tragic as Morton's after the battle of Shrewsbury.
"Well?' said Bathsheba, unwilling to believe that
her verbal lettre-de-cachet could possibly have miscarried.
"He says beggars mustn't be choosers,' replied Laban.
"What!' said the young farmer, opening her eyes
and drawing in her breath for an outburst. Joseph
Poorgrass retired a few steps behind a hurdle.
"He says he shall not come onless you request en
to come civilly and in a proper manner, as becomes any
'ooman begging a favour.'
"Oh, oh, that's his answer! Where does he get his
airs? Who am I, then, to be treated like that? Shall
I beg to a man who has begged to me?'
Another of the flock sprang into the air, and fell
dead.
The men looked grave, as if they suppressed opinion.
Bathsheba turned aside, her eyes full of tears. The
strait she was in through pride and shrewishness could
not be disguised longer: she burst out crying bitterly;
they all saw it; and she attempted no further concealment.
"I wouldn't cry about it, miss,' said William Small+
bury, compassionately. "Why not ask him softer like?
I'm sure he'd come then. Gable is a true man in that
way.'
Bathsheba checked her grief and wiped her eyes.
"O, it is a wicked cruelty to me -- it is -- it is!' she
murmured. "And he drives me to do what I wouldn't;
yes, he does ! -- Tall, come indoors.'
After this collapse, not very dignified for the head
of an establishment, she went into the house, Tall at
her heels. Here she sat down and hastily scribbled a
note between the small convulsive sobs of convalescence
which follow a fit of crying as a ground-swell follows a
storm. The note was none the less polite for being
written in a hurry. She held it at a distance, was
about to fold it, then added these words at the
bottom: --
"Do not desert me, Gabriel!'
<P 193>
She looked a little redder in refolding it, and closed
her lips, as if thereby to suspend till too late the action
of conscience in examining whether such strategy were
justifiable. The note was despatched as the message
had been, and Bathsheba waited indoors for the result.
It was an anxious quarter of an hour that intervened
between the messenger's departure and the sound of the
horse's tramp again outside. She- could not watch this
time, but, leaning over the old bureau at which she had
written the letter, closed her eyes, as if to keep out both
hope and fear.
  The case, however, was a promising one. Gabriel
was not angry: he was simply neutral, although her first
command had been so haughty. Such imperiousness
would have damned a little less beauty; and on the
other hand, such beauty would have redeemed a little
less imperiousness.
She went out when the horse was heard, and looked
up. A mounted figure passed between her and the
sky, and drew on towards the fleld of sheep, the rider
turning his face in receding. Gabriel looked at her.
It was a moment when a woman's eyes and tongue tell
distinctly opposite tales. Bathsheba looked full of
gratitude, and she said: --
  "O, Gabriel, how could you serve me so unkindly!'
Such a tenderly-shaped reproach for his previous
delay was the one speech in the language that he could
pardon for not being commendation of his readiness
now.
Gabriel murmured a confused reply, and hastened
on. She knew from the look which sentence in her
note had brought him. Bathsheba followed to the
field.
Gabriel was already among the turgid, prostrate forms.
He had flung off his coat, rolled up his shirt-sleeves,
and taken from his pocket the instrument of salvation.
It was a small tube or trochar, with a lance passing
down the inside; and Gabriel began to use it with a
dexterity that would have graced a hospital surgeon.
Passing his hand over the sheep's left flank, and
selecting the proper point, he punctured the skin and
rumen with the lance as it stood in the tube; then he
suddenly withdrew the lance, retaining the tube in its
place. A current of air rushed up the tube, forcible
enough to have extinguished a candle held at the
orifice.
It has been said that mere ease after torment is de+
light for a time; and the countenances of these poor
creatures expressed it now. Forty-nine operations were
successfully performed. Owing to the great hurry
necessitated by the far-gone state of some of the flock,
Gabriel missed his aim in one case, and in one only --
striking wide of the mark, and inflicting a mortal blow
at once upon the suffering ewe. Four had died; three
recovered without an operation. The total number of
sheep which had thus strayed and injured themselves
so dangerously was fifty-seven.
When the love-led man had ceased from his labours,
Bathsheba came and looked him in the face.
"Gabriel, will you stay on with me?' she, said,
smiling winningly, and not troubling to bring her lips
quite together again at the end, because there was going
to be another smile soon.
"I will,' said Gabriel.
And she smiled on him again.
<C xxii>
<P 194>
THE GREAT BARN AnD THE SHEEP-SHEARERS
MEN thin away to insignificance and oblivion quite as
often by not making the most of good spirits when they
have them as by lacking good spirits when they are
indispensable. Gabriel lately, for the first time since
his prostration by misfortune, had been independent in
thought and vigorous in action to a marked extent --
conditions which, powerless without an opportunity as
an opportunity without them is barren, would have
given him a sure lift upwards when the favourable-con+
junction should have occurred. But this incurable
loitering beside Bathsheba Everdene stole his time
ruinously. The spring tides were going by without
floating him off, and the neap might soon come which
could not.
It was the first day of June, and the sheep-shearing
season culminated, the landscape, even to the leanest
pasture, being all health and colour. Every green was
young, every pore was open, and every stalk was swollen
with racing currents of juice. God was palpably present
in the country, and the devil had gone with the world
to town. Flossy catkins of the later kinds, fern-sprouts
like bishops' croziers, the square-headed moschatel, the
odd cuckoo-pint, -- like an apoplectic saint in a niche
of malachite, -- snow-white ladies'-smocks, the toothwort,
approximating to human flesh, the enchanter's night+
shade, and the black-petaled doleful-bells, were among
the quainter objects of the vegetable world in and about
Weatherbury at this teeming time; and of the animal,
the metamorphosed figures of Mr. Jan Coggan, the
master-shearer; the second and third shearers, who
travelled in the exercise of their calling, and do not re+
quire definition by name; Henery Fray the fourth
shearer, Susan Tall's husband the fifth, Joseph Poorgrass
the sixth, young Cain Ball as assistant-shearer, and
Gabriel Oak as general supervisor. None of these were
clothed
<P 195>
to any extent worth mentioning, each appearing
to have hit in the matter of raiment the decent mean
between a high and low caste Hindoo. An angularity
of lineament, and a fixity of facial machinery in general,
proclaimed that serious work was the order of the day.
They sheared in the great barn, called for the nonce
the Shearing-barn, which on ground-plan resembled a
church with transepts. It not only emulated the form
of the neighbouring church of the parish, but vied with
it in antiquity. Whether the barn had ever formed one
of a group of conventual buildings nobody seemed to be
aware; no trace of such surroundings remained. The
vast porches at the sides, lofty enough to admit a waggon
laden to its highest with corn in the sheaf, were spanned
by heavy-pointed arches of stone, broadly and boldly cut,
whose very simplicity was the origin of a grandeur not
apparent in erections where more ornament has been
attempted. The dusky, filmed, chestnut roof, braced
and tied in by huge collars, curves, and diagonals, was
far nobler in design, because more wealthy in material,
than nine-tenths of those in our modern churches.
Along each side wall was a range of striding buttresses,
throwing deep shadows on the spaces between them,
which were perforated by lancet openings, combining
in their proportions the precise requirements both of
beauty and ventilation.
One could say about this barn, what could hardly
be said of either the church or the castle, akin to it in
age and style, that the purpose which had dictated its
original erection was the same with that to which it
was still applied. Unlike and superior to either of
those two typical remnants of mediaevalism, the old
barn embodied practices which had suffered no mutila+
tion at the hands of time. Here at least the spirit of
the ancient builders was at one with the spirit of the
modern beholder. Standing before this abraded pile,
the eye regarded its present usage, the mind-dwelt upon
its past history, with a satisfied sense of functional
continuity throughout -- a feeling almost of gratitude,
and quite of pride, at the permanence of the idea
which had heaped it up. The fact that four centuries
had neither proved it to be founded on a mistake,
<P 196>
inspired any hatred of its purpose, nor given rise to
any reaction that had battered it down, invested this
simple grey effort of old minds with a repose, if not a
grandeur, which a too curious reflection was apt to
disturb in its ecclesiastical and military compeers. For
once medievalism and modernism had a common stand+
point. The lanccolate windows, the time-eaten arch+
stones and chamfers, the orientation of the axis, the
misty chestnut work of the rafters, referred to no exploded
fortifying art or worn-out religious creed. The defence
and salvation of the body by daily bread is still a study,
a religion, and a desire.
To-day the large side doors were thrown open
towards the sun to admit a bountiful light to the
immediate spot of the shearers' operations, which was
the wood threshing-floor in the centre, formed of thick
oak, black with age and polished by the beating of flails
for many generations, till it had grown as slippery and
as rich in hue as the state-room floors of an Elizabethan
mansion. Here the shearers knelt, the sun slanting in
upon their bleached shirts, tanned arms, and the polished
shears they flourished, causing these to bristle with a
thousand rays strong enough to blind a weak-eyed man.
Beneath them a captive sheep lay panting, quickening
its pants as misgiving merged in terror, till it quivered
like the hot landscape outside.
This picture of to-day in its frame of four hundred
years ago did not produce that marked contrast between
ancient and modern which is implied by the contrast
of date. In comparison with cities, Weatherbury was
immutable. The citizen's Then is the rustic's Now.
In London, twenty or thirty-years ago are old times;
in Paris ten years, or five; in Weatherbury three or
four score years were included in the mere present,
and nothing less than a century set a mark on its
face or tone. Five decades hardly modified the cut of
a gaiter, the embroidery of a smock-frock, by the breadth
of a hair. Ten generations failed to alter the turn of
a single phrase. In these Wessex nooks the busy out+
sider's ancient times are only old; his old times are still
new; his present is futurity.
So the barn was natural to the shearers, and the
shearers were in harmony with the barn.
The spacious ends of the building, answering ecclesi+
astically
<P 197>
to nave and chancel extremities, were fenced
off with hurdles, the sheep being all collected in a crowd
within these two enclosures; and in one angle a catching+
pen was formed, in which three or four sheep were
continuously kept ready for the shearers to seize without
loss of time. In the background, mellowed by tawny
shade, were the three women, Maryann Money, and
Temperance and Soberness Miller, gathering up the
fleeces and twisting ropes of wool with a wimble for
tying them round. They were indifferently well assisted
by the old maltster, who, when the malting season from
October to April had passed, made himself useful upon
any of the bordering farmsteads.
"Behind all was Bathsheba, carefully watching the
men to see that there was no cutting or wounding
through carelessness, and that the animals were shorn
close. Gabriel, who flitted and hovered under her
bright eyes like a moth, did not shear continuously,
half his time being spent in attending to the others
and selecting the sheep for them. At the present
moment he was engaged in handing round a mug of
mild liquor, supplied from a barrel in the corner,
and cut pieces of bread and cheese.
Bathsheba, after throwing a glance here, a caution
there, and lecturing one of the younger operators who
had allowed his last finished sheep to go off among
the flock without re-stamping it with her initials, came
again to Gabriel, as he put down the luncheon to drag
a frightened ewe to his shear-station, flinging it over
upon its back with a dexterous twist of the arm
He lopped off the tresses about its head, and opened
up the neck and collar, his mistress quietly looking
on:
"She blushes at the insult,' murmured Bathsheba,
watching the pink flush which arose and overspread
the neck and shoulders of the ewe where they were
left bare by the clicking shears -- a flush which was
enviable, for its delicacy, by many queens of coteries,
and would have been creditable, for its promptness, to
any woman in the world.
Poor Gabriel's soul was fed with a luxury of content
by having her over him, her eyes critically regarding
his skilful shears, which apparently were going to gather
up a piece of the flesh at every close, and yet never did
so. Like Guildenstern,
<P 198>
Oak was happy in that he was
not over happy. He had no wish to converse with her:
that his bright lady and himself formed one group,
exclusively their own, and containing no others in the
world, was enough.
So the chatter was all on her side. There is a
loquacity that tells nothing, which was Bathsheba's;
and there is a silence which says much: that was
Gabriel's. Full of this dim and temperate bliss, he
went on to fling the ewe over upon her other side,
covering her head with his knee, gradually running
the shears line after line round her dewlap; thence
about her flank and back, and finishing over the tail.
"Well done, and done quickly!' said Bathsheba,
looking at her watch as the last snip resounded.
"How long, miss?' said Gabriel, wiping his brow.
"Three-and-twenty minutes and a half since you took
the first lock from its forehead. It is the first time that
I have ever seen one done in less than half an hour.'
The clean, sleek creature arose from its fleece -- how
perfectly like Aphrodite rising from the foam should
have been seen to be realized -- looking startled and
shy at the loss of its garment, which lay on the floor
in one soft cloud, united throughout, the portion visible
being the inner surface only, which, never before exposed,
was white as snow, and without flaw or blemish of the
minutest kind.
"Cain Ball!'
"Yes, Mister Oak; here I be!'
Cainy now runs forward with the tar-pot. "B. E.' is
newly stamped upon the shorn skin, and away the simplc
dam lcaps, panting, over the board into the shirtless
flock outside. Then up comes Maryann; throws the
loose locks into the middle of the fleece, rolls it up,
and carries it into the background as three-and-a-half
pounds of unadulterated warmth for the winter enjoy+
ment of persons unknown and far away, who will,
however, never experience the superlative comfort
derivable from the wool as it here exists, new and pure
 -- before the unctuousness of its nature whilst in a
living state has dried, stiffened, and been washed out
 -- rendering it just now as superior to anything woollen
as cream is superior to milk-and-water.
<P 199>
But heartless circumstance could not leave entire
Gabriel's happiness of this morning. The rams, old
ewes, and two-shear ewes had duly undergone their
stripping, and the men were proceeding with the shear+
lings and hogs, when Oak's belief that she was going to
stand pleasantly by and time him through another
performance was painfully interrupted by Farmer Bold+
wood's appearance in the extremest corner of the barn.
Nobody seemed to have perceived his entry, but there
he certainly was. Boldwood always carried with him a
social atmosphere of his own, which everybody felt who
came near him; and the talk, which Bathsheba's
presence had somewhat suppressed, was now totally
suspended.
  He crossed over rowards Bathsheba, who turned to
greet him with a carriage of perfect ease. He spoke to
her in low tones, and she instinctively modulated her
own to the same pitch, and her voice ultimately even
caught the inflection of his. She was far from having
a wish to appear mysteriously connected with him; but
woman at the impressionable age gravitates to the larger
body not only in her choice of words, which is apparent
every day, but even in her shades of tone and humour,
when the influence is great.
  What they conversed about was not audible to
Gabriel, who was too independent to get near, though
too concerned to disregard. The issue of their dialogue
was the taking of her hand by the courteous farmer to
help her over the spreading-board into the bright June
sunlight outside. Standing beside the sheep already
shorn, they went on talking again. Concerning the
flock? Apparently not. Gabriel theorized, not without
truth, that in quiet discussion of any matter within reach
of the speakers' eyes, these are usually fixed upon it.
Bathsheba demurely regarded a contemptible straw lying
upon the ground, in a way which suggested less ovine
criticism than womanly embarrassment. She became
more or less red in the cheek, the blood wavering in
uncertain flux and reflux over the sensitive space between
ebb and flood. Gabriel sheared on, constrained and
sad.
She left Boldwood's side, and he walked up and
down alone for nearly a quarter of an hour. Then she
reappeared in her
<P 200>
new riding-habit of myrtle-green, which
fitted her to the waist as a rind fits its fruit; and young
Bob Coggan led -on -her mare, Boldwood fetching his
own horse from the tree under which it had been tied.
  Oak's eyes could not forsake them; and in en+
deavouring to continue his shearing at the same time
that he watched Boldwood's manner, he snipped the
sheep in the groin. The animal plunged; Bathsheba
instantly gazed towards it, and saw the blood.
"O, Gabriel!' she exclaimed, with severe remon+
strance you who are so strict with the other men -- see
what you are doing yourself!'
To an outsider there was not much to complain of
in this remark ; but to Oak, who "knew Bathsheba to be
well aware that she herself was the cause of the poor
ewe's wound, because she had wounded the ewe's shearer
in a -- still more vital part, it had a sting which the abiding
sense of his inferiority to both herself and Boldwood was
not calculated to heal. But a manly resolve to recognize
boldly that he had no longer a lover's interest in her,
helped him oceasionally to conceal a feeling.
" Bottle .! ' he shouted, in an unmoved voice of routine.
Cainy Ball ran up, the wound was anointed, and the
shearing continued.
Boldwood gently tossed Bathsheba into the saddle,
and before they turned away she again spoke out to Oak
with the same dominative and tantalizing graciousness.
"I am going now to see Mr. Boldwood's Leicesters.
Take my place in the barn, Gabriel, and keep the men
carefully to their work.'
The horses' heads were put about, and they trotted
away.
Boldwood's deep attachment was a matter of great
interest among all around him ; but, after having been
pointed out for so many years as the perfect exemplar
of thriving bachelorship, his lapse was an anticlimax
somewhat resembling that of St. John Long's death by
consumption in the midst of his proofs that it was not
a fatal disease.
<P 201>
" That means matrimony,' said Temperance Miller,
following them out of sight with her eyes.
"I reckon that's the size o't,' said Coggan, working
along without looking up.
" Well, better wed over the mixen than over the moor,'
said Laban Tall, turning his sheep.
Henery Fray spoke, exhibiting miserable eyes at the
same time: "I don't see why a maid should take a
husband when she's bold enough to fight her own
battles, and don't want a home ; for 'tis keeping another
woman out. But let it be, for 'tis a pity he and she
should trouble two houses.'
As usual with decided characters, Bathsheba invari+
ably provoked the criticism of individuals like Henery
Fray. Her emblazoned fault was to be too pronounced
in her objections, and not sufficiently overt in her
likings. We learn that it is not the rays which bodies
absorb, but those which they reject, that give them the
colours they are known by ; and win the same way people
are specialized by their dislikes and antagonisms, whilst
their goodwill is looked upon as no attribute at all.
Henery continued in a more complaisant mood : "I
once hinted my mind to her on a few things, as nearly
as a battered frame dared to do 'so to such a froward
piece. You all know, neighbours, what a man I be,
and how I come down with my powerful words when
my pride is boiling wi' scarn ?'
" We do, we do, Henery.'
" So I said, "" Mistress Everdene, there's places empty,
and there's gifted men willing ; but the spite '' -- no. not
the spite -- I didn't say spite -- ""but the villainy of the
contrarikind,'' I said (meaning womankind), "" keeps 'em
out.'' That wasn't too strong for her, say ? '
" Passably well put.'
"Yes; and I would have said it, had death and
salvation overtook me for it. Such is my spirit when I
have a mind.'
"A true man, and proud as a lucifer.'
"You see the artfulness ? Why, 'twas about being
baily really; but I didn't put it so plain that she could
understand my meaning, so I could lay it on all the
<P 202>
stronger. That was my depth .! ... However, let her
marry an she will. Perhaps 'tis high time. I believe
Farmer Boldwood kissed her behind the spear-bed at the
sheep-washing t'other day -- that I do.'
" What a lie !.' said Gabriel.
" Ah, neighbour Oak -- how'st know ? ' said, Henery,
mildly.
" Because she told me all that passed,' said Oak, with
a pharisaical sense that he was not as other shearers in
this matter.
"Ye have a right to believe it,' said Henery, with
dudgeon; "a very true right. But I mid see a little
distance into things !. To be long-headed enough for a
baily's place is a poor mere trifle -- yet a trifle more than
nothing. However, I look round upon life quite cool.
Do you heed me, neighbours ? My words, though made
as simple as I can, mid be rather deep for some heads.'
" O yes, Henery, we quite heed ye.'
" A strange old piece, goodmen -- whirled about from
here to yonder, as if I were nothing ! A little warped,
too. But I have my depths; ha, and even my great
depths ! I might gird at a certain shepherd, brain to
brain. But no -- O no !.'
" A strange old piece, ye say .! ' interposed the maltster,
in a querulous voice. "At the same time ye be no old
man worth naming -- no old man at all. Yer teeth
bain't  half  gone  yet ; and what's a old  man's standing
if se be his teeth bain't gone? Weren't I stale in
wedlock afore ye were out  of arms ? 'Tis a poor thing
to be sixty, when there's people far past four-score -- a
boast'weak as water.'
It was the unvaying custom in Weatherbury to
sink minor differences when the maltster had to be
pacified.
" Weak as-water .! yes,' said Jan Coggan.- "Malter,
we feel ye to be a wonderful veteran man, and nobody
can gainsay it.'
" Nobody,' said Joseph Poorgrass. "Ye be a very
rare old  spectacle, malter, and we all admire ye for that
gift. '
"Ay, and as a young man, when my senses were in
prosperity, I was likewise liked by a good-few who
knowed me,' said the maltster.
" 'Ithout doubt you was -- 'ithout doubt.'
The bent and hoary 'man was satisfied, and so
apparently was Henery Frag. That matters should
continue pleasant Maryann
<P 203>
spoke, who, what with her
brown complexion, and the working wrapper of rusty
linsey, had at present the mellow hue of an old sketch
in oils -- notably some of Nicholas Poussin's: --
" Do anybody know of a crooked man, or a lame, or
any second-hand fellow at all that would do for poor
me ?' said Maryann. "A perfect one I don't expect to
 at my time of life. If I could hear of such a thing
twould do me more good thantoast and ale.'
 Coggan furnished a suitable reply. Oak went on
with his shearing, and said not another word. Pestilent
moods had come, and teased away his quiet. Bathsheba
had shown indications of anointing him above his
fellows by installing him as the bailiff that the farm
imperatively required. He did not covet the post
relatively to the farm : in relation to herself, as beloved
by him and unmarried to another, he had coveted it.
His readings of her seemed now to be vapoury and
indistinct. His lecture to her was, he thought, one of
the absurdest mistakes. Far from coquetting with
Boldwood, she had trifled with himself in thus feigning
that she had trifled with another. He was inwardly
convinced that, in accordance with the anticipations of
his easy-going and worse-educated comrades, that day
would see Boldwood the accepted husband of Miss
Everdene. Gabriel at this time of his life had out+
grown the instinctive dislike which every Christian
boy has for reading the Bible, perusing it now quite
frequently, and he inwardly said, " ''I find more bitter
than death the woman whose heart is snares and
nets .! '' ' This was mere exclamation -- the froth of the
storm. He adored Bathsheba just the same.
" We workfolk shall have some lordly- junketing
to-night,' said Cainy Ball, casting forth his thoughts in
a new direction. "This morning I see'em making the
great puddens in the milking-pails -- lumps of fat as big
as yer thumb, Mister Oak ! I've never seed such
splendid large knobs of fat before in the days of my
life -- they never used to be bigger then a horse-bean.
And there was a great black crock upon the brandise
with his legs a-sticking out, but I dont know what was
in within."
'And there's two bushels of biffins for apple-pies,'
said Maryann.
<P 204>
"Well, I hope to do my duty by it all,' said Joseph
Poorgrass, in a pleasant, masticating manner of anticipa+
tion. " Yes ; victuals and drink is a cheerful thing,
and gives nerves to the nerveless, if the form of words
may be used. 'Tis the gospel of the body, without
which we perish, so to speak it.'
<C xxiii>
<P 205>
EVENTIDE -- A SECOND DECLARATION
FOR the shearing-supper a long table was placed on the
grass-plot beside the house, the end of the table being
thrust over the sill of the wide parlour window and a
foot or two into the room. Miss Everdene sat inside
the window, facing down the table. She was thus at
the head without mingling with the men.
This evening Bathsheba was unusually excited, her
red cheeks and lips contrasting lustrously with the mazy
skeins of her shadowy hair. She seemed to expect
assistance, and the seat at the bottom of the table was
at her request left vacant until after they had begun
and the duties appertaining to that end, which he did
with great readiness.
At this moment Mr. Boldwood came in at the gate,
and crossed the green to Bathsheba at the window.
He apologized for his lateness : his arrival was evidently
by arrangement.
" Gabriel,' said she, " will you move again, please,
and let Mr. Boldwood come there ?'
Oak moved in silence back to his original seat.
The gentleman-farmer was dressed in cheerful style,
in a new coat and white waistcoat, quite contrasting
with his usual sober suits of grey. Inwardy, too, he
was blithe, and consequently chatty to an exceptional
degree. So also was Bathsheba now that he had come,
though the uninvited presence of Pennyways, the bailiff
who had been dismissed for theft, disturbed her equan+
imity for a while.
Supper being ended, Coggan began on his own
private account, without reference to listeners : --
l've lost my love and l care not,
I've lost my love, and l care not;
I shall soon have another
<P 206>
That's better than t'other!
I've lost my love, and I care not.
This lyric, when concluded, was received with a
silently appreciative gaze at the table, implying that the
performance, like a work by those established authors
who are independent of notices in the papers, was a
well-known delight which required no applause.
"Now, Master Poorgass, your song!' said Coggan.
"I be all but in liquor, and the gift is wanting in
me,' said Joseph, diminishing himself.
"Nonsense; wou'st never be so ungrateful, Joseph --
never!' said Coggan, expressing hurt feelings by an
inflection of voice. "And mistress is looking hard at
ye, as much as to say, ""Sing at once, Joseph Poor+
grass.'' '
"Faith, so she is; well, I must suffer it! ... Just
eye my features, and see if the tell-tale blood overheats
me much, neighbours?'
"No, yer blushes be quite reasonable,' said Coggan.
"I always tries to keep my colours from rising when
a beauty's eyes get fixed on me,' said Joseph, differently;
"but if so be 'tis willed they do, they must.'
"Now, Joseph, your song, please,' said Bathsheba,
from the window.
"Well, really, ma'am,' he replied, in a yielding tone,
"I don't know what to say. It would be a poor plain
ballet of my own composure.'
'Hear, hear! ' said the supper-party.
Poorgrass, thus assured, trilled forth a flickering yet
commendable piece of sentiment, the tune of which
consisted of the key-note and another, the latter being
the sound chiefly dwelt upon. This was so successful
that he rashly plunged into a second in the same
breath, after a few false starts : --
I sow'-ed th'-e
I sow'-ed
I sow'-ed the'-e seeds' of love',
I-it was' all' i'-in the'-e spring',
I-in A'-pril', Ma'-ay, a'-nd sun'-ny' June',
When sma'-all bi'-irds they' do' sing.
<P 207>
" Well put out of hand,' said Coggan, at the end of the
verse. ' "" They do sing '' was a very taking paragraph.'
"Ay; and there was a pretty place at "seeds of
love,'' and 'twas well heaved out. Though "love '' is
a nasty high corner when a man's voice is getting
crazed. Next verse, Master Poorgrass.'
But during this rendering young Bob Coggan ex+
hibited one of those anomalies which will afflict little
people when other persons are particularly serious : in
trying to check his laughter, he pushed down his throat
as much of the tablecloth as he could get hold of, when,
after continuing hermetically sealed for a short time, his
mirth burst out through his nose. Joseph perceived it,
and with hectic cheeks of indignation instantly ceased
singing. Coggan boxed Bob's ears immediately.
"Go on, Joseph -- go on, and never mind the young
scamp,' said Coggan. "'Tis a very catching ballet.
Now then again -- the next bar; I'll help ye to flourish
up the shrill notes where yer wind is rather wheezy : --
O the wi'-il-lo'-ow tree' will' twist',
And the wil'-low' tre'-ee wi'ill twine'.
But the singer could not be set going again. Bob
Coggan was sent home for his ill manners, and tran+
quility was restored by Jacob Smallbury, who volunteered
a ballad as inclusive and interminable as that with which
the worthy toper old Silenus amused on a similar occasion
the swains Chromis and Mnasylus, and other jolly dogs
of his day.
It' was still the beaming time .of evening, though
night was stealthily making itself visible low down upon
the ground, the western lines of light taking the earth
without alighting upon it to any extent, or illuminating
the dead levels at all. The sun had crept round the
tree as a last effort before death, and then began to
sink, the shearers' lower parts becoming steeped in
embrowning twilight, whilst their heads and shoulders
were still enjoying day, touched with a yellow of self+
sustained brilliancy that seemed inherent rather than
acquired.
The sun went down in an ochreous mist; but they
sat, and
<P 208>
talked on, and grew as merry as the gods in
Homer's heaven. Bathsheba still remained enthroned
inside the window, and occupied herself in knitting,
from which she sometimes looked up to view the fading
scene outside. The slow twilight expanded and enveloped
them completely before the signs of moving were shown.
Gabriel suddenly missed Farmer Boldwood from his
place at the bottom of the table. How long he had
been gone Oak did not know; but he had apparently
withdrawn into the eneircling dusk. Whilst he was
thinking of this, Liddy brought candles into the back
part of the room overlooking the shearers, and their
lively new flames shone down the table and over the
men, and dispersed among the green shadows behind.
Bathsheba's form, still in its original position, was now
again distinct between their eyes and the light, which
revealed that Boldwood had gone inside the room, and
was sitting near her.
Next came the question of the evening. Would Miss
Everdene sing to them the song she always sang so
charmingly -- " The Banks of Allan Water ' -- before they
went home ?
After a moment's consideration Bathsheba assented,
beckoning to Gabriel, who hastened up into the coveted
atmosphere.
" Have you brought your flute ? " she whispered.
" Yes, miss.'
" Play to my singing, then.'
She stood up in the window-opening, facing the
men, the candles behind her, Gabriel on her right hand,
immediately outside the sash-frame. Boldwood had
drawn up on her left, within the room. Her singing
was soft and rather tremulous at first, but it soon swelled
to a steady clearness. Subsequent events caused one
of the verses to be remembered for many months, and
even years, by more than one of those who were gathered
there : --
For his bride a soldier sought her,
And a winning tongue had he :
On the banks of Allan Water
None was gay as she !.
<P 209>
In addition to the dulcet piping of Gabriel's flute,
Boldwood supplied a bass in his customary profound
voice, uttering his notes so softly, however, as to abstain
entirely from making anything like an ordinary duet of
the song ; they rather formed a rich unexplored shadow,
which threw her tones into relief. The shearers reclined
against each other as at suppers in the early ages of the
world, and so silent and absorbed were they that her
breathing could almost be heard between the bars ; and
at the end of the ballad, when the last tone loitered on
to an inexpressible close, there arose that buzz of
pleasure which is the attar of applause.
It is scarcely necessary to state that Gabriel could
not avoid noting the farmer's bearing to-night towards
their entertainer. Yet there was nothing exceptional in
his actions beyond what appertained to his time of
performing them. It was when the rest were all looking
away that Boldwood observed her ; when they regarded
her he turned aside; when they thanked or praised he
was silent; when they were inattentive he murmured
his thanks. The meaning lay in the difference between
actions, none of which had any meaning of itself;
and the necessity of being jealous, which lovers are
troubled with, did not lead Oak to underestimate these
signs.
Bathsheba then wished them good-night, withdrew
from the window, and retired to the back part of the
room, Boldwood thereupon closing the sash and the
shutters, and remaining inside with her. Oak wandered
away under the quiet and scented trees. Recovering
from the softer impressions produced by Bathsheba's
voice, the shearers rose to leave, Coggan turning to
Pennyways as he pushed back the bench to pass out : --
"I like to give praise where praise is due, and the
man deserves it -- that 'a do so,' he remarked, looking at
the worthy thief, as if he were the masterpiece of some
world-renowned artist.
<P 210>
"I'm sure I should never have believed it if we hadn t
proved it, so to allude,' hiccupped Joseph Poorgrass, " that
every cup, every one of the best knives and forks, and
every empty bottle be in their place as perfect now as
at the beginning, and not one stole at all.
"I'm sure I don't deserve half the praise you give
me,' said the virtuous thief, grimly.
" Well, I'll say this for Pennyways,' added Coggan,
"that whenever he do really make up his mind to do a
noble thing in the shape of a good action, as I could
see by his face he. did to-night afore sitting down, he's
generally able to carry it out. Yes, I'm proud to say.
neighbours, that he's stole nothing at all.
"Well,' -- 'tis an honest deed, and we thank ye for it,
Pennyways,' said Joseph; to which opinion the remainder
of the company subscribed unanimously.
  At this time of departure, when nothing more was
visible of the inside of the parlour than a thin and still
chink of light between the shutters, a passionate scene
was in eourse of enactment there.'
Miss Everdene and Boldwood were alone. Her
cheeks had lost a great deal of their healthful fire from
the very seriousness of her position ; but her eye was
bright with the excitement of a triumph -- though it was
a triumph which had rather been contemplated than
desired.
She was standing behind a low arm-chair, from which
she had just risen, and he was kneeling in it -- inclining
himself over its back towards her, and holding her hand
in both his own. His body moved restlessly, and it was
with what Keats daintily calls a too happy happiness.
This unwonted abstraction by love of all dignity from
a man of whom it had ever seemed the chief component,
was, in its distressing incongruity, a pain to her which
quenched much of the pleasure she derived from the
proof that she was idolized.
" I will try to love you,' she was saying, in a trembling
voice quite unlike her usual self-confidence. " And if I
can believe in any way that I shall make you a good
wife I shall indeed be willing to marry you. But, Mr.
Boldwood, hesitation on so high a matter is honourable
in any woman, and I don't want to give a solemn
promise to-night. I would rather ask you to wait a few
weeks till I can see my situation better.'
"But you have every reason to believe that then --  -- '
'I have every reason to hope that at the end of the
five or
<P 211>
six weeks, between this time and harvest, that
you say you are going to be away from home, I shall be
able to promise to be your wife,' she said, firmly. "But
remember this distinctly, I don't promise yet.'
"It is enough I don't ask more. I can wait on
those dear words. And now, Miss Everdene, good+
night!'
" Good-night,' she said, graciously -- almost tenderly;
and Boldwood withdrew with a serene smile.
Bathsheba knew more of him now ; he had entirely
bared his heart before her, even until he had almost
worn in her eyes the sorry look of a grand bird without
the feathers that make it grand. She had been awe+
struck at her past temerity, and was struggling to make
amends without thinking whether the sin quite deserved
the penalty she was schooling herself to pay. To have
brought all this about her ears was terrible; but after a
while the situation was not without a fearful joy. The
facility with which even the most timid woman some+
times acquire a relish for the dreadful when that is
amalgamated with a little triumph, is marvellous.
<C xxiv>
<P 212>
THE SAME NIGHT -- THE FIR PLANTATION
AMONG the multifarious duties which Bathsheba had
voluntarily imposed upon herself by dispensing with the
services of a bailiff, was the particular one of looking
round the homestead before going to bed, to see that
all was right and safe for the night. Gabriel had almost
constantly preceded her in this tour every evening,
watching her affairs as carefully as any specially appointed
officer of surveillance could have done; but this tender
devotion was to a great extent unknown to his mistress,
and as much as was known was somewhat thanklessly
received. Women are never tired of bewailing man's
fickleness in love, but they only seem to snub his con+
stancy.
As watching is best done invisibly, she usually carried
a dark lantern in her hand, and every now and then
turned on the light to examine nooks and corners with
the coolness of a metropolitan policeman. This cool+
ness may have owed its existence not so much to her
fearlessness of expected danger as to her freedom from
the suspicion of any; her worst anticipated discovery
being that a horse might not be well bedded, the fowls
not all in, or a door not closed.
This night the buildings were inspected as usual,
and she went round to the farm paddock. Here the
only sounds disturbing the stillness were steady munch+
ings of many mouths, and stentorian breathings from all
but invisible noses, ending in snores and puffs like the
blowing of bellows slowly. Then the munching would
recommence, when the lively imagination might assist
the eye to discern a group of pink-white nostrils, shaped
as caverns, and very clammy and humid on their sur+
faces, not exactly pleasant to the touch until one got
used to them; the mouths beneath having a great
partiality for closing upon any loose end of Bathsheba's
apparel which came withins calculation        '+\w'time ($mu$s)    '+\w'time ($mu$s)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta \w'\fIVAX object program\fR        'u +\w'Bounds calculation        'u +\w'time ($mu$s)    'u +\w'time ($mu$s)'u
\l'\n(x1u'
.sp
original hash location 7.
.br
Step 4:
The group of remainders which share the same initial location 7 can then be 
found in locations 8 and 9.  The remainder 5 at location 8 can thus be
unambiguously associated with the original key 75 and it can be
concluded that the information associated with the key 75 is present 
at location 8 in the memory.
.rh "Insertion."
Insertion of a new key into the memory requires three distinct steps:
first locating whereabouts in the memory the key is to be placed;
second deciding how the memory is to be rearranged to make room for the new
key; and third moving the remainders whilst correctly preserving the
$A$ and $C$ values.  (The $V$ bits remain fixed during the move.)\  
The initial search can be done as explained above with the small addition that
the correct insertion point must still be located when the key is not present.
The second and third steps follow the algorithm in Amble and Knuth [1]
with the addition that the values of the $A$ array must be re-calculated
over the shifted memory locations and the $C$ but not the $V$ bits must
be moved with the keys.  
Details of this can be found in an earlier draft of this paper, [4].
.sh "4 Performance"
.pp
Now I consider how long these algorithms will take to run.  The measure of 
run time that I will use is the number of 
.ul
probes
that each algorithm makes, that is, the number of times locations in the 
hash table are examined or updated.  
CPU time measures were taken as well and correlate well with the empirical 
counts of probes given below.
.FC "Table I"
.FC "Table II"
.rh "Searching."  
Tables I and II list the results of simulations
for successful and unsuccessful searches respectively.  Results are tabulated
for ordinary BLP and for compact hashing with  
different memory loadings and different sizes for
the $A$ field.  If the number of keys stored
in the memory is $N$ then the memory loading is measured by 
$alpha ~==~N/M$, the fraction of locations in the memory which are full. 
Values of
Na were chosen to correspond to $A$ field lengths of 1, 2, 3,
4, and 5 bits, that is for Na equal to 0, 1, 3, 7, and 15 respectively,
and also for the case where no $A$ field was used.
Increasing the size of the $A$ field beyond 5 bits had no effect at
the memory loadings investigated.  So Na equal to 15 is effectively the
same as an unbounded size for the $A$ values.  
.pp
The insertion procedure is 
guaranteed to be optimum only for BLP, not for compact hashing.  If none
of the values in $A$ is $inf$ then the sequence of locations examined by
compact
hashing is the same as for BLP and so the strategy will still be optimum.
(This is easily seen by noting that in compact hashing
$A[h(t(K))]$ determines the direction
of the search depending on whether it is positive or negative.  During the 
subsequent search no
locations past the sought key will be probed.  This is exactly the same
probing behaviour as in BLP.)\ 
However, if no $A$ array is being used or if some values of $A$ are $inf$
then extra locations need to be probed to find an empty location or one which
is not equal to $inf$.
.pp
As expected the figures in Table I show that for Na at 15 and using optimum
insertion the probes for a successful search are almost the same as for BLP.
(The small differences are accounted for by statistical fluctuations
in the simulation results.)\   
.pp 
As Na is decreased the number of probes needed for searching increases.
This
reflects the greater distances that must be traversed to find a value of 
$A$ not equal to $inf$.  It is notable however that even a single bit allocated
to the $A$ fields dramatically improves the performance.  Even at a
memory density of 0.95 some 25% of non-empty locations have $A$ values of 0.
.pp
The pattern for unsuccessful searches is broadly the same as sketched above
for successful searches except that in general unsuccessful searches
are quicker than successful ones.  This is a result of the $V$ bits
which allow many unsuccessful searches to be stopped after a single probe. 
For example even at the maximum possible memory density of 1 some 36% of
$V$ bits are zero.  This results in compact hashing being faster than
the reported values for ordinary BLP.  
However, unsuccessful BLP searches could be
improved to a similar degree by incorporating $V$ bits.
.FC "Table III"
.rh "Insertion."
The probes to insert a new key can be broken down into three components,
those needed to locate the position where the key is to be inserted,
those to decide the direction of movement 
and those to effect the movement of the memory.
The first of these will be slightly larger than
a successful search and so the results of Table I have not been repeated.
The second two are independent of Na as they are dependent only on
the lengths of blocks of adjacent non-empty locations.  The values
for these Na independent components are listed in Table III.
In most cases
this Na independent component is much larger than the search component.
The exception occurs 
where no $A$ values are being used, when the two components
are comparable.
.pp
Cleary [5] examines a random insertion strategy for ordinary BLP
where blocks of entries in the hash table are moved in a randomly chosen
direction
to accomodate a
new entry rather than in the optimum way described by 
Amble and Knuth [1].
It is shown that this strategy can
improve insertion times by a factor of 4 at the expense of small degradations
(at most 15%) in retrieval times.  These
results are shown by simulation to extend to compact hashing.  
Indeed for small values of
Na the optimum and random strategies show no significant differences in
retrieval times.
.rh "Analytic approximation."
While analytic results are not available for the number of probes 
needed for retrieval or insertion an
approximation can be developed for some of the cases.  It is shown by
Amble and Knuth [1] and Knuth [8] (problem 6.4-47) that the average
length of a block of consecutive non-empty locations when using
the optimum insertion strategy is approximately
$(1- alpha ) sup -2 ~-~1$.  
Let this block length be $L$.  
.pp
Consider the case of a successful search when no $A$ field is used.
A successful scan of a block from an arbitrary
position to the end takes on average $L/2~+~1/2$ probes.  
During the initial scan down the memory in the simulations the initial check of the
$V$ bit and the final empty location examined were each counted as a single probe.
This gives a total of $L/2~+~5/2$ probes for the initial scan down. (This is not
exact because there will be a correlation between the position 
of a key's home location within a block 
and the number of keys hashing to that home location).
The scan back up a block will take $L/2~+1/2$ probes (exact for a successful search).
This gives $(1- alpha ) sup -2 +2$ for the expected
number of probes during a successful search.  These values are listed in Table I
and are consistently low by about 10%.
.pp
For an unsuccessful search with no $A$ field the initial scan down the 
memory will take $L/2~+5/2$ probes as above (again this will not be exact because
the probability of a $V$ bit being one will be correlated with the 
size of a block and its
position within the block).
An unsuccessful scan of a block takes $L/2~+~1/2$ probes.  (This assumes
the keys in the block are distributed uniformly.  
This gives the following probabilities that the search will stop at a 
particular location in the block: the first location, $1/2L$; locations 2 
through $L$, $1/L$; the empty $(L+1)$st location, $1/~2L$.
This will not be true for compact hashing because the probability of stopping at a key
which shares its home location with a large number of other keys will be smaller than
for one which shares it with few others.)\ \ Summing these two terms gives $L~+~7/2$
probes.
Given that the keys are distributed randomly there is a probability of 
$e sup {- alpha}$ that a given $V$ bit will be zero.  So the expected number 
of probes overall for an unsuccessful search is 
$e sup {- alpha}~+~(1-e sup {- alpha}) cdot ((1- alpha ) sup -2 + 5/2)$.
These values are listed in Table II and are consistently low by about 5%.
.pp
Considering only the insertion component which is independent of Na then
it is possible to derive an expression for the number of probes.
There is an initial
scan to move the memory down and insert the new key which will scan about half 
the block ($L/2~+~5/2$ probes) 
and a subsequent scan back up of the entire block ($L~+~1$ probes).  
Empirically the probability
that the entire block will subsequently be moved back up is a half which gives
an expected $1/2(L~+~1)$ probes.
Summing these three contributions gives $2(1- alpha ) sup -2 ~+~2$
as the expected number of probes for an insertion (excluding the search time).
Values for this expression are tabulated  in Table III, they are in good 
agreement with the empirical values.
.sh "Acknowledgements"
.pp
I would like to thank Ian Witten for careful checking of a draft version.
Also John Andreae for discussions which showed that something like compact
hashing might be possible.
.sh "References"
.ls 1
.LB "[6]    "
.sp
.NI "[1]  "
[1]\ \ O.\ Amble and D.\ E.\ Knuth, "Ordered Hash Tables,"
.ul
Computer Journal,
vol. 17, pp135-142, 1974.
.sp
.NI "[1]  "
[2]\ \ J.\ H.\ Andreae,
.ul
Thinking with the teachable machine.
London: Academic Press, 1977.
.sp
.NI "[1]  "
[3]\ \ J.\ L.\ Carter and M.\ N.\ Wegman, "Universal classes of hash 
functions,"
.ul
J. Computer System Sci.,
vol. 18, pp143-154, 1979.
.sp
.NI "[2]  "
[4]\ \ J.\ G.\ Cleary, "Compact hash tables,"
Research Report, 82/100/19,
Department of Computer Science, University of Calgary, July 1982.
.sp
.NI "[3]  "
[5]\ \ J.\ G.\ Cleary, "Random insertion for bidirectional linear probing
can be better than optimum," 
Research Report, 82/105/24,
Department of Computer Science, University of Calgary, September 1982.
.sp
.NI "[5]  "
[6]\ \ J. A. Feldman and J. R. Low, "Comment on Brent's Scatter Storage 
Algorithm,"
.ul
CACM,
vol. 16, p703, 1973.
.sp
.NI "[7]  "
[7]\ \ G. D. Knott, "Hashing functions,"
.ul
The Computer Journal,
vol. 18, pp265-278, 1975.
.sp
.NI "[7]  "
[8]\ \ D.\ E.\ Knuth, 
.ul
The art of computer programming:Sorting and searching.
Vol III.
Reading, Massachusetts: Addison Wesley, 1973.
.sp
.NI "[8]  "
[9]\ \ V.\ Y.\ Lum, "General performance analysis of key-to-address 
transformation methods using an abstract file concept,"
.ul
CACM,
vol. 16, pp603-612, 1973.
.sp
.NI "[12]  "
[10]\ \ V.\ Y.\ Lum,\ P.\ S.\ T.\ Yuen and M.\ Dodd, "Key-to-address
transformation techniques,"
.ul
CACM,
vol. 14, pp228-239, 1971.
.sp
.NI "[13]  "
[11]\ \ W. D. Maurer and T. G. Lewis, "Hash table methods,"
.ul
Comp. Surveys,
vol. 7, pp5-19, 1975.
.ls 2
.in 0
.bp 0
\&\ 
.RF
.ta 0.5i +0.75i +0.75i +0.75i +0.75i +0.75i
.nf

	$i	T[i]	R[i]	V[i]	C[i]$
	\l'3.5i'
.br

	12	\0\ -1	\ -1	0	1
.br
	11	101	\01	0	1
.br
	10	\087	\07	1	1
.br
	\09	\076	\06	0	0
.br
	\08	\075	\05	1	1
.br
	\07	\067	\07	1	0   
.br
	\06	\066	\06	1	0
.br
	\05	\065	\05	0	1
.br
	\04	\041	\01	1	1
.br
	\03	\0\ -1	\ -1	0	1
.br
	\02	\019	\09	0	0
.br
	\01	\018	\08	1	0
.br
	\00	\016	\06	0	1
.br
					     Step 1 Step 2 Step 3 Step 4
.br

	$h(H)~=~ left floor^ H/10 right floor$
.br

	$r(H)~=~ H~ roman mod ~10$
.br

.FG ""

.bp 0
\&\ 
.RF
.nf
.ta 0.5i +0.75i +0.75i +0.75i +0.75i
	$count~=~A[i]~=~#C[i]-#V[i]$
.sp
	$count = 0$			$count = 0$
	$C$	$V$		$C$	$V$
	0\|\(rt	1		0\|\(rt	1
	0\|\(rk	0		0\|\(rk	1$<-~i$
	1\|\(rb	1$<-~i$		1\|\(rb	0
.sp
	$count =1>0$		$count = 2 > 0$
	$C$	$V$		$C$	$V$
	0	1$<-~i$		0	1$<-~i$
	1	0		1	0
	0\|\(rt	1		1	1
	0\|\(rk	0		0\|\(rt	0
	1\|\(rb	0		0\|\(rk	0
				1\|\(rb	0
.sp
	$count =-1<0$
	$C$	$V$
	0\|\(rt	0			\|\(rt
	0\|\(rk	0			\|\(rk\ \ Group of entries which hash to 
	1\|\(rb	0			\|\(rb\ \ location i
	0	0
	1	1$<-~i$			\ \ \ Corresponding $C$ and $V$ bits
.FG ""
.bp 0
\&\ 
.RF
.ta 0.5i +0.5i +0.5i +0.5i +0.5i +0.9i +0.6i +0.4i
$i	R[i]	V[i]	C[i]	#V[i]	#C[i]~~#C[i]-#V[i]	A[i]$
.br
\l'4.5i'
.br
12	\ -1	0	1	6	6	\00	0
.br
11	\01	0	1	6	6	\00	0
.br
10	\07	1	1	6	5	\ -1	$inf$
.br
\09	\06	0	0	5	4	\ -1	$inf$
.br
\08	\05	1	1	5	4	\ -1	$inf$
.br
\07	\07	1	0	4	3	\ -1	$inf$
.br
\06	\06	1	0	3	3	\00	0
.br
\05	\05	0	1	2	3	\01	$inf$
.br
\04	\01	1	1	2	2	\00	0
.br
\03	\ -1	0	1	1	1	\00	0
.br
\02	\09	0	0	1	1	\00	0
.br
\01	\08	1	0	1	1	\00	0
.br
\00	\06	0	1	0	1	\01	$inf$
.br
								Step 1 Step 2 Step 3 Step 4
.sp 
Note: 	Only one bit has been allowed for the values of $A$. 
.br
	So the only two possible values are 0 and $inf$.

.FG ""
.bp 0
\&\ 
.RF
.ta 1.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i
.ce
Successful Search
	\l'4i'

	$alpha$	\0.25	\0.5	\0.75	\0.8	\0.85	\0.9	\0.95
	\l'4i'
	
	$BLP sup 1$	\0\01.1	\0\01.3	\0\01.7	\0\02.0	\0\02.3	\0\02.9	\0\04.2
	
	Na
	15	\0\01.1	\0\01.3	\0\01.7	\0\01.9	\0\02.2	\0\02.8	\0\04.6
	\07	\0\01.1	\0\01.3	\0\01.7	\0\01.9	\0\02.2	\0\02.8	\0\09.7
	\03	\0\01.1	\0\01.3	\0\01.7	\0\01.9	\0\02.4	\0\04.2	\025
	\01	\0\01.1	\0\01.3	\0\02.0	\0\02.5	\0\04.1	\0\08.8	\045
	\00	\0\01.1	\0\01.5	\0\03.3	\0\04.9	\0\07.9	\015	\061
	\0-	\0\04.2	\0\07.1	\020	\030	\049	110	370
	\0*	\0\03.77	\0\06.00	\018.0	\027.0	\046.4	102	402

		$\& sup 1~$Taken from Amble and Knuth [1].
		- No $A$ field used.
		* Analytic approximation to line above.
.FG ""
.bp 0
\&
.RF
.ta 1.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i
.ce
Unsuccessful Search
	\l'4i'

	$alpha$	\0.25	\0.5	\0.75	\0.8	\0.85	\0.9	\0.95
	\l'4i'

	$BLP sup 1$	\0\01.3	\0\01.5	\0\02.1	\0\02.3	\0\02.6	\0\03.1	\0\04.4

	Na
	15	\0\01.2	\0\01.4	\0\01.8	\0\01.9	\0\02.1	\0\02.4	\0\03.5
	\07	\0\01.2	\0\01.4	\0\01.8	\0\01.9	\0\02.1	\0\02.4	\0\09.7
	\03	\0\01.2	\0\01.4	\0\01.8	\0\01.9	\0\02.2	\0\03.3	\015
	\01	\0\01.2	\0\01.4	\0\01.9	\0\02.2	\0\03.2	\0\06.0	\028
	\00	\0\01.2	\0\01.5	\0\02.6	\0\03.4	\0\05.3	\0\09.9	\036
	\0-	\0\01.7	\0\03.4	\011	\016	\028	\064	220
	\0*	\0\01.72	\0\03.16	\010.2	\015.6	\027.3	\061.2	247

		$\& sup 1~$Taken from Amble and Knuth [1].
		- No $A$ field used.
		* Analytic approximation to line above.
.FG ""
.bp 0
\&
.RF
.ta 1.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i +0.5i
	\l'4i'

	$alpha$	\0.25	\0.5	\0.75	\0.8	\0.85	\0.9	\0.95
	\l'4i'

		\0\04.3	\0\08.8	\032	\049	\086	200	700
	*	\0\04.56	\0\09.00	\033.0	\051.0	\089.9\
	201	801

	* Analytic approximation to line above
.FG ""
.bp 0
\&
.ce 
List of Figures
.sp 2
Fig. 1. Example of compact hash memory and search for key.
.sp 2
Fig. 2. Examples showing different values of $#C[i]-#V[i]$.
.sp 2
Fig. 3. Example of calculation and use of array $A$.
.sp 2
.ce
List of Tables
.sp 2
Table I. Average number of probes during a successful search.
.sp 2
Table II. Average number of probes during an unsuccessful search.
.sp 2
Table III. Average number of probes to move block of memory.
.sp 2
.pn 0
.ls1
.EQ
delim $$
.EN
.ev1
.ps-2
.vs-2
.ev
\&
.sp 5
.ps+4
.ce
ARITHMETIC CODING FOR DATA COMPRESSION
.ps-4
.sp4
.ce
Ian H. Witten, Radford M. Neal, and John G. Cleary
.sp2
.ce4
Department of Computer Science
The University of Calgary
2500 University Drive NW
Calgary, Canada T2N 1N4
.sp2
.ce
August, 1986, revised January 1987
.sp 8
.in+1i
.ll-1i
The state of the art in data compression is arithmetic coding, not
the better-known Huffman method.
Arithmetic coding gives greater compression, is faster for adaptive models,
and clearly separates the model from the channel encoding.
This paper presents a practical implementation of the technique.
.sp 3
.in +0.5i
.ti -0.5i
\fICR Categories and subject descriptors:\fR
.br
E.4 [DATA] Coding and Information Theory \(em Data Compaction and Compression
.br
H.1.1 [Models and Principles] Systems and Information Theory \(em Information Theory
.sp
.ti -0.5i
\fIGeneral terms:\fR  algorithms, performance
.sp
.ti -0.5i
\fIAdditional key words and phrases:\fR  arithmetic coding, Huffman coding, adaptive modeling
.ll+1i
.in 0
.bp
.sh "Introduction"
.pp
Arithmetic coding is superior in most respects to the better-known Huffman
(1952) method.
.[
Huffman 1952 method construction minimum-redundancy codes
.]
It represents information at least as compactly, sometimes considerably more
so.
Its performance is optimal without the need for blocking of input data.
It encourages a clear separation between the model for representing data and
the encoding of information with respect to that model.
It accommodates adaptive models easily.
It is computationally efficient.
Yet many authors and practitioners seem unaware of the technique.
Indeed there is a widespread belief that Huffman coding cannot be improved
upon.
.pp
This paper aims to rectify the situation by presenting an accessible
implementation of arithmetic coding, and detailing its performance
characteristics.
The next section briefly reviews basic concepts of data compression and
introduces the model-based approach which underlies most modern techniques.
We then outline the idea of arithmetic coding using a simple example.
Following that programs are presented for both encoding and decoding, in which
the model occupies a separate module so that different ones can easily be
used.
Next we discuss the construction of fixed and adaptive models.
The subsequent section details the compression efficiency and execution time
of the programs, including the effect of different arithmetic word lengths on
compression efficiency.
Finally, we outline a few applications where arithmetic coding is appropriate.
.sh "Data compression"
.pp
To many, data compression conjures up an assortment of \fIad hoc\fR
techniques such as converting spaces in text to tabs, creating special codes
for common words, or run-length coding of picture data (eg see Held, 1984).
.[
Held 1984 data compression techniques applications
.]
This contrasts with the more modern model-based paradigm for
coding, where from an \fIinput string\fR of symbols and a \fImodel\fR, an
\fIencoded string\fR is produced which is (usually) a compressed version of
the input.
The decoder, which must have access to the same model,
regenerates the exact input string from the encoded string.
Input symbols are drawn from some well-defined set such as the ASCII or
binary alphabets;
the encoded string is a plain sequence of bits.
The model is a way of calculating, in any given context, the distribution of
probabilities for the next input symbol.
It must be possible for the decoder to produce exactly the same probability
distribution in the same context.
Compression is achieved by transmitting the more probable symbols in fewer
bits than the less probable ones.
.pp
For example, the model may assign a predetermined probability to each symbol
in the ASCII alphabet.
No context is involved.
These probabilities may be determined by counting frequencies in
representative samples of text to be transmitted.
Such a \fIfixed\fR model is communicated in advance to both encoder and
decoder, after which it is used for many messages.
.pp
Alternatively, the probabilities the model assigns may change as each symbol
is transmitted, based on the symbol frequencies seen \fIso far\fR in this
message.
This is an \fIadaptive\fR model.
There is no need for a representative sample of text, because each message
is treated as an independent unit, starting from scratch.
The encoder's model changes with each symbol transmitted, and the decoder's
changes with each symbol received, in sympathy.
.pp
More complex models can provide more accurate probabilistic predictions and
hence achieve greater compression.
For example, several characters of previous context could condition the
next-symbol probability.
Such methods have enabled mixed-case English text to be encoded in around
2.2\ bit/char with two quite different kinds of model.
(Cleary & Witten, 1984b; Cormack & Horspool, 1985).
.[
Cleary Witten 1984 data compression
%D 1984b
.]
.[
Cormack Horspool 1985 dynamic Markov
%O April
.]
Techniques which do not separate modeling from coding so distinctly, like
that of Ziv & Lempel (1978), do not seem to show such great potential for
compression, although they may be appropriate when the aim is raw speed rather
than compression performance (Welch, 1984).
.[
Ziv Lempel 1978 compression of individual sequences
.]
.[
Welch 1984 data compression
.]
.pp
The effectiveness of any model can be measured by the \fIentropy\fR of the
message with respect to it, usually expressed in bits/symbol.
Shannon's fundamental theorem of coding states that given messages randomly
generated from a model, it is impossible to encode them into less bits
(on average) than the entropy of that model (Shannon & Weaver, 1949).
.[
Shannon Weaver 1949
.]
.pp
A message can be coded with respect to a model using either Huffman or
arithmetic coding.
The former method is frequently advocated as the best possible technique for
reducing the encoded data rate.
But it is not.
Given that each symbol in the alphabet must translate into an integral number
of bits in the encoding, Huffman coding indeed achieves ``minimum
redundancy''.
In other words, it performs optimally if all symbol probabilities are
integral powers of 1/2.
But this is not normally the case in practice;
indeed, Huffman coding can take up to one extra bit per symbol.
The worst case is realized by a source in which one symbol has probability
approaching unity.
Symbols emanating from such a source convey negligible information on average,
but require at least one bit to transmit (Gallagher, 1978).
.[
Gallagher 1978 variations on a theme by Huffman
.]
Arithmetic coding dispenses with the restriction that each symbol translates
into an integral number of bits, thereby coding more efficiently.
It actually achieves the theoretical entropy bound to compression efficiency
for any source, including the one just mentioned.
.pp
In general, sophisticated models expose the deficiencies of Huffman coding
more starkly than simple ones.
This is because they more often predict symbols with probabilities close to
one, the worst case for Huffman coding.
For example, the techniques mentioned above which code English text in
2.2\ bit/char both use arithmetic coding as the final step, and performance
would be impacted severely if Huffman coding were substituted.
Nevertheless, since our topic is coding and not modeling, the illustrations in
this paper all employ simple models.
Even then, as we shall see, Huffman coding is inferior to arithmetic coding.
.pp
The basic concept of arithmetic coding can be traced back to Elias in the
early 1960s (see Abramson, 1963, pp 61-62).
.[
Abramson 1963
.]
Practical techniques were first introduced by Rissanen (1976) and
Pasco (1976), and developed further in Rissanen (1979).
.[
Rissanen 1976 Generalized Kraft Inequality
.]
.[
Pasco 1976
.]
.[
Rissanen 1979 number representations
.]
.[
Langdon 1981 tutorial arithmetic coding
.]
Details of the implementation presented here have not appeared in the
literature before; Rubin (1979) is closest to our approach.
.[
Rubin 1979 arithmetic stream coding
.]
The reader interested in the broader class of arithmetic codes is referred
to Rissanen & Langdon (1979);
.[
Rissanen Langdon 1979 Arithmetic coding
.]
a tutorial is available in Langdon (1981).
.[
Langdon 1981 tutorial arithmetic coding
.]
Despite these publications, the method is not widely known.
A number of recent books and papers on data compression mention it only in
passing, or not at all.
.sh "The idea of arithmetic coding"
.pp
In arithmetic coding a message is represented by an
interval of real numbers between 0 and 1.
As the message becomes longer, the interval needed to represent it becomes
smaller, and the number of bits needed to specify that interval grows.
Successive symbols of the message reduce the size of the
interval in accordance with the symbol probabilities generated by the
model.
The more likely symbols reduce the range by less than the unlikely symbols,
and hence add fewer bits to the message.
.pp
Before anything is transmitted, the range for the message is the entire
interval [0,\ 1)\(dg.
.FN
\(dg [0,\ 1) denotes the half-open interval 0\(<=\fIx\fR<1.
.EF
As each symbol is processed, the range is narrowed to that portion of it
allocated to the symbol.
For example, suppose the alphabet is {\fIa,\ e,\ i,\ o,\ u,\ !\fR}, and a
fixed model is used with probabilities shown in Table\ 1.
Imagine transmitting the message \fIeaii!\fR.
Initially, both encoder and decoder know that the range is [0,\ 1).
After seeing the first symbol, \fIe\fR, the encoder narrows it to
[0.2,\ 0.5), the range the model allocates to this symbol.
The second symbol, \fIa\fR, will narrow this new range to the first 1/5 of it,
since \fIa\fR has been allocated [0,\ 0.2).
This produces [0.2,\ 0.26) since the previous range was 0.3 units long and
1/5 of that is 0.06.
The next symbol, \fIi\fR, is allocated [0.5,\ 0.6), which when applied to
[0.2,\ 0.26) gives the smaller range [0.23,\ 0.236).
Proceeding in this way, the encoded message builds up as follows:
.LB
.nf
.ta \w'after seeing   'u +0.5i +\w'[0.23354, 'u
initially		[0,	1)
after seeing	\fIe\fR	[0.2,	0.5)
	\fIa\fR	[0.2,	0.26)
	\fIi\fR	[0.23,	0.236)
	\fIi\fR	[0.233,	0.2336)
	\fI!\fR	[0.23354,	0.2336)
.fi
.LE
Figure\ 1 shows another representation of the encoding process.
The vertical bars with ticks represent the symbol probabilities stipulated
by the model.
After the first symbol, \fIe\fR, has been processed, the model is scaled
into the range [0.2,\ 0.5), as shown in part (a).
The second symbol, \fIa\fR, scales it again into the range [0.2,\ 0.26).
But the picture cannot be continued in this way without a magnifying glass!
Consequently Figure\ 1(b) shows the ranges expanded to full height at every
stage, and marked with a scale which gives the endpoints as numbers.
.pp
Suppose all the decoder knows about the message is the final range,
[0.23354,\ 0.2336).
It can immediately deduce that the first character was \fIe\fR, since the
range lies entirely within the space the model of Table\ 1 allocates for
\fIe\fR.
Now it can simulate the operation of the \fIen\fR\^coder:
.LB
.nf
.ta \w'after seeing   'u +0.5i +\w'[0.2, 'u
initially		[0,	1)
after seeing	\fIe\fR	[0.2,	0.5)
.fi
.LE
This makes it clear that the second character of the message is \fIa\fR,
since this will produce the range
.LB
.nf
.ta \w'after seeing   'u +0.5i +\w'[0.2, 'u
after seeing	\fIa\fR	[0.2,	0.26)
.fi
.LE
which entirely encloses the given range [0.23354,\ 0.2336).
Proceeding like this, the decoder can identify the whole message.
.pp
It is not really necessary for the decoder to know both ends of the range
produced by the encoder.
Instead, a single number within the range \(em for example, 0.23355 \(em will
suffice.
(Other numbers, like 0.23354, 0.23357, or even 0.23354321, would do just as
well.)  \c
However, the decoder will face the problem of detecting the end of the
message, to determine when to stop decoding.
After all, the single number 0.0 could represent any of \fIa\fR, \fIaa\fR,
\fIaaa\fR, \fIaaaa\fR, ...\ .
To resolve the ambiguity we ensure that each message ends with a special
EOF symbol known to both encoder and decoder.
For the alphabet of Table\ 1, \fI!\fR will be used to terminate messages,
and only to terminate messages.
When the decoder sees this symbol it stops decoding.
.pp
Relative to the fixed model of Table\ 1, the entropy of the 5-symbol message
\fIeaii!\fR is
.LB
$- ~ log ~ 0.3 ~ - ~ log ~ 0.2 ~ - ~ log ~ 0.1 ~ - ~ log ~ 0.1 ~ - ~ log ~ 0.1 ~~=~~ - ~ log ~ 0.00006 ~~ approx ~~ 4.22$
.LE
(using base 10, since the above encoding was performed in decimal).
This explains why it takes 5\ decimal digits to encode the message.
In fact, the size of the final range is $0.2336 ~-~ 0.23354 ~~=~~ 0.00006$,
and the entropy is the negative logarithm of this figure.
Of course, we normally work in binary, transmitting binary digits and
measuring entropy in bits.
.pp
Five decimal digits seems a lot to encode a message comprising four vowels!
It is perhaps unfortunate that our example ended up by expanding rather than
compressing.
Needless to say, however, different models will give different entropies.
The best single-character model of the message \fIeaii!\fR is the set of
symbol frequencies
{\fIe\fR\ (0.2),  \fIa\fR\ (0.2),  \fIi\fR\ (0.4),  \fI!\fR\ (0.2)},
which gives an entropy for \fIeaii!\fR of 2.89\ decimal digits.
Using this model the encoding would be only 3\ digits long.
Moreover, as noted earlier more sophisticated models give much better
performance in general.
.sh "A program for arithmetic coding"
.pp
Figure\ 2 shows a pseudo-code fragment which summarizes the encoding and
decoding procedures developed in the last section.
Symbols are numbered 1, 2, 3, ...
The frequency range for the $i$th symbol is from $cum_freq[i]$ to
$cum_freq[i-1]$.
$cum_freq[i]$ increases as $i$ decreases, and $cum_freq[0] = 1$.
(The reason for this ``backwards'' convention is that later, $cum_freq[0]$
will contain a normalizing factor, and it will be convenient to have it
begin the array.)  \c
The ``current interval'' is [$low$,\ $high$); and for both encoding and
decoding this should be initialized to [0,\ 1).
.pp
Unfortunately, Figure\ 2 is overly simplistic.
In practice, there are several factors which complicate both encoding and
decoding.
.LB
.NP
Incremental transmission and reception.
.br
The encode algorithm as described does not transmit anything until the entire
message has been encoded; neither does the decode algorithm begin decoding
until it has received the complete transmission.
In most applications, an incremental mode of operation is necessary.
.sp
.NP
The desire to use integer arithmetic.
.br
The precision required to represent the [$low$, $high$) interval grows with
the length of the message.
Incremental operation will help overcome this, but the potential for overflow
and underflow must still be examined carefully.
.sp
.NP
Representing the model so that it can be consulted efficiently.
.br
The representation used for the model should minimize the time required for
the decode algorithm to identify the next symbol.
Moreover, an adaptive model should be organized to minimize the
time-consuming task of maintaining cumulative frequencies.
.LE
.pp
Figure\ 3 shows working code, in C, for arithmetic encoding and decoding.
It is considerably more detailed than the bare-bones sketch of Figure\ 2!
Implementations of two different models are given in Figure\ 4;
the Figure\ 3 code can use either one.
.pp
The remainder of this section examines the code of Figure\ 3 more closely,
including a proof that decoding is still correct in the integer
implementation and a review of constraints on word lengths in the program.
.rh "Representing the model."
Implementations of models are discussed in the next section; here we
are concerned only with the interface to the model (lines 20-38).
In C, a byte is represented as an integer between 0 and 255 (call this a
$char$).
Internally, we represent a byte as an integer between 1 and 257 inclusive
(call this an $index$), EOF being treated as a 257th symbol.
It is advantageous to sort the model into frequency order, to minimize the
number of executions of the decoding loop (line 189).
To permit such reordering, the $char$/$index$ translation is implemented as
a pair of tables, $index_to_char[ \| ]$ and $char_to_index[ \| ]$.
In one of our models, these tables simply form the $index$ by adding 1 to the
$char$, but another implements a more complex translation which assigns small
indexes to frequently-used symbols.
.pp
The probabilities in the model are represented as integer frequency counts,
and cumulative counts are stored in the array $cum_freq[ \| ]$.
As previously, this array is ``backwards,'' and the total frequency count \(em
which is used to normalize all frequencies \(em appears in $cum_freq[0]$.
Cumulative counts must not exceed a predetermined maximum, $Max_frequency$,
and the model implementation must prevent overflow by scaling appropriately.
It must also ensure that neighboring values in the $cum_freq[ \| ]$ array
differ by at least 1; otherwise the affected symbol could not be transmitted.
.rh "Incremental transmission and reception."
Unlike Figure\ 2, the program of Figure\ 3 represents $low$ and $high$ as
integers.
A special data type, $code_value$, is defined for these quantities,
together with some useful constants:  \c
$Top_value$, representing the largest possible $code_value$, and
$First_qtr$, $Half$, and $Third_qtr$, representing parts of the range
(lines 6-16).
Whereas in Figure\ 2 the current interval is represented by
[$low$,\ $high$), in Figure\ 3 it is [$low$,\ $high$]; that is, the range now
includes the value of $high$.
Actually, it is more accurate (though more confusing) to say that in the
program of Figure\ 3 the interval represented is
[$low$,\ $high + 0.11111 ...$).
This is because when the bounds are scaled up to increase the precision, 0's
are shifted into the low-order bits of $low$ but 1's are shifted into $high$.
While it is possible to write the program to use a different convention,
this one has some advantages in simplifying the code.
.pp
As the code range narrows, the top bits of $low$ and $high$ will become the
same.
Any bits which are the same can be transmitted immediately, since they cannot
be affected by future narrowing.
For encoding, since we know that $low ~ <= ~ high$, this requires code like
.LB "nnnn"
.nf
.ta \w'nnnn'u +\w'if (high < 'u +\w'Half) { 'u +\w'output_bit(1); low = 2*(low\-Half); high = 2*(high\-Half)+1; 'u
.ne 4
for (;;) {
	if (high <	Half) {	output_bit(0); low = 2*low; high = 2*high+1;	}
	if (low $>=$	Half) {	output_bit(1); low = 2*(low\-Half); high = 2*(high\-Half)+1;	}
}
.fi
.LE "nnnn"
which ensures that, upon completion, $low ~ < ~ Half ~ <= ~ high$.
This can be found in lines 95-113 of $encode_symbol( \| )$,
although there are some extra complications caused by underflow possibilities
(see next subsection).
Care is taken care to shift 1's in at the bottom when $high$ is scaled, as
noted above.
.pp
Incremental reception is done using a number called $value$ as in Figure\ 2,
in which processed bits flow out the top (high-significance) end and
newly-received ones flow in the bottom.
$start_decoding( \| )$ (lines 168-176) fills $value$ with received bits initially.
Once $decode_symbol( \| )$ has identified the next input symbol, it shifts out
now-useless high-order bits which are the same in $low$ and $high$, shifting
$value$ by the same amount (and replacing lost bits by fresh input bits at the
bottom end):
.LB "nnnn"
.nf
.ta \w'nnnn'u +\w'if (high < 'u +\w'Half) { 'u +\w'value = 2*(value\-Half)+input_bit(\|); low = 2*(low\-Half); high = 2*(high\-Half)+1; 'u
.ne 4
for (;;) {
	if (high <	Half) {	value = 2*value+input_bit(\|); low = 2*low; high = 2*high+1;	}
	if (low $>=$	Half) {	value = 2*(value\-Half)+input_bit(\|); low = 2*(low\-Half); high = 2*(high\-Half)+1;	}
}
.fi
.LE "nnnn"
(see lines 194-213, again complicated by precautions against underflow
discussed below).
.rh "Proof of decoding correctness."
At this point it is worth checking that the identification of the next
symbol by $decode_symbol( \| )$ works properly.
Recall from Figure\ 2 that $decode_symbol( \| )$ must use $value$ to find that
symbol which, when encoded, reduces the range to one that still includes
$value$.
Lines 186-188 in $decode_symbol( \| )$ identify the symbol for which
.LB
$cum_freq[symbol] ~ <= ~~
left f {(value-low+1)*cum_freq[0] ~-~ 1} over {high-low+1} right f
~~ < ~ cum_freq[symbol-1]$,
.LE
where $left f ~ right f$ denotes the ``integer part of'' function that
comes from integer division with truncation.
It is shown in the Appendix that this implies
.LB "nnnn"
$low ~+~~ left f {(high-low+1)*cum_freq[symbol]} over cum_freq[0] right f
~~ <= ~ v ~ <=  ~~
low ~+~~ left f {(high-low+1)*cum_freq[symbol-1]} over cum_freq[0] right f ~~ - ~ 1$,
.LE "nnnn"
so $value$ lies within the new interval that $decode_symbol( \| )$
calculates in lines 190-193.
This is sufficient to guarantee that the decoding operation identifies each
symbol correctly.
.rh "Underflow."
As Figure\ 1 shows, arithmetic coding works by scaling the cumulative
probabilities given by the model into the interval [$low$,\ $high$] for
each character transmitted.
Suppose $low$ and $high$ are very close together, so close that this scaling
operation maps some different symbols of the model on to the same integer in
the [$low$,\ $high$] interval.
This would be disastrous, because if such a symbol actually occurred it would
not be possible to continue encoding.
Consequently, the encoder must guarantee that the interval [$low$,\ $high$] is
always large enough to prevent this.
The simplest way is to ensure that this interval is at least as large as
$Max_frequency$, the maximum allowed cumulative frequency count (line\ 36).
.pp
How could this condition be violated?
The bit-shifting operation explained above ensures that $low$ and $high$ can
only become close together when they straddle $Half$.
Suppose in fact they become as close as
.LB
$First_qtr ~ <= ~ low ~<~ Half ~ <= ~ high ~<~ Third_qtr$.
.LE
Then the next two bits sent will have opposite polarity, either 01 or 10.
For example, if the next bit turns out to be 0 (ie $high$ descends below
$Half$ and [0,\ $Half$] is expanded to the full interval) the bit after
that will be 1 since the range has to be above the midpoint of the expanded
interval.
Conversely if the next bit happens to be 1 the one after that will be 0.
Therefore the interval can safely be expanded right now, if only we remember
that whatever bit actually comes next, its opposite must be transmitted
afterwards as well.
Thus lines 104-109 expand [$First_qtr$,\ $Third_qtr$] into the whole interval,
remembering in $bits_to_follow$ that the bit that is output next must be
followed by an opposite bit.
This explains why all output is done via $bit_plus_follow( \| )$
(lines 128-135) instead of directly with $output_bit( \| )$.
.pp
But what if, after this operation, it is \fIstill\fR true that
.LB
$First_qtr ~ <= ~ low ~<~ Half ~ <= ~ high ~<~ Third_qtr$?
.LE
Figure\ 5 illustrates this situation, where the current [$low$,\ $high$]
range (shown as a thick line) has been expanded a total of three times.
Suppose the next bit will turn out to be 0, as indicated by the arrow in
Figure\ 5(a) being below the halfway point.
Then the next \fIthree\fR bits will be 1's, since not only is the arrow in the
top half of the bottom half of the original range, it is in the top quarter,
and moreover the top eighth, of that half \(em that is why the expansion
can occur three times.
Similarly, as Figure\ 5(b) shows, if the next bit turns out to be a 1 it will
be followed by three 0's.
Consequently we need only count the number of expansions and follow the next
bit by that number of opposites (lines 106 and 131-134).
.pp
Using this technique, the encoder can guarantee that after the shifting
operations, either
.LB
.ta \n(.lu-\n(.iuR
$low ~<~ First_qtr ~<~ Half ~ <= ~ high$	(1a)
.LE
or
.LB
.ta \n(.lu-\n(.iuR
$low ~<~ Half ~<~ Third_qtr ~ <= ~ high$.	(1b)
.LE
Therefore as long as the integer range spanned by the cumulative frequencies
fits into a quarter of that provided by $code_value$s, the underflow problem
cannot occur.
This corresponds to the condition
.LB
$Max_frequency ~ <= ~~ {Top_value+1} over 4 ~~ + ~ 1$,
.LE
which is satisfied by Figure\ 3 since $Max_frequency ~=~ 2 sup 14 - 1$ and
$Top_value ~=~ 2 sup 16 - 1$ (lines\ 36, 9).
More than 14\ bits cannot be used to represent cumulative frequency
counts without increasing the number of bits allocated to $code_value$s.
.pp
We have discussed underflow in the encoder only.
Since the decoder's job, once each symbol has been decoded, is to track the
operation of the encoder, underflow will be avoided if it performs the same
expansion operation under the same conditions.
.rh "Overflow."
Now consider the possibility of overflow in the integer multiplications
corresponding to those of Figure\ 2, which occur in lines 91-94 and 190-193
of Figure\ 3.
Overflow cannot occur provided the product
.LB
$range * Max_frequency$
.LE
fits within the integer word length available, since cumulative frequencies
cannot exceed $Max_frequency$.
$Range$ might be as large as $Top_value ~+~1$, so the largest possible product
in Figure 3 is $2 sup 16 ( 2 sup 14 - 1 )$ which is less than $2 sup 30$.
$Long$ declarations are used for $code_value$ (line\ 7) and $range$
(lines\ 89, 183) to ensure that arithmetic is done to 32-bit precision.
.rh "Constraints on the implementation."
The constraints on word length imposed by underflow and overflow can
be simplified by assuming frequency counts are represented in $f$\ bits, and
$code_value$s in $c$\ bits.
The implementation will work correctly provided
.LB
$f ~ <= ~ c ~ - ~2$
.br
$f ~+~ c ~ <= ~ p$, the precision to which arithmetic is performed.
.LE
In most C implementations, $p=31$ if $long$ integers are used, and $p=32$
if they are $unsigned ~ long$.
In Figure\ 3, $f=14$ and $c=16$.
With appropriately modified declarations, $unsigned ~ long$ arithmetic with
$f=15$, $c=17$ could be used.
In assembly language $c=16$ is a natural choice because it expedites some
comparisons and bit manipulations (eg those of lines\ 95-113 and 194-213).
.pp
If $p$ is restricted to 16\ bits, the best values possible are $c=9$ and
$f=7$, making it impossible to encode a full alphabet of 256\ symbols, as each
symbol must have a count of at least 1.
A smaller alphabet (eg the letters, or 4-bit nibbles) could still be
handled.
.rh "Termination."
To finish the transmission, it is necessary to send a unique terminating
symbol ($EOF_symbol$, line 56) and then follow it by enough bits to ensure
that the encoded string falls within the final range.
Since $done_encoding( \| )$ (lines 119-123) can be sure that
$low$ and $high$ are constrained by either (1a) or (1b) above, it need only
transmit $01$ in the first case or $10$ in the second to remove the remaining
ambiguity.
It is convenient to do this using the $bit_plus_follow( \| )$ procedure
discussed earlier.
The $input_bit( \| )$ procedure will actually read a few more bits than were
sent by $output_bit( \| )$ as it needs to keep the low end of the buffer full.
It does not matter what value these bits have as the EOF is uniquely
determined by the last two bits actually transmitted.
.sh "Models for arithmetic coding"
.pp
The program of Figure\ 3 must be used with a model which provides
a pair of translation tables $index_to_char[ \| ]$ and $char_to_index[ \| ]$,
and a cumulative frequency array $cum_freq[ \| ]$.
The requirements on the latter are that
.LB
.NP
$cum_freq[ i-1 ] ~ >= ~ cum_freq[ i ]$;
.NP
an attempt is never made to encode a symbol $i$ for which
$cum_freq[i-1] ~=~ cum_freq[i]$;
.NP
$cum_freq[0] ~ <= ~ Max_frequency$.
.LE
Provided these conditions are satisfied the values in the array need bear
no relationship to the actual cumulative symbol frequencies in messages.
Encoding and decoding will still work correctly, although encodings will
occupy less space if the frequencies are accurate.
(Recall our successfully encoding \fIeaii!\fR according to the model of
Table\ 1, which does not actually reflect the frequencies in the message.)  \c
.rh "Fixed models."
The simplest kind of model is one in which symbol frequencies are fixed.
The first model in Figure\ 4 has symbol frequencies which approximate those
of English (taken from a part of the Brown Corpus, Kucera & Francis, 1967).
.[
%A Kucera, H.
%A Francis, W.N.
%D 1967
%T Computational analysis of present-day American English
%I Brown University Press
%C Providence, RI
.]
However, bytes which did not occur in that sample have been given frequency
counts of 1 in case they do occur in messages to be encoded
(so, for example, this model will still work for binary files in which all
256\ bytes occur).
Frequencies have been normalized to total 8000.
The initialization procedure $start_model( \| )$ simply computes a cumulative
version of these frequencies (lines 48-51), having first initialized the
translation tables (lines 44-47).
Execution speed would be improved if these tables were used to re-order
symbols and frequencies so that the most frequent came first in the
$cum_freq[ \| ]$ array.
Since the model is fixed, the procedure $update_model( \| )$, which is
called from both $encode.c$ and $decode.c$, is null.
.pp
An \fIexact\fR model is one where the symbol frequencies in the message are
exactly as prescribed by the model.
For example, the fixed model of Figure\ 4 is close to an exact model
for the particular excerpt of the Brown Corpus from which it was taken.
To be truly exact, however, symbols that did not occur in the excerpt would
be assigned counts of 0, not 1 (sacrificing the capability of
transmitting messages containing those symbols).
Moreover, the frequency counts would not be scaled to a predetermined
cumulative frequency, as they have been in Figure\ 4.
The exact model may be calculated and transmitted before sending the message.
It is shown in Cleary & Witten (1984a) that, under quite general conditions,
this will \fInot\fR give better overall compression than adaptive coding,
described next.
.[
Cleary Witten 1984 enumerative adaptive codes
%D 1984a
.]
.rh "Adaptive models."
An adaptive model represents the changing symbol frequencies seen \fIso far\fR
in the message.
Initially all counts might be the same (reflecting no initial information),
but they are updated as each symbol is seen, to approximate the observed
frequencies.
Provided both encoder and decoder use the same initial values (eg equal
counts) and the same updating algorithm, their models will remain in step.
The encoder receives the next symbol, encodes it, and updates its model.
The decoder identifies it according to its current model, and then updates its
model.
.pp
The second half of Figure\ 4 shows such an adaptive model.
This is the type of model recommended for use with Figure\ 3, for in practice
it will outperform a fixed model in terms of compression efficiency.
Initialization is the same as for the fixed model, except that all frequencies
are set to 1.
The procedure $update_model(symbol)$ is called by both $encode_symbol( \| )$
and $decode_symbol( \| )$ (Figure\ 3 lines 54 and 151) after each symbol is
processed.
.pp
Updating the model is quite expensive, because of the need to maintain
cumulative totals.
In the code of Figure\ 4, frequency counts, which must be maintained anyway,
are used to optimize access by keeping the array in frequency order \(em an
effective kind of self-organizing linear search (Hester & Hirschberg, 1985).
.[
Hester Hirschberg 1985
.]
$Update_model( \| )$ first checks to see if the new model will exceed
the cumulative-frequency limit, and if so scales all frequencies down by a
factor of 2 (taking care to ensure that no count scales to zero) and
recomputes cumulative values (Figure\ 4, lines\ 29-37).
Then, if necessary, $update_model( \| )$ re-orders the symbols to place the
current one in its correct rank in the frequency ordering, altering the
translation tables to reflect the change.
Finally, it increments the appropriate frequency count and adjusts cumulative
frequencies accordingly.
.sh "Performance"
.pp
Now consider the performance of the algorithm of Figure\ 3, both
in compression efficiency and execution time.
.rh "Compression efficiency."
In principle, when a message is coded using arithmetic coding, the number of
bits in the encoded string is the same as the entropy of that message with
respect to the model used for coding.
Three factors cause performance to be worse than this in practice:
.LB
.NP
message termination overhead
.NP
the used of fixed-length rather than infinite-precision arithmetic
.NP
scaling of counts so that their total is at most $Max_frequency$.
.LE
None of these effects is significant, as we now show.
In order to isolate the effect of arithmetic coding the model will be
considered to be exact (as defined above).
.pp
Arithmetic coding must send extra bits at the end of each message, causing a
message termination overhead.
Two bits are needed, sent by $done_encoding( \| )$ (Figure\ 3 lines 119-123),
in order to disambiguate the final symbol.
In cases where a bit-stream must be blocked into 8-bit characters before
encoding, it will be necessary to round out to the end of a block.
Combining these, an extra 9\ bits may be required.
.pp
The overhead of using fixed-length arithmetic
occurs because remainders are truncated on division.
It can be assessed by comparing the algorithm's performance with
the figure obtained from a theoretical entropy calculation
which derives its frequencies from counts scaled exactly as for coding.
It is completely negligible \(em on the order of $10 sup -4$ bits/symbol.
.pp
The penalty paid by scaling counts is somewhat larger, but still very
small.
For short messages (less than $2 sup 14$ bytes) no scaling need be done.
Even with messages of $10 sup 5$ to $10 sup 6$ bytes, the overhead was found
experimentally to be less than 0.25% of the encoded string.
.pp
The adaptive model of Figure\ 4 scales down all counts whenever the total
threatens to exceed $Max_frequency$.
This has the effect of weighting recent events more heavily compared with
those earlier in the message.
The statistics thus tend to track changes in the input sequence, which can be
very beneficial.
(For example, we have encountered cases where limiting counts to 6 or 7\ bits
gives better results than working to higher precision.)  \c
Of course, this depends on the source being modeled.
Bentley \fIet al\fR (1986) consider other, more explicit, ways of
incorporating a recency effect.
.[
Bentley Sleator Tarjan Wei 1986 locally adaptive
%J Communications of the ACM
.]
.rh "Execution time."
The program in Figure\ 3 has been written for clarity, not execution speed.
In fact, with the adaptive model of Figure\ 4, it takes about 420\ $mu$s per
input byte on a VAX-11/780 to encode a text file, and about the same for
decoding.
However, easily avoidable overheads such as procedure calls account for much
of this, and some simple optimizations increase speed by a factor of 2.
The following alterations were made to the C version shown:
.LB
.NP
the procedures $input_bit( \| )$, $output_bit( \| )$, and
$bit_plus_follow( \| )$ were converted to macros to eliminate
procedure-call overhead;
.NP
frequently-used quantities were put in register variables;
.NP
multiplies by two were replaced by additions (C ``+='');
.NP
array indexing was replaced by pointer manipulation in the loops
at line 189 of Figure\ 3 and lines 49-52 of the adaptive model in Figure\ 4.
.LE
.pp
This mildly-optimized C implementation has an execution time of
214\ $mu$s/262\ $mu$s, per input byte,
for encoding/decoding 100,000\ bytes of English text on a VAX-11/780, as shown
in Table\ 2.
Also given are corresponding figures for the same program on an
Apple Macintosh and a SUN-3/75.
As can be seen, coding a C source program of the same length took slightly
longer in all cases, and a binary object program longer still.
The reason for this will be discussed shortly.
Two artificial test files were included to allow readers to replicate the
results.
``Alphabet'' consists of enough copies of the 26-letter alphabet to fill
out 100,000\ characters (ending with a partially-completed alphabet).
``Skew-statistics'' contains 10,000 copies of the string
\fIaaaabaaaac\fR\^; it demonstrates that files may be encoded into less than
1\ bit per character (output size of 12,092\ bytes = 96,736\ bits).
All results quoted used the adaptive model of Figure\ 4.
.pp
A further factor of 2 can be gained by reprogramming in assembly language.
A carefully optimized version of Figures\ 3 and 4 (adaptive model) was
written in both VAX and M68000 assembly language.
Full use was made of registers.
Advantage was taken of the 16-bit $code_value$ to expedite some crucial
comparisons and make subtractions of $Half$ trivial.
The performance of these implementations on the test files is also shown in
Table\ 2 in order to give the reader some idea of typical execution speeds.
.pp
The VAX-11/780 assembly language timings are broken down in Table\ 3.
These figures were obtained with the U\s-2NIX\s+2 profile facility and are
accurate only to within perhaps 10%\(dg.
.FN
\(dg This mechanism constructs a histogram of program counter values at
real-time clock interrupts, and suffers from statistical variation as well as
some systematic errors.
.EF
``Bounds calculation'' refers to the initial part of $encode_symbol( \| )$
and $decode_symbol( \| )$ (Figure\ 3 lines 90-94 and 190-193)
which contain multiply and divide operations.
``Bit shifting'' is the major loop in both the encode and decode routines
(lines 95-113 and 194-213).
The $cum$ calculation in $decode_symbol( \| )$, which requires a
multiply/divide, and the following loop to identify the next symbol
(lines\ 187-189), is ``Symbol decode''.
Finally, ``Model update'' refers to the adaptive
$update_model( \| )$ procedure of Figure\ 4 (lines\ 26-53).
.pp
As expected, the bounds calculation and model update take the same time for
both encoding and decoding, within experimental error.
Bit shifting was quicker for the text file than for the C program and object
file because compression performance was better.
The extra time for decoding over encoding is due entirely to the symbol
decode step.
This takes longer in the C program and object file tests because the loop of
line\ 189 was executed more often (on average 9\ times, 13\ times, and
35\ times respectively).
This also affects the model update time because it is the number of cumulative
counts which must be incremented in Figure\ 4 lines\ 49-52.
In the worst case, when the symbol frequencies are uniformly distributed,
these loops are executed an average of 128 times.
Worst-case performance would be improved by using a more complex tree
representation for frequencies, but this would likely be slower for text
files.
.sh "Some applications"
.pp
Applications of arithmetic coding are legion.
By liberating \fIcoding\fR with respect to a model from the \fImodeling\fR
required for prediction, it encourages a whole new view of data compression
(Rissanen & Langdon, 1981).
.[
Rissanen Langdon 1981 Universal modeling and coding
.]
This separation of function costs nothing in compression performance, since
arithmetic coding is (practically) optimal with respect to the entropy of
the model.
Here we intend to do no more than suggest the scope of this view
by briefly considering
.LB
.NP
adaptive text compression
.NP
non-adaptive coding
.NP
compressing black/white images
.NP
coding arbitrarily-distributed integers.
.LE
Of course, as noted earlier, greater coding efficiencies could easily be
achieved with more sophisticated models.
Modeling, however, is an extensive topic in its own right and is beyond the
scope of this paper.
.pp
.ul
Adaptive text compression
using single-character adaptive frequencies shows off arithmetic coding to
good effect.
The results obtained using the program of Figures\ 3 and 4 vary from
4.8\-5.3\ bit/char for short English text files ($10 sup 3$\ to $10 sup 4$
bytes) to 4.5\-4.7\ bit/char for long ones ($10 sup 5$ to $10 sup 6$ bytes).
Although adaptive Huffman techniques do exist (eg Gallagher, 1978;
Cormack & Horspool, 1984) they lack the conceptual simplicity of
arithmetic coding.
.[
Gallagher 1978 variations on a theme by Huffman
.]
.[
Cormack Horspool 1984 adaptive Huffman codes
.]
While competitive in compression efficiency for many files, they are slower.
For example, Table\ 4 compares the performance of the mildly-optimized C
implementation of arithmetic coding with that of the U\s-2NIX\s+2
\fIcompact\fR program which implements adaptive Huffman coding using
a similar model\(dg.
.FN
\(dg \fICompact\fR's model is essentially the same for long files (like those
of Table\ 4) but is better for short files than the model used as an example
in this paper.
.EF
Casual examination of \fIcompact\fR indicates that the care taken in
optimization is roughly comparable for both systems, yet arithmetic coding
halves execution time.
Compression performance is somewhat better with arithmetic coding on all the
example files.
The difference would be accentuated with more sophisticated models that
predict symbols with probabilities approaching one under certain circumstances
(eg letter ``u'' following ``q'').
.pp
.ul
Non-adaptive coding
can be performed arithmetically using fixed, pre-specified models like that in
the first part of Figure\ 4.
Compression performance will be better than Huffman coding.
In order to minimize execution time, the total frequency count,
$cum_freq[0]$, should be chosen as a power of two so the divisions
in the bounds calculations (Figure\ 3 lines 91-94 and 190-193) can be done
as shifts.
Encode/decode times of around 60\ $mu$s/90\ $mu$s should then be possible
for an assembly language implementation on a VAX-11/780.
A carefully-written implementation of Huffman coding, using table look-up for
encoding and decoding, would be a bit faster in this application.
.pp
.ul
Compressing black/white images
using arithmetic coding has been investigated by Langdon & Rissanen (1981),
who achieved excellent results using a model which conditioned the probability
of a pixel's being black on a template of pixels surrounding it.
.[
Langdon Rissanen 1981 compression of black-white images
.]
The template contained a total of ten pixels, selected from those above and
to the left of the current one so that they precede it in the raster scan.
This creates 1024 different possible contexts, and for each the probability of
the pixel being black was estimated adaptively as the picture was transmitted.
Each pixel's polarity was then coded arithmetically according to this
probability.
A 20%\-30% improvement in compression was attained over earlier methods.
To increase coding speed Langdon & Rissanen used an approximate method
of arithmetic coding which avoided multiplication by representing
probabilities as integer powers of 1/2.
Huffman coding cannot be directly used in this application, as it never
compresses with a two-symbol alphabet.
Run-length coding, a popular method for use with two-valued alphabets,
provides another opportunity for arithmetic coding.
The model reduces the data to a sequence of lengths of runs of the same symbol
(eg for picture coding, run-lengths of black followed by white followed by
black followed by white ...).
The sequence of lengths must be transmitted.
The CCITT facsimile coding standard (Hunter & Robinson, 1980), for example,
bases a Huffman code on the frequencies with which black and white runs of
different lengths occur in sample documents.
.[
Hunter Robinson 1980 facsimile
.]
A fixed arithmetic code using these same frequencies would give better
performance; adapting the frequencies to each particular document would be
better still.
.pp
.ul
Coding arbitrarily-distributed integers
is often called for when using more sophisticated models of text, image,
or other data.
Consider, for instance, Bentley \fIet al\fR's (1986) locally-adaptive data
compression scheme, in which the encoder and decoder cache the last $N$
different words seen.
.[
Bentley Sleator Tarjan Wei 1986 locally adaptive
%J Communications of the ACM
.]
A word present in the cache is transmitted by sending the integer cache index.
Words not in the cache are transmitted by sending a new-word marker followed
by the characters of the word.
This is an excellent model for text in which words are used frequently over
short intervals and then fall into long periods of disuse.
Their paper discusses several variable-length codings for the integers used
as cache indexes.
Arithmetic coding allows \fIany\fR probability distribution to be used as the
basis for a variable-length encoding, including \(em amongst countless others
\(em the ones implied by the particular codes discussed there.
It also permits use of an adaptive model for cache
indexes, which is desirable if the distribution of cache hits is
difficult to predict in advance.
Furthermore, with arithmetic coding, the code space allotted to the cache
indexes can be scaled down to accommodate any desired probability for the
new-word marker.
.sh "Acknowledgement"
.pp
Financial support for this work has been provided by the
Natural Sciences and Engineering Research Council of Canada.
.sh "References"
.sp
.in+4n
.[
$LIST$
.]
.in 0
.bp
.sh "APPENDIX: Proof of decoding inequality"
.sp
Using 1-letter abbreviations for $cum_freq$, $symbol$, $low$, $high$, and
$value$, suppose
.LB
$c[s] ~ <= ~~ left f {(v-l+1) times c[0] ~-~ 1} over {h-l+1} right f ~~ < ~
c[s-1]$;
.LE
in other words,
.LB
.ta \n(.lu-\n(.iuR
$c[s] ~ <= ~~ {(v-l+1) times c[0] ~-~ 1} over {r} ~~-~~ epsilon ~~ <= ~
c[s-1] ~-~1$, 	(1)
.LE
.ta 8n
where	$r ~=~ h-l+1$,  $0 ~ <= ~ epsilon ~ <= ~ {r-1} over r $.
.sp
(The last inequality of (1) derives from the fact that $c[s-1]$ must be an
integer.)  \c
Then we wish to show that  $l' ~ <= ~ v ~ <= ~ h'$,  where $l'$ and $h'$
are the updated values for $low$ and $high$ as defined below.
.sp
.ta \w'(a)    'u
(a)	$l' ~ == ~~ l ~+~~ left f {r times c[s]} over c[0] right f ~~ mark
<= ~~ l ~+~~ {r} over c[0] ~ left [ ~ {(v-l+1) times c[0] ~-~ 1} over {r}
                          ~~ - ~ epsilon ~ right ]$    from (1),
.sp 0.5
$lineup <= ~~ v ~ + ~ 1 ~ - ~ 1 over c[0]$ ,
.sp 0.5
	so   $l' ~ <= ~~ v$   since both $v$ and $l'$ are integers
and $c[0] > 0$.
.sp
(b)	$h' ~ == ~~ l ~+~~ left f {r times c[s-1]} over c[0] right f ~~-~1~~ mark
>= ~~ l ~+~~  {r} over c[0] ~ left [ ~ {(v-l+1) times c[0] ~-~ 1} over {r}
                          ~~ + ~ 1 ~ - ~ epsilon ~ right ] ~~ - ~ 1
$    from (1),
.sp 0.5
$lineup >= ~~ v ~ + ~~ r over c[0] ~ left [ ~ - ~ 1 over r ~+~ 1
                                                  ~-~~ r-1 over r right ]
~~ = ~~ v$.
.bp
.sh "Captions for tables"
.sp
.nf
.ta \w'Figure 1  'u
Table 1	Example fixed model for alphabet {\fIa, e, i, o, u, !\fR}
Table 2	Results for encoding and decoding 100,000-byte files
Table 3	Breakdown of timings for VAX-11/780 assembly language version
Table 4	Comparison of arithmetic and adaptive Huffman coding
.fi
.sh "Captions for figures"
.sp
.nf
.ta \w'Figure 1  'u
Figure 1	(a) Representation of the arithmetic coding process
	(b) Like (a) but with the interval scaled up at each stage
Figure 2	Pseudo-code for the encoding and decoding procedures
Figure 3	C implementation of arithmetic encoding and decoding
Figure 4	Fixed and adaptive models for use with Figure 3
Figure 5	Scaling the interval to prevent underflow
.fi
.bp 0
.ev2
.nr x2 \w'symbol'/2
.nr x3 (\w'symbol'/2)+0.5i+(\w'probability'/2)
.nr x4 (\w'probability'/2)+0.5i
.nr x5 (\w'[0.0, '
.nr x1 \n(x2+\n(x3+\n(x4+\n(x5+\w'0.0)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta \n(x2uC +\n(x3uC +\n(x4u +\n(x5u
\l'\n(x1u'
.sp
	symbol	probability	\0\0range
\l'\n(x1u'
.sp
	\fIa\fR	0.2	[0,	0.2)
	\fIe\fR	0.3	[0.2,	0.5)
	\fIi\fR	0.1	[0.5,	0.6)
	\fIo\fR	0.2	[0.6,	0.8)
	\fIu\fR	0.1	[0.8,	0.9)
	\fI!\fR	0.1	[0.9,	1.0)
\l'\n(x1u'
.sp
.in 0
.FE "Table 1  Example fixed model for alphabet {\fIa, e, i, o, u, !\fR}"
.bp 0
.ev2
.nr x1 0.5i+\w'\fIVAX object program\fR      '+\w'100,000      '+\w'time ($mu$s)  '+\w'time ($mu$s)    '+\w'time ($mu$s)  '+\w'time ($mu$s)    '+\w'time ($mu$s)  '+\w'time ($mu$s)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta 0.5i +\w'\fIVAX object program\fR      'u +\w'100,000      'u +\w'time ($mu$s)  'u +\w'time ($mu$s)    'u +\w'time ($mu$s)  'u +\w'time ($mu$s)    'u +\w'time ($mu$s)  'u
\l'\n(x1u'
.sp
			\0\0VAX-11/780	\0\0\0Macintosh	\0\0\0\0SUN-3/75
		output	 encode	 decode	 encode	 decode	 encode	 decode
		(bytes)	time ($mu$s)	time ($mu$s)	time ($mu$s)	time ($mu$s)	time ($mu$s)	time ($mu$s)
\l'\n(x1u'
.sp
Mildly optimized C implementation
.sp
	\fIText file\fR	\057718	\0\0214	\0\0262	\0\0687	\0\0881	\0\0\098	\0\0121
	\fIC program\fR	\062991	\0\0230	\0\0288	\0\0729	\0\0950	\0\0105	\0\0131
	\fIVAX object program\fR	\073501	\0\0313	\0\0406	\0\0950	\01334	\0\0145	\0\0190
	\fIAlphabet\fR	\059292	\0\0223	\0\0277	\0\0719	\0\0942	\0\0105	\0\0130
	\fISkew-statistics\fR	\012092	\0\0143	\0\0170	\0\0507	\0\0645	\0\0\070	\0\0\085
.sp
Carefully optimized assembly language implementation
.sp
	\fIText file\fR	\057718	\0\0104	\0\0135	\0\0194	\0\0243	\0\0\046	\0\0\058
	\fIC program\fR	\062991	\0\0109	\0\0151	\0\0208	\0\0266	\0\0\051	\0\0\065
	\fIVAX object program\fR	\073501	\0\0158	\0\0241	\0\0280	\0\0402	\0\0\075	\0\0107
	\fIAlphabet\fR	\059292	\0\0105	\0\0145	\0\0204	\0\0264	\0\0\051	\0\0\065
	\fISkew-statistics\fR	\012092	\0\0\063	\0\0\081	\0\0126	\0\0160	\0\0\028	\0\0\036

\l'\n(x1u'
.sp 2
.nr x0 \n(.l
.ll \n(.lu-\n(.iu
.fi
.in \w'\fINotes:\fR  'u
.ti -\w'\fINotes:\fR  'u
\fINotes:\fR\ \ \c
Times are measured in $mu$s per byte of uncompressed data.
.sp 0.5
The VAX-11/780 had a floating-point accelerator, which reduces integer
multiply and divide times.
.sp 0.5
The Macintosh uses an 8\ MHz MC68000 with some memory wait states.
.sp 0.5
The SUN-3/75 uses a 16.67\ MHz MC68020.
.sp 0.5
All times exclude I/O and operating system overhead in support of I/O.
VAX and SUN figures give user time from the U\s-2NIX\s+2 \fItime\fR
command; on the Macintosh I/O was explicitly directed to an array.
.sp 0.5
The 4.2BSD C compiler was used for VAX and SUN; Aztec C 1.06g for Macintosh.
.sp
.ll \n(x0u
.nf
.in 0
.FE "Table 2  Results for encoding and decoding 100,000-byte files"
.bp 0
.ev2
.nr x1 \w'\fIVAX object program\fR        '+\w'Bounds calculation        '+\w'time ($mu$s)    '+\w'time ($mu$s)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta \w'\fIVAX object program\fR        'u +\w'Bounds calculation        'u +\w'time ($mu$s)    'u +\w'time ($mu$s)'u
\l'\n(x1u'
.sp
		 encode	 decode
		time ($mu$s)	time ($mu$s)
\l'\n(x1u'
.sp
\fIText file\fR	Bounds calculation	\0\0\032	\0\0\031
	Bit shifting	\0\0\039	\0\0\030
	Model update	\0\0\029	\0\0\029
	Symbol decode	\0\0\0\(em	\0\0\045
	Other	\0\0\0\04	\0\0\0\00
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0104	\0\0135
.sp
\fIC program\fR	Bounds calculation	\0\0\030	\0\0\028
	Bit shifting	\0\0\042	\0\0\035
	Model update	\0\0\033	\0\0\036
	Symbol decode	\0\0\0\(em	\0\0\051
	Other	\0\0\0\04	\0\0\0\01
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0109	\0\0151
.sp
\fIVAX object program\fR	Bounds calculation	\0\0\034	\0\0\031
	Bit shifting	\0\0\046	\0\0\040
	Model update	\0\0\075	\0\0\075
	Symbol decode	\0\0\0\(em	\0\0\094
	Other	\0\0\0\03	\0\0\0\01
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0158	\0\0241
\l'\n(x1u'
.in 0
.FE "Table 3  Breakdown of timings for VAX-11/780 assembly language version"
.bp 0
.ev2
.nr x1 \w'\fIVAX object program\fR      '+\w'100,000      '+\w'time ($mu$s)  '+\w'time ($mu$s)    '+\w'100,000      '+\w'time ($mu$s)  '+\w'time ($mu$s)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta \w'\fIVAX object program\fR      'u +\w'100,000      'u +\w'time ($mu$s)  'u +\w'time ($mu$s)    'u +\w'100,000      'u +\w'time ($mu$s)  'u +\w'time ($mu$s)'u
\l'\n(x1u'
.sp
	\0\0\0\0\0\0Arithmetic coding	\0\0\0Adaptive Huffman coding
	output	 encode	 decode	output	 encode	 decode
	(bytes)	time ($mu$s)	time ($mu$s)	(bytes)	time ($mu$s)	time ($mu$s)
\l'\n(x1u'
.sp
\fIText file\fR	\057718	\0\0214	\0\0262	\057781	\0\0550	\0\0414
\fIC program\fR	\062991	\0\0230	\0\0288	\063731	\0\0596	\0\0441
\fIVAX object program\fR	\073546	\0\0313	\0\0406	\076950	\0\0822	\0\0606
\fIAlphabet\fR	\059292	\0\0223	\0\0277	\060127	\0\0598	\0\0411
\fISkew-statistics\fR	\012092	\0\0143	\0\0170	\016257	\0\0215	\0\0132
\l'\n(x1u'
.sp 2
.nr x0 \n(.l
.ll \n(.lu-\n(.iu
.fi
.in +\w'\fINotes:\fR  'u
.ti -\w'\fINotes:\fR  'u
\fINotes:\fR\ \ \c
Mildly optimized C implementation used for arithmetic coding
.sp 0.5
U\s-2NIX\s+2 \fIcompact\fR used for adaptive Huffman coding
.sp 0.5
Times are for a VAX-11/780, and exclude I/O and operating system overhead in
support of I/O.
.sp
.ll \n(x0u
.nf
.in 0
.FE "Table 4  Comparison of arithmetic and adaptive Huffman coding"
		 encode	 decode
		time ($mu$s)	time ($mu$s)
\l'\n(x1u'
.sp
\fIText file\fR	Bounds calculation	\0\0\032	\0\0\031
	Bit shifting	\0\0\039	\0\0\030
	Model update	\0\0\029	\0\0\029
	Symbol decode	\0\0\0\(em	\0\0\045
	Other	\0\0\0\04	\0\0\0\00
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0104	\0\0135
.sp
\fIC program\fR	Bounds calculation	\0\0\030	\0\0\028
	Bit shifting	\0\0\042	\0\0\035
	Model update	\0\0\033	\0\0\036
	Symbol decode	\0\0\0\(em	\0\0\051
	Other	\0\0\0\04	\0\0\0\01
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0109	\0\0151
.sp
\fIVAX object program\fR	Bounds calculation	\0\0\034	\0\0\031
	Bit shifting	\0\0\046	\0\0\040
	Model update	\0\0\075	\0\0\075
	Symbol decode	\0\0\0\(em	\0\0\094
	Other	\0\0\0\03	\0\0\0\01
		\0\0\l'\w'100'u'	\0\0\l'\w'100'u'
		\0\0158	\0\0241
\l'\n(x1u'
.in 0
.FE "Table 3  Breakdown of timings for VAX-11/780 assembly language version"
.bp 0
.ev2
.nr x1 \w'\fIVAX object program\fR      '+\w'100,000      '+\w'time ($mu$s)  '+\w'time ($mu$s)    '+\w'100,000      '+\w'time ($mu$s)  '+\w'time ($mu$s)'
.nr x0 (\n(.l-\n(x1)/2
.in \n(x0u
.ta \w'\fIVAX object program\fR      'u +\w'100,000      'u +\w'time ($mu$s)  'u +\w'time ($mu$s)    'u +\w'100,000      'u +\w'time ($mu$s)  'u +\w'time ($mu$s)'u
\l'\n(x1u'
.sp
	\0\0\0\0\0\0Arithmetic coding	\0\0\0Adaptive Huffman coding
	output	 encode	 decode	output	 encode	 decode
	(bytes)	time ($mu$s)	time ($mu$s)	(bytes)	time ($mu$s)	time ($mu$s)
\l'\n(x1u'
.sp
\fIText file\fR	\057718	\0\0214	\0\0262	\057781	\0\0550	\0\0414
\fIC program\fR	\062991	\0\0230	\0\0288	\063731	\0\0596	\0\0441
\fIVAX object program\fR	\073546	\0\0313	\0\0406	\076950	\0\0822	\0\0606
\fIAlphabet\fR	\059292	\0\0223	\0\0277	\060127	\0\0598	\0\0411
\fISkew-statistics\fR	\012092	\0\0143	\0\0170	\016257	\0\0215	\0\0132
\l'\n(x1u'
.sp 2
.nr x0 \n(.l
.ll \n(.lu-\n(.iu
.fi
.in +\w'\fINotes:\fR  'u
.ti -\w'\fINotes:\fR  'u
\fINotes:\fR\ \ \c
Mildly optimized C implementation used for arithmetic coding
.sp 0.5
U\s-2NIX\s+2 \fIcompact\fR used for adaptive Huffman coding
.sp 0.5
Times are for a VAX-11/780, and exclude I/O and operating system overhead in
support of I/O.
.sp
.ll \n(x0u
.nf
.in 0
.FE "Table 4  Comparison of arithmetic and adaptive Huffman coding"
